var OF=Object.defineProperty,LF=Object.defineProperties,xF=Object.getOwnPropertyDescriptors,Hu=Object.getOwnPropertySymbols,zF=Object.prototype.hasOwnProperty,VF=Object.prototype.propertyIsEnumerable,Fu=(oe,X,x)=>X in oe?OF(oe,X,{enumerable:!0,configurable:!0,writable:!0,value:x}):oe[X]=x,z2=(oe,X)=>{for(var x in X||(X={}))zF.call(X,x)&&Fu(oe,x,X[x]);if(Hu)for(var x of Hu(X))VF.call(X,x)&&Fu(oe,x,X[x]);return oe},ju=(oe,X)=>LF(oe,xF(X));(self.webpackChunkang_kaarten=self.webpackChunkang_kaarten||[]).push([[179],{205:module=>{var X;window,X=function(){return function(oe){var X={};function x(M){if(X[M])return X[M].exports;var b=X[M]={i:M,l:!1,exports:{}};return oe[M].call(b.exports,b,b.exports,x),b.l=!0,b.exports}return x.m=oe,x.c=X,x.d=function(M,b,R){x.o(M,b)||Object.defineProperty(M,b,{enumerable:!0,get:R})},x.r=function(M){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},x.t=function(M,b){if(1&b&&(M=x(M)),8&b||4&b&&"object"==typeof M&&M&&M.__esModule)return M;var R=Object.create(null);if(x.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:M}),2&b&&"string"!=typeof M)for(var S in M)x.d(R,S,function(w){return M[w]}.bind(null,S));return R},x.n=function(M){var b=M&&M.__esModule?function(){return M.default}:function(){return M};return x.d(b,"a",b),b},x.o=function(M,b){return Object.prototype.hasOwnProperty.call(M,b)},x.p="",x(x.s=96)}([function(oe,X,x){"use strict";x.r(X);var M,b=x(11),R=x.n(b),S=function(){var B=new Date;return B.toTimeString().split(" ")[0]+":"+B.getMilliseconds()},w=x(14),v=x(2),A=x(1),d=x(48),m=x.n(d),g=x(49),O=x.n(g),P=new Array(32).fill(void 0);function I(B){return P[B]}P.push(void 0,null,!0,!1);var E=P.length;function k(B){var Q,z=I(B);return(Q=B)<36||(P[Q]=E,E=Q),z}var D=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});D.decode();var j=null;function N(){return null!==j&&j.buffer===M.memory.buffer||(j=new Uint8Array(M.memory.buffer)),j}function Y(B,z){return D.decode(N().subarray(B,B+z))}function te(B){E===P.length&&P.push(P.length+1);var z=E;return E=P[z],P[z]=B,z}var J=0,re=new TextEncoder("utf-8"),U="function"==typeof re.encodeInto?function(B,z){return re.encodeInto(B,z)}:function(B,z){var Q=re.encode(B);return z.set(Q),{read:B.length,written:Q.length}},y=null;function s(){return null!==y&&y.buffer===M.memory.buffer||(y=new Int32Array(M.memory.buffer)),y}var q,H=function(){function B(){m()(this,B)}return O()(B,[{key:"free",value:function(){var z=this.ptr;this.ptr=0,M.__wbg_signmanager_free(z)}},{key:"get_digest",value:function(z){return k(M.signmanager_get_digest(this.ptr,te(z)))}}],[{key:"__wrap",value:function(z){var Q=Object.create(B.prototype);return Q.ptr=z,Q}},{key:"new",value:function(){var z=M.signmanager_new();return B.__wrap(z)}}]),B}(),_=!1,c=null,f=0,C="free",L=[],Z=[],ee=0;(c?Promise.resolve(c):new Promise(function(B){_||M||function z(){var Q={wbg:{}};Q.wbg.__wbindgen_object_drop_ref=function(de){k(de)},Q.wbg.__wbindgen_string_new=function(de,V){return te(Y(de,V))},Q.wbg.__wbindgen_string_get=function(de,V){var Ae=I(V),Be="string"==typeof Ae?Ae:void 0,ke=null==Be?0:function(Ue,ie,p){if(void 0===p){var $=re.encode(Ue),ce=ie($.length);return N().subarray(ce,ce+$.length).set($),J=$.length,ce}for(var fe=Ue.length,he=(ce=ie(fe),N()),K=0;K<fe;K++){var pe=Ue.charCodeAt(K);if(pe>127)break;he[ce+K]=pe}if(K!==fe){0!==K&&(Ue=Ue.slice(K)),ce=p(ce,fe,fe=K+3*Ue.length);var me=N().subarray(ce+K,ce+fe);K+=U(Ue,me).written}return J=K,ce}(Be,M.__wbindgen_malloc,M.__wbindgen_realloc),Ve=J;s()[de/4+1]=Ve,s()[de/4+0]=ke},Q.wbg.__wbindgen_throw=function(de,V){throw new Error(Y(de,V))};for(var ge=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),function(de){return de.charCodeAt(0)}),se=new Uint8Array([177,156,215,89,13,111,230,1]),ae=new Uint8Array(ge.length),Se=new Uint8Array(256),Te=0;Te<256;Te++)Se[Te]=Te;var _e=0;for(Te=0;Te<256;Te++){var Me=[Se[_e=(_e+Se[Te]+se[Te%se.length])%256],Se[Te]];Se[Te]=Me[0],Se[_e]=Me[1]}Te=0,_e=0;for(var xe=0;xe<0+ge.length;xe++){var u=[Se[_e=(_e+Se[Te=(Te+1)%256])%256],Se[Te]];Se[Te]=u[0],Se[_e]=u[1],xe>=0&&(ae[xe-0]=ge[xe-0]^Se[(Se[Te]+Se[_e])%256])}return _=!0,new Promise(function(de){var V,Ae;(V=ae.buffer,Ae=Q,WebAssembly.instantiate(V,Ae)).then(function(V){_=!1,M=V.instance.exports,z.__wbindgen_wasm_module=V.module,de()})})}().then(function(){c=H.new(),B(c)})})).then(function(B){q=B});var le=!0;setInterval(function(){Object(v.getParameter)("UPLOAD_LOG")&&W.info("console log upload")},9e5);var W=function(){var B,z,Q,ge,se,ae,Se=null,Te=["DEBUG","INFO","WARNING","ERROR","NONE"],Ee=0,Me=function(u,de){if(Object(v.getParameter)("UPLOAD_LOG"))try{de=Array.prototype.slice.call(de);var V="";if(de.forEach(function(Ae){"object"===R()(Ae)&&(Ae=JSON.stringify(Ae)),V=V+Ae+" "}),L.push({payload:V,log_level:u}),le)return;"free"===C&&function Ae(Be){C="uploading",setTimeout(function(){!function(u,de,V){var Ae={};Array.isArray(u)||(u=[u]),u=u.map(function(Ve){return{log_item_id:f++,log_level:Ve.log_level,payload_str:Ve.payload}}),Ae={timestamp:Date.now(),sdk_version:v.VERSION,process_id:Object(A.getProcessId)(),payload:JSON.stringify(u)},q?Ae.hash=q.get_digest("".concat(Ae.payload).concat(Ae.process_id).concat(Ae.timestamp)):V&&V();try{var Be=Se,ke=Se||"https://".concat(Object(v.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(w.post)(ke,Ae,function(Ve){"OK"===Ve?de&&de():V&&V()},function(Ve){V&&V()},Be?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(Ve){V&&V()}}(Be,function(){ee=0,0!==L.length?(Z=L.splice(0,L.length<10?L.length:10),Ae(Z)):C="free"},function(){setTimeout(function(){Ae(Z)},ee++<2?200:1e4)})},3e3)}(Z=L.splice(0,L.length<10?L.length:10))}catch(Ae){}};z=function(){for(var u=[0],de=0;de<arguments.length;de++)u.push(arguments[de]);B.apply(this,u)},Q=function(){for(var u=[1],de=0;de<arguments.length;de++)u.push(arguments[de]);B.apply(this,u)},ge=function(){for(var u=[2],de=0;de<arguments.length;de++)u.push(arguments[de]);B.apply(this,u)},se=function(){for(var u=[3],de=0;de<arguments.length;de++)u.push(arguments[de]);B.apply(this,u)};var xe={};return ae=function(u){xe[u]||(ge.apply(void 0,arguments),xe[u]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){le=!1},enableLogUpload:function(){Object(v.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(v.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(u){Se=u?"https://".concat(u,"/ls/?h=").concat(Object(v.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(v.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(u){u>4?u=4:u<0&&(u=0),Ee=u},log:B=function(){var u=arguments[0],de=arguments;if(de[0]=S()+" Agora-SDK ["+(Te[u]||"DEFAULT")+"]:",Me(u,de),!(u<Ee))switch(u){case 0:case 1:case 3:console.log.apply(console,de);break;case 2:console.warn.apply(console,de);break;default:return void console.log.apply(console,de)}},debug:z,info:Q,warning:ge,deprecate:ae,error:se}}();X.default=W},function(oe,X,x){"use strict";x.r(X),x.d(X,"report",function(){return y}),x.d(X,"SESSION_INIT",function(){return k}),x.d(X,"JOIN_CHOOSE_SERVER",function(){return D}),x.d(X,"JOIN_GATEWAY",function(){return j}),x.d(X,"PUBLISH",function(){return N}),x.d(X,"SUBSCRIBE",function(){return Y}),x.d(X,"getProcessId",function(){return U});var M=x(46),b=x.n(M),R=x(7),S=x.n(R),w=x(2),v=x(0),A=x(14),d=x(28),m=x.n(d),g=x(47);function O(s,H){var _=Object.keys(s);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);H&&(c=c.filter(function(q){return Object.getOwnPropertyDescriptor(s,q).enumerable})),_.push.apply(_,c)}return _}function P(s){for(var H=1;H<arguments.length;H++){var _=null!=arguments[H]?arguments[H]:{};H%2?O(Object(_),!0).forEach(function(c){b()(s,c,_[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(_)):O(Object(_)).forEach(function(c){Object.defineProperty(s,c,Object.getOwnPropertyDescriptor(_,c))})}return s}var I,E,k="session_init",D="join_choose_server",j="join_gateway",N="publish",Y="subscribe",te=new(x.n(g).a),J={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},re=null,U=function(){return re||(re="process-"+m()(),v.default.info("processId: "+re)),re},y=(E=0,(I={list:{},setProxyServer:function(s){te.setProxy(s),I.proxyServerURL=s},getUrl:function(){return I.proxyServerURL?"https://".concat(I.proxyServerURL,"/rs/?h=").concat(Object(w.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(w.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return I.proxyServerURL?"https://".concat(I.proxyServerURL,"/rs/?h=").concat(Object(w.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(w.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(s){return I.list[s]?I.list[s].startTime:(v.default.DEBUG("[getSessionStartTime]: session ".concat(s," no exit")),0)},sessionInit:function(s,H){var _=S()({},J);_.startTime=+new Date,_.sid=s,_.cname=H.cname,I.list[s]=_;var c=S()({},{willUploadConsoleLog:Object(w.getParameter)("UPLOAD_LOG"),areaVersion:"global"},H.extend),q=S()({},_);q.eventType=k,q.appid=H.appid,q.browser=navigator.userAgent,q.build=w.BUILD,q.lts=+new Date,q.elapse=q.lts-q.startTime,q.extend=JSON.stringify(c),q.mode=H.mode,q.process=U(),q.success=H.succ,q.version=w.VERSION,delete q.startTime,I.send({type:"Session",data:q}),I._flushInvokeReport(s)},joinChooseServer2:function(s,H,_){if(I.list[s]){I.list[s].uid||(H.uid&&(I.list[s].uid=parseInt(H.uid)),H.cid&&(I.list[s].cid=parseInt(H.cid)),H.vid&&(I.list[s].vid=parseInt(H.vid)));var c=S()({},I.list[s]);c.eventType=D;var q=H.lts;c.lts=Date.now(),c.eventElapse=c.lts-q,c.chooseServerAddr=H.csAddr,c.errorCode=H.ec,c.elapse=c.lts-c.startTime,c.success=H.succ,c.chooseServerIp=H.chooseServerIp||"",c.chooseServerAddrList=JSON.stringify(H.serverList),delete c.startTime,I.send({type:"JoinChooseServer",data:c})}},joinChooseServer:function(s,H,_){if(I.list[s]){_&&(H.uid&&(I.list[s].uid=parseInt(H.uid)),H.cid&&(I.list[s].cid=parseInt(H.cid)),H.vid&&(I.list[s].vid=parseInt(H.vid)));var c=S()({},I.list[s]);c.eventType=D;var q=H.lts;c.lts=Date.now(),c.eventElapse=c.lts-q,c.chooseServerAddr=H.csAddr,c.errorCode=H.ec,c.elapse=c.lts-c.startTime,c.success=H.succ,c.chooseServerIp=H.chooseServerIp||"",c.chooseServerAddrList=JSON.stringify(H.serverList),delete c.startTime,I.send({type:"JoinChooseServer",data:c})}},reqUserAccount:function(s,H){H.vid&&(I.list[s].vid=parseInt(H.vid));var _=S()({},I.list[s]),c=H.lts;_.eventType="req_user_account",_.lts=Date.now(),_.success=H.success,_.serverAddress=H.serverAddress,_.stringUid=H.stringUid,_.uid=H.uid,_.errorCode=H.errorCode,_.elapse=_.lts-_.startTime,_.eventElapse=_.lts-c,_.extend="string"==typeof H.extend?H.extend:JSON.stringify(H.extend),delete _.startTime,I.send({type:"ReqUserAccount",data:_})},joinGateway:function(s,H){H.vid&&(I.list[s].vid=parseInt(H.vid)),H.uid&&(I.list[s].uid=parseInt(H.uid));var _=S()({},I.list[s]),c=H.lts;_.eventType=j,_.firstSuccess=H.firstSuccess,_.lts=Date.now(),_.gatewayAddr=H.addr,_.success=H.succ,_.errorCode=H.ec,_.elapse=_.lts-_.startTime,_.eventElapse=_.lts-c,delete _.startTime,I.send({type:"JoinGateway",data:_})},publish:function(s,H){var _=S()({},I.list[s]);_.eventType=N;var c=H.lts;_.lts=Date.now(),_.eventElapse=_.lts-c,_.elapse=_.lts-_.startTime,_.success=H.succ,_.errorCode=H.ec,_.audio=H.audio,_.video=H.video,_.screenshare=H.screenshare,_.publishRequestid=H.publishRequestid,_.p2pid=H.p2pid,H.videoName&&(_.videoName=H.videoName),H.audioName&&(_.audioName=H.audioName),H.screenName&&(_.screenName=H.screenName),delete _.startTime,I.send({type:"Publish",data:_}),I._flushInvokeReport(s)},subscribe:function(s,H){var _=S()({},I.list[s]);_.eventType=Y;var c=H.lts;_.lts=Date.now(),_.eventElapse=_.lts-c,_.elapse=_.lts-_.startTime,_.errorCode=H.ec,_.success=H.succ,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,isFinite(H.peerid)?_.peer=H.peerid:_.peerSuid=""+H.peerid,"boolean"==typeof H.video&&(_.video=H.video),"boolean"==typeof H.audio&&(_.audio=H.audio),delete _.startTime,I.send({type:"Subscribe",data:_}),I._flushInvokeReport(s)},firstRemoteFrame:function(s,H){var _=S()({},I.list[s]);_.eventType="first_remote_frame";var c=H.lts;_.lts=Date.now(),_.eventElapse=_.lts-c,_.elapse=_.lts-_.startTime,_.width=H.width,_.height=H.height,_.success=H.succ,_.errorCode=H.ec,isFinite(H.peerid)?_.peer=H.peerid:_.peerSuid=""+H.peerid,delete _.startTime,I.send({type:"FirstFrame",data:_})},firstVideoReceived:function(s,H){var _=S()({},I.list[s]);_.eventType="first_video_received",_.lts=Date.now(),_.peer=H.peerid,_.uid=H.uid,_.elapse=H.elapse,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,I.send({type:"FirstVideoReceived",data:_})},firstAudioReceived:function(s,H){var _=S()({},I.list[s]);_.eventType="first_audio_received",_.lts=Date.now(),_.peer=H.peerid,_.uid=H.uid,_.elapse=H.elapse,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,I.send({type:"FirstAudioReceived",data:_})},firstVideoDecode:function(s,H){var _=S()({},I.list[s]);_.eventType="first_video_decode",_.lts=Date.now(),_.peer=H.peerid,_.uid=H.uid,_.elapse=H.elapse,_.videowidth=H.width,_.videoheight=H.height,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,I.send({type:"FirstVideoDecode",data:_})},firstAudioDecode:function(s,H){var _=S()({},I.list[s]);_.eventType="first_audio_decode",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,_.elapse=H.elapse,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,I.send({type:"FirstAudioDecode",data:_})},onAddAudioStream:function(s,H){var _=S()({},I.list[s]);_.eventType="on_add_audio_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,I.send({type:"OnAddAudioStream",data:_})},onAddVideoStream:function(s,H){var _=S()({},I.list[s]);_.eventType="on_add_video_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,I.send({type:"OnAddVideoStream",data:_})},onUpdateStream:function(s,H){var _=S()({},I.list[s]);_.eventType="on_update_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,_.audio=H.audio,_.video=H.video,I.send({type:"OnUpdateStream",data:_})},onRemoveStream:function(s,H){var _=S()({},I.list[s]);_.eventType="on_remove_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,I.send({type:"OnRemoveStream",data:_})},streamSwitch:function(s,H){var _=S()({},I.list[s]);_.eventType="stream_switch",_.lts=Date.now(),_.isDual=H.isdual,_.elapse=_.lts-_.startTime,_.success=_.succ,delete _.startTime,I.send({type:"StreamSwitch",data:_})},audioSendingStopped:function(s,H){var _=S()({},I.list[s]);_.eventType="audio_sending_stopped",_.lts=Date.now(),_.elapse=_.lts-_.startTime,_.reason=H.reason,_.success=H.succ,delete _.startTime,I.send({type:"AudioSendingStopped",data:_})},videoSendingStopped:function(s,H){var _=S()({},I.list[s]);_.eventType="video_sending_stopped",_.lts=Date.now(),_.elapse=_.lts-_.startTime,_.reson=H.reason,_.success=H.succ,delete _.startTime,I.send({type:"VideoSendingStopped",data:_})},requestProxyAppCenter:function(s,H){var _=S()({},I.list[s]),c=H.lts;_.eventType="request_proxy_appcenter",_.lts=Date.now(),_.eventElapse=_.lts-c,_.elapse=_.lts-_.startTime,_.extend=H.extend+"",_.APAddr=H.APAddr,_.workerManagerList=H.workerManagerList,_.response=H.response,_.errorCode=H.ec,_.success=H.succ,delete _.startTime,I.send({type:"RequestProxyAppCenter",data:_})},requestProxyWorkerManager:function(s,H){var _=S()({},I.list[s]),c=H.lts;_.eventType="request_proxy_worker_manager",_.lts=Date.now(),_.eventElapse=_.lts-c,_.elapse=_.lts-_.startTime,_.extend=H.extend,_.workerManagerAddr=H.workerManagerAddr,_.response=H.response,_.errorCode=H.ec,_.success=H.succ,delete _.startTime,I.send({type:"RequestProxyWorkerManager",data:_})},requestWorkerEvent:function(s,H){var _=S()({},I.list[s]),c=_.startTime,q=Date.now();delete(_=P({},_,{},H,{elapse:q-c,lts:q,productType:"WebRTC"})).startTime,I.send({type:"WorkerEvent",data:_})},requestApWorkerEvent:function(s,H){var _=S()({},I.list[s]),c=_.startTime,q=Date.now();_=P({},_,{},H,{elapse:q-c,lts:q}),I.send({type:"APWorkerEvent",data:_})},sendCustomReportMessage:function(s,H,_){var c={type:"UserAnalytics",data:P({sid:s},H)},q=I.getUrl(),f=!!I.proxyServerURL;Object(A.post)(q,c,function(C){_&&_()},function(C){var L=I.getBackUrl();Object(A.post)(L,c,function(Z){_&&_()},function(Z){_&&_("Failed")},f?{timeout:Object(w.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(w.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},f?{timeout:Object(w.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(w.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(s){I.send({type:"JoinChannelTimeout",data:P({},s)})},peerPublishStatus:function(s){I.send({type:"PeerPublishStatus",data:P({},s)})},joinWebProxyAP:function(s){I.send({type:"JoinWebProxyAP",data:P({},s)})},webSocketQuit:function(s){I.send({type:"WebSocketQuit",data:P({},s)})}}).reportApiInvoke=function(s,H){var _=H.tag,c=H.name,q=H.getStates,f=H.options,C=H.timeout,L=void 0===C?6e4:C,Z=H.callback,ee=H.reportResult,le=void 0===ee||ee,W=Date.now(),B=0,z=E++,Q=function(){return P({tag:_,invokeId:z,sid:s,name:c,apiInvokeTime:W,options:f},q&&{states:(ae=q(),Object.keys(ae).reduce(function(Se,Te){var Ee=Se;return null!=ae[Te]&&(Ee[Te]=ae[Te]),Ee},{}))});var ae},ge=!!Object(w.getParameter)("SHOW_REPORT_INVOKER_LOG");ge&&v.default.info("".concat(c," start"));var se=setTimeout(function(){y._sendApiInvoke(P({},Q(),{error:"API_INVOKE_TIMEOUT",success:!1}))},L);return function(ae,Se){if(clearTimeout(se),++B>1&&(ae="EXECUTOR_INVOKE_".concat(B)),ae)return y._sendApiInvoke(P({},Q(),{success:!1,error:ae},q&&{states:q()})),ge&&v.default.info("".concat(c," onFailure"),ae),Z&&Z(ae);y._sendApiInvoke(P({},Q(),{success:!0},le&&{result:Se},{},q&&{states:q()})),ge&&v.default.info("".concat(c," onSuccess")),Z&&Z(null,Se)}},I._cachedItems=[],I._cacheInvokeReport=function(s){s.lts||(s.lts=Date.now()),I._cachedItems.push(s),I._cachedItems.length>50&&I._cachedItems.shift()},I._flushInvokeReport=function(s){if(I._cachedItems.length){var H=I._cachedItems;I._cachedItems=[],v.default.debug("Flush cached event reporting:",H.length),H.forEach(function(_,c){_.sid=s,setTimeout(function(){I._sendApiInvoke(_)},5e3+500*c)})}},I._sendApiInvoke=function(s){var H=s.tag,_=s.invokeId,c=s.sid,q=s.name,f=s.result,C=s.states,L=s.options,Z=s.error,ee=s.success,le=s.apiInvokeTime,W=s.lts,B=Object(w.getParameter)("NOT_REPORT_EVENT");if(!(H&&B instanceof Array&&-1!==B.indexOf(H)))if(I.list[c]){var z=I.list[c],Q=z.startTime,ge=z.cname,se=z.uid,ae=z.cid,Se=(W=W||Date.now())-Q,Te=W-le,Ee="";if(L)try{Ee=JSON.stringify(L)}catch(Me){Ee=L.toString()}var _e=P({invokeId:_,sid:c,cname:ge,cid:ae,lts:W,uid:se,success:ee,elapse:Se,apiName:q,execElapse:Te},void 0!==L&&{options:Ee},{},void 0!==C&&{execStates:JSON.stringify(C)},{},void 0!==Z&&{errorCode:JSON.stringify(Z)},{},void 0!==f&&{execResult:JSON.stringify(f)});I.send({type:"ApiInvoke",data:_e})}else I._cacheInvokeReport(arguments[0])},I.sendCache=[],I.sendTimer=null,I.send=function(s){if(s.data){var H=s.data;I._lastLts&&I._lastLts>=H.lts&&(H.lts=I._lastLts+1),I._lastLts=H.lts}if(I.sendCache.push(s),null===I.sendTimer)return function _(){I.sendTimer=setTimeout(function(){if(0!==I.sendCache.length){var c=I.sendCache.splice(0,I.sendCache.length<10?I.sendCache.length:10);return te.sendReportList(c,I.list[c[0].data.sid].vid),_()}I.sendTimer=null},Object(w.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},I)},function(oe,X,x){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.BUILD="v3.6.8-0-gb23b514",X.VERSION="3.6.8";var M=0*Date.now()+11499+86604+5615+6547+846;X.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},X.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var b={AREA_SETTING:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"web-2.statscollector.sd-rtn.com",EVENT_REPORT_BACKUP_DOMAIN:"web-3.statscollector.sd-rtn.com",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:M.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.sd-rtn.com",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};X.setParameter=function(R,S){return void 0!==b[R]&&(b[R]=S,!0)},X.getParameter=function(R){return void 0!==b[R]?b[R]:null}},function(oe,X,x){"use strict";x.r(X),x.d(X,"checkValidObject",function(){return v}),x.d(X,"checkValidString",function(){return A}),x.d(X,"checkValidNumber",function(){return d}),x.d(X,"checkValidArray",function(){return m}),x.d(X,"checkValidFloatNumber",function(){return g}),x.d(X,"checkValidBoolean",function(){return O}),x.d(X,"checkValidEnum",function(){return w}),x.d(X,"checkValidUID",function(){return P}),x.d(X,"isValidString",function(){return I}),x.d(X,"isValidNumber",function(){return E}),x.d(X,"isValidBoolean",function(){return D}),x.d(X,"isASCII",function(){return Y}),x.d(X,"isInteger",function(){return te}),x.d(X,"isNumber",function(){return J}),x.d(X,"isString",function(){return re}),x.d(X,"isArray",function(){return U}),x.d(X,"isEmpty",function(){return y}),x.d(X,"isValidToken",function(){return j}),x.d(X,"isValidChannelName",function(){return N});var M=x(11),b=x.n(M),R=x(10),S=x(0),w=function(s,H,_){for(var c=0;c<_.length;c++)if(s===_[c])return!0;throw new Error("".concat(H," can only be set as ").concat(JSON.stringify(_)))},v=function(s,H){if(!s)throw new Error("Invalid param: ".concat(H||"param"," cannot be empty"));if("object"!==b()(s))throw new Error("".concat(H||"This paramter"," is of the object type"));return!0},A=function(s,H,_,c,q){if(y(_)&&(_=1),c=c||255,y(q)&&(q=!0),y(s))throw new Error("".concat(H||"param"," cannot be empty"));if(!I(s,_,c,q))throw new Error("Invalid ".concat(H||"string param",": Length of the string: [").concat(_,",").concat(c,"].").concat(q?" ASCII characters only.":""))},d=function(s,H,_,c){if(y(_)&&(_=1),c=c||1e4,y(s))throw new Error("".concat(H||"param"," cannot be empty"));if(!E(s,_,c))throw new Error("Invalid ".concat(H||"number param",": The value range is [").concat(_,",").concat(c,"]. integer only"))},m=function(s,H){if(!Array.isArray(s))throw new Error("".concat(H," should be an array"))},g=function(s,H,_,c){if(null==s)throw new Error("".concat(H||"param"," cannot be null"));if(y(_)&&(_=0),c=c||1e4,y(s))throw new Error("".concat(H||"param"," cannot be empty"));if(!k(s,_,c))throw new Error("Invalid ".concat(H||"number param",": The value range is [").concat(_,",").concat(c,"]."))},O=function(s,H){if(y(s))throw new Error("".concat(H||"param"," cannot be empty"));if(!D(s))throw new Error("Invalid ".concat(H||"boolean param",": The value is of the boolean type."))},P=function(s){if(!Object(R.is32Uint)(s)&&!I(s,1,255))throw S.default.error("Invalid UID ".concat(s," ").concat(b()(s))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},I=function(s,H,_,c){return H||(H=0),_||(_=Number.MAX_SAFE_INTEGER),y(c)&&(c=!0),re(s)&&(!c||Y(s))&&s.length>=H&&s.length<=_},E=function(s,H,_){return te(s)&&s>=H&&s<=_},k=function(s,H,_){return J(s)&&s>=H&&s<=_},D=function(s){return"boolean"==typeof s},j=function(s){return I(s,1,2047)},N=function(s){return re(s)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(s)},Y=function(s){if("string"==typeof s){for(var H=0;H<s.length;H++){var _=s.charCodeAt(H);if(_<0||_>255)return!1}return!0}},te=function(s){return"number"==typeof s&&s%1==0},J=function(s){return"number"==typeof s},re=function(s){return"string"==typeof s},U=function(s){return s instanceof Array},y=function(s){return null==s}},function(oe,X,x){"use strict";x.r(X),x.d(X,"APErrorCode",function(){return M}),x.d(X,"GatewayErrorCode",function(){return b}),x.d(X,"StringUidErrorCode",function(){return R}),x.d(X,"JOIN_GS_TRYNEXT_LIST",function(){return S}),x.d(X,"JOIN_CS_RETRY_LIST",function(){return w}),x.d(X,"JOIN_PROXY_RETRY_LIST",function(){return v}),x.d(X,"INJECT_STREAM_STATUS",function(){return A}),x.d(X,"WEBSOCKET_CLOSE_REASON",function(){return d});var M={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},b={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},R={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},S=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],w=["NO_SERVICE_AVAILABLE"],v=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],A={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},d={WS_DISCONNECT:"WS_DISCONNECT"};X.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(oe,X,x){"use strict";x.r(X),x.d(X,"getBrowserInfo",function(){return D}),x.d(X,"getBrowserVersion",function(){return g}),x.d(X,"getBrowserOS",function(){return O}),x.d(X,"isChrome",function(){return M}),x.d(X,"isSafari",function(){return b}),x.d(X,"isFireFox",function(){return S}),x.d(X,"isOpera",function(){return w}),x.d(X,"isEdge",function(){return R}),x.d(X,"isQQBrowser",function(){return v}),x.d(X,"isWeChatBrowser",function(){return A}),x.d(X,"isLegacyChrome",function(){return I}),x.d(X,"isSupportedPC",function(){return d}),x.d(X,"isSupportedMobile",function(){return m}),x.d(X,"getChromeKernelVersion",function(){return k}),x.d(X,"isChromeKernel",function(){return P});var M=function(){var j=D();return j.name&&"Chrome"===j.name},b=function(){var j=D();return j.name&&"Safari"===j.name},R=function(){var j=D();return j.name&&"Edge"===j.name},S=function(){var j=D();return j.name&&"Firefox"===j.name},w=function(){var j=D();return j.name&&"OPR"===j.name},v=function(){var j=D();return j.name&&"QQBrowser"===j.name},A=function(){var j=D();return j.name&&"MicroMessenger"===j.name},d=function(){var j=O();return"Linux"===j||"Mac OS X"===j||"Mac OS"===j||-1!==j.indexOf("Windows")},m=function(){var j=O();return"Android"===j||"iOS"===j},g=function(){return D().version},O=function(){return D().os},P=function(){return!!navigator.userAgent.match(/chrome\/[\d]+/i)};function I(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var E,k=function(){var j=navigator.userAgent.match(/chrome\/[\d]+/i);return j&&j[0]&&j[0].split("/")[1]},D=(E=function(){var j,N=navigator.userAgent,Y=N.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===Y[1]&&null!=(j=N.match(/(OPR(?=\/))\/?(\d+)/i))&&(Y=j),"Safari"===Y[1]&&null!=(j=N.match(/version\/(\d+)/i))&&(Y[2]=j[1]),~N.toLowerCase().indexOf("qqbrowser")&&null!=(j=N.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(Y=j),~N.toLowerCase().indexOf("micromessenger")&&null!=(j=N.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(Y=j),~N.toLowerCase().indexOf("edge")&&null!=(j=N.match(/(edge(?=\/))\/?(\d+)/i))&&(Y=j),~N.toLowerCase().indexOf("trident")&&null!=(j=/\brv[ :]+(\d+)/g.exec(N)||[])&&(Y=[null,"IE",j[1]]);var te=void 0,J=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var re in J){var U=J[re];if(U.r.test(navigator.userAgent)){te=U.s;break}}return{name:Y[1],version:Y[2],os:te}}(),function(){return E})},function(oe,X,x){"use strict";x.d(X,"b",function(){return M}),x.d(X,"a",function(){return b}),x.d(X,"c",function(){return R}),x(0);var M=function(S,w,v){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(w)>-1&&("string"==typeof v||isFinite(v)))return S[w]=""+v},b=function(S){var w={};return S.forEach(function(v){v.id&&v.type&&(-1===v.id.indexOf("send")&&-1===v.type.toLowerCase().indexOf("outbound")&&-1===v.id.indexOf("outbound_rtp")&&-1===v.id.indexOf("OutboundRTP")||("audio"===v.mediaType?(M(w,"audioSendBytes",v.bytesSent),M(w,"audioSendPackets",v.packetsSent),M(w,"audioSendPacketsLost",v.packetsLost)):(M(w,"videoSendBytes",v.bytesSent),M(w,"videoSendPackets",v.packetsSent),M(w,"videoSendPacketsLost",v.packetsLost),M(w,"videoSendFrameRate",v.googFrameRateSent),M(w,"videoSendResolutionWidth",v.googFrameWidthSent),M(w,"videoSendResolutionHeight",v.googFrameHeightSent))))}),w},R=function(S){var w={};return S.forEach(function(v){v.id&&v.type&&(-1===v.id.indexOf("recv")&&-1===v.type.toLowerCase().indexOf("inbound")&&-1===v.id.indexOf("inbound_rtp")&&-1===v.id.indexOf("inbound-rtp")&&-1===v.id.indexOf("InboundRTP")||("audio"===v.mediaType?(M(w,"audioReceiveBytes",v.bytesReceived),M(w,"audioReceivePackets",v.packetsReceived),M(w,"audioReceivePacketsLost",v.packetsLost)):(M(w,"videoReceiveBytes",v.bytesReceived),M(w,"videoReceivePacketsLost",v.packetsLost),M(w,"videoReceivePackets",v.packetsReceived),M(w,"videoReceiveFrameRate",v.googFrameRateReceived),M(w,"videoReceiveDecodeFrameRate",v.googFrameRateDecoded),M(w,"videoReceiveResolutionWidth",v.googFrameWidthReceived),M(w,"videoReceiveResolutionHeight",v.googFrameHeightReceived))))}),w}},function(oe,X){function x(){return oe.exports=x=Object.assign||function(M){for(var b=1;b<arguments.length;b++){var R=arguments[b];for(var S in R)Object.prototype.hasOwnProperty.call(R,S)&&(M[S]=R[S])}return M},x.apply(this,arguments)}oe.exports=x},function(oe,X,x){"use strict";x.d(X,"b",function(){return b}),x.d(X,"e",function(){return S}),x.d(X,"a",function(){return w}),x.d(X,"d",function(){return v}),x.d(X,"c",function(){return A});var M=x(0),b=function(){var d={dispatcher:{}};return d.dispatcher.eventListeners={},d.addEventListener=function(m,g){void 0===d.dispatcher.eventListeners[m]&&(d.dispatcher.eventListeners[m]=[]),d.dispatcher.eventListeners[m].push(g)},d.hasListeners=function(m){return!(!d.dispatcher.eventListeners[m]||!d.dispatcher.eventListeners[m].length)},d.on=d.addEventListener,d.removeEventListener=function(m,g){var O;d.dispatcher.eventListeners[m]&&-1!==(O=d.dispatcher.eventListeners[m].indexOf(g))&&d.dispatcher.eventListeners[m].splice(O,1)},d.dispatchEvent=function(m){var g;for(g in d.dispatcher.eventListeners[m.type])if(d.dispatcher.eventListeners[m.type]&&d.dispatcher.eventListeners[m.type].hasOwnProperty(g)&&"function"==typeof d.dispatcher.eventListeners[m.type][g])try{d.dispatcher.eventListeners[m.type][g](m)}catch(O){M.default.debug("[".concat(d.clientId,"] Error in ").concat(m.type," event"),O)}},d.dispatchSocketEvent=function(m){var g;for(g in d.dispatcher.eventListeners[m.type])d.dispatcher.eventListeners[m.type]&&d.dispatcher.eventListeners[m.type].hasOwnProperty(g)&&"function"==typeof d.dispatcher.eventListeners[m.type][g]&&d.dispatcher.eventListeners[m.type][g](m.msg)},d},R=function(d){var m={};return m.type=d.type,m},S=function(d){var m=R(d);return m.stream=d.stream,m.reason=d.reason,m.msg=d.msg,m},w=function(d){var m=R(d);return m.uid=d.uid,m.attr=d.attr,m.stream=d.stream,m},v=function(d){var m=R(d);return m.msg=d.msg,m},A=function(d){var m=R(d);return m.url=d.url,m.uid=d.uid,m.status=d.status,m.reason=d.reason,m}},function(oe,X,x){"use strict";var M,b=this&&this.__extends||(M=function(J,re){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,y){U.__proto__=y}||function(U,y){for(var s in y)y.hasOwnProperty(s)&&(U[s]=y[s])})(J,re)},function(J,re){function U(){this.constructor=J}M(J,re),J.prototype=null===re?Object.create(re):(U.prototype=re.prototype,new U)}),R=this&&this.__awaiter||function(J,re,U,y){return new(U||(U=Promise))(function(s,H){function _(f){try{q(y.next(f))}catch(C){H(C)}}function c(f){try{q(y.throw(f))}catch(C){H(C)}}function q(f){var C;f.done?s(f.value):(C=f.value,C instanceof U?C:new U(function(L){L(C)})).then(_,c)}q((y=y.apply(J,re||[])).next())})},S=this&&this.__generator||function(J,re){var U,y,s,H,_={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return H={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(H[Symbol.iterator]=function(){return this}),H;function c(q){return function(f){return function(C){if(U)throw new TypeError("Generator is already executing.");for(;_;)try{if(U=1,y&&(s=2&C[0]?y.return:C[0]?y.throw||((s=y.return)&&s.call(y),0):y.next)&&!(s=s.call(y,C[1])).done)return s;switch(y=0,s&&(C=[2&C[0],s.value]),C[0]){case 0:case 1:s=C;break;case 4:return _.label++,{value:C[1],done:!1};case 5:_.label++,y=C[1],C=[0];continue;case 7:C=_.ops.pop(),_.trys.pop();continue;default:if(!((s=(s=_.trys).length>0&&s[s.length-1])||6!==C[0]&&2!==C[0])){_=0;continue}if(3===C[0]&&(!s||C[1]>s[0]&&C[1]<s[3])){_.label=C[1];break}if(6===C[0]&&_.label<s[1]){_.label=s[1],s=C;break}if(s&&_.label<s[2]){_.label=s[2],_.ops.push(C);break}s[2]&&_.ops.pop(),_.trys.pop();continue}C=re.call(J,_)}catch(L){C=[6,L],y=0}finally{U=s=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([q,f])}}},w=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(X,"__esModule",{value:!0});var v=w(x(69)),A=x(2),d=w(x(0)),m=x(3),g=x(14),O=x(10),P=function(J){function re(U,y){var s=J.call(this)||this;return s._state=j.RELAY_STATE_IDLE,s._onStatus=function(H){d.default.debug("["+s.clientId+"] ChannelMediaStatus: "+JSON.stringify(H)),H&&H.command&&("onAudioPacketReceived"===H.command&&s.emit("event",D.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===H.command&&s.emit("event",D.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===H.command&&(s._state=j.RELAY_STATE_FAILURE,s.emit("state",j.RELAY_STATE_FAILURE,N.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===H.command&&(s._state=j.RELAY_STATE_FAILURE,s.emit("state",j.RELAY_STATE_FAILURE,N.DEST_TOKEN_EXPIRED,H.channelName?{came:H.channelName}:null)))},s._onClose=function(){return R(s,void 0,void 0,function(){var H;return S(this,function(_){switch(_.label){case 0:if(d.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",D.NETWORK_DISCONNECTED),this.state=j.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];_.label=1;case 1:return _.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return _.sent(),[3,4];case 3:return(H=_.sent())instanceof te&&(H.message===E.WS_ABORT||H.message===E.AP_REQUEST_ABORT)?[2]:(this.emit("state",j.RELAY_STATE_FAILURE,N.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}})})},s.token=U.appId,s.appId=U.appId,s.cname=U.cname,s.uid=U.uid,s.sid=U.sid,s.clientId=y,s}return b(re,J),Object.defineProperty(re.prototype,"state",{get:function(){return this._state},set:function(U){var y=this._state;this._state=U,y!==U&&this.emit("state",U)},enumerable:!0,configurable:!0}),re.prototype.startChannelMediaRelay=function(U){return R(this,void 0,void 0,function(){return S(this,function(y){switch(y.label){case 0:if(this.state!==j.RELAY_STATE_IDLE)throw new te(E.BAD_STATE);return this.state=j.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return y.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(U)];case 2:return y.sent(),this._prevChannelMediaConfig=U,[2]}})})},re.prototype.updateChannelMediaRelay=function(U){return R(this,void 0,void 0,function(){return S(this,function(y){switch(y.label){case 0:if(this.state!==j.RELAY_STATE_RUNNING)throw new te(E.BAD_STATE);return[4,this._sendUpdateMessage(U)];case 1:return y.sent(),this._prevChannelMediaConfig=U,[2]}})})},re.prototype.stopChannelMediaRelay=function(){return R(this,void 0,void 0,function(){return S(this,function(U){switch(U.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return U.sent(),d.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=j.RELAY_STATE_IDLE,this.dispose(),[2]}})})},re.prototype.dispose=function(){d.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=j.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},re.prototype._requestOneAP=function(U){var y=this;return new Promise(function(s,H){var _={command:"convergeAllocateEdge",sid:y.sid,appId:y.appId,token:"",ts:+new Date,version:A.VERSION,cname:y.cname,uid:y.uid+"",seq:1,requestId:1},c={service_name:"tele_channel",json_body:JSON.stringify(_)};g.post("https://"+U,c,function(f){var C=null,L=null;try{C=JSON.parse(f)}catch(Z){H(new te(E.AP_JSON_PARSE_ERROR,Z))}0!==C.code&&H(new te(E.AP_REQUEST_ERROR,C));try{L=JSON.parse(C.json_body)}catch(Z){H(new te(E.AP_JSON_PARSE_ERROR,Z))}200!==L.code&&H(new te(E.AP_REQUEST_ERROR,L)),L.servers?s(L.servers):H(new te(E.AP_JSON_PARSE_ERROR,L))},function(f){return H(f)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})})},re.prototype._requestAP=function(){var U=this,y=A.getParameter("UAP_AP");return new Promise(function(s,H){setTimeout(function(){H(new te(E.AP_REQUEST_TIMEOUT))},5e3),U.on("dispose",function(){H(new te(E.AP_REQUEST_ABORT))}),y.forEach(function(_){U._requestOneAP(_+="/api/v1").then(function(c){d.default.debug("["+U.clientId+"] startChannelMediaRelay request AP "+_+" success: "+JSON.stringify(c));var q=c[0],f="wss://"+q.address.replace(/\./g,"-")+".edge.agora.io:"+q.wss;s(f)}).catch(function(c){d.default.debug("["+U.clientId+"] startChannelMediaRelay request AP "+_+" failed: "+JSON.stringify(c))})})})},re.prototype._connectWebsocket=function(U){return this._signal=new Y(this.appId,this.cname,this.uid,this.sid),this._signal.connect(U)},re.prototype._connect=function(){return R(this,void 0,void 0,function(){var U;return S(this,function(y){switch(y.label){case 0:return[4,this._requestAP()];case 1:return U=y.sent(),[4,this._connectWebsocket(U)];case 2:return y.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",D.NETWORK_CONNECTED),[2]}})})},re.prototype._sendStartRelayMessage=function(U){return R(this,void 0,void 0,function(){var y,s,H,_,c,q;return S(this,function(f){switch(f.label){case 0:return this._checkSignal(),y=this._genMessage(k.StopPacketTransfer),[4,this._signal.request(y)];case 1:return f.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return f.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),s=this._genMessage(k.SetSdkProfile,U),[4,this._signal.request(s)];case 3:return f.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),H=this._genMessage(k.SetSourceChannel,U),[4,this._signal.request(H)];case 4:return f.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return f.sent(),this.emit("event",D.PACKET_JOINED_SRC_CHANNEL),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),_=this._genMessage(k.SetSourceUserId,U),[4,this._signal.request(_)];case 6:return f.sent(),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),c=this._genMessage(k.SetDestChannel,U),[4,this._signal.request(c)];case 7:return f.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return f.sent(),this.emit("event",D.PACKET_JOINED_DEST_CHANNEL),d.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),q=this._genMessage(k.StartPacketTransfer,U),[4,this._signal.request(q)];case 9:return f.sent(),this.emit("event",D.PACKET_SENT_TO_DEST_CHANNEL),this.state=j.RELAY_STATE_RUNNING,d.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}})})},re.prototype._sendReconnectMessage=function(U){return R(this,void 0,void 0,function(){var y;return S(this,function(s){switch(s.label){case 0:return this._checkSignal(),y=this._genMessage(k.Reconnect,U),[4,this._signal.request(y)];case 1:return s.sent(),[2]}})})},re.prototype._sendUpdateMessage=function(U){return R(this,void 0,void 0,function(){var y;return S(this,function(s){switch(s.label){case 0:return this._checkSignal(),y=this._genMessage(k.UpdateDestChannel,U),[4,this._signal.request(y)];case 1:return s.sent(),this.emit("event",D.PACKET_UPDATE_DEST_CHANNEL),d.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}})})},re.prototype._sendStopRelayMessage=function(){return R(this,void 0,void 0,function(){var U;return S(this,function(y){switch(y.label){case 0:return this._checkSignal(),U=this._genMessage(k.StopPacketTransfer),[4,this._signal.request(U)];case 1:return y.sent(),d.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}})})},re.prototype._genMessage=function(U,y){var s=this,H=[],_=[],c=[],q={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:A.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},f=null;switch(U){case k.SetSdkProfile:return q.clientRequest={command:"SetSdkProfile",type:"multi_channel"},q;case k.SetSourceChannel:return f=y.getSrcChannelMediaInfo(),q.clientRequest={command:"SetSourceChannel",uid:f.uid+"",channelName:f.channelName,token:f.token||this.appId},q;case k.SetSourceUserId:return f=y.getSrcChannelMediaInfo(),q.clientRequest={command:"SetSourceUserId",uid:this.uid+""},q;case k.SetDestChannel:return y.getDestChannelMediaInfos().forEach(function(C){H.push(C.channelName),_.push(C.uid+""),c.push(C.token||s.appId)}),q.clientRequest={command:"SetDestChannel",channelName:H,uid:_,token:c},q;case k.StartPacketTransfer:return q.clientRequest={command:"StartPacketTransfer"},q;case k.Reconnect:return q.clientRequest={command:"Reconnect"},q;case k.StopPacketTransfer:return q.clientRequest={command:"StopPacketTransfer"},q;case k.UpdateDestChannel:return y.getDestChannelMediaInfos().forEach(function(C){H.push(C.channelName),_.push(C.uid+""),c.push(C.token||s.appId)}),q.clientRequest={command:"UpdateDestChannel",channelName:H,uid:_,token:c},q}},re.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new te(E.WS_DISCONNECTED)},re}(v.default);X.default=P;var I=function(){function J(){this.destChannelMediaInfos=new Map}return J.prototype.setSrcChannelInfo=function(re){m.checkValidObject(re,"srcInfo");var U=re.uid,y=re.channelName,s=re.token;if(s&&!m.isValidToken(s))throw new Error("Invalid token in SrcChannelInfo");if(!m.isValidChannelName(y))throw new Error("Invalid channelName in SrcChannelInfo");if(!O.is32Uint(U))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=re},J.prototype.setDestChannelInfo=function(re,U){if(!m.isValidChannelName(re))throw new Error("Invalid channelName in DestChannelInfo");m.checkValidObject(U,"destInfo");var y=U.uid,s=U.token,H=U.channelName;if(s&&!m.isValidToken(s))throw new Error("Invalid token in DestChannelInfo");if(!m.isValidChannelName(H))throw new Error("Invalid channelName in DestChannelInfo");if(!O.is32Uint(y))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(re,U)},J.prototype.removeDestChannelInfo=function(re){if(!m.isValidChannelName(re))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(re)},J.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},J.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},J}();X.ChannelMediaRelayConfiguration=I;var E,k,D,j,N,J,Y=function(J){function re(U,y,s,H){var _=J.call(this)||this;return _._onOpen=function(){_.emit("open")},_._onClose=function(c){_.emit("close"),_.dispose()},_._onMessage=function(c){var q=JSON.parse(c.data);if(!q||"serverResponse"!==q.command||!q.requestId)return q&&"serverStatus"===q.command&&q.serverStatus&&q.serverStatus.command?(_.emit("status",q.serverStatus),void _.emit(q.serverStatus.command,q.serverStatus)):void 0;_.emit("req_"+q.requestId,q)},_._requestId=1,_.appId=U,_.cname=y,_.uid=s,_.sid=H,_}return b(re,J),re.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},re.prototype.sendMessage=function(U){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new te(E.WS_DISCONNECTED);var y=this._requestId++;return U.requestId=y,U.seq=y,this._ws.send(JSON.stringify(U)),y},re.prototype.waitStatus=function(U){var y=this;return new Promise(function(s,H){var _=window.setTimeout(function(){H(new te(E.WAIT_STATUS_TIMEOUT,U))},5e3);y.once(U,function(c){clearTimeout(_),c.state&&0!==c.state?H(new te(E.WAIT_STATUS_ERROR,U)):s()}),y.once("dispose",function(){clearTimeout(_),H(new te(E.WS_ABORT))})})},re.prototype.request=function(U){var y=this;return new Promise(function(s,H){var _=y.sendMessage(U),c=window.setTimeout(function(){y.removeAllListeners("req_"+_),H(new te(E.REQUEST_TIMEOUT))},3e3);y.once("req_"+_,function(q){clearTimeout(c),q&&200===q.code?s(q):H(new te(E.REQUEST_FAILED,q))}),y.once("dispose",function(){clearTimeout(c),H(new te(E.WS_ABORT))})})},re.prototype.connect=function(U){var y=this;return new Promise(function(s,H){y._ws=new WebSocket(U),y._ws.onopen=function(){y._onOpen(),y._prvUrl=U,y._ws.onmessage=y._onMessage,y._ws.onclose=y._onClose,y._startHeartBeatCheck(),s()},y._ws.onclose=function(_){y._ws=null,H(new te(E.CONNECT_FAILED,"websocket error code: "+_.code))},setTimeout(function(){y._ws&&y._ws.readyState!==WebSocket.OPEN&&(y._ws.onopen=null,y._ws.onclose=null,y._ws.close(),y._ws=null,H(new te(E.CONNECT_TIMEOUT)))},5e3),y.once("dispose",function(){H(new te(E.WS_ABORT))})})},re.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},re.prototype._sendPing=function(U){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new te(E.WS_DISCONNECTED);var y=this._requestId++;return U.requestId=y,this._ws.send(JSON.stringify(U)),y},re.prototype._startHeartBeatCheck=function(){var U=this;this._heartBeatTimer=window.setInterval(function(){U._sendPing({command:"ping",appId:U.appId,cname:U.cname,uid:U.uid+"",sid:U.sid,ts:+new Date,requestId:0})},3e3)},re.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},re}(v.default),te=function(J,re,U){void 0===J&&(J=""),this.code=U,this.data=re,this.message=J};X.ChannelMediaError=te,(J=E=X.CHANNEL_MEDIA_ERROR||(X.CHANNEL_MEDIA_ERROR={})).CONNECT_FAILED="connect failed",J.CONNECT_TIMEOUT="connect timeout",J.WS_DISCONNECTED="websocket disconnected",J.REQUEST_TIMEOUT="request timeout",J.REQUEST_FAILED="request failed",J.WAIT_STATUS_TIMEOUT="wait status timeout",J.WAIT_STATUS_ERROR="wait status error",J.BAD_STATE="bad state",J.WS_ABORT="ws abort",J.AP_REQUEST_TIMEOUT="AP request timeout",J.AP_JSON_PARSE_ERROR="AP json parse error",J.AP_REQUEST_ERROR="AP request error",J.AP_REQUEST_ABORT="AP request abort",function(J){J[J.SetSdkProfile=0]="SetSdkProfile",J[J.SetSourceChannel=1]="SetSourceChannel",J[J.SetSourceUserId=2]="SetSourceUserId",J[J.SetDestChannel=3]="SetDestChannel",J[J.StartPacketTransfer=4]="StartPacketTransfer",J[J.StopPacketTransfer=5]="StopPacketTransfer",J[J.UpdateDestChannel=6]="UpdateDestChannel",J[J.Reconnect=7]="Reconnect",J[J.SetVideoProfile=8]="SetVideoProfile"}(k||(k={})),function(J){J[J.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",J[J.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",J[J.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",J[J.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",J[J.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",J[J.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",J[J.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",J[J.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",J[J.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",J[J.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(D=X.CHANNEL_MEDIA_RELAY_EVENT||(X.CHANNEL_MEDIA_RELAY_EVENT={})),function(J){J[J.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",J[J.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",J[J.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",J[J.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(j=X.CHANNEL_MEDIA_RELAY_STATE||(X.CHANNEL_MEDIA_RELAY_STATE={})),function(J){J[J.RELAY_OK=0]="RELAY_OK",J[J.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",J[J.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",J[J.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",J[J.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",J[J.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",J[J.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",J[J.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",J[J.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",J[J.INTERNAL_ERROR=9]="INTERNAL_ERROR",J[J.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",J[J.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",J[J.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",J[J.RELAY_NOT_START=13]="RELAY_NOT_START",J[J.OPERATION_ABORT=14]="OPERATION_ABORT"}(N=X.CHANNEL_MEDIA_RELAY_ERROR||(X.CHANNEL_MEDIA_RELAY_ERROR={}))},function(oe,X,x){"use strict";x.r(X),x.d(X,"isLiveTranscodingValid",function(){return N}),x.d(X,"generateSessionId",function(){return k}),x.d(X,"audioLevelHelper",function(){return P}),x.d(X,"vsResHack",function(){return D}),x.d(X,"is32Uint",function(){return j}),x.d(X,"safeCall",function(){return m}),x.d(X,"random",function(){return te}),x.d(X,"popBanTip",function(){return U}),x.d(X,"lengthInUtf8Bytes",function(){return J}),x.d(X,"audioTimerLoop",function(){return re}),x.d(X,"generateId",function(){return E}),x.d(X,"uint8ArrayToBase64",function(){return g}),x.d(X,"base64ToUint8Array",function(){return O});var M=x(11),b=x.n(M),R=x(5),S=x(0),w=x(28),v=x.n(w),A=x(25),d=x(15),m=function(){var y=arguments[0];if("function"==typeof y){var s=Array.prototype.slice.call(arguments,1);y.apply(null,s)}},g=function(y){for(var s="",H=0;H<y.length;H+=1)s+=String.fromCharCode(y[H]);return window.btoa(s)},O=function(y){for(var s=window.atob(y),H=new Uint8Array(new ArrayBuffer(s.length)),_=0;_<s.length;_+=1)H[_]=s.charCodeAt(_);return H},P=function(y){return this.audioContext=Object(A.a)(),this.sourceNode=y.otWebkitAudioSource||this.audioContext.createMediaStreamSource(y),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var s=0,H=0;H<this.timeDomainData.length;H++)s=Math.max(s,Math.abs(this.timeDomainData[H]-128));return s/128}return S.default.warning("can't find analyser in audioLevelHelper"),0},this},I=1e4;function E(){return++I}function k(){return v()().replace(/-/g,"").toUpperCase()}var D=function(y,s,H){try{S.default.debug("start vsResHack",y);var _=document.createElement("video");_.setAttribute("autoplay",""),_.setAttribute("muted",""),_.muted=!0,_.setAttribute("playsinline",""),_.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(_);var c=!1;_.addEventListener("playing",function(q){R.isFireFox()?_.videoWidth&&(c=!0,S.default.debug("[vsResHack] get stream resolution: ","".concat(_.videoWidth," x ").concat(_.videoHeight),y),s(_.videoWidth,_.videoHeight),_.srcObject=null,_.remove()):(c=!0,S.default.debug("[vsResHack] get stream resolution: ","".concat(_.videoWidth," x ").concat(_.videoHeight),y),s(_.videoWidth,_.videoHeight),_.srcObject=null,_.remove())}),Object(d.setSrcObject)(_,y),_.play().catch(function(){}),setTimeout(function(){!c&&_&&(s(_.videoWidth,_.videoHeight),_.srcObject=null,_.remove())},4e3)}catch(q){H(q)}},j=function(y){return"number"==typeof y&&0<=y&&y<=4294967295},N=function(y){var s=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var H in y)if("lowLatency"===H&&"boolean"!=typeof y[H]||"userConfigExtraInfo"===H&&"object"!==b()(y[H])||"transcodingUsers"===H&&!Y(y[H])||!~s.indexOf(H)&&"number"!=typeof y[H])throw new Error("Param ["+H+"] is inValid");return!0},Y=function(y){for(var s=0;s<y.length;s++)for(var H in y[s])if("number"!=typeof y[s][H])throw new Error("Param user["+s+"] - ["+H+"] is inValid");return!0},te=function(y){isNaN(y)&&(y=1e3);var s=+new Date,H=(s=(9301*s+49297)%233280)/233280;return Math.ceil(H*y)},J=function(y){var s=encodeURIComponent(y).match(/%[89ABab]/g);return y.length+(s?s.length:0)},re=function(y,s){var H=1/s,_=Object(A.a)(),c=_.createGain();c.gain.value=0,c.connect(_.destination);var q=!1;return function f(){var C=_.createOscillator();C.onended=f,C.connect(c),C.start(0),C.stop(_.currentTime+H),y(_.currentTime),q&&(C.onended=function(){})}(),function(){q=!0}},U=function(){if(!document.getElementById("agora-ban-tip")){var y=document.createElement("div");y.id="agora-ban-tip",y.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(y);var s=document.createElement("div");s.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",y.append(s);var H=document.createElement("div");H.style="height: 76px; display: flex; justify-content: center; align-items: center;";var _=document.createElement("span");_.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",_.innerText="!";var c=document.createElement("span");c.innerText="This browser does not support webRTC",H.append(_),H.append(c);var q=document.createElement("div");q.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",q.innerText="OK",s.append(H),s.append(q),q.onclick=function(){var f=document.getElementById("agora-ban-tip");f.parentNode.removeChild(f)}}}},function(oe,X){function x(M){return oe.exports=x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},x(M)}oe.exports=x},function(oe,X,x){oe.exports=x(64)},function(oe,X,x){"use strict";var M=x(12),b=x.n(M),R=x(17),S=x.n(R),w=x(11),v=x.n(w),A=x(32),d=x.n(A),m=x(7),g=x.n(m),O=x(22),P=x(8),I=function(B){B&&B.apply(this,[].slice.call(arguments,1))},E=x(0),k=x(1),D=x(10),j=x(14),N=x(2),Y=function(B){var z=Object(P.b)(B);z.needReconnect=!0,z.isTimeout=!1,z.isInit=!0,z.sendbytes=0,z.recvbytes=0,z.startTime=Date.now(),z.lastMsgTime=null,z.clientId=B.clientId,z.hostIndex=0,z.requestID=0,z.host=B.host instanceof Array?B.host:[B.host],z.getSendBytes=function(){return z.sendbytes},z.getRecvBytes=function(){return z.recvbytes},z.getDuration=function(){return Math.ceil((Date.now()-z.startTime)/1e3)},z.getURL=function(){return z.connection.url},z.reconnect=function(){z.isInit=!0,z.creatConnection()},z.connectNext=function(){z.isInit=!0,++z.hostIndex,E.default.debug("["+z.clientId+"] Gateway length:"+z.host.length+" current index:"+z.hostIndex),z.hostIndex>=z.host.length?z.dispatchEvent(Object(P.d)({type:"recover"})):z.creatConnection()},z.replaceHost=function(se){z.host=se||z.host,z.hostIndex=0,z.creatConnection()},z.creatConnection=function(){z.needReconnect=!0,z.lts=(new Date).getTime(),z.connection=new WebSocket("wss://"+z.host[z.hostIndex]),z.connection.binaryType="arraybuffer",z.turnConfig={};var se=B.proxyServerType;if(z.connection.url&&3!==se&&4!==se&&5!==se){var ae=z.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),Se=z.host[z.hostIndex].split(":"),Te=z.connection.url.match(/h=([^:]+)&p=(\d+)/);ae?(z.turnConfig.url=ae[1],Object(N.getParameter)("TURN_ENABLE_TCP")&&(z.turnConfig.tcpport=parseInt(ae[2])+30),Object(N.getParameter)("TURN_ENABLE_UDP")&&(z.turnConfig.udpport=parseInt(ae[2])+30)):Te?(z.turnConfig.url=Te[1],Object(N.getParameter)("TURN_ENABLE_TCP")&&(z.turnConfig.tcpport=parseInt(Te[2])+30),Object(N.getParameter)("TURN_ENABLE_UDP")&&(z.turnConfig.udpport=parseInt(Te[2])+30)):Se&&(z.turnConfig.url=Se[0],Object(N.getParameter)("TURN_ENABLE_TCP")&&(z.turnConfig.tcpport=parseInt(Se[1])+30),Object(N.getParameter)("TURN_ENABLE_UDP")&&(z.turnConfig.udpport=parseInt(Se[1])+30))}z.connection.onopen=function(Ee){z.needReconnect=!0,z.isTimeout=!1,z.isInit=!1,z.sendbytes=0,z.recvbytes=0,z.startTime=Date.now(),Object(j.resetHTTPByetsCount)(),clearTimeout(z.timeoutCheck),z.dispatchEvent(Object(P.d)({type:"onopen",event:Ee,socket:z}))},z.connection.onmessage=function(Ee){if(Ee.data instanceof ArrayBuffer)z.dispatchEvent({type:"onBinaryData",data:Ee.data});else{z.recvbytes+=Object(D.lengthInUtf8Bytes)(Ee.data);var _e=JSON.parse(Ee.data);z.lastMsgTime=Date.now(),_e.hasOwnProperty("_id")?z.dispatchEvent(Object(P.d)({type:_e._id,msg:_e})):_e.hasOwnProperty("_type")&&z.dispatchSocketEvent(Object(P.d)({type:_e._type,msg:_e._message}))}},z.connection.onclose=function(Ee){z.needReconnect?z.isTimeout||z.isInit?(E.default.debug("["+z.clientId+"] websockect connect timeout"),k.report.joinGateway(B.sid,{lts:z.lts,succ:!1,ec:"timeout",addr:z.connection.url}),z.connectNext()):(z.dispatchEvent(Object(P.d)({type:"disconnect",event:Ee})),z.requests&&z.requests instanceof Array&&(z.requests.map(function(_e){_e.callback("REQUEST_ABORT")}),z.requests=[])):(E.default.debug("["+z.clientId+"] websockect closeed"),I(B.onFailure,Ee),clearTimeout(z.timeoutCheck),z.dispatchEvent(Object(P.d)({type:"close",event:Ee})),z.connection.onopen=void 0,z.connection.onclose=void 0,z.connection.onerror=void 0,z.connection.onmessage=void 0,z.connection=void 0)},z.connection.onerror=function(Ee){},setTimeout(function(){z.connection&&z.connection.readyState!=WebSocket.OPEN&&(z.isTimeout=!0,z.connection.close())},5e3)},z.creatConnection(),z.sendMessage=function(se,ae){if(z.connection&&z.connection.readyState==WebSocket.OPEN){var Se=JSON.stringify(se);z.sendbytes+=Object(D.lengthInUtf8Bytes)(Se),z.connection.send(Se)}else ae({error:"Gateway not connected"})},z.disconnect=function(){z.needReconnect=!0,z.connection.close()},z.close=function(){z.needReconnect=!1,z.connection.onclose=void 0,z.connection.close(),clearInterval(z.requestTimer),z.requests&&z.requests instanceof Array&&(z.requests.map(function(se){se.callback("REQUEST_ABORT")}),z.requests=[])},z.sendSignalCommand=function(se,ae){se._id="_request_"+z.requestID,z.requestID+=1,"publish_stats"!==se._type&&"subscribe_stats"!==se._type&&"publish_stats_low"!==se._type&&z.on(se._id,function(Se){Se.msg&&ae&&ae(Se.msg._result,Se.msg.message),delete z.dispatcher.eventListeners[se._id]}),z.sendMessage(se,function(Se){Se.reason="NOT_CONNECTED",ae&&ae(Se.reason,Se)})},z.requests=[];var Q=function(se){var ae=z.requests.findIndex(function(Te){return Te.id===se.type});if(ae>=0)var Se=z.requests.splice(ae,1)[0];Se&&z.dispatcher.eventListeners[se.type]?(delete z.dispatcher.eventListeners[se.type],se.msg&&Se.callback&&Se.callback(se.msg._result,se.msg._message)):E.default.warning("Detached Response",se.type,se.msg)},ge=function(se){var ae=this,Se=z.requests.findIndex(function(Te){return Te.id===ae.id});Se>=0&&(ae=z.requests.splice(Se,1)[0]),ae&&z.dispatcher.eventListeners[se.type]?(delete z.dispatcher.eventListeners[se.type],se.reason="NOT_CONNECTED",ae.callback&&ae.callback(se.reason,se)):E.default.warning("handleSendError",ae)};return z.sendRequest=function(se,ae){se=g()({_id:"_request_"+z.requestID},se),z.requestID+=1;var Se={id:se._id,timeoutCounter:0,stalledAt:Date.now(),message:se,callback:ae};z.requests.push(Se),z.addEventListener(se._id,Q),z.sendMessage(se,ge.bind(Se))},z.checkRequestTimeout=function(){for(var se=Math.ceil(Object(N.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(N.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),ae=z.requests.length-1;ae>=0;ae--){var Se=z.requests[ae];Se.timeoutCounter>=se?(z.requests.splice(ae,1),E.default.error("Request Timeout",Se.timeoutCounter,Se.message),Se.callback&&Se.callback("TIMEOUT")):Se.timeoutCounter++}},clearInterval(z.requestTimer),z.requestTimer=setInterval(z.checkRequestTimeout,Object(N.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),z.sendReport=function(se){z.sendMessage(se,function(){})},z},J=x(23),re=x(4),U=x(20),y=x(5),s={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},H={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},_={};for(var c in H){var q=H[c];_[q]&&E.default.error("Key Conflict: ".concat(q,": ").concat(H[q],"| ").concat(c)),_[q]=c}var f=function(B){return H[B]||B},C=function(B){return _[B]||B},L=x(9),Z=x.n(L),ee=x(54),le=function B(z){var p,$,Q=!1,ge=function(p){return{_type:"control",_message:p}},se=function(p,$){var ce={};return Object.keys($).forEach(function(fe){Object(N.getParameter)("STATS_FILTER")[fe]||(ce[f(fe)]=$[fe])}),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:p,stats:ce}}},ae=function(p){return{_type:"publish",_message:p}},Se=function(p,$){var ce={};return Object.keys($).forEach(function(fe){Object(N.getParameter)("STATS_FILTER")[fe]||(ce[f(fe)]=$[fe])}),{_type:"subscribe_stats",_message:{stream_id:p,stats:ce}}},Te=B.DISCONNECTED,Ee=B.CONNECTING,_e=B.CONNECTED,Me=B.DISCONNECTING,xe=Te,u=Object(P.b)(z);Object.defineProperty(u,"state",{set:function(p){var $=xe;xe=p,Object(U._setClientConnectionStateRecord)(u.clientId,p),p!==B.CONNECTED&&p!==B.DISCONNECTING&&(u.hasJoined=!1),$!==p&&u.dispatchEvent({type:"connection-state-change",prevState:B.connetionStateMap[$],curState:B.connetionStateMap[p]})},get:function(){return xe}}),u.socket=void 0,u.state=Te,u.mode=z.mode,u.role=z.role,u.codec=z.codec,u.config={},u.timers={},u.timer_counter={},u.localStreams={},u.remoteStreams={},u.remoteMuteState={},u.attemps=1,u.p2p_attemps=1,u.audioLevel={},u.activeSpeaker=void 0,u.reconnectMode="tryNext",u.rejoinAttempt=0,u.hasChangeBGPAddress=!1,u.traffic_stats={},u.clientId=z.clientId,u.pingpongCounter=0,u.hasInvokeLeave=!1,u.p2ps=new Map,u.liveStreams=new Map,u.injectLiveStreams=new Map,u.remoteStreamsInChannel=new Set,u.subscribeRequestId=new Map,u.publishRequestId=0,u.hasJoined=!1,u.isFirstSuccess=!0,u.peerPublishDurationMap=new Map,$=I,(p=u).makeRequest=function(ce,fe,he){if(void 0===p.socket)return E.default.debug("[".concat(p.clientId,"] No socket available")),void $(he,re.default.INVALID_OPERATION);try{p.socket.emitRequest(ce,function(K,pe){var me;"success"===K?"function"==typeof fe&&fe(pe):"function"==typeof he&&(me=pe&&pe.error_code&&re.GatewayErrorCode[pe.error_code]?re.GatewayErrorCode[pe.error_code]:pe&&pe.error_str?pe.error_str:pe&&pe.error_code?"UNKNOW_ERROR_".concat(pe.error_code):K,he(me,pe))})}catch(K){E.default.debug("[".concat(p.clientId,"] Socket emit message failed ").concat(JSON.stringify(ce))),E.default.debug("[".concat(p.clientId,"] "),K),$(he,re.default.SOCKET_ERROR)}},p.makeReport=function(ce){void 0===p.socket&&E.default.debug("[".concat(p.clientId,"] No socket available"));try{p.socket.emitReport(ce)}catch(fe){E.default.debug("[".concat(p.clientId,"] Socket emit report failed ").concat(JSON.stringify(ce)))}},u.inChannelInfo={joinAt:null,duration:0},u._sendMessage=function(p,$){switch(p){case"SubscribeStats":u.makeReport(Se.apply(void 0,d()($)));break;case"SubscribeRelatedStats":u.makeReport(se.apply(void 0,d()($)))}};var de=I;u.p2pCounter=Object(D.random)(1e5),u.generateP2PId=function(){return++u.p2pCounter},u.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},u.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},u.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},u.configPublisher=function(p){u.config=p},u.getGatewayInfo=function(p,$){u.makeRequest({_type:"gateway_info"},p,$)},u.setClientRole=function(p,$){E.default.debug("[".concat(u.clientId,"] setClientRole to ").concat(p));var ce=k.report.reportApiInvoke(u.joinInfo.sid,{name:"_setClientRole",callback:$});u.makeRequest({_type:"set_client_role",_message:{role:p}},function(){u.role=p,u.dispatchEvent({type:"client-role-changed",role:p}),ce&&ce(null,{role:p})},function(fe,he){if(he&&he.code&&(fe=re.GatewayErrorCode[he.code]||"UNKNOW_ERROR_"+he.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===fe)return ce&&ce(null);E.default.error("set Client role error to "+p+": "+fe),ce&&ce(fe)})},u.join=function(p,$,ce,fe){u.hasInvokeLeave=!1,p.useProxyServer&&(u.hasChangeBGPAddress=!0);var he=(new Date).getTime(),K=p.uid;if(u.inChannelInfo.joinAt&&(u.inChannelInfo.duration+=he-u.inChannelInfo.joinAt),u.inChannelInfo.joinAt=he,u.state!==Ee)return E.default.error("[".concat(u.clientId,"] GatewayClient.join Failed: state "),u.state),fe&&fe(re.default.INVALID_OPERATION),void k.report.joinGateway(p.sid,{lts:he,succ:!1,ec:re.default.INVALID_OPERATION,addr:null});if(null!=K&&parseInt(K)!==K)return E.default.error("[".concat(u.clientId,"] Input uid is invalid")),u.state=Te,fe&&fe(re.default.INVALID_PARAMETER),void k.report.joinGateway(p.sid,{lts:he,succ:!1,ec:re.default.INVALID_PARAMETER,addr:null});var pe=W.register(u,{uid:K,cname:p&&p.cname});if(pe)return u.state=Te,fe&&fe(pe),void k.report.joinGateway(p.sid,{lts:he,succ:!1,ec:pe,addr:null});u.joinInfo=g()({},p),u.uid=K,u.key=$,u.pingpongCounter=0,ke(p,function(me){if(p.useLocalAccessPoint)try{var be=u.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(N.setParameter)("EVENT_REPORT_DOMAIN",be),Object(N.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",be),Object(N.setParameter)("LOG_UPLOAD_SERVER","".concat(be,":6444"))}catch(ye){E.default.debug("[".concat(u.clientId,"] LocalAccessPoint error: ").concat(ye))}if(u.state===Me||u.state===Te)return fe&&fe("LEAVE_BEFORE_JOIN_SUCCESS");u.state=_e,E.default.debug("[".concat(u.clientId,"] Connected to gateway server")),clearInterval(u.pingTimer),u.pingTimer=setInterval(function(){var ye=Object(N.getParameter)("PING_PONG_TIME_OUT");if(++u.pingpongCounter>=ye){var Oe=Date.now();u.socket&&E.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(Oe-u.socket.getLastMsgTime(),"ms")),u.socket&&u.socket.getLastMsgTime()&&Oe-u.socket.getLastMsgTime()>Object(N.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(u.pingpongCounter=0,u.socket.close(),u.socket.dispatchEvent(Object(P.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var Le=Date.now();u.makeRequest({_type:"ping"},function(){u.pingpongCounter=0;var ze=Date.now()-Le;Object(N.getParameter)("REPORT_STATS")&&u.makeRequest({_type:"ping_back",_message:{pingpongElapse:ze}})},function(ze,Ge){"TIMEOUT"!==ze&&(E.default.error("Ping Error ".concat(ze," ").concat(JSON.stringify(Ge))),Ge&&Ge.error_code&&u.socket&&u.socket.signal&&u.socket.signal.connection&&u.socket.signal.connection.readyState===WebSocket.OPEN&&(E.default.info("Disconnecting websocket connection"),u.socket.signal.connection.close()))})},3e3),function(ye,Oe){var Le=ye.role,ze=g()({},u.joinInfo.apResponse),Ge={session_id:u.joinInfo.sid,app_id:z.appId,channel_key:u.key,channel_name:u.joinInfo.cname,sdk_version:N.VERSION,browser:navigator.userAgent,process_id:Object(k.getProcessId)(),mode:u.mode,codec:u.codec,role:Le,has_changed_gateway:Object(N.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||u.hasChangeBGPAddress,ap_response:ze,optionalInfo:u.joinInfo.optionalInfo,extend:Object(N.getParameter)("JOIN_EXTEND"),details:{}};if(u.joinInfo.hasOwnProperty("stringUid")&&(Ge.string_uid=u.joinInfo.stringUid),u.socket&&u.socket.signal&&u.socket.signal&&(ze.addresses&&ze.addresses[u.socket.signal.hostIndex]&&(Ge.ap_response.ticket=ze.addresses[u.socket.signal.hostIndex].ticket,delete ze.addresses),Object(N.getParameter)("SET_DEFAULT_TURNSERVER")&&u.socket.signal.turnConfig)){var Fe={username:u.joinInfo.uid.toString(),credential:u.joinInfo.token,forceturn:Object(N.getParameter)("FORCE_TURN")};Fe.url=u.socket.signal.turnConfig.url,u.socket.signal.turnConfig.tcpport&&(Fe.tcpport=""+u.socket.signal.turnConfig.tcpport),u.socket.signal.turnConfig.udpport&&(Fe.udpport=""+u.socket.signal.turnConfig.udpport),u.joinInfo.turnServers.find(function(i1){if(i1.url===Fe.url)return!0})||u.joinInfo.turnServers.push(Fe)}3===u.joinInfo.proxyServerType&&(Ge.plugin="web_cloud_proxy",Ge.details.cservice_map="1"),u.joinInfo.aesmode&&u.joinInfo.aespassword?(Ge.aes_mode=u.joinInfo.aesmode,Ge.aes_encrypt=!0,u.joinInfo.aes_salt&&(Ge.aes_salt=u.joinInfo.aes_salt),Object(ee.encryptRSA)(u.joinInfo.aespassword).then(function(i1){Ge.aes_secret=i1,u.dispatchEvent({type:"join-message-hook",joinMessage:Ge}),Oe(null,{_type:"join",_message:Ge})}).catch(function(i1){E.default.error("[".concat(u.clientId,"] encrypt password failed "),i1),Oe("ENCRYPT_PASSWORD_FAILED")})):(u.dispatchEvent({type:"join-message-hook",joinMessage:Ge}),Oe(null,{_type:"join",_message:Ge}))}({role:u.role},function(ye,Oe){if(ye)return fe&&fe(ye);u.makeRequest(Oe,function(Le){if(k.report.joinGateway(p.sid,{lts:he,succ:!0,ec:null,vid:p.vid,uid:p.uid,addr:u.socket.getURL(),firstSuccess:u.isFirstSuccess}),u.joinSuccessLts=Date.now(),u.isFirstSuccess=!1,u.rejoinAttempt=0,u.hasJoined=!0,ce&&ce(Le.uid),!0===Le.return_vosip||!0===Object(N.getParameter)("ENABLE_LIVE_SERVER_LIST")){var ze=null;try{ze=u.socket.signal.connection.url}catch(Ge){E.default.debug("[".concat(u.clientId,"] Can not get gateway ip: ").concat(Ge))}ze?Object(N.setParameter)("LIVE_SERVER_LIST",[ze]):Object(N.setParameter)("LIVE_SERVER_LIST",[])}u.dispatchEvent({type:"join"}),clearInterval(u.timers.trafficStats),u.timers.trafficStats=setInterval(function(){u.makeRequest({_type:"traffic_stats"},function(Ge){var Fe={};for(var i1 in Ge)Fe[C(i1)]=Ge[i1];if(Fe.peer_delay&&Fe.peer_delay.length){var We=[];Fe.peer_delay.forEach(function(B1){var a2={};for(var Z2 in B1)a2[C(Z2)]=B1[Z2];We.push(a2)}),Fe.peer_delay=We}u.traffic_stats=Fe,u.traffic_stats.timestamp=Date.now();var C1=u.localStreams[K]||u.localStreams[u.joinInfo.stringUid];C1&&(C1.traffic_stats={access_delay:Fe.access_delay}),Fe.peer_delay&&Fe.peer_delay.forEach(function(B1){var a2=u.remoteStreams[B1.peer_uid];a2&&(a2.traffic_stats={access_delay:Fe.access_delay,e2e_delay:B1.e2e_delay,audio_delay:B1.audio_delay,video_delay:B1.video_delay})}),u.dispatchEvent({type:"after-getTrafficStats",trafficStats:Fe})})},3e3)},function(Le,ze){if(E.default.error("[".concat(u.clientId,"] User join failed [").concat(Le,"]")),"ERR_JOIN_BY_MULTI_IP"===Le){try{k.report.joinGateway(p.sid,{lts:he,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:u.socket.getURL()})}catch(Ge){}return u.dispatchEvent({type:"onMultiIP",option:ze.option})}s[Le]&&u.rejoinAttempt<4?u._doWithAction(s[Le],ce,fe):fe&&fe(Le),k.report.joinGateway(p.sid,{lts:he,succ:!1,ec:Le,addr:u.socket&&u.socket.getURL()})})})},function(me){E.default.error("[".concat(u.clientId,"] User join failed [").concat(me,"]")),fe&&fe(me),k.report.joinGateway(p.sid,{lts:he,succ:!1,ec:me,addr:u.socket.getURL()})}),this.remoteMuteState={},u.resetAudioVolumeIndication()},u.leave=function(p,$){var ce=W.unregister(u);switch(ce&&E.default.debug("[".concat(u.clientId,"] "),ce),u.p2ps.clear(),u.state){case Te:return E.default.debug("[".concat(u.clientId,"] Client Already in DISCONNECTED status")),void de(p);case Me:return E.default.debug("[".concat(u.clientId,"] Client Already in DISCONNECTING status")),void de($,re.default.INVALID_OPERATION);case Ee:return u.socket&&u.socket.close(),u.socket=void 0,E.default.info("[".concat(u.clientId,"] Client connecting, Leave channel success")),u.state=Te,p&&p()}for(var fe in u.state=Me,u.channelMediaConfig&&(u.channelMediaRelayController&&u.channelMediaRelayController.dispose(),u.channelMediaRelayController=null),clearInterval(u.pingTimer),u.timers)u.timers.hasOwnProperty(fe)&&clearInterval(u.timers[fe]);for(var fe in u.inChannelInfo.joinAt&&(u.inChannelInfo.duration+=Date.now()-u.inChannelInfo.joinAt,u.inChannelInfo.joinAt=null),u.hasJoined?u.makeRequest({_type:"leave"},function(pe){u.socket.close(),u.socket=void 0,E.default.info("[".concat(u.clientId,"] Leave channel success")),u.state=Te,p&&p(pe)},function(pe){"TIMEOUT"!==pe&&"REQUEST_ABORT"!==pe&&(E.default.error("[".concat(u.clientId,"] Leave Channel Failed"),pe),u.state=_e,$&&$(pe))}):(u.socket&&(u.socket.close(),u.socket=void 0),E.default.info("[".concat(u.clientId,"] Leave channel before joined")),u.state=Te,p&&p()),u.localStreams)if(u.localStreams.hasOwnProperty(fe)){var he=u.localStreams[fe];delete u.localStreams[fe],void 0!==he.pc&&(he.pc.close(),he.pc=void 0)}ie()},u.publish=function(p,$,ce,fe){var he=(new Date).getTime(),K=!1;if(p.publishLTS=he,"object"!==v()(p)||null===p)return E.default.error("[".concat(u.clientId,"] Invalid local stream")),fe&&fe(re.default.INVALID_LOCAL_STREAM),void k.report.publish(u.joinInfo.sid,{lts:he,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:re.default.INVALID_LOCAL_STREAM});if(!p.stream&&void 0===p.url)return E.default.error("[".concat(u.clientId,"] Invalid local media stream")),fe&&fe(re.default.INVALID_LOCAL_STREAM),void k.report.publish(u.joinInfo.sid,{lts:he,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:re.default.INVALID_LOCAL_STREAM});if(u.state!==_e)return E.default.error("[".concat(u.clientId,"] User is not in the session")),fe&&fe(re.default.INVALID_OPERATION),void k.report.publish(u.joinInfo.sid,{lts:he,succ:!1,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:re.default.INVALID_OPERATION});var pe=p.getAttributes()||{};if(p.local&&void 0===u.localStreams[p.getId()]&&(p.hasAudio()||p.hasVideo()||p.hasScreen())){var me=u.generateP2PId();if(u.p2ps.set(me,p),p.p2pId=me,void 0!==p.url)Ve(ae({state:"url",audio:p.hasAudio(),video:p.hasVideo(),attributes:p.getAttributes()}),function(ye,Oe){"success"===ye?(p.getUserId()!==Oe&&p.setUserId(Oe),u.localStreams[Oe]=p,p.onClose=function(){u.unpublish(p)}):E.default.error("[".concat(u.clientId,"] Publish local stream failed"),ye)});else{u.localStreams[p.getId()]=p,p.connectionSpec={callback:function(ye){ye||fe&&fe("CANNOT_GET_OFFER"),"motion"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-framerate"),"detail"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-resolution"),u.makeRequest(ae({state:"offer",stream_type:1==$.streamType?"low":"high",p2p_id:me,sdp:ye,audio:p.audio||p.screenAudio,video:p.screen||p.video,screen:p.screen,attributes:p.getAttributes(),dtx:p.DTX,hq:p.highQuality,lq:p.lowQuality,stereo:p.stereo,speech:p.speech,codec:u.codec,extend:Object(N.getParameter)("PUB_EXTEND")}),function(Oe){p.getUserId()!==Oe.uid&&p.setUserId(Oe.uid),E.default.info("[".concat(u.clientId,"] Local stream published with uid"),Oe.uid),p.onClose=function(){u.unpublish(p)},p._onAudioUnmute=function(){u.makeReport(ge({action:"unmute_local_audio",stream_id:p.getId()}))},p._onVideoUnmute=function(){u.makeReport(ge({action:"unmute_local_video",stream_id:p.getId()}))},p._onAudioMute=function(){u.makeReport(ge({action:"mute_local_audio",stream_id:p.getId()}))},p._onVideoMute=function(){u.makeReport(ge({action:"mute_local_video",stream_id:p.getId()}))},p.getId()===p.getUserId()&&(p.isAudioOn()||p.hasAudio()&&(E.default.debug("[".concat(u.clientId,"] local stream audio mute")),p._onAudioMute()),p.isVideoOn()||(p.hasVideo()||p.hasScreen())&&(E.default.debug("[".concat(u.clientId,"] local stream video mute")),p._onVideoMute())),p.pc.oniceconnectionstatechange=function(Le){if("failed"===Le){if(null!=u.timers[p.getId()]&&(clearInterval(u.timers[p.getId()]),clearInterval(u.timers[p.getId()]+"_RelatedStats")),E.default.error("[".concat(u.clientId,"] Publisher connection is lost -- streamId: ").concat(p.getId(),", p2pId: ").concat(me)),u.p2ps.delete(me),E.default.debug("[".concat(u.clientId,"] publish p2p failed: "),u.p2ps),!K)return K=!0,k.report.publish(u.joinInfo.sid,{lts:he,succ:!1,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:re.default.PEERCONNECTION_FAILED,publishRequestid:u.publishRequestId||0,p2pid:me}),u.dispatchEvent(Object(P.a)({type:"pubP2PLost",stream:p})),fe&&fe(re.default.PEERCONNECTION_FAILED);u.dispatchEvent(Object(P.a)({type:"pubP2PLost",stream:p}))}else if("connected"===Le&&(E.default.debug("[".concat(u.clientId,"] publish p2p connected: "),u.p2ps),p.getId()===p.getUserId()&&(p._isAudioMuted()?u.makeReport(ge({action:"mute_local_audio",stream_id:p.getId()})):u.makeReport(ge({action:"unmute_local_audio",stream_id:p.getId()})),p._isVideoMuted()?u.makeReport(ge({action:"mute_local_video",stream_id:p.getId()})):u.makeReport(ge({action:"unmute_local_video",stream_id:p.getId()}))),!K))return K=!0,k.report.publish(u.joinInfo.sid,{lts:he,succ:!0,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:null,publishRequestid:u.publishRequestId||0,p2pid:me}),ce&&ce()},p.pc.processSignalingMessage(Oe.sdp)},function(Oe,Le){E.default.error("Publish Failed: ".concat(Oe)),k.report.publish(u.joinInfo.sid,{lts:he,succ:!1,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:Oe,publishRequestid:u.publishRequestId||0,p2pid:me}),"TIMEOUT"!=Oe&&(u.processPublishFailure(p),fe&&fe(Oe))})},audio:p.hasAudio(),video:p.hasVideo(),screen:p.hasScreen(),optimizationMode:p.optimizationMode,isSubscriber:!1,stunServerUrl:u.stunServerUrl,turnServers:u.joinInfo.turnServers,maxAudioBW:pe.maxAudioBW,minVideoBW:pe.minVideoBW,maxVideoBW:pe.maxVideoBW,mode:u.mode,codec:u.codec,isVideoMute:p.userMuteVideo||p.peerMuteVideo,isAudioMute:p.userMuteAudio||p.peerMuteAudio,maxFrameRate:p.attributes.maxFrameRate,agoraStream:p,clientId:u.clientId,isCloudProxy3:3===u.joinInfo.proxyServerType,onNoIceCandidate:function(){u.dispatchEvent({type:"no_ice_candidate",stream:p})}},p.pc=Object(J.a)(p.connectionSpec),p.pc.addStream(p.stream),E.default.debug("[".concat(u.clientId,"] PeerConnection add stream :"),p.stream),p.pc.onnegotiationneeded=function(ye){"motion"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-framerate"),"detail"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-resolution");var Oe={state:"negotiation",stream_type:1===$.streamType?"low":"high",p2p_id:me,sdp:ye};u.makeRequest(ae(Oe),function(Le){E.default.debug("Negotating Stream ".concat(p.getId())),p.pc.processSignalingMessage(Le.sdp)},function(Le,ze){E.default.error("Negotiation failed ".concat(Le),ze,Oe)})},clearInterval(u.timers[p.getId()]),u.timers[p.getId()]=setInterval(function(){if(Object(N.getParameter)("REPORT_STATS")){var ye=0;p&&p.pc&&p.pc.getStats&&p.pc.getStatsRate(function(Oe){Oe.forEach(function(Le){if(Le&&Le.id&&!(/_recv$/.test(Le.id)||/^time$/.test(Le.id)||~Le.type.toLowerCase().indexOf("inbound"))&&p.getUserId()){if(-1===Le.id.indexOf("outbound_rtp")&&-1===Le.id.indexOf("OutboundRTP")&&-1===Le.type.toLowerCase().indexOf("outbound")||"video"!==Le.mediaType||(Le.googFrameWidthSent=p.videoWidth+"",Le.googFrameHeightSent=p.videoHeight+""),"video"===Le.mediaType)try{var ze=p.stream.getVideoTracks()[0];Le.A_vstd=ze.enabled?"0":"1"}catch(i1){}if("audio"===Le.mediaType)try{var Ge=p.stream.getAudioTracks()[0];Le.A_astd=Ge.enabled?"0":"1"}catch(i1){}if(p.getId()==p.getUserId()){var Fe=200*ye;ye++,setTimeout(function(){var We,y1,i1=u.socket&&u.socket.getLastMsgTime()&&Date.now()-u.socket.getLastMsgTime();i1>Object(N.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(i1)):u.makeReport((We=Le,y1={},Object.keys(We).forEach(function(C1){Object(N.getParameter)("STATS_FILTER")[C1]||(y1[f(C1)]=We[C1])}),{_type:"publish_stats",_message:{stream_type:"high",stats:y1}}))},Fe)}else Fe=200*ye,ye++,setTimeout(function(){var We,y1,i1=u.socket&&u.socket.getLastMsgTime()&&Date.now()-u.socket.getLastMsgTime();i1>Object(N.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(i1)):u.makeReport((We=Le,y1={},Object.keys(We).forEach(function(C1){Object(N.getParameter)("STATS_FILTER")[C1]||(y1[f(C1)]=We[C1])}),{_type:"publish_stats",_message:{stream_type:"low",stats:y1}}))},Fe)}})})}},3e3);var be=function(){Object(N.getParameter)("REPORT_STATS")&&p&&p.pc&&p.pc.getVideoRelatedStats&&p.pc.getVideoRelatedStats(function(ye){var Oe,Le,Ge,Fe,ze=u.socket&&u.socket.getLastMsgTime()&&Date.now()-u.socket.getLastMsgTime();ze>Object(N.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(ze)):p.getId()===p.getUserId()?u.makeReport((Oe=ye,Le={},Object.keys(Oe).forEach(function(Ge){Object(N.getParameter)("STATS_FILTER")[Ge]||(Le[f(Ge)]=Oe[Ge])}),{_type:"publish_related_stats",_message:{stream_type:"high",stats:Le}})):u.makeReport((Ge=ye,Fe={},Object.keys(Ge).forEach(function(i1){Object(N.getParameter)("STATS_FILTER")[i1]||(Fe[f(i1)]=Ge[i1])}),{_type:"publish_related_stats",_message:{stream_type:"low",stats:Fe}}))})};be(),clearInterval(u.timers[p.getId()+"_RelatedStats"]),u.timers[p.getId()+"_RelatedStats"]=setInterval(be,1e3)}}},u.unpublish=function(p,$,ce,fe){if("object"!==v()(p)||null===p)return E.default.error("[".concat(u.clientId,"] Invalid local stream")),void de(fe,re.default.INVALID_LOCAL_STREAM);if(u.state!==_e)return E.default.error("[".concat(u.clientId,"] User not in the session")),void de(fe,re.default.INVALID_OPERATION);if(null!=u.timers[p.getId()]&&(clearInterval(u.timers[p.getId()]),clearInterval(u.timers[p.getId()+"_RelatedStats"])),void 0!==u.socket)if(p.local&&void 0!==u.localStreams[p.getId()]){delete u.localStreams[p.getId()];var he={stream_id:p.getUserId(),stream_type:1===$.streamType?"low":"high"};u.makeRequest({_type:"unpublish",_message:he}),(p.hasAudio()||p.hasVideo()||p.hasScreen())&&void 0===p.url&&void 0!==p.pc&&(p.pc.close(),p.pc=void 0),p.onClose=void 0,p._onAudioMute=void 0,p._onAudioUnute=void 0,p._onVideoMute=void 0,p._onVideoUnmute=void 0,u.p2ps.delete(p.p2pId),ce&&ce()}else E.default.error("[".concat(u.clientId,"] Invalid local stream")),de(fe,re.default.INVALID_LOCAL_STREAM);else E.default.error("[".concat(u.clientId,"] User not in the session")),de(fe,re.default.INVALID_OPERATION)},u.subscribe=function(p,$,ce){var fe=(new Date).getTime();p.subscribeLTS=fe;var he=!1;if(E.default.info("[".concat(u.clientId,"] Gatewayclient ").concat(u.uid," Subscribe ").concat(p.getId(),": ").concat(JSON.stringify(p.subscribeOptions))),"object"!==v()(p)||null===p)return E.default.error("[".concat(u.clientId,"] Invalid remote stream")),ce&&ce(re.default.INVALID_REMOTE_STREAM),void k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:re.default.INVALID_REMOTE_STREAM});if(u.state!==_e&&(E.default.error("[".concat(u.clientId,"] User is not in the session")),!he))return he=!0,k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:re.default.INVALID_OPERATION}),ce&&ce(re.default.INVALID_OPERATION);if(!p.local&&u.remoteStreams.hasOwnProperty(p.getId()))if(p.hasAudio()||p.hasVideo()||p.hasScreen()){var K=u.generateP2PId();u.p2ps.set(K,p),p.p2pId=K,p.pc=Object(J.a)({callback:function(pe){pe||ce&&ce("CANNOT_GET_OFFER");var me={stream_id:p.getId(),audio:!p.subscribeOptions||p.subscribeOptions.audio,video:!p.subscribeOptions||p.subscribeOptions.video,codec:u.codec,p2p_id:K,sdp:pe,tcc:Object(N.getParameter)("SUBSCRIBE_TCC"),extend:Object(N.getParameter)("SUB_EXTEND")};u.makeRequest({_type:"subscribe",_message:me},function(be){p.pc.processSignalingMessage(be.sdp)},function(be,ye){E.default.error("[".concat(u.clientId,"] Subscribe remote stream Failed: ").concat(be,", closing stream "),p.getId(),ye),k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:be}),"TIMEOUT"!=be&&(u.processSubscribeFailure(p),ce&&ce(be))})},nop2p:!0,audio:!0,video:!0,screen:p.hasScreen(),isSubscriber:!0,stunServerUrl:u.stunServerUrl,turnServers:u.joinInfo.turnServers,isVideoMute:p.userMuteVideo,isAudioMute:p.userMuteAudio,uid:p.getId(),agoraStream:p,clientId:u.clientId}),p.pc.onaddstream=function(pe,me){if(p._onAudioUnmute=function(){u.makeReport(ge({action:"unmute_remote_audio",stream_id:p.getId()}),function(){},function(){})},p._onAudioMute=function(){u.makeReport(ge({action:"mute_remote_audio",stream_id:p.getId()}),function(){},function(){})},p._onVideoUnmute=function(){u.makeReport(ge({action:"unmute_remote_video",stream_id:p.getId()}),function(){},function(){})},p._onVideoMute=function(){u.makeReport(ge({action:"mute_remote_video",stream_id:p.getId()}),function(){},function(){})},"ontrack"===me&&"video"===pe.track.kind||"onaddstream"===me){E.default.info("[".concat(u.clientId,"] Remote stream subscribed with uid "),p.getId());var be=u.remoteStreams[p.getId()];if(u.remoteStreams[p.getId()].stream="onaddstream"===me?pe.stream:pe.streams[0],u.remoteStreams[p.getId()].hasVideo()){if(Object(y.isFireFox)()||Object(y.isSafari)()){var ye=u.remoteStreams[p.getId()].stream;Object(D.vsResHack)(ye,function(ze,Ge){p.videoWidth=ze,p.videoHeight=Ge},function(ze){return E.default.warning("[".concat(u.clientId,"] vsResHack failed: ")+ze)})}}else{var Oe=u.remoteStreams[p.getId()];Oe.peerMuteVideo=!0,u._adjustPCMuteStatus(Oe)}be&&be.isPlaying()&&be.elementID&&(E.default.debug("[".concat(u.clientId,"] Reload Player ").concat(be.elementID," StreamId ").concat(be.getId())),p.audioOutput=be.audioOutput,be.stop(),p.play(be.elementID,be.playOptions)),delete p.audioLevelHelper;var Le=Object(P.e)({type:"stream-subscribed",stream:u.remoteStreams[p.getId()]});u.dispatchEvent(Le)}},clearInterval(u.timers[p.getId()]),u.timers[p.getId()]=setInterval(function(){if(Object(N.getParameter)("REPORT_STATS")){var pe=0;p&&p.pc&&p.pc.getStats&&p.pc.getStatsRate(function(me){me.forEach(function(be){if(be&&be.id){if(/_send$/.test(be.id)||/^time$/.test(be.id)||/^bweforvideo$/.test(be.id))return;-1===be.id.indexOf("inbound_rtp")&&-1===be.id.indexOf("inbound-rtp")&&-1===be.type.toLowerCase().indexOf("inbound")||"video"!==be.mediaType||(be.googFrameWidthReceived=p.videoWidth+"",be.googFrameHeightReceived=p.videoHeight+"");var ye=200*pe;pe++;var Oe=p.getId();setTimeout(function(){var Le=u.socket&&u.socket.getLastMsgTime()&&Date.now()-u.socket.getLastMsgTime();if(Le>Object(N.getParameter)("REPORT_STATS_TIMEOUT"))E.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(Le));else{if("video"===be.mediaType)try{var ze=p.stream.getVideoTracks()[0];be.A_vrtd=ze.enabled?"0":"1",p.player&&p.player.freezeTimeCounterList.length>0&&(be.A_vrft=p.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(Fe){}if("audio"===be.mediaType)try{var Ge=p.stream.getAudioTracks()[0];be.A_artd=Ge.enabled?"0":"1"}catch(Fe){}u.makeReport(Se(Oe,be))}},ye)}})})}},3e3),clearInterval(u.timers[p.getId()+"_RelatedStats"]),u.timers[p.getId()+"_RelatedStats"]=setInterval(function(){if(Object(N.getParameter)("REPORT_STATS")&&p&&p.pc){var pe=u.socket&&u.socket.getLastMsgTime()&&Date.now()-u.socket.getLastMsgTime();if(pe>Object(N.getParameter)("REPORT_STATS_TIMEOUT"))return void E.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(pe));p.pc.getVideoRelatedStats&&p.pc.getVideoRelatedStats(function(me){p.player&&(p.hasVideo()&&!p.peerMuteVideo&&(me.isFreeze=p.player.freezeCount>p.player.lastFreezeCount),p.player.lastFreezeCount=p.player.freezeCount),u.makeReport(se(p.getId(),me))}),p.pc.getAudioRelatedStats&&p.pc.getAudioRelatedStats(function(me){u.makeReport(se(p.getId(),me))})}},1e3),u.audioLevel[p.getId()]=0,clearInterval(u.timers[p.getId()+"audio"]),u.timers[p.getId()+"audio"]=setInterval(function(){u.hasListeners("active-speaker")&&p&&p.pc&&"established"===p.pc.state&&p.pc.getStats&&p.pc.getStats(function(pe){pe.forEach(function(me){if("audio"===me.mediaType){if(me.audioOutputLevel>5e3)for(var be in u.audioLevel[p.getId()]<20&&(u.audioLevel[p.getId()]+=1),u.audioLevel)be!==""+p.getId()&&u.audioLevel[be]>0&&(u.audioLevel[be]-=1);var ye=Object.keys(u.audioLevel).sort(function(Le,ze){return u.audioLevel[ze]-u.audioLevel[Le]});if(u.activeSpeaker!==ye[0]){var Oe=Object(P.a)({type:"active-speaker",uid:ye[0]});u.dispatchEvent(Oe),u.activeSpeaker=ye[0],E.default.debug("[".concat(u.clientId,"] Update active speaker: ").concat(u.activeSpeaker))}}})},50)},50),p.pc.oniceconnectionstatechange=function(pe){if("failed"===pe)null!=u.timers[p.getId()]&&(clearInterval(u.timers[p.getId()]),clearInterval(u.timers[p.getId()]+"audio")),E.default.error("[".concat(u.clientId,"] Subscriber connection is lost -- streamId: ").concat(p.getId(),", p2pId: ").concat(K)),E.default.debug("[".concat(u.clientId,"] subscribe p2p failed: "),u.p2ps),he||(he=!0,ce&&ce(re.default.PEERCONNECTION_FAILED),k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:re.default.PEERCONNECTION_FAILED,subscribeRequestid:u.subscribeRequestId.get(p.getId())||0,p2pid:K})),u.remoteStreams[p.getId()]&&u.p2ps.has(K)&&(u.p2ps.delete(K),u.dispatchEvent(Object(P.a)({type:"subP2PLost",stream:p})));else if("connected"===pe&&(E.default.debug("[".concat(u.clientId,"] subscribe p2p connected: "),u.p2ps),!he)){he=!0,k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!0,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:null,subscribeRequestid:u.subscribeRequestId.get(p.getId())||0,p2pid:K}),u._adjustPCMuteStatus(p);var me=!1,be=!1,ye=!1,Oe=setInterval(function(){me&&be||(p.pc?p.pc.getStats(function(i1){i1.forEach(function(We){if((-1!==We.id.indexOf("recv")||We.type&&-1!==We.type.toLowerCase().indexOf("inbound")||-1!==We.id.indexOf("inbound_rtp")||-1!==We.id.indexOf("inbound-rtp")||-1!==We.id.indexOf("InboundRTP"))&&"audio"===We.mediaType){if((We.googDecodingNormal>0||We.audioOutputLevel>0)&&!me){me=!0,u.dispatchEvent({type:"first-audio-frame-decode",stream:p}),me&&be&&clearInterval(Oe);var y1=Date.now(),C1=k.report.getSessionStartTime(u.joinInfo.sid);k.report.firstAudioDecode(u.joinInfo.sid,{peerid:p.uintId,uid:u.uid,elapse:y1-C1,subscribeElapse:y1-p.subscribeLTS,subscribeRequestid:u.subscribeRequestId.get(p.getId())||0,p2pid:K})}parseInt(We.packetsReceived)>0&&!be&&(be=!0,u.dispatchEvent({type:"first-audio-packet-received",stream:p}),me&&be&&clearInterval(Oe),y1=Date.now(),C1=k.report.getSessionStartTime(u.joinInfo.sid),k.report.firstAudioReceived(u.joinInfo.sid,{peerid:p.uintId,uid:u.uid,elapse:y1-C1,subscribeElapse:y1-p.subscribeLTS,subscribeRequestid:u.subscribeRequestId.get(p.getId())||0,p2pid:K}))}})},100):clearInterval(Oe))},100),Le=!1,ze=!1,Ge=setInterval(function(){Le&&ze||(p.pc?p.pc.getStats(function(i1){i1.forEach(function(We){if((-1!==We.id.indexOf("recv")||We.type&&-1!==We.type.toLowerCase().indexOf("inbound")||-1!==We.id.indexOf("inbound_rtp")||-1!==We.id.indexOf("inbound-rtp")||-1!==We.id.indexOf("InboundRTP"))&&"video"===We.mediaType){if((We.framesDecoded>0||We.googFramesDecoded>0)&&!Le){Le=!0,u.dispatchEvent({type:"first-video-frame-decode",stream:p}),Le&&ze&&clearInterval(Ge);var y1=Date.now(),C1=k.report.getSessionStartTime(u.joinInfo.sid);p.firstFrameTime=(new Date).getTime()-p.subscribeLTS,k.report.firstVideoDecode(u.joinInfo.sid,{peerid:p.uintId,width:parseInt(We.googFrameWidthReceived)||0,height:parseInt(We.googFrameHeightReceived)||0,uid:u.uid,elapse:y1-C1,subscribeElapse:y1-p.subscribeLTS,subscribeRequestid:u.subscribeRequestId.get(p.getId())||0,p2pid:K})}We.packetsReceived>0&&!ze&&(ze=!0,u.dispatchEvent({type:"first-video-packet-received",stream:p}),Le&&ze&&clearInterval(Ge),y1=Date.now(),C1=k.report.getSessionStartTime(u.joinInfo.sid),k.report.firstVideoReceived(u.joinInfo.sid,{peerid:p.uintId,uid:u.uid,elapse:y1-C1,subscribeElapse:y1-p.subscribeLTS,subscribeRequestid:u.subscribeRequestId.get(p.getId())||0,p2pid:K}))}})},100):clearInterval(Ge))},100),Fe=setInterval(function(){if(!ye){var i1=p.getId(),We=u.traffic_stats;if(We&&We.peer_delay){var y1=We.peer_delay.find(function(Ma){return Ma.peer_uid==i1});if(y1){if(ye=!0,u.peerPublishDurationMap.get(p.getId()))return void clearInterval(Fe);var C1=y1.peer_publish_audio_duration,B1=y1.peer_publish_video_duration;if(void 0===C1||void 0===B1)return;u.peerPublishDurationMap.set(p.getId(),!0);var a2=k.report.getSessionStartTime(u.joinInfo.sid),Z2=(C1||B1)+(Date.now()-We.timestamp),Q2=Date.now();k.report.peerPublishStatus({audiotag:C1?1:-1,videotag:B1?1:-1,lts:Q2,sid:u.joinInfo.sid,cname:u.joinInfo.cname,cid:u.joinInfo.cid,uid:u.joinInfo.uid,elapse:Q2-a2,peer:p.uintId,peerPublishDuration:Z2,joinChannelSuccessElapse:Q2-u.joinSuccessLts,subscribeElapse:Q2-p.subscribeLTS}),clearInterval(Fe)}}}},1e3);return p.sid=u.joinInfo.sid,$&&$()}}}else E.default.error("[".concat(u.clientId,"] Invalid remote stream")),he||(he=!0,ce&&ce(re.default.INVALID_REMOTE_STREAM),k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:re.default.INVALID_REMOTE_STREAM}));else E.default.error("[".concat(u.clientId,"] No such remote stream")),he||(he=!0,ce&&ce(re.default.NO_SUCH_REMOTE_STREAM),k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:re.default.NO_SUCH_REMOTE_STREAM}))},u.subscribeChange=function(p,$,ce){var fe=Date.now();E.default.info("[".concat(u.clientId,"] Gatewayclient ").concat(u.uid," SubscribeChange ").concat(p.getId(),": ").concat(JSON.stringify(p.subscribeOptions))),u._adjustPCMuteStatus(p);var he={stream_id:p.getId(),audio:p.subscribeOptions.audio,video:p.subscribeOptions.video};u.makeRequest({_type:"subscribe_change",_message:he},function(K){var pe=Object(P.e)({type:"stream-subscribe-changed",stream:u.remoteStreams[p.getId()]});k.report.subscribe(u.joinInfo.sid,{lts:fe,succ:!0,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:null,subscribeRequestid:u.subscribeRequestId.get(p.getId())||0,p2pid:u.p2ps.get(p.getId())}),u.dispatchEvent(pe),$&&$()},function(K,pe){E.default.error("[".concat(u.clientId,"] Subscribe Change Failed ").concat(p.getId()),K,pe),ce&&ce(K,pe)})},u.processPublishFailure=function(p){p.publishLTS=null,p.p2pId&&u.p2ps.get(p.p2pId)===p&&u.p2ps.delete(p.p2pId),u.localStreams[p.getUserId()]===p&&delete u.localStreams[p.getUserId()],u.localStreams[p.getId()]===p&&delete u.localStreams[p.getId()],p.pc&&(p.pc.processSignalingMessage=function(){},p.pc.oniceconnectionstatechange=function(){},p.pc.close(),delete p.pc),delete p.onClose,delete p._onAudioUnmute,delete p._onVideoUnmute,delete p._onAudioMute,delete p._onVideoMute,delete p._onAudioUnmute},u.processSubscribeFailure=function(p){p.p2pId&&u.p2ps.get(p.p2pId)===p&&u.p2ps.delete(p.p2pId),p.pc&&(p.pc.onaddstream=function(){},p.pc.processSignalingMessage=function(){},p.pc.oniceconnectionstatechange=function(){},p.pc.close(),delete p.pc),delete p.onClose,delete p._onAudioUnmute,delete p._onVideoUnmute,delete p._onAudioMute,delete p._onVideoMute,delete p._onAudioUnmute},u._adjustPCMuteStatus=function(p){E.default.debug("[".concat(u.clientId,"]: use _adjustPCMuteStatus: ").concat(p.getId())),E.default.debug("[".concat(u.clientId,"]: video: ").concat(p.video,", audio: ").concat(p.audio,", suboption: ").concat(JSON.stringify(p.subscribeOptions),",userMuteVideo: ").concat(p.userMuteVideo,", peerMuteVideo: ").concat(p.peerMuteVideo,", userMuteAudio: ").concat(p.userMuteAudio,", peerMuteAudio: ").concat(p.peerMuteAudio)),!p.local&&p.pc&&p.pc.peerConnection.getReceivers&&p.pc.peerConnection.getReceivers().forEach(function($){if($&&$.track&&"audio"===$.track.kind){var ce=!p.userMuteAudio&&!p.peerMuteAudio;p.subscribeOptions&&!p.subscribeOptions.audio&&(ce=!1),E.default.debug("[".concat(u.clientId,"]: set receiver audio track: ").concat(ce)),$.track.enabled=!!ce}else if($&&$.track&&"video"===$.track.kind){var fe=!p.userMuteVideo&&!p.peerMuteVideo;p.subscribeOptions&&!p.subscribeOptions.video&&(fe=!1),E.default.debug("[".concat(u.clientId,"]: set receiver video track: ").concat(fe)),$.track.enabled=!!fe}})},u.unsubscribe=function(p,$,ce){if("object"!==v()(p)||null===p)return E.default.error("[".concat(u.clientId,"] Invalid remote stream")),void de(ce,re.default.INVALID_REMOTE_STREAM);if(u.state!==_e)return E.default.error("[".concat(u.clientId,"] User is not in the session")),void de(ce,re.default.INVALID_OPERATION);if(null!=u.timers[p.getId()]&&(clearInterval(u.timers[p.getId()]),clearInterval(u.timers[p.getId()]+"audio")),null!=u.audioLevel[p.getId()]&&delete u.audioLevel[p.getId()],null!=u.timer_counter[p.getId()]&&delete u.timer_counter[p.getId()],u.remoteStreams.hasOwnProperty(p.getId())){if(!u.socket)return E.default.error("[".concat(u.clientId,"] User is not in the session")),void de(ce,re.default.INVALID_OPERATION);if(p.local)return E.default.error("[".concat(u.clientId,"] Invalid remote stream")),void de(ce,re.default.INVALID_REMOTE_STREAM);p.close(),p.stop();var fe={stream_id:p.getId()};u.makeRequest({_type:"unsubscribe",_message:fe}),void 0!==p.pc&&(p.pc.close(),p.pc=void 0),p.onClose=void 0,p._onAudioMute=void 0,p._onAudioUnute=void 0,p._onVideoMute=void 0,p._onVideoUnmute=void 0,delete p.subscribeOptions,u.p2ps.delete(p.p2pId),E.default.info("[".concat(u.clientId,"] Unsubscribe stream success")),$&&$()}else de(ce,re.default.NO_SUCH_REMOTE_STREAM)},u.setRemoteVideoStreamType=function(p,$){if(E.default.debug("[".concat(u.clientId,"] Switching remote video stream ").concat(p.getId()," to ").concat($)),"object"===v()(p)&&null!==p)if(u.state===_e){if(!p.local){switch($){case u.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case u.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case u.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var ce={stream_id:p.getId(),stream_type:$};u.makeRequest({_type:"switch_video_stream",_message:ce},function(){E.default.debug("SwitchVideoStream Success ".concat(ce.stream_id," ").concat(ce.stream_type))},function(fe,he){E.default.error("SwitchVideoStream Error ".concat(fe," ").concat(ce.stream_id," ").concat(ce.stream_type),he)})}}else E.default.error("[".concat(u.clientId,"] User is not in the session"));else E.default.error("[".concat(u.clientId,"] Invalid remote stream"))},u.renewToken=function(p,$,ce){p?u.key?u.state!==_e?(E.default.debug("[".concat(u.clientId,"] Client is not connected. Trying to rejoin")),u.key=p,u.rejoin(),$&&$()):(E.default.debug("[".concat(u.clientId,"] renewToken from ").concat(u.key," to ").concat(p)),u.key=p,u.makeRequest({_type:"renew_token",_message:{token:p}},$,ce)):(E.default.error("[".concat(u.clientId,"] Client is previously joined without token")),ce&&ce(re.default.INVALID_PARAMETER)):(E.default.error("[".concat(u.clientId,"] Invalid Token ").concat(p)),ce&&ce(re.default.INVALID_PARAMETER))},u.setStreamFallbackOption=function(p,$){if(E.default.debug("[".concat(u.clientId,"] Set stream fallback option ").concat(p.getId()," to ").concat($)),"object"===v()(p)&&null!==p)if(u.state===_e){if(!p.local){switch($){case u.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case u.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case u.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var ce={stream_id:p.getId(),fallback_type:$};u.makeRequest({_type:"set_fallback_option",_message:ce},function(){E.default.debug("SetStreamFallbackOption success ".concat(ce.stream_id," ").concat($))},function(fe,he){E.default.error("Failed to SetStreamFallbackOption ".concat(ce.stream_id," ").concat($," ").concat(fe),he)})}}else E.default.error("[".concat(u.clientId,"] User is not in the session"));else E.default.error("[".concat(u.clientId,"] Invalid remote stream"))},u.enableAudioVolumeIndicator=function(p,$){u.audioVolumeIndication.enabled=!0,u.audioVolumeIndication.interval=p,u.audioVolumeIndication.smooth=$,u.resetAudioVolumeIndication()},u.resetAudioVolumeIndication=function(){if(clearInterval(u.timers.audioVolumeIndication),clearInterval(u.timers.audioVolumeSampling),u.audioVolumeIndication.enabled&&u.audioVolumeIndication.interval){var p=Math.floor(1e3*u.audioVolumeIndication.smooth/100);clearInterval(u.timers.audioVolumeSampling),u.timers.audioVolumeSampling=setInterval(function(){u.audioVolumeSampling||(u.audioVolumeSampling={});var $={};for(var ce in u.remoteStreams){var fe=u.remoteStreams[ce];if(fe.stream&&fe.hasAudio()){var he=fe.getAudioLevel();he>0&&he<1&&(he*=100);var K=u.audioVolumeSampling[ce]||[];for(K.push(he);K.length>p;)K.shift();$[ce]=K}}u.audioVolumeSampling=$},100),clearInterval(u.timers.audioVolumeIndication),u.timers.audioVolumeIndication=setInterval(function(){if(u.socket&&u.socket.signal&&u.socket.signal.connection&&u.socket.signal.connection.readyState===WebSocket.OPEN){var $=[];for(var ce in u.remoteStreams)if(u.audioVolumeSampling&&u.audioVolumeSampling[ce]){var fe=u.audioVolumeSampling[ce],he=0;fe.forEach(function(be){he+=be});var K={uid:ce,level:Math.floor(he/fe.length)};K.level&&$.push(K)}var pe=$.sort(function(be,ye){return be.level-ye.level});E.default.debug("[".concat(u.clientId,"] volume-indicator "),JSON.stringify(pe)),u.audioVolumeIndication.sortedAudioVolumes=pe;var me=Object(P.a)({type:"volume-indicator",attr:pe});u.dispatchEvent(me)}},u.audioVolumeIndication.interval)}},u.closeGateway=function(){E.default.debug("[".concat(u.clientId,"] close gateway")),u.state=Te,u.socket.close(),Ae()},u.startChannelMediaRelay=function(){var p=S()(b.a.mark(function $(ce){var fe,he,pe;return b.a.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(!u.channelMediaRelayController){me.next=2;break}throw new L.ChannelMediaError("RELAY_ALREADY_START","",L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return fe=function(be){u.dispatchEvent({type:"channel-media-relay-event",code:be})},he=function(be,ye,Oe){be===L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&ye===L.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(u.channelMediaRelayController.dispose(),u.channelMediaRelayController=null),u.dispatchEvent({type:"channel-media-relay-state",state:be,code:ye,data:Oe})},u.channelMediaRelayController=new Z.a(u.joinInfo,u.clientId),u.channelMediaRelayController.on("event",fe),u.channelMediaRelayController.on("state",he),me.prev=7,me.next=10,u.channelMediaRelayController.startChannelMediaRelay(ce);case 10:me.next=22;break;case 12:throw me.prev=12,me.t0=me.catch(7),E.default.debug("[".concat(u.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(me.t0))),u.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[pe=me.t0 instanceof L.ChannelMediaError?"SetSourceChannelStatus"===me.t0.data||me.t0.data&&me.t0.data.serverResponse&&"SetSourceChannel"===me.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===me.t0.data||me.t0.data&&me.t0.data.serverResponse&&"SetDestChannel"===me.t0.data.serverResponse.command?"FAILED_JOIN_DEST":me.t0.data&&me.t0.data.serverResponse&&"StartPacketTransfer"===me.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":me.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||me.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":me.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||me.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":me.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":me.t0.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||me.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR"]}),u.channelMediaRelayController&&(u.channelMediaRelayController.dispose(),u.channelMediaConfig=null,u.channelMediaRelayController=null),u.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(pe,null,L.CHANNEL_MEDIA_RELAY_ERROR[pe]);case 22:u.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),u.channelMediaConfig=ce;case 24:case"end":return me.stop()}},$,null,[[7,12]])}));return function($){return p.apply(this,arguments)}}(),u.updateChannelMediaRelay=function(){var p=S()(b.a.mark(function $(ce){var fe,he;return b.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(u.channelMediaRelayController){K.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return K.prev=2,K.next=5,u.channelMediaRelayController.updateChannelMediaRelay(ce);case 5:K.next=18;break;case 7:throw K.prev=7,K.t0=K.catch(2),E.default.debug("[".concat(u.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),fe=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,he=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",u.dispatchEvent({type:"channel-media-relay-event",code:L.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),u.dispatchEvent({type:"channel-media-relay-state",state:fe,code:L.CHANNEL_MEDIA_RELAY_ERROR[he]}),u.channelMediaRelayController&&(u.channelMediaRelayController.dispose(),u.channelMediaConfig=null,u.channelMediaRelayController=null),u.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(he,null,L.CHANNEL_MEDIA_RELAY_ERROR[he]);case 18:u.channelMediaConfig=ce;case 19:case"end":return K.stop()}},$,null,[[2,7]])}));return function($){return p.apply(this,arguments)}}(),u.stopChannelMediaRelay=S()(b.a.mark(function p(){var ce;return b.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(u.channelMediaRelayController){fe.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return fe.prev=2,fe.next=5,u.channelMediaRelayController.stopChannelMediaRelay();case 5:fe.next=17;break;case 7:throw fe.prev=7,fe.t0=fe.catch(2),E.default.debug("[".concat(u.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),ce=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",u.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[ce]}),u.channelMediaRelayController&&(u.channelMediaRelayController.dispose(),u.channelMediaConfig=null,u.channelMediaRelayController=null),u.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(ce,null,L.CHANNEL_MEDIA_RELAY_ERROR[ce]);case 17:u.channelMediaConfig=null,u.channelMediaRelayController=null;case 19:case"end":return fe.stop()}},p,null,[[2,7]])})),u.sendMetadata=function(p,$){u.makeRequest({_type:"send_metadata",_message:{session_id:u.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(p)))}},function(){E.default.debug("[".concat(u.clientId,'] send metadata "').concat(p,'" success')),$&&$(null)},function(ce){E.default.error("[".concat(u.clientId,'] send metadata "').concat(p,'" failed'),ce),$&&$(ce)})},u._reportWebsocketCloseEvent=function(p,$){try{var ce=k.report.getSessionStartTime(u.joinInfo.sid),fe=Date.now();k.report.webSocketQuit({lts:fe,sid:u.joinInfo.sid,cname:u.joinInfo.cname,cid:u.joinInfo.cid,uid:u.joinInfo.uid,elapse:fe-ce,succ:p,errorCode:$,ip:null})}catch(he){E.default.debug("[".concat(u.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(he))}};var V=function(){E.default.debug("[".concat(u.clientId,"] Reconnect gateway")),u.state=Te,u.socket.close(),Ae(),u.reconnectMode="recover",u.state=Ee,Be()};u.recover=V;var Ae=function(){for(var p in u.dispatchEvent({type:"before-clear-connection"}),u.timers)u.timers.hasOwnProperty(p)&&clearInterval(u.timers[p]);for(var p in u.remoteStreams)if(u.remoteStreams.hasOwnProperty(p)){var $=u.remoteStreams[p],ce=Object(P.a)({type:"stream-removed",uid:$.getId(),stream:$});u.dispatchEvent(ce)}u.p2ps.clear(),ie(),Ue(),clearInterval(u.pingTimer)};u.rejoin=function(){u.socket&&(clearInterval(u.pingTimer),u.socket.close(),u.socket=void 0),u.state=Ee,Be()};var Be=function(p,$){u.dispatchEvent(Object(P.a)({type:"rejoin-start"})),p=p||function(ce){E.default.info("[".concat(u.clientId,"] User ").concat(ce," is re-joined to ").concat(u.joinInfo.cname)),u.dispatchEvent(Object(P.a)({type:"rejoin"})),u.channelMediaConfig&&u.startChannelMediaRelay(u.channelMediaConfig).then(function(){E.default.debug("[".concat(u.clientId,"] restartChannelMediaRelay success"))}).catch(function(fe){E.default.debug("[".concat(u.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(fe)))}),u.liveStreams&&u.liveStreams.size&&u.liveStreams.forEach(function(fe,he){fe&&u.setLiveTranscoding(u.transcoding),u.startLiveStreaming(he,fe)}),u.injectLiveStreams&&u.injectLiveStreams.size&&u.injectLiveStreams.forEach(function(fe,he){u.addInjectStreamUrl(he,fe)})},$=$||function(ce){E.default.error("[".concat(u.clientId,"] Re-join to channel failed "),ce),u.dispatchEvent(Object(P.e)({type:"error",reason:ce}))},u.key?(++u.rejoinAttempt,u.join(u.joinInfo,u.key,p,$)):E.default.error("[".concat(u.clientId,"] Connection recover failed [Invalid channel key]"))},ke=function(p,$,ce){if(u.onConnect=$,u.socket){if(u.dispatchEvent({type:"reconnect"}),"retry"===u.reconnectMode)E.default.debug("[".concat(u.clientId,"] Retry current gateway")),u.socket.reconnect();else if("tryNext"===u.reconnectMode)E.default.debug("[".concat(u.clientId,"] Try next gateway")),u.socket.connectNext();else if("recover"===u.reconnectMode){E.default.debug("[".concat(u.clientId,"] Recover gateway")),E.default.debug("[".concat(u.clientId,"] Try to reconnect choose server and get gateway list again ")),u.reconnectingCS=!0;var fe=u.joinInfo&&u.joinInfo.sid;Object(U.getGatewayList)(u.joinInfo,function(K){E.default.debug("[".concat(u.clientId,"] session:  ").concat(fe," get gateway list success")),u.joinInfo.apResponse=K.res,u.reconnectingCS?u.socket.replaceHost(K.gateway_addr):E.default.debug("[".concat(u.clientId,"] session:  ").concat(fe," already leave"))})}}else u.socket=function(B,z){var Q={connect:function(){z.host=B,Q.signal=Y(z),Q.on=Q.signal.on,Q.dispatchEvent=Q.signal.dispatchEvent,Q.signal.on("onopen",function(ge){Q.signal.onEvent=function(se){Q.dispatchEvent(Object(P.d)({type:se.event,msg:se}))},Q.dispatchEvent(Object(P.d)({type:"connect",msg:ge}))}),Q.signal.on("onError",function(ge){onError(ge.msg.code,"error")})},getLastMsgTime:function(){return Q.signal&&Q.signal.lastMsgTime},getSendBytes:function(){return Q.signal.getSendBytes()},getRecvBytes:function(){return Q.signal.getRecvBytes()},getDuration:function(){return Q.signal.getDuration()},disconnect:function(){Q.signal.disconnect()},close:function(){Q.signal.close()},getURL:function(){return Q.signal.getURL()},reconnect:function(){Q.signal.reconnect()},connectNext:function(){Q.signal.connectNext()},replaceHost:function(ge){Q.signal.replaceHost(ge)},emitSimpleMessage:function(ge,se){Q.signal.sendSignalCommand(ge,se)},emitRequest:function(ge,se){Q.signal.sendRequest(ge,se)},emitReport:function(ge){Q.signal.sendReport(ge)}};return Q.connect(),Q}(p.gatewayAddr,{sid:u.joinInfo.sid,clientId:u.clientId,proxyServerType:u.joinInfo.proxyServerType}),u.socket.on("start-connection",function(K){u.ticket=K&&K.msg&&K.msg.ticket}),u.socket.on("on_uplink_stats",function(K){var pe={};for(var me in K)pe[C(me)]=K[me];if(u.OutgoingAvailableBandwidth=pe.uplink_available_bandwidth,u.localStreams[u.uid]){var be=u.localStreams[u.uid].uplinkStats;be&&be.period_fir===pe.period_fir||E.default.debug("[".concat(u.clientId,"]: Period fir change to: ").concat(pe.period_fir)),u.localStreams[u.uid].uplinkStats=pe}}),u.socket.on("connect",function(){u.dispatchEvent({type:"connected"}),u.attemps=1,u.onConnect()}),u.socket.on("recover",function(){u.state=Ee,E.default.debug("[".concat(u.clientId,"] Try to reconnect choose server and get gateway list again ")),u.reconnectingCS=!0;var K=u.joinInfo&&u.joinInfo.sid;Object(U.getGatewayList)(u.joinInfo,function(pe){E.default.debug("[".concat(u.clientId,"] session:  ").concat(K," get gateway list success")),u.reconnectingCS?u.socket.replaceHost(pe.gateway_addr):E.default.debug("[".concat(u.clientId,"] session:  ").concat(K," already leave"))})}),u.socket.on("disconnect",function(K){if(E.default.debug("[".concat(u.clientId,"] Receive disconnect message")),u.state!==Te){u.state=Te,u._reportWebsocketCloseEvent(-1,re.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var pe=Object(P.e)({type:"error",reason:re.default.SOCKET_DISCONNECTED});if(u.dispatchEvent(pe),u.reconnectMode=0===u.p2ps.size?"tryNext":"retry",Ae(),u.channelMediaRelayController&&u.channelMediaRelayController.dispose(),u.channelMediaRelayController=null,1!=Q){var be=1e3*Math.min(30,Math.pow(2,u.attemps)-1);if(E.default.error("[".concat(u.clientId,"] Disconnect from server [").concat(JSON.stringify(K),"], attempt to recover [#").concat(u.attemps,"] after ").concat(be/1e3," seconds")),u.hasInvokeLeave)return E.default.debug("[".concat(u.clientId,"] No reconnection because Client.leave has been invoked")),void(u.hasInvokeLeave=!1);setTimeout(function(){u.attemps++,u.state=Ee,u.inChannelInfo&&Date.now()-u.inChannelInfo.joinAt>Object(N.getParameter)("TICKET_RENEW_TIMEOUT")?(E.default.debug("Recovering to renew ticket"),V()):Be()},be)}else{var ye=W.unregister(u);ye&&E.default.debug("[".concat(u.clientId,"] "),ye)}}}),u.socket.on("on_add_audio_stream",function(K){if(E.default.info("[".concat(u.clientId,"] Newly added audio stream with uid ").concat(K.uid)),u.joinInfo.stringUid&&"string"!=typeof K.uid&&E.default.error("StringUID is Mixed with UintUID"),u.remoteStreamsInChannel.has(K.uid)||u.remoteStreamsInChannel.add(K.uid),void 0===u.remoteStreams[K.uid]){var pe=Object(O.a)({streamID:K.uid,local:!1,audio:K.audio,video:K.video,uintUID:K.uint_id||K.uid});pe.peerMuteVideo=!0,u.remoteStreams[K.uid]=pe;var me=Object(P.e)({type:"stream-added",stream:pe});u.dispatchEvent(me);var be=u.remoteMuteState[K.uid];be&&be.audio&&(me=Object(P.a)({type:"mute-audio",uid:K.uid}),u.dispatchEvent(me)),be&&be.video&&(me=Object(P.a)({type:"mute-video",uid:K.uid}),u.dispatchEvent(me))}k.report.onAddAudioStream(u.joinInfo.sid,{peerid:K.uint_id||K.uid,uid:u.uid})}),u.socket.on("on_update_stream",function(K){E.default.info("[".concat(u.clientId,"] on_update_stream:"),K);var pe=u.remoteStreams[K.uid];if(u.joinInfo.stringUid&&"string"!=typeof K.uid&&E.default.error("StringUID is Mixed with UintUID"),pe){pe.audio=K.audio,pe.video=K.video,pe.screen=K.screen,pe.pc&&u._adjustPCMuteStatus(pe);var me=Object(P.e)({type:"stream-updated",stream:pe});u.dispatchEvent(me)}else E.default.debug("[".concat(u.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(K.uid));k.report.onUpdateStream(u.joinInfo.sid,{peerid:K.uint_id||K.uid,audio:K.audio,video:K.video,uid:u.uid})}),u.socket.on("on_add_video_stream",function(K){if(E.default.info("[".concat(u.clientId,"] Newly added remote stream with uid ").concat(K.uid,".")),u.joinInfo.stringUid&&"string"!=typeof K.uid&&E.default.error("StringUID is Mixed with UintUID"),u.remoteStreamsInChannel.has(K.uid)||u.remoteStreamsInChannel.add(K.uid),void 0===u.remoteStreams[K.uid]){var pe=Object(O.a)({streamID:K.uid,local:!1,audio:K.audio,video:K.video,uintUID:K.uint_id||K.uid});u.remoteStreams[K.uid]=pe;var me=Object(P.e)({type:"stream-added",stream:pe});u.dispatchEvent(me);var be=u.remoteMuteState[K.uid];be&&be.audio&&(me=Object(P.a)({type:"mute-audio",uid:K.uid}),u.dispatchEvent(me)),be&&be.video&&(me=Object(P.a)({type:"mute-video",uid:K.uid}),u.dispatchEvent(me))}else{var ye=u.remoteStreams[K.uid];if(ye.video=!0,ye.peerMuteVideo=!1,ye.pc&&u._adjustPCMuteStatus(ye),E.default.info("[".concat(u.clientId,"] Stream changed: enable video ").concat(K.uid)),void 0!==ye.stream&&ye.isPlaying()){var Oe=ye.player.elementID;ye.stop(),ye.play(Oe,ye.playOptions)}}k.report.onAddVideoStream(u.joinInfo.sid,{peerid:K.uint_id||K.uid,uid:u.uid})}),u.socket.on("on_remove_stream",function(K){E.default.info("[".concat(u.clientId,"] on_remove_stream:"),K),u.remoteStreamsInChannel.has(K.uid)&&u.remoteStreamsInChannel.delete(K.uid);var pe=u.remoteStreams[K.uid];if(pe){delete u.remoteStreams[K.uid],delete u.remoteMuteState[K.uid];var me=Object(P.e)({type:"stream-removed",stream:pe});u.dispatchEvent(me),pe.close(),void 0!==pe.pc&&(pe.pc.close(),pe.pc=void 0,u.p2ps.delete(pe.p2pId)),k.report.onRemoveStream(u.joinInfo.sid,{peerid:K.uint_id||K.uid,uid:u.uid})}else E.default.error("ERROR stream ",K.uid," not found onRemoveStream ",K)}),u.socket.on("on_publish_stream",function(K){E.default.info("[".concat(u.clientId,"] on_publish_stream:"),K),u.dispatchEvent({type:"streamPublished",stream:u.localStreams[K.uid],proxy:K.proxy}),k.report.reportApiInvoke(u.joinInfo.sid,{name:"on_publish_stream",options:{proxy:K.proxy}})()}),u.socket.on("mute_audio",function(K){E.default.info("[".concat(u.clientId,"] rcv peer mute audio: ").concat(K.uid)),u.remoteMuteState[K.uid]=u.remoteMuteState[K.uid]||{audio:!1,video:!1},u.remoteMuteState[K.uid].audio=!0;var pe=Object(P.a)({type:"mute-audio",uid:K.uid}),me=u.remoteStreams[K.uid];me?(me.peerMuteAudio=!0,me.pc&&u._adjustPCMuteStatus(me),u.dispatchEvent(pe)):E.default.debug("Ignoring event ".concat(K.type),K)}),u.socket.on("unmute_audio",function(K){E.default.info("[".concat(u.clientId,"] rcv peer unmute audio: ").concat(K.uid)),u.remoteMuteState[K.uid]=u.remoteMuteState[K.uid]||{audio:!1,video:!1},u.remoteMuteState[K.uid].audio=!1;var pe=Object(P.a)({type:"unmute-audio",uid:K.uid}),me=u.remoteStreams[K.uid];me?(me.peerMuteAudio=!1,me.pc&&u._adjustPCMuteStatus(me),u.dispatchEvent(pe)):E.default.debug("Ignoring event ".concat(K.type),K)}),u.socket.on("mute_video",function(K){E.default.info("[".concat(u.clientId,"] rcv peer mute video: ").concat(K.uid)),u.remoteMuteState[K.uid]=u.remoteMuteState[K.uid]||{audio:!1,video:!1},u.remoteMuteState[K.uid].video=!0;var pe=Object(P.a)({type:"mute-video",uid:K.uid}),me=u.remoteStreams[K.uid];me?(me.peerMuteVideo=!0,me.player&&(me.player.peerVideoReady=!1),me.pc&&u._adjustPCMuteStatus(me),u.dispatchEvent(pe)):E.default.debug("Ignoring event ".concat(K.type),K)}),u.socket.on("unmute_video",function(K){E.default.info("[".concat(u.clientId,"] rcv peer unmute video: ").concat(K.uid)),u.remoteMuteState[K.uid]=u.remoteMuteState[K.uid]||{audio:!1,video:!1},u.remoteMuteState[K.uid].video=!1;var pe=Object(P.a)({type:"unmute-video",uid:K.uid}),me=u.remoteStreams[K.uid];me?(me.peerMuteVideo=!1,me.pc&&u._adjustPCMuteStatus(me),u.dispatchEvent(pe)):E.default.debug("Ignoring event ".concat(K.type),K)}),u.socket.on("on_crypt_error",function(K){E.default.warning("[".concat(u.clientId,"] stream crypt error"));var pe=Object(P.a)({type:"crypt-error",cryptType:K.crypt_type});u.dispatchEvent(pe)}),u.socket.on("on_user_banned",function(K){E.default.info("[".concat(u.clientId,"] user banned uid: ").concat(K.uid," error: ").concat(K.error_code));var pe=Object(P.a)({type:"client-banned",uid:K.uid,attr:K.error_code});u.dispatchEvent(pe),Q=!0}),u.socket.on("on_stream_fallback_update",function(K){E.default.info("[".concat(u.clientId,"] stream fallback peerId: ").concat(K.stream_id," type: ").concat(K.stream_type));var pe=Object(P.a)({type:"stream-fallback",uid:K.stream_id,stream:K.stream_id,attr:K.stream_type});u.dispatchEvent(pe)}),u.socket.on("stream_recover",function(K){E.default.info("[".concat(u.clientId,"] stream recover uid: ").concat(K.id," peerId: ").concat(K.peerid," type: ").concat(K.type));var pe=Object(P.a)({type:"stream-recover",uid:K.id,stream:K.peerid,attr:K.type});u.dispatchEvent(pe)}),u.socket.on("on_p2p_lost",function(K){E.default.debug("[".concat(u.clientId,"] p2plost: "),K,"p2ps:",u.p2ps);var pe,me="DTLS failed";(pe=u.localStreams[K.uid]||u.remoteStreams[K.uid])?(pe.pc&&pe.pc.offerCandidates&&0===pe.pc.offerCandidates.length&&(me="NO_CANDIDATES_IN_OFFER"),"publish"===K.event&&k.report.publish(u.joinInfo.sid,{lts:pe.publishLTS,succ:!1,audio:pe.hasAudio(),video:pe.hasVideo(),screenshare:pe.hasScreen(),audioName:pe.hasAudio()&&pe.audioName,videoName:pe.hasVideo()&&pe.videoName,screenName:pe.hasScreen()&&pe.screenName,ec:me,publishRequestid:u.publishRequestId||0,p2pid:u.p2ps.get(pe.getId())}),"subscribe"===K.event&&k.report.subscribe(u.joinInfo.sid,{lts:pe.subscribeLTS,succ:!1,video:pe.subscribeOptions&&pe.subscribeOptions.video,audio:pe.subscribeOptions&&pe.subscribeOptions.audio,peerid:K.uid+"",ec:me,subscribeRequestid:u.subscribeRequestId.get(pe.getId())||0,p2pid:u.p2ps.get(pe.getId())})):E.default.warning("P2PLost Stream Not found",K),E.default.debug("[".concat(u.clientId,"] p2plost:"),K.p2pid),(pe=u.p2ps.get(K.p2pid))&&(u.p2ps.delete(K.p2pid),pe.local?u.dispatchEvent(Object(P.a)({type:"pubP2PLost",stream:pe,attr:me})):u.remoteStreams[pe.getId()]&&u.dispatchEvent(Object(P.a)({type:"subP2PLost",stream:pe,attr:me})))}),u.socket.on("on_token_privilege_will_expire",function(K){E.default.debug("[".concat(u.clientId,"] Received Message onTokenPrivilegeWillExpire")),u.dispatchEvent(Object(P.a)({type:"onTokenPrivilegeWillExpire"}))}),u.socket.on("on_token_privilege_did_expire",function(){E.default.warning("[".concat(u.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),u.closeGateway(),u.dispatchEvent(Object(P.a)({type:"onTokenPrivilegeDidExpire"}))}),u.socket.on("enable_local_video",function(K){E.default.info("[".concat(u.clientId,"] enable_local_video:"),K),u.dispatchEvent(Object(P.a)({type:"enable-local-video",uid:K.uid}))}),u.socket.on("disable_local_video",function(K){E.default.info("[".concat(u.clientId,"] disable_local_video:"),K),u.dispatchEvent(Object(P.a)({type:"disable-local-video",uid:K.uid}))}),u._doWithAction=function(K,pe,me){var be,ye;"tryNext"===K?(be=pe,ye=me,E.default.debug("[".concat(u.clientId,"] Connect next gateway")),u.state=Te,u.socket.close(),Ae(),u.reconnectMode="tryNext",u.state=Ee,Be(be,ye)):"retry"===K?function(be,ye){E.default.debug("[".concat(u.clientId,"] Reconnect gateway")),u.state=Te,u.socket.close(),Ae(),u.reconnectMode="retry",u.state=Ee,Be(be,ye)}(pe,me):"quit"===K?(E.default.debug("[".concat(u.clientId,"] quit gateway")),u.state=Te,u.socket.close(),Ae()):"recover"===K&&V()},u.socket.on("on_notification",function(K){if(E.default.debug("[".concat(u.clientId,"] Receive notification: "),K),"ERR_JOIN_BY_MULTI_IP"===re.GatewayErrorCode[K.code])return u.dispatchEvent({type:"onMultiIP",option:K.option});K.detail?u._doWithAction(s[re.GatewayErrorCode[K.code]]):K.action&&u._doWithAction(K.action)}),u.socket.on("on_user_offline",function(K){E.default.info("[".concat(u.clientId,"] on_user_offline:"),K);var pe=Object(P.a)({type:"peer-leave",uid:K.uid});if(u.remoteStreamsInChannel.has(K.uid)&&u.remoteStreamsInChannel.delete(K.uid),u.remoteStreams.hasOwnProperty(K.uid)&&(pe.stream=u.remoteStreams[K.uid]),pe.reason=K.reason,u.dispatchEvent(pe),E.default.info("[".concat(u.clientId,"] remove remoteMuteState "),K.uid),delete u.remoteMuteState[K.uid],u.remoteStreams.hasOwnProperty(K.uid)){E.default.info("[".concat(u.clientId,"] closing stream on peer leave"),K.uid);var me=u.remoteStreams[K.uid];me.close(),delete u.remoteStreams[K.uid],k.report.onRemoveStream(u.joinInfo.sid,{peerid:K.uint_id||K.uid,uid:u.uid}),void 0!==me.pc&&(me.pc.close(),me.pc=void 0,u.p2ps.delete(me.p2pId))}u.timers.hasOwnProperty(K.uid)&&(clearInterval(u.timers[K.uid]),clearInterval(u.timers[K.uid]+"_RelatedStats"),delete u.timers[K.uid]),null!=u.audioLevel[K.uid]&&delete u.audioLevel[K.uid],null!=u.timer_counter[K.uid]&&delete u.timer_counter[K.uid]}),u.socket.on("onUplinkStats",function(K){}),u.socket.on("liveStreamingStarted",function(K){var pe=Object(P.c)({type:"liveStreamingStarted",url:K.url});u.dispatchEvent(pe)}),u.socket.on("liveStreamingFailed",function(K){var pe=Object(P.c)({type:"liveStreamingFailed",url:K.url});u.dispatchEvent(pe)}),u.socket.on("liveStreamingStopped",function(K){var pe=Object(P.c)({type:"liveStreamingStopped",url:K.url});u.dispatchEvent(pe)}),u.socket.on("liveTranscodingUpdated",function(K){var pe=Object(P.c)({type:"liveTranscodingUpdated",reason:K.reason});u.dispatchEvent(pe)}),u.socket.on("streamInjectedStatus",function(K){var pe=Object(P.c)({type:"streamInjectedStatus",url:K.url,uid:K.uid,status:K.status});u.dispatchEvent(pe)}),u.socket.on("on_user_online",function(K){u.joinInfo.stringUid&&"string"!=typeof K.uid&&E.default.error("StringUID is Mixed with UintUID"),u.dispatchEvent({type:"peer-online",uid:K.uid})}),u.socket.on("receive_metadata",function(K){u.joinInfo.stringUid&&"string"!=typeof K.uid&&E.default.error("StringUID is Mixed with UintUID");var pe=decodeURIComponent(escape(window.atob(K.metadata)));E.default.debug("[".concat(u.clientId,"] received ").concat(K.uid," metadata: ").concat(pe)),u.dispatchEvent({type:"receive-metadata",uid:K.uid,metadata:pe})})},Ve=function(p,$){if(void 0!==u.socket)try{u.socket.emitSimpleMessage(p,function(ce,fe){$&&$(ce,fe)})}catch(ce){E.default.error("[".concat(u.clientId,"] Error in sendSimpleSdp [").concat(ce,"]"))}else E.default.error("[".concat(u.clientId,"] Error in sendSimpleSdp [socket not ready]"))},Ue=function(){for(var p in u.localStreams)if(void 0!==u.localStreams[p]){var $=u.localStreams[p];delete u.localStreams[p],void 0!==$.pc&&($.pc.close(),$.pc=void 0)}},ie=function(){for(var p in u.remoteStreamsInChannel.clear(),u.remoteStreams)if(u.remoteStreams.hasOwnProperty(p)){var $=u.remoteStreams[p];$.isPlaying()&&$.stop(),$.close(),delete u.remoteStreams[p],void 0!==$.pc&&($.pc.close(),$.pc=void 0)}};return u},W={_gatewayClients:{},register:function(B,z){if(!z.uid){var Q="NO_UID_PROVIDED";return E.default.error("[".concat(B.clientId,"] "),Q,z),Q}return z.cname?this._gatewayClients[z.cname]&&this._gatewayClients[z.cname][z.uid]&&this._gatewayClients[z.cname][z.uid]!==B?(Q="UID_CONFLICT",E.default.error("[".concat(B.clientId,"] "),Q,z),Q):(E.default.debug("[".concat(B.clientId,"] register client Channel"),z.cname,"Uid",z.uid),this._gatewayClients[z.cname]||(this._gatewayClients[z.cname]={}),this._gatewayClients[z.cname][z.uid]=B,null):(Q="NO_CHANNEL_PROVIDED",E.default.error("[".concat(B.clientId,"] "),Q,z),Q)},unregister:function(B){var z=B&&B.uid,Q=B.joinInfo&&B.joinInfo.cname;if(!z||!Q){var ge="INVALID_GATEWAYCLIENT";return E.default.error("[".concat(B.clientId,"] "),ge),ge}if(this._gatewayClients[Q]&&this._gatewayClients[Q][z])return this._gatewayClients[Q][z]!==B?(ge="GATEWAYCLIENT_UID_CONFLICT",E.default.error("[".concat(B.clientId,"] "),ge),ge):(E.default.debug("[".concat(B.clientId,"] unregister client "),B.uid),delete this._gatewayClients[Q][z],null);ge="GATEWEAY_CLIENT_UNREGISTERED",E.default.error("[".concat(B.clientId,"] "),ge)}};le.DISCONNECTED=0,le.CONNECTING=1,le.CONNECTED=2,le.DISCONNECTING=3,le.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},X.a=le},function(oe,X,x){"use strict";x.r(X),x.d(X,"post",function(){return m}),x.d(X,"postFormData",function(){return d}),x.d(X,"shouldUseHttps",function(){return g}),x.d(X,"getHTTPSendBytes",function(){return w}),x.d(X,"getHTTPRecvBytes",function(){return v}),x.d(X,"resetHTTPByetsCount",function(){return A});var M=x(2),b=x(10),R=0,S=0,w=function(){return R},v=function(){return S},A=function(){R=0,S=0},d=function(O,P,I,E,k){var D=new XMLHttpRequest;if(D.timeout=P.timeout||Object(M.getParameter)("HTTP_CONNECT_TIMEOUT"),D.open("POST",O,!0),k)for(var j in k)"withCredentials"==j?D.withCredentials=!0:D.setRequestHeader(j,k[j]);D.onload=function(te){S+=Object(b.lengthInUtf8Bytes)(D.responseText),200!==D.status?E&&E({httpErrorCode:"httpcode-xhr.status"},O):I&&I(D.responseText)},D.onerror=function(te){E&&E(te,O)},D.ontimeout=function(te){E&&E(te,O)};var N=JSON.stringify(P);R+=Object(b.lengthInUtf8Bytes)(N);var Y=new FormData;Y.append("request",N),D.send(Y)},m=function(O,P,I,E,k){var D=new XMLHttpRequest;if(D.timeout=P.timeout||Object(M.getParameter)("HTTP_CONNECT_TIMEOUT"),D.open("POST",O,!0),D.setRequestHeader("Content-type","application/json; charset=utf-8"),k)for(var j in k)"withCredentials"==j?D.withCredentials=!0:D.setRequestHeader(j,k[j]);D.onload=function(Y){S+=Object(b.lengthInUtf8Bytes)(D.responseText),200!==D.status?E&&E({httpErrorCode:"httpcode-xhr.status"},O):I&&I(D.responseText)},D.onerror=function(Y){E&&E(Y,O)},D.ontimeout=function(Y){E&&E(Y,O)};var N=JSON.stringify(P);R+=Object(b.lengthInUtf8Bytes)(N),D.send(N)},g=function(){return"https:"==document.location.protocol}},function(oe,X,x){"use strict";x.r(X),x.d(X,"RTCPeerConnection",function(){return J}),x.d(X,"getUserMedia",function(){return S}),x.d(X,"attachMediaStream",function(){return w}),x.d(X,"reattachMediaStream",function(){return v}),x.d(X,"setSrcObject",function(){return O}),x.d(X,"getSrcObject",function(){return P}),x.d(X,"webrtcDetectedBrowser",function(){return A}),x.d(X,"webrtcDetectedVersion",function(){return d}),x.d(X,"webrtcMinimumVersion",function(){return m}),x.d(X,"webrtcTesting",function(){return re}),x.d(X,"webrtcUtils",function(){return k});var M=x(11),b=x.n(M),R=x(5),S=null,w=null,v=null,A=null,d=null,m=null,g=null,O=null,P=null,I=null,E={addStream:null},k={log:function(){},extractVersion:function(U,y,s){var H=U.match(y);return H&&H.length>=s&&parseInt(H[s])}};if("object"==("undefined"==typeof window?"undefined":b()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(O=function(U,y){"mozSrcObject"in U?U.mozSrcObject=y:(U._srcObject=y,U.src=y?URL.createObjectURL(y):null)},P=function(U){return"mozSrcObject"in U?U.mozSrcObject:U._srcObject}):(O=function(U,y){U.srcObject=y},P=function(U){return U.srcObject}),S=window.navigator&&window.navigator.getUserMedia):(O=function(U,y){U.srcObject=y},P=function(U){return U.srcObject}),w=function(U,y){O(U,y)},v=function(U,y){O(U,P(y))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var D in k.log("This appears to be Firefox"),A="firefox",d=k.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),m=31,I=mozRTCPeerConnection,E)E[D]=I.prototype[D];if(g=function(U,y){if(d<38&&U&&U.iceServers){for(var s=[],H=0;H<U.iceServers.length;H++){var _=U.iceServers[H];if(_.hasOwnProperty("urls"))for(var c=0;c<_.urls.length;c++){var q={url:_.urls[c]};0===_.urls[c].indexOf("turn")&&(q.username=_.username,q.credential=_.credential),s.push(q)}else s.push(U.iceServers[H])}U.iceServers=s}var f=new I(U,y);for(var C in E)f[C]=E[C];return f},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),S=function(U,y,s){var H=function(_){if("object"!==b()(_)||_.require)return _;var c=[];return Object.keys(_).forEach(function(q){if("require"!==q&&"advanced"!==q&&"mediaSource"!==q){var f=_[q]="object"===b()(_[q])?_[q]:{ideal:_[q]};if(void 0===f.min&&void 0===f.max&&void 0===f.exact||c.push(q),void 0!==f.exact&&("number"==typeof f.exact?f.min=f.max=f.exact:_[q]=f.exact,delete f.exact),void 0!==f.ideal){_.advanced=_.advanced||[];var C={};C[q]="number"==typeof f.ideal?{min:f.ideal,max:f.ideal}:f.ideal,_.advanced.push(C),delete f.ideal,Object.keys(f).length||delete _[q]}}}),c.length&&(_.require=c),_};return d<38&&(k.log("spec: "+JSON.stringify(U)),U.audio&&(U.audio=H(U.audio)),U.video&&(U.video=H(U.video)),k.log("ff37: "+JSON.stringify(U))),navigator.mozGetUserMedia(U,y,s)},navigator.getUserMedia=S,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:te,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(U){U([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},d<41){var j=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return j().then(void 0,function(U){if("NotFoundError"===U.name)return[];throw U})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var D in k.log("This appears to be Chrome"),A="chrome",d=k.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),m=38,I=webkitRTCPeerConnection,E)E[D]=I.prototype[D];g=function(U,y){U&&U.iceTransportPolicy&&(U.iceTransports=U.iceTransportPolicy);var s=new I(U,y);for(var H in E)s[H]=E[H];var _=s.getStats.bind(s);return s.getStats=function(c,q,f){var C=arguments;C.length>0&&"function"==typeof c&&(q?(f=q,q=c,C=[c=null,q,f]):(q=c,C=[c=null,q]));var L=function(ee){var le={};return ee.result().forEach(function(W){var B={id:W.id,timestamp:W.timestamp,type:W.type};W.names().forEach(function(z){B[z]=W.stat(z)}),le[B.id]=B}),le};if(C.length>=2){var Z=function(ee){C[1](L(ee))};return _.apply(this,[Z,C[0]])}return _()},s},["createOffer","createAnswer"].forEach(function(U){var y=webkitRTCPeerConnection.prototype[U];webkitRTCPeerConnection.prototype[U]=function(){var s=this;if(arguments.length<1||1===arguments.length&&"object"===b()(arguments[0])){var H=1===arguments.length?arguments[0]:void 0;return new Promise(function(_,c){y.apply(s,[_,c,H])})}return y.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(U){var y=webkitRTCPeerConnection.prototype[U];webkitRTCPeerConnection.prototype[U]=function(){var s=arguments,H=this;return new Promise(function(_,c){y.apply(H,[s[0],function(){_(),s.length>=2&&s[1].apply(null,[])},function(q){c(q),s.length>=3&&s[2].apply(null,[q])}])})}});var N=function(U){if("object"!==b()(U)||U.mandatory||U.optional)return U;var y={};return Object.keys(U).forEach(function(s){if("require"!==s&&"advanced"!==s&&"mediaSource"!==s){var H="object"===b()(U[s])?U[s]:{ideal:U[s]};void 0!==H.exact&&"number"==typeof H.exact&&(H.min=H.max=H.exact);var _=function(q,f){return q?q+f.charAt(0).toUpperCase()+f.slice(1):"deviceId"===f?"sourceId":f};if(void 0!==H.ideal){y.optional=y.optional||[];var c={};"number"==typeof H.ideal?(c[_("min",s)]=H.ideal,y.optional.push(c),(c={})[_("max",s)]=H.ideal,y.optional.push(c)):(c[_("",s)]=H.ideal,y.optional.push(c))}void 0!==H.exact&&"number"!=typeof H.exact?(y.mandatory=y.mandatory||{},y.mandatory[_("",s)]=H.exact):["min","max"].forEach(function(q){void 0!==H[q]&&(y.mandatory=y.mandatory||{},y.mandatory[_(q,s)]=H[q])})}}),U.advanced&&(y.optional=(y.optional||[]).concat(U.advanced)),y};if(S=function(U,y,s){return U.audio&&(U.audio=N(U.audio)),U.video&&(U.video=N(U.video)),k.log("chrome: "+JSON.stringify(U)),navigator.webkitGetUserMedia(U,y,s)},navigator.getUserMedia=S,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:te,enumerateDevices:function(){return new Promise(function(U){var y={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(s){U(s.map(function(H){return{label:H.label,kind:y[H.kind],deviceId:H.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){if((Object(R.getBrowserVersion)()?Number(Object(R.getBrowserVersion)().split(".")[0]):void 0)<46){var Y=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(U){return k.log("spec:   "+JSON.stringify(U)),U.audio=N(U.audio),U.video=N(U.video),k.log("chrome: "+JSON.stringify(U)),Y(U)}}}else navigator.mediaDevices.getUserMedia=function(U){return te(U)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){k.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){k.log("Dummy mediaDevices.removeEventListener called.")}),w=function(U,y){d>=43?O(U,y):void 0!==U.src?U.src=y?URL.createObjectURL(y):null:k.log("Error attaching stream to element.")},v=function(U,y){d>=43?O(U,P(y)):U.src=y.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(k.log("This appears to be Edge"),A="edge",d=k.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),m=12):k.log("Browser does not appear to be WebRTC-capable");else k.log("This does not appear to be a browser"),A="not a browser";function te(U){return new Promise(function(y,s){S(U,y,s)})}var J,re={};try{Object.defineProperty(re,"version",{set:function(U){d=U}})}catch(U){}g?J=g:"undefined"!=typeof window&&(J=window.RTCPeerConnection)},function(oe,X,x){"use strict";var M=x(12),b=x.n(M),R=x(17),S=x.n(R),w=x(51),v=x.n(w),A=x(5),d=x(1),m=x(3),g=x(0),O=(x(25),x(2),x(4),x(52)),P=x.n(O),I=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function E(c){for(var q=new Uint8Array([99,114,121,112,116,105,105]),f=q.length,C=c,L=C.length,Z=new Uint8Array(L),ee=new Uint8Array(256),le=0;le<256;le++)ee[le]=le;for(var W=0,B=0;B<256;B++){var z=[ee[W=(W+ee[B]+q[B%f])%256],ee[B]];ee[B]=z[0],ee[W]=z[1]}var ge=0;W=0;for(var se=0;se<0+L;se++){var ae=[ee[W=(W+ee[ge=(ge+1)%256])%256],ee[ge]];ee[ge]=ae[0],ee[W]=ae[1],se>=0&&(Z[se-0]=C[se-0]^ee[(ee[ge]+ee[W])%256])}var Se=String.fromCharCode.apply(null,Z);return Function("var winSize = 5; return `"+Se+"`")()}function k(c,q){var f=E(q),C=P.a.createProgramFromSources(c,[E(I),f]),L=c.getAttribLocation(C,"a_position"),Z=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,Z),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(L);var ee=2,le=c.FLOAT,W=!1,B=0,z=0;c.vertexAttribPointer(L,ee,le,W,B,z);var Q=c.getAttribLocation(C,"a_texCoord"),ge=c.createBuffer();return c.bindBuffer(c.ARRAY_BUFFER,ge),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(Q),c.vertexAttribPointer(Q,ee=2,le=c.FLOAT,W=!1,B=0,z=0),C}var D=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function j(c,q,f){var C=c.gl;this.program=k(C,D),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var L=C.getUniformLocation(this.program,"u_flipY");C.uniform1f(L,1)}}var N=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function Y(c,q,f){var C=c.gl,L=1/q,Z=1/f,ee=5;this.program=k(C,N),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var le=C.getUniformLocation(this.program,"u_flipY"),W=C.getUniformLocation(this.program,"u_singleStepOffset"),B=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform2f(W,L,Z),C.uniform1f(B,ee),C.uniform1f(le,1)},this.setParameters=function(le){void 0!==le.denoiseLevel&&(ee=le.denoiseLevel)},this.setSize=function(le,W){L=1/le,Z=1/W}}var te=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function J(c,q,f){var C=c.gl,L=1/q,Z=1/f,ee=5;this.program=k(C,te),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var le=C.getUniformLocation(this.program,"u_flipY"),W=C.getUniformLocation(this.program,"u_singleStepOffset"),B=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform2f(W,L,Z),C.uniform1f(B,ee),C.uniform1f(le,1)},this.setParameters=function(le){void 0!==le.denoiseLevel&&(ee=le.denoiseLevel)},this.setSize=function(le,W){L=1/le,Z=1/W}}var re=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function U(c,q,f){var C=c.gl,L=1/q,Z=1/f,ee=5;this.program=k(C,re),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var le=C.getUniformLocation(this.program,"u_flipY"),W=C.getUniformLocation(this.program,"u_singleStepOffset"),B=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform2f(W,L,Z),C.uniform1f(B,ee),C.uniform1f(le,1)},this.setParameters=function(le){void 0!==le.denoiseLevel&&(ee=le.denoiseLevel)},this.setSize=function(le,W){L=1/le,Z=1/W}}var y=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function s(c,q,f){var C=c.gl,L=5,Z=.1,ee=.5,le=175/180*3.141593,W=115/180*3.141593,B=173/180*3.141593,z=116/180*3.141593,Q=2.04203545,ge=0,se=0,ae=0,Se=[],Te=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Ee=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],_e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=k(C,y),this.setUniforms=function(){var Me=C.getUniformLocation(this.program,"u_flipY"),xe=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform1f(xe,L),C.uniform1f(Me,1);var u=C.getUniformLocation(this.program,"light");C.uniform1f(u,Z);var de=C.getUniformLocation(this.program,"redness");C.uniform1f(de,ee);var V=C.getUniformLocation(this.program,"skin_he_max"),Ae=C.getUniformLocation(this.program,"skin_he_min"),Be=C.getUniformLocation(this.program,"skin_hc_max"),ke=C.getUniformLocation(this.program,"skin_hc_min"),Ve=C.getUniformLocation(this.program,"skin_hc_axis"),Ue=C.getUniformLocation(this.program,"facts_rotate_c"),ie=C.getUniformLocation(this.program,"facts_rotate_le"),p=C.getUniformLocation(this.program,"facts_rotate_ge");C.uniform1f(V,le),C.uniform1f(Ae,W),C.uniform1f(Be,B),C.uniform1f(ke,z),C.uniform1f(Ve,Q),C.uniform1f(Ue,ge),C.uniform1f(ie,se),C.uniform1f(p,ae);var $=C.getUniformLocation(this.program,"u_originImage");C.activeTexture(C.TEXTURE2),C.bindTexture(C.TEXTURE_2D,c.inputTexture),C.uniform1i($,2);for(var ce=["lighten_lut"],fe=[C.TEXTURE3],he=0;he<ce.length;he++){var K=C.getUniformLocation(this.program,ce[he]);C.activeTexture(fe[he]),C.bindTexture(C.TEXTURE_2D,Se[he]),C.uniform1i(K,he+3)}},this.setParameters=function(Me){void 0!==Me.denoiseLevel&&(L=Me.denoiseLevel),void 0!==Me.lightLevel&&(Z=Me.lightLevel),void 0!==Me.rednessLevel&&this._updateRedness(ee=Me.rednessLevel),void 0!==Me.lighteningContrastLevel&&this._updateLut(Me.lighteningContrastLevel)},this._updateRedness=function(Me){var xe,u,de=3.141593,V=Me,Ae=V;V>1&&(V=1),V<0&&(V=0),Ae>1&&(Ae=1),Ae<0&&(Ae=0),ge=.8*V,Ae<.8&&(Ae=0),(Q=(117-4*Ae)/180*de)<(z=(116-4*Ae)/180*de)&&(Q=z),z<de/2&&(z=de/2),Q<de/2&&(Q=de/2),(W=(115-4*Ae)/180*de)<de/2&&(W=de/2),(B=173/180*de)>de&&(B=de),Q>de&&(Q=de),(le=175/180*de)>de&&(le=de),u=B-Q,ae=(xe=le-B)>.01?ge*u/xe:ge,u=Q-z,se=(xe=z-W)>.01?ge*u/xe:ge},this._updateLut=function(Me){var xe=null;0==Me&&(xe=Ee),1==Me&&(xe=_e),2==Me&&(xe=Te);for(var u=[new Uint8Array(xe)],de=[256],V=[1],Ae=0;Ae<u.length;Ae++)C.bindTexture(C.TEXTURE_2D,Se[Ae]),C.texImage2D(C.TEXTURE_2D,0,C.LUMINANCE,de[Ae],V[Ae],0,C.LUMINANCE,C.UNSIGNED_BYTE,u[Ae])},this._init=function(){for(var xe=[new Uint8Array(Ee)],u=[256],de=[1],V=0;V<xe.length;V++){var Ae=C.createTexture();C.bindTexture(C.TEXTURE_2D,Ae),C.texImage2D(C.TEXTURE_2D,0,C.LUMINANCE,u[V],de[V],0,C.LUMINANCE,C.UNSIGNED_BYTE,xe[V]),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.LINEAR),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.LINEAR),Se.push(Ae)}},this._init()}var H=!1;function _(){this.programs=[];var c=this,q=null,f=null;c.gl=null,c.inputTexture=null;var C=[],L=[],Z=0,ee=0;c._initGl=function(le,W){c.inputTexture=q.createTexture(),q.bindTexture(q.TEXTURE_2D,c.inputTexture),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR);for(var B=0;B<4;B++){var z=q.createTexture();q.bindTexture(q.TEXTURE_2D,z),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),B<2?q.texImage2D(q.TEXTURE_2D,0,q.RGBA,le,W,0,q.RGBA,q.UNSIGNED_BYTE,null):q.texImage2D(q.TEXTURE_2D,0,q.RGBA,W,le,0,q.RGBA,q.UNSIGNED_BYTE,null);var Q=q.createFramebuffer();q.bindFramebuffer(q.FRAMEBUFFER,Q),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,z,0),C.push(z),L.push(Q)}q.viewport(0,0,le,W),Z=le,ee=W},c.render=function(le){if(q){var W=0;ee==le.videoWidth&&Z===le.videoHeight&&(W=2),q.viewport(0,0,le.videoWidth,le.videoHeight),q.bindTexture(q.TEXTURE_2D,c.inputTexture),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,le);for(var B=H?c.programs.length-1:0,z=0;z<=B;z++){var Q=c.programs[z].program;q.useProgram(Q);var ge=q.getUniformLocation(Q,"u_image");c.programs[z].setUniforms(),q.bindFramebuffer(q.FRAMEBUFFER,L[W+z%2]),q.clearColor(0,0,0,1),q.clear(q.COLOR_BUFFER_BIT),q.drawArrays(q.TRIANGLES,0,6),q.activeTexture(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,C[W+z%2]),q.uniform1i(ge,0)}q.useProgram(f);var se=q.getUniformLocation(f,"u_flipY");q.uniform1f(se,-1),q.bindFramebuffer(q.FRAMEBUFFER,null),q.clearColor(0,0,0,1),q.clear(q.COLOR_BUFFER_BIT),q.drawArrays(q.TRIANGLES,0,6)}},c.setEnableBeauty=function(le){H=le},c.init=function(le,W,B){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");q=B.getContext("webgl"),c.gl=q,c._initGl(le,W),c.programs.push(new j(this,le,W)),c.programs.push(new Y(this,le,W)),c.programs.push(new J(this,le,W)),c.programs.push(new U(this,le,W)),c.programs.push(new s(this,le,W)),f=c.programs[0].program},c.release=function(){c.gl=null,q=null,f=null,c.inputTexture=null,c.programs=[],C=[],L=[]},c.setDenoiseLevel=function(le){c.programs.forEach(function(W){W.setParameters&&W.setParameters({denoiseLevel:le})})},c.setLightLevel=function(le){c.programs.forEach(function(W){W.setParameters&&W.setParameters({lightLevel:le})})},c.setRednessLevel=function(le){c.programs.forEach(function(W){W.setParameters&&W.setParameters({rednessLevel:le})})},c.setContrastLevel=function(le){c.programs.forEach(function(W){W.setParameters&&W.setParameters({lighteningContrastLevel:le})})},c.setSize=function(le,W){c.programs.forEach(function(B){B.setSize&&B.setSize(le,W)})}}_._instance=null,_.getInstance=function(){return _._instance||(_._instance=new _),_._instance},X.a={addVideoEffectCapability:function(c){var q;c.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},c._initVideoContext=function(){if(c.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!c.stream)throw new Error("Failed to init video context. Local Stream not initialized");c.videoEffect.originVideoTrack=c.stream.getVideoTracks()[0],c.attributes&&c.attributes.maxFrameRate&&(c.videoEffect.fps=c.attributes.maxFrameRate),c.videoEffect.videoContextInited=!0},c._renderWithWebGL=function(q){return new Promise(function(f){c.videoEffect.canvas||(c.videoEffect.canvas=document.createElement("canvas")),c.videoEffect.video||(c.videoEffect.video=document.createElement("video")),c.videoEffect.video.setAttribute("autoplay",""),c.videoEffect.video.setAttribute("muted",""),c.videoEffect.video.muted=!0,c.videoEffect.video.setAttribute("playsinline",""),c.videoEffect.video.setAttribute("style","display:none"),c.videoEffect.video.srcObject=q;var C=q.getVideoTracks()[0].getSettings(),L=C.width,Z=C.height;console.log("Width: ".concat(L,", Height: ").concat(Z)),c.videoEffect.canvas.setAttribute("width",L),c.videoEffect.canvas.setAttribute("height",Z),c.videoEffect.video.setAttribute("width",L),c.videoEffect.video.setAttribute("height",Z);var ee=_.getInstance();ee.init(c.videoEffect.video.width,c.videoEffect.video.height,c.videoEffect.canvas),ee.setDenoiseLevel(c.videoEffect.denoiseLevel),ee.setLightLevel(c.videoEffect.lightLevel),ee.setRednessLevel(c.videoEffect.rednessLevel),ee.setContrastLevel(c.videoEffect.lighteningContrastLevel),c.videoEffect.video.addEventListener("playing",function le(){var W=c.videoEffect.canvas.captureStream(c.videoEffect.fps);c.videoEffect.video.removeEventListener("playing",le,!0),f([W.getVideoTracks()[0],c.videoEffect.video])},!0),c.videoEffect.video.play()})},c._disableEffect=function(){c.videoEffect.videoContextInited||c._initVideoContext();var q=c.videoEffect.originVideoTrack;if(!q)return g.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(c.pc&&c.pc.peerConnection&&c.pc.peerConnection){var f=(c.pc.peerConnection&&c.pc.peerConnection.getSenders()).find(function(C){return C&&C.track&&"video"==C.track.kind});if(f&&f.replaceTrack&&q)return f.replaceTrack(q)}return Promise.resolve()},c._releaseEffect=function(){var q;return q=c.videoEffect.enableBeauty?c._disableEffect():Promise.resolve(),_.getInstance().release(),c.videoEffect.videoContextInited=!1,c.videoEffect.canvasVideoTrack=null,q},c._enableEffect=function(){return c.videoEffect.videoContextInited||c._initVideoContext(),c.videoEffect.originVideoTrack?c.videoEffect.canvasVideoTrack?(c._showEffectInLocalPlayer(),c._replaceWithCanvasTrack()):c._renderWithWebGL(c.stream).then(function(q){var f=v()(q,2),L=f[1];c.videoEffect.canvasVideoTrack=f[0];var Z=_.getInstance();return requestAnimationFrame(function ee(){c.videoEffect.enableBeauty&&Z.render(L),c.videoEffect.videoContextInited&&requestAnimationFrame(ee)}),A.isChrome()&&document.addEventListener("visibilitychange",function(){document,document.hidden?c.videoEffect.stopChromeBackgroundLoop=function(ee,le){var W=1/le,B=new AudioContext,z=B.createGain();z.gain.value=0,z.connect(B.destination),function ge(){var se=B.createOscillator();se.onended=ge,se.connect(z),se.start(0),se.stop(B.currentTime+W),c.videoEffect.enableBeauty&&Z.render(L),Q&&(se.onended=function(){B.close()})}();var Q=!1;return function(){Q=!0}}(0,c.videoEffect.fps):c.videoEffect.stopChromeBackgroundLoop&&(c.videoEffect.stopChromeBackgroundLoop(),c.videoEffect.stopChromeBackgroundLoop=null)},!1),c._showEffectInLocalPlayer(),c._replaceWithCanvasTrack()}):(g.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},c._showEffectInLocalPlayer=function(){if(c.player){var q=c.player.div.children[0];if("none"!==q.style.display&&(c.player.div.appendChild(c.videoEffect.canvas),"video"===q.tagName.toLowerCase())){var f=q.getAttribute("style");c.videoEffect.canvas.setAttribute("style",f),"none"!==q.style.display&&(q.style.display="none")}}},c._removeEffectFromLocalPlayer=function(){if(c.player&&c.player.div&&c.videoEffect.enableBeauty&&c.videoEffect.canvas){c.player.div.removeChild(c.videoEffect.canvas);var q=c.player.div.children[0];"video"===q.tagName.toLowerCase()&&(c.videoEffect.canvas.style.display="none",q.style.display="block")}},c._replaceWithCanvasTrack=function(){var q=null;return c.pc&&c.pc.peerConnection&&c.pc.peerConnection&&(q=(c.pc.peerConnection&&c.pc.peerConnection.getSenders()).find(function(f){return f&&f.track&&"video"==f.track.kind})),q&&q.replaceTrack&&c.videoEffect.canvasVideoTrack?q.replaceTrack(c.videoEffect.canvasVideoTrack):Promise.resolve()},c.setBeautyEffectOptions=(q=S()(b.a.mark(function f(C,L){var Z,ee=arguments;return b.a.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(Object(m.checkValidBoolean)(C,"enabled"),Z=_.getInstance(),c.videoEffect.enableBeauty==C){le.next=14;break}if(Z.setEnableBeauty(C),!C){le.next=9;break}return le.next=7,c._enableEffect();case 7:le.next=12;break;case 9:return c._removeEffectFromLocalPlayer(),le.next=12,c._releaseEffect();case 12:c.videoEffect.enableBeauty=C,d.report.reportApiInvoke(c.sid,{callback:null,options:ee,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(C){le.next=16;break}return le.abrupt("return");case 16:if(!L){le.next=20;break}Object(m.checkValidObject)(L,"options"),le.next=21;break;case 20:return le.abrupt("return");case 21:if(void 0!==L.smoothnessLevel&&(Object(m.checkValidFloatNumber)(L.smoothnessLevel,"smoothnessLevel",0,1),c.videoEffect.denoiseLevel=10*L.smoothnessLevel,c.videoEffect.denoiseLevel<.1&&(c.videoEffect.denoiseLevel=.1),Z.setDenoiseLevel(c.videoEffect.denoiseLevel)),void 0!==L.lighteningLevel&&(Object(m.checkValidFloatNumber)(L.lighteningLevel,"lighteningLevel",0,1),c.videoEffect.lightLevel=L.lighteningLevel/2,c.videoEffect.lightLevel<.01&&(c.videoEffect.lightLevel=.01),Z.setLightLevel(c.videoEffect.lightLevel)),void 0!==L.rednessLevel&&(Object(m.checkValidFloatNumber)(L.rednessLevel,"rednessLevel",0,1),c.videoEffect.rednessLevel=L.rednessLevel,c.videoEffect.rednessLevel<.01&&(c.videoEffect.rednessLevel=.01),Z.setRednessLevel(c.videoEffect.rednessLevel)),void 0===L.lighteningContrastLevel){le.next=29;break}if(0===L.lighteningContrastLevel||1===L.lighteningContrastLevel||2===L.lighteningContrastLevel){le.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:c.videoEffect.lighteningContrastLevel=parseFloat(L.lighteningContrastLevel),Z.setContrastLevel(c.videoEffect.lighteningContrastLevel);case 29:case"end":return le.stop()}},f)})),function(f,C){return q.apply(this,arguments)})},restoreVideoEffect:function(c){return c.videoEffect.enableBeauty?c._enableEffect():Promise.resolve()},disableVideoEffect:function(c){return c._releaseEffect?c._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(c){c.videoEffect.enableBeauty&&c.videoEffect.canvas&&c._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(c){c._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(c){return c.videoEffect.enableBeauty?c._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(c){return!!(c.videoEffect.enableBeauty&&c.videoEffect&&c.videoEffect.videoContextInited)&&(g.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(oe,X){function x(M,b,R,S,w,v,A){try{var d=M[v](A),m=d.value}catch(g){return void R(g)}d.done?b(m):Promise.resolve(m).then(S,w)}oe.exports=function(M){return function(){var b=this,R=arguments;return new Promise(function(S,w){var v=M.apply(b,R);function A(m){x(v,S,w,A,d,"next",m)}function d(m){x(v,S,w,A,d,"throw",m)}A(void 0)})}}},function(oe,X,x){"use strict";var M=x(38),b=Object.prototype.toString;function R(d){return"[object Array]"===b.call(d)}function S(d){return void 0===d}function w(d){return null!==d&&"object"==typeof d}function v(d){return"[object Function]"===b.call(d)}function A(d,m){if(null!=d)if("object"!=typeof d&&(d=[d]),R(d))for(var g=0,O=d.length;g<O;g++)m.call(null,d[g],g,d);else for(var P in d)Object.prototype.hasOwnProperty.call(d,P)&&m.call(null,d[P],P,d)}oe.exports={isArray:R,isArrayBuffer:function(d){return"[object ArrayBuffer]"===b.call(d)},isBuffer:function(d){return null!==d&&!S(d)&&null!==d.constructor&&!S(d.constructor)&&"function"==typeof d.constructor.isBuffer&&d.constructor.isBuffer(d)},isFormData:function(d){return"undefined"!=typeof FormData&&d instanceof FormData},isArrayBufferView:function(d){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(d):d&&d.buffer&&d.buffer instanceof ArrayBuffer},isString:function(d){return"string"==typeof d},isNumber:function(d){return"number"==typeof d},isObject:w,isUndefined:S,isDate:function(d){return"[object Date]"===b.call(d)},isFile:function(d){return"[object File]"===b.call(d)},isBlob:function(d){return"[object Blob]"===b.call(d)},isFunction:v,isStream:function(d){return w(d)&&v(d.pipe)},isURLSearchParams:function(d){return"undefined"!=typeof URLSearchParams&&d instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:A,merge:function d(){var m={};function g(I,E){m[E]="object"==typeof m[E]&&"object"==typeof I?d(m[E],I):I}for(var O=0,P=arguments.length;O<P;O++)A(arguments[O],g);return m},deepMerge:function d(){var m={};function g(I,E){m[E]="object"==typeof m[E]&&"object"==typeof I?d(m[E],I):"object"==typeof I?d({},I):I}for(var O=0,P=arguments.length;O<P;O++)A(arguments[O],g);return m},extend:function(d,m,g){return A(m,function(O,P){d[P]=g&&"function"==typeof O?M(O,g):O}),d},trim:function(d){return d.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(oe,X,x){"use strict";x.d(X,"a",function(){return d});var M=x(7),b=x.n(M),R=x(8),S=x(0),w=x(4);function A(m,g){(null==g||g>m.length)&&(g=m.length);for(var O=0,P=new Array(g);O<g;O++)P[O]=m[O];return P}var d=new function(){var m=Object(R.b)();return m.devicesHistory={},m.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},m.state=m.states.UNINIT,m.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},m.deviceReloadTimer=null,m._init=function(g,O){m.state=m.states.INITING,m.devicesHistory={},m._reloadDevicesInfo(function(){m.state=m.states.INITED,m.dispatchEvent({type:"inited"}),g&&g()},function(P){S.default.warning("Device Detection functionality cannot start properly."),m.state=m.states.UNINIT,O&&O(P)})},m._enumerateDevices=function(g,O){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return S.default.warning("enumerateDevices() not supported."),O&&O("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then(function(P){g&&setTimeout(function(){g(P)},0)}).catch(function(P){O&&O(P)})},m._reloadDevicesInfo=function(g,O){var P=[];m._enumerateDevices(function(I){var E=Date.now();for(var k in I.forEach(function(j){var N=m.devicesHistory[j.deviceId];if((N?N.state:m.deviceStates.INACTIVE)!=m.deviceStates.ACTIVE){var Y=N||{initAt:E};Y.device=j,Y.state=m.deviceStates.ACTIVE,P.push(Y),m.devicesHistory[j.deviceId]=Y}m.devicesHistory[j.deviceId].lastReloadAt=E}),m.devicesHistory){var D=m.devicesHistory[k];D&&D.state==m.deviceStates.ACTIVE&&D.lastReloadAt!==E&&(D.state=m.deviceStates.INACTIVE,P.push(D)),D.lastReloadAt=E}m.state==m.states.INITED&&P.forEach(function(j){var N=b()({},j);switch(j.device.kind){case"audioinput":N.type="recordingDeviceChanged";break;case"audiooutput":N.type="playoutDeviceChanged";break;case"videoinput":N.type="cameraChanged";break;default:S.default.warning("Unknown device change",N),N.type="unknownDeviceChanged"}m.dispatchEvent(N)}),g&&g()},O)},m.getDeviceById=function(g,O,P){m.getDevices(function(I){for(var E=0;E<I.length;E++){var k=I[E];if(k&&k.deviceId===g)return O&&O(k)}return P&&P()})},m.searchDeviceNameById=function(g){var O=m.devicesHistory[g];return O?O.device.label||O.device.deviceId:null},m.getDevices=function(g,O){m._enumerateDevices(g,function(P){O&&O(P.name+": "+P.message)})},m.getVideoCameraIdByLabel=function(g,O,P){m.getCameras(function(I){var E,k=function(m){if("undefined"==typeof Symbol||null==m[Symbol.iterator]){if(Array.isArray(m)||(m=function(D,j){if(D){if("string"==typeof D)return A(D,j);var N=Object.prototype.toString.call(D).slice(8,-1);if("Object"===N&&D.constructor&&(N=D.constructor.name),"Map"===N||"Set"===N)return Array.from(N);if("Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return A(D,j)}}(m))){var g=0,O=function(){};return{s:O,n:function(){return g>=m.length?{done:!0}:{done:!1,value:m[g++]}},e:function(D){throw D},f:O}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var P,I,E=!0,k=!1;return{s:function(){P=m[Symbol.iterator]()},n:function(){var D=P.next();return E=D.done,D},e:function(D){k=!0,I=D},f:function(){try{E||null==P.return||P.return()}finally{if(k)throw I}}}}(I);try{for(k.s();!(E=k.n()).done;){var D=E.value;if(D.label===g)return O&&O(D.deviceId)}}catch(j){k.e(j)}finally{k.f()}return P&&P(w.default.NOT_FIND_DEVICE_BY_LABEL)},P)},m.getRecordingDevices=function(g,O){return m._enumerateDevices(function(P){var I=P.filter(function(E){return"audioinput"==E.kind});g&&g(I)},function(P){O&&O(P)})},m.getPlayoutDevices=function(g,O){return m._enumerateDevices(function(P){var I=P.filter(function(E){return"audiooutput"==E.kind});g&&g(I)},function(P){O&&O(P)})},m.getCameras=function(g,O){return m._enumerateDevices(function(P){var I=P.filter(function(E){return"videoinput"==E.kind});g&&g(I)},function(P){O&&O(P)})},m._init(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",function(){m._reloadDevicesInfo()}),m.deviceReloadTimer=setInterval(m._reloadDevicesInfo,5e3)}),m}},function(oe,X,x){"use strict";x.r(X),x.d(X,"_getReconnectCSTimer",function(){return y}),x.d(X,"_setClientConnectionStateRecord",function(){return s}),x.d(X,"getGatewayList",function(){return _}),x.d(X,"getUserAccount",function(){return q});var M=x(11),b=x.n(M),R=x(12),S=x.n(R),w=x(17),v=x.n(w),A=x(2),d=(x(5),x(0)),m=x(14),g=x(1),O=x(4),P=function(f,C){var L=!1,Z=0,ee=Object(A.getParameter)("PROXY_CS"),le=Object(A.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),W=0,B={command:"convergeAllocateEdge",sid:f.sid,appId:f.appId,token:f.token,uid:f.uid,cname:f.cname,ts:Math.floor(Date.now()/1e3),version:A.VERSION,seq:0,requestId:1},z=function(ge){var se=(new Date).getTime();I("https://"+ge+"/api/v1",B,function(ae,Se){if(ae)return d.default.debug("["+f.clientId+"] Request proxy server failed: ",ae),Z++,g.report.requestProxyAppCenter(f.sid,{lts:se,succ:!1,APAddr:ge,workerManagerList:null,ec:JSON.stringify(ae),response:JSON.stringify({err:ae,res:Se})}),Z>=ee.length&&C&&C("Get proxy server failed: request all failed"),void(!(Z%le)&&Z<ee.length&&(W++,Q()));if(!L)if((Se=JSON.parse(Se)).json_body){var Te=JSON.parse(Se.json_body);if(d.default.debug("["+f.clientId+"] App return:",Te.servers),200!==Te.code)Z++,d.default.debug("["+f.clientId+"] "+(ae="Get proxy server failed: response code ["+Te.code+"], reason [ "+Te.reason+"]")),g.report.requestProxyAppCenter(f.sid,{lts:se,succ:!1,APAddr:ge,workerManagerList:null,ec:ae,response:JSON.stringify({err:ae,res:Se})}),Z>=ee.length&&C&&C(ae),!(Z%le)&&Z<ee.length&&(W++,Q());else{L=!0;var Ee=k(Te.servers);g.report.requestProxyAppCenter(f.sid,{lts:se,succ:!0,APAddr:ge,workerManagerList:JSON.stringify(Ee),ec:null,response:JSON.stringify({res:Se})}),C&&C(null,Ee)}}else d.default.debug("["+f.clientId+"] Get proxy server failed: no json_body"),g.report.requestProxyAppCenter(f.sid,{lts:se,succ:!1,APAddr:ge,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:Se})})})},Q=function(){for(var ge=W*le,se=ge;se<Math.min(ee.length,ge+le);se++)z(ee[se])};Q()},I=function(f,C,L){var Z={service_name:"webrtc_proxy",json_body:JSON.stringify(C)};Object(m.post)(f,Z,function(ee){L&&L(null,ee)},function(ee){L&&L(ee)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})},k=function(f){if(!(f&&[]instanceof Array))return[];var C=[];return f.forEach(function(L){var Z;L.address&&L.tcp?(L.address.match(/^[\.\:\d]+$/)?Z="".concat(L.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(d.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(L.address,". Used As Host instead")),Z="".concat(L.address,":").concat(L.tcp)),C.push(Z)):d.default.error("["+joinInfo.clientId+"] Invalid address format ",L)}),C},D=x(21),j=function(f,C,L,Z){var ee=Object(A.getParameter)("WEBCS_DOMAIN").concat(Object(A.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),le=Object(A.getParameter)("PROXY_SERVER_TYPE3");ee=["".concat(le[0],"/ap/?url=").concat(ee[1]),"".concat(le[0],"/ap/?url=").concat(ee[3]),"".concat(le[1],"/ap/?url=").concat(ee[0]),"".concat(le[1],"/ap/?url=").concat(ee[2])];var W,B=0,z=!0,Q=Object(A.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),ge=0,se=function(Se){var Te,Ee,_e,Me,xe,u,de,V,Ae,Be;Te=f,Ee=Se,_e=C,Me=function(Te,Ee){Te?(B++,d.default.error("[".concat(C.clientId,"] request ").concat(Se," failed: ").concat(Te)),Te&&-1===O.JOIN_PROXY_RETRY_LIST.indexOf(Te)&&(W=Te),B===ee.length&&(W||(W="RETRYABLE_ERROR"),L(W)),!(B%Q)&&B<ee.length&&(ge++,ae())):z&&(/sd-rtn/.test(Ee.gatewayServers.gateway_addr[0])?Object(A.setParameter)("NGINX",le[0]):Object(A.setParameter)("NGINX",le[1]),z=!1,L(null,Ee))},xe=Z,u=Date.now(),de=function(ke,Ve){try{g.report.joinChooseServer2(_e.sid,{lts:u,succ:!ke,csAddr:Ee,serverList:Ve&&Ve.gateway_addr,cid:Ve&&Ve.cid+"",uid:Ve&&Ve.uid+"",ec:ke,chooseServerIp:Ve&&Ve.detail&&Ve.detail[502]})}catch(Ue){}},V=function(ke,Ve){var Ue=Date.now();try{g.report.joinWebProxyAP({lts:Ue,sid:_e.sid,cname:_e.cname,cid:_e.cid,uid:_e.uid,sucess:ke?-1:1,elapse:Ue-u,eventType:Te,apServerAddr:Ee,turnServerAddrList:JSON.stringify(Ve),errorCode:ke||"0"})}catch(ie){}},Ae=Object(A.getParameter)("AREA_SETTING").reduce(function(ke,Ve,Ue){var ie=Object(D.getAreaCodeByArea)(Ve);return ie?0===Ue?ie:"".concat(ke,",").concat(ie):ke},""),Be={appid:_e.token,client_ts:Date.now(),opid:133,sid:_e.sid,request_bodies:[{uri:22,buffer:{cname:_e.cname,detail:{11:Ae,6:_e.stringUid},key:_e.token,service_ids:[11,xe?20:18],uid:_e.uid||0}}]},Ee="https://".concat(Ee,"/api/v2/transpond/webrtc?v=2"),Object(m.postFormData)(Ee,Be,function(ke){var Ve=function(me){return new RegExp(/10102\d{2}$/).test(me)?"NO_SERVICE_AVAILABLE":O.APErrorCode[me]||me};try{var Ue,ie,p=JSON.parse(ke);if(30===(p=p.response_body)[0].uri&&0!==p[0].buffer.code){var $=Ve(p[0].buffer.code);return V($,p),Me($)}if(4096===p[0].buffer.flag?(ie=p[0].buffer,Ue=p[1].buffer):(ie=p[1].buffer,Ue=p[0].buffer),0!==Ue.code)return $=Ve(Ue.code),d.default.error("[".concat(_e.clientId,"] requestProxyServer failed: ").concat($)),V($,Ue),Me($);if(!Ue.edges_services||!Ue.edges_services instanceof Array)return V("UNEXPECTED_ERROR",Ue),Me("UNEXPECTED_ERROR");var ce=Object(A.getParameter)("GATEWAY_DOMAINS"),fe=0;if(Ee.indexOf(ce[1])>-1&&(fe=1),0===Ue.edges_services.length)return V("EMPTY_PROXY_LIST",Ue),Me("EMPTY_PROXY_LIST");var he=Ue.edges_services.map(function(me){if(me.ip)return me.ip=xe?"".concat(me.ip.replace(/[^\d]/g,"-"),".").concat(ce[fe++%ce.length]):"".concat(me.ip),me});if(V(null,he),0!==ie.code)return $=Ve(ie.code),d.default.error("[".concat(_e.clientId,"] requestChooseServer failed: ").concat($)),de($),Me($);var K=[];if(ce=Object(A.getParameter)("GATEWAY_DOMAINS"),fe=0,Ee.indexOf(ce[1])>-1&&(fe=1),ie.edges_services.forEach(function(me){var be;if(me.ip&&me.port){if(!me.ip.match(/^[\.\:\d]+$/))return d.default.info("["+_e.clientId+"] "+"Cannot recognized as IP address ".concat(me.ip,". Used As Host instead")),void de("UNEXPECTED_IP");be="".concat(me.ip.replace(/[^\d]/g,"-"),".").concat(ce[fe++%ce.length]);var ye=Object(A.getParameter)("PROXY_SERVER_TYPE3");be=/sd-rtn/.test(Ee)?"".concat(ye[0],"/ws/?h=").concat(be,"&p=").concat(me.port):"".concat(ye[1],"/ws/?h=").concat(be,"&p=").concat(me.port),K.push(be)}else d.default.error("["+_e.clientId+"] Invalid address format ",me)}),!K.length)return d.default.error("["+_e.clientId+"] Empty Address response",p),de("EMPTY_ADDRESS_RESPONSE"),Me("EMPTY_ADDRESS_RESPONSE");ie.ticket=ie.cert;var pe={gateway_addr:K,uid:ie.uid,cid:ie.cid,vid:ie.detail&&ie.detail[8],res:ie,detail:p.detail};de(null,pe),Me(null,{gatewayServers:pe,turnServers:he})}catch(me){return d.default.error("[".concat(_e.clientId,"] requestProxyServer failed with unexpected body "),me),V("UNEXPECTED_ERROR"),Me("UNEXPECTED_ERROR")}},function(ke,Ve){"timeout"===ke.type?(V("REQUEST_PROXY_SERVER_TIME_OUT"),Me("REQUEST_PROXY_SERVER_TIME_OUT")):(V("REQUEST_PROXY_SERVER_FAILED"),Me("REQUEST_PROXY_SERVER_FAILED"))})},ae=function(){for(var Se=ge*Q,Te=Se;Te<Math.min(ee.length,Se+Q);Te++)se(ee[Te])};ae()},N=x(13),Y=x(29),te=x.n(Y),J=x(30),re={},U={},y=function(f){return re[f]},s=function(f,C){U[f]=C},H=function(f,C,L,Z,ee,le){var W=(new Date).getTime(),B=C,z="";C.multiIP&&C.multiIP.gateway_ip&&(z={vocs_ip:[C.multiIP.uni_lbs_ip],vos_ip:[C.multiIP.gateway_ip]});var Q=Object(A.getParameter)("AREA_SETTING").reduce(function(se,ae,Se){var Te=Object(D.getAreaCodeByArea)(ae);return Te?0===Se?Te:"".concat(se,",").concat(Te):se},""),ge={appid:C.token,opid:133,client_ts:+new Date,sid:C.sid,request_bodies:[{uri:22,buffer:{cname:C.cname,detail:{5:z?JSON.stringify(z):void 0,6:C.stringUid,11:Q},key:C.token,service_ids:[11],uid:C.uid||0}}]};Object(m.postFormData)(f,ge,function(se){try{var ae=JSON.parse(se),Se=(ae=ae.response_body[0].buffer).code}catch(de){var Te="requestChooseServer failed with unexpected body "+se;return d.default.error("["+B.clientId+"]",Te),Z(Te,void 0,void 0,le)}if(Se)return xe=new RegExp(/10102\d{2}$/).test(Se)?"NO_SERVICE_AVAILABLE":O.APErrorCode[ae.code]||Se,g.report.joinChooseServer(C.sid,{lts:W,succ:!1,csAddr:f,serverList:null,ec:xe,chooseServerIp:ae&&ae.detail&&ae.detail[502]}),Z("Get server node failed ["+xe+"]",f,xe,le);var Ee=[],_e=Object(A.getParameter)("GATEWAY_DOMAINS"),Me=0;if(f.indexOf(_e[1])>-1&&(Me=1),ae.edges_services.forEach(function(de){var V;de.ip&&de.port?(de.ip.match(/^[\.\:\d]+$/)?V="".concat(de.ip.replace(/[^\d]/g,"-"),".").concat(_e[Me++%_e.length],":").concat(de.port):(d.default.info("["+B.clientId+"] "+"Cannot recognized as IP address ".concat(de.ip,". Used As Host instead")),V="".concat(de.ip,":").concat(de.port)),Ee.push(V)):d.default.error("["+B.clientId+"] Invalid address format ",de)}),!Ee.length){d.default.error("["+B.clientId+"] Empty Address response",ae);var xe="EMPTY_ADDRESS_RESPONSE";return g.report.joinChooseServer(C.sid,{lts:W,succ:!1,csAddr:f,serverList:null,ec:xe,chooseServerIp:ae&&ae.detail&&ae.detail[502]}),Z("Get server node failed ["+xe+"]",f,xe,le)}return ae.ticket=ae.cert,L({gateway_addr:Ee,uid:ae.uid,cid:ae.cid,vid:ae.detail&&ae.detail[8],res:ae,uni_lbs_ip:ae.detail},f)},function(se,ae){"timeout"===se.type?(g.report.joinChooseServer(C.sid,{lts:W,succ:!1,csAddr:ae,serverList:null,ec:"timeout"}),Z("Connect choose server timeout",ae,void 0,le)):(g.report.joinChooseServer(C.sid,{lts:W,succ:!1,csAddr:ae,serverList:null,ec:se.httpErrorCode||"server_wrong"}),Z("Connect choose server error",ae,void 0,le))})},_=function(f,C,L){var Z=!1,ee=null,le=1,W=1,B=f.clientId,z=function se(ae,Se){if(!Z){var Te=[];!function(Ee,_e,Me){var xe,u=(new Date).getTime(),de=!1,V=0,Ae=0,Be=Object(A.getParameter)("WEBCS_DOMAIN"),ke=Be.length,Ve=Object(A.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),Ue=Ve.length,ie=Object(A.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),p=0,$=0,ce=function(me,be){var ye;try{ye=me.res.detail[8]}catch(Ge){d.default.debug("["+Ee.clientId+"] get vid failed",Ge)}if(de)g.report.joinChooseServer(Ee.sid,{lts:u,succ:!0,csAddr:be,serverList:me.gateway_addr,cid:me.cid+"",uid:me.uid+"",ec:null,vid:ye,chooseServerIp:me.res&&me.res.detail&&me.res.detail[502]},!1);else{if(clearTimeout(pe),de=!0,Ee.proxyServer)for(var Oe=me.gateway_addr,Le=0;Le<Oe.length;Le++){var ze=Oe[Le].split(":");me.gateway_addr[Le]=Ee.proxyServer+"/ws/?h="+ze[0]+"&p="+ze[1]}(function(Ee){Z=!0,Te=Ee,clearTimeout(ee),U[B]!==N.a.DISCONNECTED&&U[B]!==N.a.DISCONNECTING?Se&&Se(Te,null):d.default.debug("[".concat(f.clientId,"] Request gateway list success when connection state is ").concat(U[B]))})(me),g.report.joinChooseServer(Ee.sid,{lts:u,succ:!0,csAddr:be,serverList:me.gateway_addr,cid:me.cid+"",uid:me.uid+"",ec:null,vid:ye,chooseServerIp:me.res&&me.res.detail&&me.res.detail[502]},!0)}},fe=function(me,be,ye,Oe){"domain"===Oe&&V++,"backup"===Oe&&Ae++,d.default.error("["+Ee.clientId+"]",me,be,ye),ye&&-1===O.JOIN_CS_RETRY_LIST.indexOf(ye)&&(xe=ye),V===ke&&Ae===Ue&&function(Ee){if(Ee)return d.default.info("["+f.clientId+"] Join failed: "+Ee),void(L&&L(Ee));if(U[B]===N.a.DISCONNECTED||U[B]===N.a.DISCONNECTING)return d.default.debug("[".concat(f.clientId,"] Request gateway list falied when connection state is ").concat(U[B])),void(L&&L("OPERATION_ABORT"));d.default.debug("["+f.clientId+"] Request gateway list will be restart in "+le+"s"),ee=setTimeout(function(){se(ae,Se)},1e3*le),re[B]=ee;var _e=Object(A.getParameter)("AP_BACKOFF_MAX_TIME");le=le>=_e?_e:2*le}(xe),"domain"===Oe&&!(V%ie)&&V<ke&&(p++,he()),"backup"===Oe&&!(Ae%ie)&&Ae<Ue&&($++,K())},he=function me(){for(var be=p*ie,ye=be;ye<Math.min(ke,be+ie);++ye){var Oe;if("string"==typeof Be[ye]){var Le=Be[ye];Oe=Ee.proxyServer?"https://".concat(Ee.proxyServer,"/ap/?url=").concat(Le+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Le,"/api/v2/transpond/webrtc?v=2");var ze=Object(D.getAreaCodeByWebCS)(Le);d.default.debug("["+Ee.clientId+"] "+"Connect to choose_server: ".concat(Oe,", ").concat(ze)),H(Oe,Ee,ce,fe,0,"domain")}else V++,d.default.error("["+Ee.clientId+"] Invalid Host",Be[ye]),ye===be+ie-1&&ye<ke-1-1&&(p++,me())}};he();var K=function me(){if(!de)for(var be=$*ie,ye=be;ye<Math.min(Ue,be+ie);ye++){var Oe;if("string"==typeof Ve[ye]){var Le=Ve[ye];Oe=Ee.proxyServer?"https://".concat(Ee.proxyServer,"/ap/?url=").concat(Le+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Le,"/api/v2/transpond/webrtc?v=2");var ze=Object(D.getAreaCodeByWebCS)(Le);d.default.debug("["+Ee.clientId+"] "+"Connect to backup_choose_server: ".concat(Oe,", ").concat(ze)),H(Oe,Ee,ce,fe,0,"backup")}else Ae++,d.default.error("["+Ee.clientId+"] Invalid Host",Ve[ye]),ye===be+ie-1&&ye<Ve-1-1&&(p++,me())}},pe=setTimeout(K,1e3)}(f)}},Q=function se(){var ae,Se;Se=function(ae,Se){if(ae){d.default.debug("["+f.clientId+"]",ae),d.default.debug("["+f.clientId+"] Request proxy will be restart in "+W+"s"),ee=setTimeout(function(){se()},1e3*W),re[B]=ee;var Te=Object(A.getParameter)("AP_BACKOFF_MAX_TIME");W=W>=Te?Te:2*W}else{clearTimeout(ee);var Ee=Se.address;f.proxyServer=Ee;var _e={mode:"manual",url:Se.address,tcpport:Se.serverResponse.tcpport||"3433",udpport:Se.serverResponse.udpport||"3478",username:Se.serverResponse.username||"test",credential:Se.serverResponse.password||Object(A.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};_e.tcpport+="",_e.udpport+="",f.turnServers=[],f.turnServers.push(_e),g.report.setProxyServer(Ee),d.default.setProxyServer(Ee),z(Ee,C)}},P(ae=f,function(Te,Ee){if(Te)return Se&&Se(Te);d.default.debug("["+ae.clientId+"] getProxyServerList: ",Ee),function(f,C,L){var Z=!1,ee=0,le={command:"request",gatewayType:"http",appId:f.appId,cname:f.cname,uid:f.uid+"",sdkVersion:"2.3.1",sid:f.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:f.appId,cname:f.cname,uid:f.uid+"",sid:f.sid}};C.map(function(W){var z,Q,ge,B=(new Date).getTime();z="https://"+W+":4000/v2/machine",Q=le,ge=function(z,Q){if(z)return d.default.debug("["+f.clientId+"] Request worker manager failed: ",z),ee++,g.report.requestProxyWorkerManager(f.sid,{lts:B,succ:!1,workerManagerAddr:W,ec:JSON.stringify(z),response:JSON.stringify({res:Q})}),void(ee>=C.length&&L&&L("requeet worker manager server failed: request failed"));if(!Z){if(!(Q=JSON.parse(Q)).serverResponse)return L&&L("requeet worker manager server failed: serverResponse is undefined");Z=!0,g.report.requestProxyWorkerManager(f.sid,{lts:B,succ:!0,workerManagerAddr:W,ec:JSON.stringify(z),response:JSON.stringify({res:Q})}),L&&L(null,{address:W,serverResponse:Q.serverResponse})}},Object(m.post)(z,Q,function(se){ge&&ge(null,se)},function(se){ge&&ge(se)})})}(ae,Ee,Se)})},ge=function se(){j("proxy3",f,function(ae,Se){if(ae)return"RETRYABLE_ERROR"!==ae?L&&L(ae):(d.default.debug("["+f.clientId+"]",ae),d.default.debug("["+f.clientId+"] Request proxy will be restart in "+W+"s"),ee=setTimeout(function(){se()},1e3*W),re[B]=ee,void(W=W>=3600?3600:2*W));var Te=Se.gatewayServers,Ee=Se.turnServers;clearTimeout(ee);var _e=Object(A.getParameter)("NGINX");f.proxyServer=_e,f.turnServers=[];var Me=Object(J.randomString)();Ee.map(function(xe){var u={mode:"manual",url:xe.ip,tcpport:"",udpport:xe.port||"3478",username:xe.username||Me,credential:xe.password||te()(Me).toString(),forceturn:!0};u.tcpport+="",u.udpport+="",f.turnServers.push(u)}),g.report.setProxyServer(_e),d.default.setProxyServer(_e),C(Te)})};f.useProxyServer?1==f.proxyServerType?Q():2==f.proxyServerType?function se(){var ae,Se;Se=function(ae,Se){if(ae)return d.default.debug("["+f.clientId+"]",ae),d.default.debug("["+f.clientId+"] Request proxy will be restart in "+W+"s"),ee=setTimeout(function(){se()},1e3*W),re[B]=ee,void(W=W>=3600?3600:2*W);clearTimeout(ee);var Te=Object(A.getParameter)("PROXY_SERVER_TYPE2");f.proxyServer=Te;var Ee={mode:"manual",url:Se.address,tcpport:Se.serverResponse.tcpport||"3433",udpport:Se.serverResponse.udpport||"3478",username:Se.serverResponse.username||"test",credential:Se.serverResponse.password||"111111",forceturn:!0};Ee.tcpport+="",Ee.udpport+="",f.turnServers=[],f.turnServers.push(Ee),g.report.setProxyServer(Te),d.default.setProxyServer(Te),z(Te,C)},P(ae=f,function(Te,Ee){return Te?Se&&Se(Te):(d.default.debug("["+ae.clientId+"] getProxyServerList: ",Ee),Se&&Se(null,{address:Ee[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))})}():3==f.proxyServerType?ge():4==f.proxyServerType?j("proxy4",f,function(se,ae){if(se)return"RETRYABLE_ERROR"!==se?L&&L(se):(d.default.debug("["+f.clientId+"]",se),d.default.debug("["+f.clientId+"] Request proxy will be restart in "+W+"s"),ee=setTimeout(function(){ge()},1e3*W),re[B]=ee,void(W=W>=3600?3600:2*W));var Se=ae.gatewayServers,Te=ae.turnServers;clearTimeout(ee);var Ee=Object(A.getParameter)("NGINX");f.proxyServer=Ee,f.turnServers=[];var _e=Object(J.randomString)();Te.map(function(Me){var xe={mode:"manual",url:Me.ip,tcpport:Me.port||"443",udpport:"",username:Me.username||_e,credential:Me.password||te()(_e).toString(),forceturn:!1};xe.tcpport+="",xe.udpport+="",f.turnServers.push(xe)}),g.report.setProxyServer(Ee),d.default.setProxyServer(Ee),C(Se)}):5==f.proxyServerType?j("proxy5",f,function(se,ae){if(se)return"RETRYABLE_ERROR"!==se?L&&L(se):(d.default.debug("["+f.clientId+"]",se),d.default.debug("["+f.clientId+"] Request proxy will be restart in "+W+"s"),ee=setTimeout(function(){ge()},1e3*W),re[B]=ee,void(W=W>=3600?3600:2*W));var Se=ae.gatewayServers,Te=ae.turnServers;clearTimeout(ee);var Ee=Object(A.getParameter)("NGINX");f.proxyServer=Ee,f.turnServers=[];var _e=Object(J.randomString)();Te.map(function(Me){var xe={mode:"manual",url:Me.ip,tcpport:Me.port||"443",udpport:"",username:Me.username||_e,credential:Me.password||te()(_e).toString(),forceturn:!1,useTurns:!0};xe.tcpport+="",xe.udpport+="",f.turnServers.push(xe)}),g.report.setProxyServer(Ee),d.default.setProxyServer(Ee),C(Se)},!0):Q():z(null,C)},c=function(f,C,L,Z,ee){var le=Date.now(),W={sid:C.sid,opid:10,appid:C.appId,string_uid:Z=Z||C.stringUid};return new Promise(function(B,z){Object(m.post)(f+"".concat(-1===f.indexOf("?")?"?":"&","action=stringuid"),W,function(Q){try{var ge=JSON.parse(Q),se=ge.code}catch(_e){var ae="requestUserAccount failed with unexpected body "+Q;return d.default.error("["+C.clientId+"]",ae),z({retryable:!0,info:ae,url:f,error:"UNEXPECTED_ERROR"}),L&&L.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void g.report.reqUserAccount(W.sid,{lts:le,success:!1,serverAddress:f,stringUid:Z,uid:null,extend:Q,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(se){var Se=!1;return"INTERNAL_SERVER_ERROR"===(Ee=O.StringUidErrorCode[ge.code%1e4]||"REQ_ACCOUNT_ERR_".concat(se))&&(Se=!0),L&&L.dispatchEvent({type:"error",reason:Ee}),g.report.reqUserAccount(W.sid,{lts:le,success:!1,serverAddress:f,stringUid:Z,uid:null,errorCode:Ee,extend:W}),z({retryable:Se,info:ae="Get String Uid Failed ["+Ee+"]",url:f,error:Ee})}var Te=ge.uid;if(!(Te>0&&Te<Math.pow(2,32))){d.default.error("["+C.clientId+"] "+"Invalid Uint Uid ".concat(Z," => ").concat(Te),ge);var Ee="INVALID_UINT_UID_".concat(Te);return L&&L.dispatchEvent({type:"error",reason:Ee}),g.report.reqUserAccount(W.sid,{lts:le,success:!1,serverAddress:f,stringUid:Z,uid:null,errorCode:Ee,extend:W}),z({retryable:!0,error:Ee,info:"Get String Uid failed ["+Ee+"]",url:f})}B({uid:Te,url:f}),g.report.reqUserAccount(W.sid,{lts:le,success:!0,serverAddress:f,stringUid:Z,uid:Te,errorCode:null,extend:W})},function(Q,ge){if("timeout"===Q.type){var se="USER_ACCOUNT_TIMEOUT";L&&L.dispatchEvent({type:"error",reason:se}),g.report.reqUserAccount(W.sid,{lts:le,success:!1,serverAddress:ge,stringUid:Z,uid:null,errorCode:se,extend:W}),z({retryable:!0,info:se,url:ge,error:se})}else{var ae="USER_ACCOUNT_SERVER_WRONG_".concat(Q.type);L&&L.dispatchEvent({type:"error",reason:ae}),g.report.reqUserAccount(W.sid,{lts:le,success:!1,serverAddress:ge,stringUid:Z,uid:null,errorCode:ae,extend:W}),z({retryable:!0,info:ae,url:ge,error:ae})}},{"X-Packet-Service-Type":0,"X-Packet-URI":72})})},q=function(f,C,L){Date.now();var Z,ge,ee=Object(A.getParameter)("ACCOUNT_REGISTER"),le=!1,W=Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),B=null,z=null,Q=new Promise((ge=v()(S.a.mark(function se(ae,Se){var Te,Ee,_e;return S.a.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:B=ae,z=Se,Z=0;case 3:if(!(Z<Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){Me.next=33;break}if(!le){Me.next=6;break}return Me.abrupt("return");case 6:return Te=ee[Z%ee.length],Ee=f.proxyServer?"https://".concat(f.proxyServer,"/ap/?url=").concat(Te+"/api/v1"):"https://".concat(Te,"/api/v1"),Me.prev=8,Me.delegateYield(S.a.mark(function xe(){var u;return S.a.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=3,c(Ee,f,C,L);case 3:if(u=de.sent,!le){de.next=6;break}return de.abrupt("return",{v:void 0});case 6:le=!0,setTimeout(function(){d.default.debug("Get UserAccount Successfully",u),B(u)},0);case 8:case"end":return de.stop()}},xe)})(),"t0",10);case 10:if(_e=Me.t0,"object"!==b()(_e)){Me.next=13;break}return Me.abrupt("return",_e.v);case 13:Me.next=30;break;case 15:if(Me.prev=15,Me.t1=Me.catch(8),!le){Me.next=19;break}return Me.abrupt("return");case 19:if(!Me.t1.retryable){Me.next=27;break}return(W=Math.ceil(W*Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(W=Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),d.default.error("".concat(Me.t1.info," ").concat(Me.t1.url," Will Fetch User Account in ").concat(W/1e3," seconds")),Me.next=25,new Promise(function(xe){setTimeout(xe,W)});case 25:Me.next=30;break;case 27:d.default.error("Get UserAccount Error: ".concat(Me.t1.info," ").concat(Me.t1.url),Me.t1.error),le=!0,z(Me.t1.error);case 30:Z++,Me.next=3;break;case 33:case"end":return Me.stop()}},se,null,[[8,15]])})),function(se,ae){return ge.apply(this,arguments)}));return Q.cancel=function(){le||(le=!0,z({info:"Request Cancelled",retryable:!1}))},Q.isFinished=function(){return le},Q}},function(oe,X,x){"use strict";var M=this&&this.__spreadArrays||function(){for(var O=0,P=0,I=arguments.length;P<I;P++)O+=arguments[P].length;var E=Array(O),k=0;for(P=0;P<I;P++)for(var D=arguments[P],j=0,N=D.length;j<N;j++,k++)E[k]=D[j];return E},b=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(X,"__esModule",{value:!0});var R,S,O,w=b(x(0));(O=R||(R={})).CHINA="CHINA",O.ASIA="ASIA",O.NORTH_AMERICA="NORTH_AMERICA",O.EUROPE="EUROPE",O.JAPAN="JAPAN",O.INDIA="INDIA",O.OCEANIA="OCEANIA",O.SOUTH_AMERICA="SOUTH_AMERICA",O.AFRICA="AFRICA",O.OVERSEA="OVERSEA",O.GLOBAL="GLOBAL",X.AREAS=R,function(O){O.CHINA="CN",O.ASIA="AS",O.NORTH_AMERICA="NA",O.EUROPE="EU",O.JAPAN="JP",O.INDIA="IN",O.OCEANIA="OC",O.SOUTH_AMERICA="SA",O.AFRICA="AF",O.OVERSEA="OVERSEA",O.GLOBAL="GLOBAL"}(S||(S={}));var v={ASIA:{CODE:S.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:S.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:S.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:S.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:S.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:S.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:S.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:S.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:S.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:S.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};X.AREA_DOMAIN_MAP=v;var A={GLOBAL:{ASIA:[R.CHINA,R.JAPAN,R.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},d=Object.keys(A[R.GLOBAL]),m=[R.CHINA,R.NORTH_AMERICA,R.EUROPE,R.ASIA,R.JAPAN,R.INDIA,R.OCEANIA,R.SOUTH_AMERICA,R.AFRICA];X.getAreaCodeByConfig=function(O){var P=O.areaCode,I=O.excludedArea;return I?function(O,P){var J,E=[];if("string"==typeof O&&(O=[O]),P&&!O.includes(R.GLOBAL)&&(E=O),P||(E=O),P&&O.includes(R.GLOBAL)){var k=[R.GLOBAL,R.OVERSEA],D=Object.keys(v);if(P===R.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(P===R.CHINA)E=[R.OVERSEA];else if(d.includes(P)){var j=(void 0===(J=P)&&(J=""),A[R.GLOBAL][J]||[]),N=M(k,[P],j);E=D.filter(function(J){return!N.includes(J)})}else if(function(J){var re=!1;return d.forEach(function(U){A.GLOBAL[U].includes(J)&&(re=!0)}),re}(P)){var Y=function(J){void 0===J&&(J="");var re="";return d.forEach(function(U){A.GLOBAL[U].includes(J)&&(re=U)}),re}(P),te=M(k,[Y,P]);E=D.filter(function(J){return!te.includes(J)})}else E=O;E=function(J){var re=[];return m.forEach(function(U){J.includes(U)&&re.push(U)}),re.concat(J.filter(function(U){return!m.includes(U)}))}(E)}return console.log("getAreaCodeAfterCalculation result",E),E}(P,I):P},v.CHINA={CODE:S.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},X.getAreaCodeByWebCS=function(O){for(var P=Object.keys(v),I=0;I<P.length;I++){var k=v[P[I]];if(k.WEBCS_DOMAIN.includes(O)||k.WEBCS_DOMAIN_BACKUP_LIST.includes(O))return k.CODE===S.OVERSEA?S.ASIA+","+S.EUROPE+","+S.AFRICA+","+S.NORTH_AMERICA+","+S.SOUTH_AMERICA+","+S.OCEANIA:k.CODE}},X.getAreaCodeByArea=function(O){return O===R.OVERSEA?S.ASIA+","+S.EUROPE+","+S.AFRICA+","+S.NORTH_AMERICA+","+S.SOUTH_AMERICA+","+S.OCEANIA:S[O]},X.getAreaDomainConfig=function(O){var P={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return O.map(function(I){var E=v[I];if(E){var k=Object.keys(E);k?k.map(function(D){"CODE"!==D&&(P[D]=P[D].concat(E[D]))}):w.default.info(I+" is not exist")}else w.default.info(I+" is not exist")}),P}},function(oe,X,x){"use strict";x.d(X,"a",function(){return s}),x.d(X,"b",function(){return H});var M=x(7),b=x.n(M),R=x(5),S=x(8),v=x(0),A=x(15),d=x(4),m=x(2),g=x(1),O=0,P=function(_){var c=function(_){var c=Object(S.b)({});return c.url=".",c}();c.id=_.id,c.playerId=O++,c.destroyed=!1,c.fit=_.options&&_.options.fit,"contain"!==c.fit&&"cover"!==c.fit&&(c.fit=null),c.url=_.url,c.stream=_.stream.stream,c.peerVideoReady=!1,c.isFreeze=!1,c.freezeTimeCounterList=[],c.freezeCount=0,c.lastFreezeCount=0,c.lastTimeupdateTime=0,c.elementID=_.elementID,c.setAudioOutput=function(Ee,_e,Me){var xe=c.video||c.audio;return xe?xe.setSinkId?void xe.setSinkId(Ee).then(function(){return v.default.debug("["+c.id+"] "+"video ".concat(c.id," setAudioOutput ").concat(Ee," SUCCESS")),xe==c.video&&c.audio?c.audio.setSinkId(Ee):Promise.resolve()}).then(function(){return v.default.debug("["+c.id+"] "+"audio ".concat(c.id," setAudioOutput ").concat(Ee," SUCCESS")),_e&&_e()}).catch(function(u){return v.default.error("["+c.id+"] VideoPlayer.setAudioOutput",u),Me&&Me(u)}):(v.default.error("["+c.id+"] ",d.default.WEB_API_NOT_SUPPORTED),Me&&Me(d.default.WEB_API_NOT_SUPPORTED)):(v.default.error("["+c.id+"] ",d.default.PLAYER_NOT_FOUND),Me&&Me(d.default.PLAYER_NOT_FOUND))},c.destroy=function(){v.default.debug("[".concat(c.id,"] destroy ").concat(_.stream.local?"local":"remote"," Player ").concat(c.id)),Object(A.setSrcObject)(c.video,null),Object(A.setSrcObject)(c.audio,null),c.video.load(),c.audio.load(),c.video.pause(),c.video.remove(),c.audio.remove(),c.freezeCheckInterval&&clearInterval(c.freezeCheckInterval),c.destroyed=!0,delete c.resizer,document.getElementById(c.div.id)&&c.parentNode.contains(c.div)&&c.div.remove()&&c.parentNode.removeChild(c.div),["video","audio"].forEach(function(Ee){var _e=C[Ee];clearTimeout(_e.playDeferTimeout),_e.formerMediaState=null;var Me={playerId:c.playerId,stateId:_e.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};C[Ee]=Me;var xe={type:"player-status-change",playerId:c.playerId,mediaType:Ee,status:Me.status,reason:Me.reason,isErrorState:!1,streamId:c.id};v.default.debug("[".concat(c.id,"] Media Player Status Change Triggered by destroy()"),xe),_.stream.dispatchEvent(xe),g.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:xe,tag:"tracer"})()})},c.div=document.createElement("div"),c.div.setAttribute("id","player_"+c.id),c.div.setAttribute("style",_.stream.video?"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;":"width: 100%; height: 100%; position: relative; overflow: hidden;"),c.video=document.createElement("video"),c.video.setAttribute("id","video"+c.id),c.video.setAttribute("style",_.stream.local&&!_.stream.screen?_.stream.mirror?"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(c.fit||"cover",";"):"width: 100%; height: 100%; position: absolute; object-fit: ".concat(c.fit||"cover",";"):_.stream.video?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(c.fit||"cover",";"):_.stream.screen?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(c.fit||"contain"):"width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(c.fit||"cover"));var q={autoplay:!0,muted:!!_.stream.local||!(!R.isSafari()&&"iOS"!==R.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},f=b()({},q,_.options);!0!==f.muted||f.volume||(f.volume=0),c.video.setAttribute("autoplay",""),c.video.setAttribute("muted",""),c.video.muted=!0,c.video.autoplay=!0,f.playsinline&&c.video.setAttribute("playsinline",""),f.controls&&c.video.setAttribute("controls",""),f.contains&&(c.video.controls=!0),Number.isFinite(f.volume)&&(c.video.volume=f.volume),c.audio=document.createElement("audio"),c.audio.setAttribute("id","audio"+c.id),!0===f.muted&&c.audio.setAttribute("muted",""),!0===f.muted&&(c.audio.muted=!0),f.playsinline&&c.audio.setAttribute("playsinline",""),Number.isFinite(f.volume)&&(c.audio.volume=f.volume),void 0!==c.elementID?(document.getElementById(c.elementID).appendChild(c.div),c.container=document.getElementById(c.elementID)):(document.body.appendChild(c.div),c.container=document.body),c.parentNode=c.div.parentNode;var C={video:{playerId:c.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:c.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};c.mediaElemExists=function(Ee){for(var _e=Ee,Me=0;Me<Object(m.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&_e;Me++)_e=_e.parentNode;return!!_e};var L=function(Ee){return c.mediaElemExists(Ee)?Ee.paused?"paused":"play":"aborted"},Z=function(Ee,_e,Me){var xe=L(Ee),u=!0;return"paused"===xe?("audio"===_e&&!0===Me.muted&&(u=!1),Me.autoplay||(u=!1)):"play"===xe?"video"===_e?u=!1:!0===Me.muted?Ee.muted&&(u=!1):Ee.muted||(u=!1):"aborted"===xe&&(u=!1),u},ee=function(Ee){var _e,Me=this;if(Me===c.video?_e="video":Me===c.audio&&(_e="audio"),_e){if(Ee.type||v.default.error("[".concat(c.id,"] Unexpected evt"),Ee),"video"===_e&&Me.muted&&Me.paused)return v.default.debug("[".concat(c.id,"] auto resume video element")),void Me.play();var xe=L(Me);clearTimeout(C[_e].playDeferTimeout),C[_e].playDeferTimeout=setTimeout(function(){C[_e].playDeferTimeout=null;var u=C[_e],de=L(Me);if(xe===de){var V={playerId:c.playerId,stateId:u.stateId+1,playDeferTimeout:null,error:Z(Me,_e,f),status:L(Me),reason:Ee.type,updatedAt:Date.now()};if(u.status!==V.status){C[_e]=V;var Ae={type:"player-status-change",playerId:c.playerId,mediaType:_e,status:V.status,reason:V.reason,isErrorState:V.error,streamId:c.id};v.default.debug("[".concat(c.id,"] Media Player Status Change"),Ae),_.stream.dispatchEvent(Ae),g.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:Ae,tag:"tracer"})()}}else v.default.debug("[".concat(c.id,"] Status Change after event Triggered.")+"Stream ".concat(c.id," PlayerId ").concat(c.playerId," mediaType ").concat(_e," Status ").concat(xe,"=>").concat(de))},Object(m.getParameter)("PLAYER_STATE_DEFER"))}else v.default.error("[".concat(c.id,"] Unknown media element"),Me)};c.video.addEventListener("playing",function(Ee){!function _e(){c.video.videoWidth*c.video.videoHeight>4?v.default.debug("["+c.id+"] video dimensions:",c.video.videoWidth,c.video.videoHeight):setTimeout(_e,50)}()});var le=0,W=0,B=0;c.freezeCheckInterval=setInterval(function(){Date.now()-c.lastTimeupdateTime>500&&c.peerVideoReady?(c.isFreeze=!0,c.freezeCount+=1):c.isFreeze=!1},500),c.video.addEventListener("playing",ee),c.video.addEventListener("canplay",ee),c.video.addEventListener("abort",ee),c.video.addEventListener("onerror",ee),c.video.addEventListener("suspend",ee),c.video.addEventListener("stalled",ee),c.video.addEventListener("pause",ee),c.audio.addEventListener("playing",ee),c.audio.addEventListener("canplay",ee),c.audio.addEventListener("abort",ee),c.audio.addEventListener("onerror",ee),c.audio.addEventListener("suspend",ee),c.audio.addEventListener("stalled",ee),c.audio.addEventListener("pause",ee);var z=c.audio,Q="audio";if(_.stream.hasVideo()||_.stream.hasScreen())c.div.appendChild(c.video),c.div.appendChild(c.audio),R.isEdge()?c.video.srcObject=_.stream.stream:(Object(A.attachMediaStream)(c.video,_.stream.stream),Object(A.attachMediaStream)(c.audio,_.stream.stream)),c.video.addEventListener("timeupdate",function(){var Ee=Date.now();if((le+=1)<10)c.lastTimeupdateTime=Ee;else for(Ee-c.lastTimeupdateTime>500&&(c.peerVideoReady?W+=Ee-c.lastTimeupdateTime:c.peerVideoReady=!0),B+=Ee-c.lastTimeupdateTime,c.lastTimeupdateTime=Ee;B>=6e3;)B-=6e3,c.freezeTimeCounterList.push(Math.min(6e3,W)),W-=6e3,W=Math.max(W,0)});else{!1!==f.muted&&"video_element_muted"!==f.muted||(c.video.removeAttribute("muted"),c.video.muted=!1),c.video.removeAttribute("autoplay"),c.video.autoplay=!1,c.div.appendChild(c.video),z=c.video,Q="video";var se={playerId:c.playerId,stateId:C.audio.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};C.audio=se;var ae={type:"player-status-change",playerId:c.playerId,mediaType:"audio",status:se.status,reason:se.reason,isErrorState:se.error,streamId:c.id};if(v.default.debug("[".concat(c.id,"] Media Player Status Change"),ae),Promise.resolve().then(function(){return _.stream.dispatchEvent(ae)}),g.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:ae,tag:"tracer"})(),window.MediaStream&&(R.isSafari()||"iOS"===R.getBrowserOS())){var Se=new MediaStream(_.stream.stream.getAudioTracks());Object(A.setSrcObject)(c.video,Se)}else Object(A.setSrcObject)(c.video,_.stream.stream)}if(f.autoplay&&z){var Te=z.play();Te&&Te.catch&&Te.catch(function(Ee){if(!c.destroyed&&z){var _e=C[Q],Me={playerId:c.playerId,stateId:_e.stateId+1,playDeferTimeout:null,error:Z(z,Q,f),status:L(z),reason:"error",updatedAt:Date.now()};if(_e.status!==Me.status){v.default.debug("[".concat(c.id,"] Player ").concat(c.playerId," Status Changed Detected by promise error: ").concat(_e.status,"=>").concat(Me.status),Ee),C[Q]=Me;var xe={type:"player-status-change",playerId:c.playerId,mediaType:Q,status:Me.status,reason:Me.reason,isErrorState:Me.error,streamId:c.id};v.default.debug("[".concat(c.id,"] Media Player Status Change"),xe),_.stream.dispatchEvent(xe),g.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:xe,tag:"tracer"})()}}})}return c.setAudioVolume=function(Ee){var _e=parseInt(Ee)/100;isFinite(_e)&&(_e<0?_e=0:_e>1&&(_e=1),c.video&&(c.video.volume=_e),c.audio&&(c.audio.volume=_e))},c},I=x(23),E=x(10),k=x(6),D=x(19),j=x(3),N=x(25),Y=x(16),te=x(11),J=x.n(te),re=function(_){Object(j.checkValidString)(_,"profileName"),-1===(_=_.toLowerCase()).indexOf("_")&&(_+="_1"),Object(j.checkValidEnum)(_,"profileName",Object.keys(m.SUPPORT_RESOLUTION_LIST));var c=m.SUPPORT_RESOLUTION_LIST[_];c||(_=Object(m.getParameter)("DEFAULT_PROFILE"),c=m.SUPPORT_RESOLUTION_LIST[_]);var q={profileName:_,video:{width:c[0],height:c[1]},attributes:{resolution:"".concat(c[0],"x").concat(c[1]),minFrameRate:c[2],maxFrameRate:c[3],minVideoBW:c[4],maxVideoBW:c[5]}};return c[2]&&(q.video.frameRate=c[2]),c[6]&&c[7]&&(q.screen={width:c[0],height:c[1],frameRate:{min:c[6],max:c[7]}}),q},U=function(_){return Object.keys(m.SUPPORT_RESOLUTION_LIST).filter(function(c){var q=m.SUPPORT_RESOLUTION_LIST[c],f=["width","height","frameRate"];for(var C in f){var L=f[C];if(_[L]&&q[C]&&("number"==typeof _[L].max&&_[L].max<q[C]||"number"==typeof _[L].min&&_[L].min>q[C]))return!1}return!0}).reverse()},y=function(_){var c=m.AUDIO_PROFILE_SETTINGS[_]||m.AUDIO_PROFILE_SETTINGS.default;return{highQuality:c[0],stereo:c[1],speech:c[2],lowQuality:c[3]}},s=function(_){var f,c=Object(S.b)();if(c.params=b()({},_),c.stream=_.stream,c.url=_.url,c.onClose=void 0,c.local=!1,c.videoSource=_.videoSource,c.audioSource=_.audioSource,_.video=!(!_.videoSource&&!_.video),c.video=_.video,_.audio=!(!_.audioSource&&!_.audio),c.audio=_.audio,c.screen=!!_.screen,c.screenAudio=!!_.screenAudio,c.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},c.videoSize=_.videoSize,c.player=void 0,c.audioLevelHelper=null,_.attributes=_.attributes||{},c.attributes=_.attributes,c.microphoneId=_.microphoneId,c.cameraId=_.cameraId,c.facingMode=_.facingMode,c.inSwitchDevice=!1,c.userMuteVideo=!1,c.userMuteAudio=!1,c.peerMuteVideo=!1,c.peerMuteAudio=!1,c.lowStream=null,c.videoWidth=0,c.videoHeight=0,c.streamId=_.streamID,c.userId=null,c.uintId=_.uintUID||null,c.mirror=!1!==_.mirror,c.DTX=_.audioProcessing&&_.audioProcessing.DTX,c.audioProcessing=_.audioProcessing,c.optimizationMode=_.optimizationMode,c.highQuality=!1,c.stereo=!1,c.speech=!1,c.screen||delete c.screen,!(void 0===c.videoSize||c.videoSize instanceof Array&&4===c.videoSize.length))throw Error("Invalid Video Size");function q(){var f={};c.getVideoTrack()===this?(v.default.debug("Video Track Ended"),f.type="videoTrackEnded",f.track=this):c.getAudioTrack()===this?(v.default.debug("Audio Track Ended"),f.type="audioTrackEnded",f.track=this):v.default.debug("Detached Track ended",this.kind,this.label,this),f.type&&c.dispatchEvent(f)}return c.videoSize=[640,480,640,480],void 0!==_.local&&!0!==_.local||(c.local=!0),c.initialized=!c.local,c._streamInitID=null,(f=c).audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},f._initSoundIfNotExists=function(C,L){f.audioMixing.sounds[C]||(f.audioMixing.sounds[C]={soundId:C,state:"IDLE",muted:f.userMuteAudio,filePath:L,volume:f.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},f._initSoundIfNotExists(-1),f.loadAudioBuffer=function(C,L,Z){var ee=g.report.reportApiInvoke(f.sid,{callback:Z,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(j.checkValidString)(L,"url",1,1024,!1),Object(j.checkValidString)(C,"id",1,1024,!1);var le=function(B){v.default.error("[".concat(f.streamId,"] loadAudioBuffer Failed: ")+B),ee(d.default.LOAD_AUDIO_FAILED)},W=new XMLHttpRequest;W.open("GET",L,!0),W.responseType="arraybuffer",W.onload=function(){if(W.status>400)le("".concat(W.status," ").concat(W.statusText));else{var B=W.response;f.audioMixing.audioContextInited||f._initAudioContext(),f.audioMixing.ctx.decodeAudioData(B,function(z){f.audioMixing.buffer[C]=z,ee(null)},function(z){v.default.error("[".concat(f.streamId,"] decodeAudioData Failed: "),z),ee(z)})}},W.onerror=function(){return le("load error")},W.ontimeout=function(){return le("timeout")},W.send()},f.createAudioBufferSource=function(C){var L=g.report.reportApiInvoke(f.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(f.audioMixing.buffer[C.id]){var Z=f.audioMixing.buffer[C.id],ee=f.audioMixing.ctx.createBufferSource();ee.buffer=Z;var le=f.audioMixing.ctx.createGain();if(ee.connect(le),le.connect(f.audioMixing.mediaStreamDest),ee.gainNode=le,C.loop)ee.loop=!0,ee.start(0,C.playTime/1e3);else if(C.cycle>1)if(Object(R.isChrome)()){ee.loop=!0;var W=C.cycle*Z.duration*1e3-(C.playTime||0);ee.start(0,C.playTime/1e3,W/1e3)}else v.default.warning("[".concat(f.streamId,"] Cycle Param is ignored by current browser")),ee.start(0,C.playTime/1e3);else ee.start(0,C.playTime/1e3);var B=f.audioMixing.sounds[C.soundId];return B.source=ee,f._flushAudioMixingMuteStatus(),ee.addEventListener("ended",function(){ee===B.source&&f.dispatchEvent({type:"audioSourceEnded",soundId:C.soundId,source:ee,sound:B})}),L(),ee}var z="AUDIOBUFFER_NOT_FOUND";return v.default.error("[".concat(f.streamId,"] "),z,C.id),L(!1),!1},f.on("audioSourceEnded",function(C){var L=C.source,Z=C.sound;Z&&Z.state===f.audioMixing.states.BUSY&&!Z.pauseAt&&(Z.state=f.audioMixing.states.IDLE,Z.startAt=null,Z.startOffset=null,Z.resumeAt=null,Z.resumeOffset=null,L.gainNode&&L.gainNode.disconnect&&L.gainNode.disconnect(),L.buffer=null,f.audioMixing.mediaStreamSource.connect(f.audioMixing.mediaStreamDest))}),f.clearAudioBufferSource=function(){f.audioBufferSource.forEach(function(C){C.stop()})},f._isSoundExists=function(C){return!!f.audioMixing.sounds[C.soundId]||(v.default.error("SoundId not exists. #".concat(C.soundId)),!1)},f._initAudioContext=function(){if(f.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!f.stream)throw new Error("Failed to init audio context. Local Stream not initialized");f.audioMixing.ctx=Object(N.a)(),f.audioMixing.mediaStreamSource=f.audioMixing.ctx.createMediaStreamSource(f.stream),f.audioMixing.mediaStreamDest=f.audioMixing.ctx.createMediaStreamDestination(),f.audioMixing.mediaStreamSource.connect(f.audioMixing.mediaStreamDest);var C=f.stream.getVideoTracks()[0];if(C&&f.audioMixing.mediaStreamDest.stream.addTrack(C),f._originStream=f.stream,f._isAudioMuted()?(f._unmuteAudio(),f.stream=f.audioMixing.mediaStreamDest.stream,f._muteAudio()):f.stream=f.audioMixing.mediaStreamDest.stream,f.audioLevelHelper=null,f.pc&&f.pc.peerConnection&&f.pc.peerConnection){var L=(f.pc.peerConnection&&f.pc.peerConnection.getSenders()).find(function(ee){return ee&&ee.track&&"audio"==ee.track.kind}),Z=f.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];L&&L.replaceTrack&&Z&&L.replaceTrack(Z)}f.audioMixing.audioContextInited=!0},f._cleanupAudioMixing=function(){if(f.audioMixing.audioContextInited){for(var C in f.audioMixing.sounds){var L=f.audioMixing.sounds[C];L.state!==f.audioMixing.states.BUSY&&L.state!==f.audioMixing.states.PAUSED||f._stopOneEffect({soundId:C})}f.audioLevelHelper=null,f.audioMixing.audioContextInited=!1}},f._reloadInEarMonitoringMode=function(C){if(C){if(!f.audioMixing.inEarMonitoringModes[C])return v.default.error("[".concat(f.streamId,"] Invalid InEarMonitoringMode ").concat(C));f.audioMixing.inEarMonitoring=C}switch(f.audioMixing.audioContextInited||f._initAudioContext(),f.audioMixing.inEarMonitoring){case f.audioMixing.inEarMonitoringModes.FILE:f.audioMixing.mediaStreamSource.connectedToDestination&&(f.audioMixing.mediaStreamSource.disconnect(f.audioMixing.ctx.destination),f.audioMixing.mediaStreamSource.connectedToDestination=!1);case f.audioMixing.inEarMonitoringModes.ALL:for(var L in f.audioMixing.sounds){var Z=f.audioMixing.sounds[L];Z&&Z.source&&!Z.source.connectedToDestination&&(Z.source.gainNode.connect(f.audioMixing.ctx.destination),Z.source.connectedToDestination=!0)}}switch(f.audioMixing.inEarMonitoring){case f.audioMixing.inEarMonitoringModes.MICROPHONE:f.audioMixing.source.forEach(function(ee){ee.connectedToDestination&&(ee.gainNode.disconnect(f.audioMixing.ctx.destination),ee.connectedToDestination=!1)});case f.audioMixing.inEarMonitoringModes.ALL:f.audioMixing.mediaStreamSource.connectedToDestination||(f.audioMixing.mediaStreamSource.connect(f.audioMixing.ctx.destination),f.audioMixing.mediaStreamSource.connectedToDestination=!0)}},f._startAudioMixingBufferSource=function(C){f.audioMixing.audioContextInited||f._initAudioContext();var Z=C.replace,ee=f.createAudioBufferSource({soundId:C.soundId,id:C.filePath,loop:C.loop,cycle:C.cycle,playTime:C.playTime||0});return ee.sound=f.audioMixing.sounds[C.soundId],ee?(ee.addEventListener("ended",f._audioMixingFinishedListener,{once:!0}),f._reloadInEarMonitoringMode(),Z&&f.audioMixing.mediaStreamSource.disconnect(f.audioMixing.mediaStreamDest),ee):null},f._stopAudioMixingBufferSource=function(C){var L=f.audioMixing.sounds[C.soundId].source;return L?(L.removeEventListener("ended",f._audioMixingFinishedListener),f.audioMixing.mediaStreamSource.connect(f.audioMixing.mediaStreamDest),L.stop(),L.gainNode&&L.gainNode.disconnect&&L.gainNode.disconnect(),L.buffer=null,L):null},f._flushAudioMixingMuteStatus=function(C){for(var L in f.audioMixing.sounds){var Z=f.audioMixing.sounds[L];Z&&(void 0!==C&&(Z.muted=!!C),Z.source&&(Z.source.gainNode.gain.value=Z.muted?0:Z.volume/100))}},f._handleAudioMixingInvalidStateError=function(C,L,Z){var ee=f.audioMixing.sounds[L.soundId],le=-1===L.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";v.default.error("[".concat(f.streamId,"] Cannot ").concat(C,": ").concat(le,", state is ").concat(ee.state)),Z&&Z(le)},f._handleAudioMixingNoSourceError=function(C,L,Z){f.audioMixing.sounds[L.soundId].state=f.audioMixing.states.IDLE;var ee=-1===L.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";v.default.error("[".concat(f.streamId,"] Cannot ").concat(C,": ").concat(ee)),Z&&Z(ee)},f._getOneEffectStates=function(C){var L=f.audioMixing.sounds[C.soundId];return function(){return L?{state:L.state,startAt:L.startAt,resumeAt:L.resumeAt,pauseOffset:L.pauseOffset,pauseAt:L.pauseAt,resumeOffset:L.resumeOffset,stopAt:L.stopAt,duration:f._getOneEffectDuration(C),position:f._getOneEffectCurrentPosition(C)}:{}}},f._audioMixingFinishedListener=function(){var C=this.sound;C.state===f.audioMixing.states.IDLE&&f.audioMixing.buffer[C.options.filePath]&&!C.options.cacheResource&&(v.default.debug("Recycled buffer ".concat(C.options.filePath)),delete f.audioMixing.buffer[C.options.filePath]),-1===C.soundId&&f.dispatchEvent({type:"audioMixingFinished"})},f._playOneEffect=function(C,L){Object(j.checkValidObject)(C,"options");var Z=C.soundId,ee=C.cacheResource;if(Object(R.isSafari)()&&Object(R.getBrowserVersion)()<12){var le="BROWSER_NOT_SUPPORT";return v.default.error("[".concat(f.streamId,"] Cannot _playOneEffect: "),le),L(le)}f.audioMixing.audioContextInited||f._initAudioContext(),f._initSoundIfNotExists(Z);var W=f.audioMixing.sounds[Z];if(W.state===f.audioMixing.states.IDLE){if(void 0!==C.cycle&&!C.cycle>0)return le="Invalid Parmeter cycle: "+C.cycle,v.default.error("[".concat(f.streamId,"] ").concat(Z),le),L(le);if(Object(j.isEmpty)(ee)&&(C.cacheResource=!0),W.state=f.audioMixing.states.STARTING,W.options=C,f.audioMixing.buffer[C.filePath]){var B=f._startAudioMixingBufferSource(C);if(B)return W.source=B,W.startAt=Date.now(),W.resumeAt=null,W.pauseOffset=null,W.pauseAt=null,W.resumeOffset=null,W.stopAt=null,W.startOffset=C.playTime||0,W.state=f.audioMixing.states.BUSY,f._flushAudioMixingMuteStatus(),L(null);W.state=f.audioMixing.states.IDLE;var z="CREATE_BUFFERSOURCE_FAILED";if(L)return L(z);v.default.error("[".concat(f.streamId,"] "),z)}else f.loadAudioBuffer(C.filePath,C.filePath,function(Q){if(Q)W.state=f.audioMixing.states.IDLE,L?L(Q):v.default.error("[".concat(f.streamId,"] "),Q);else{var ge=f._startAudioMixingBufferSource(C);if(ge)return W.source=ge,W.startAt=Date.now(),W.resumeAt=null,W.pauseOffset=null,W.pauseAt=null,W.resumeOffset=null,W.stopAt=null,W.startOffset=C.playTime||0,W.state=f.audioMixing.states.BUSY,f._flushAudioMixingMuteStatus(),L(null);if(W.state=f.audioMixing.states.IDLE,Q="CREATE_BUFFERSOURCE_FAILED",L)return L(Q);v.default.error("[".concat(f.streamId,"] "),Q)}})}else f._handleAudioMixingInvalidStateError("_playEffect",C,L)},f._stopOneEffect=function(C,L){var Z=f.audioMixing.sounds[C.soundId];return f._isSoundExists(C)?Z.state===f.audioMixing.states.BUSY||Z.state===f.audioMixing.states.PAUSED?(f._stopAudioMixingBufferSource(C),Z.stopAt=Date.now(),Z.state=f.audioMixing.states.IDLE,f.audioMixing.buffer[Z.options.filePath]&&!Z.options.cacheResource&&(v.default.debug("Recycled buffer ".concat(Z.options.filePath)),delete f.audioMixing.buffer[Z.options.filePath]),void(L&&L(null))):void f._handleAudioMixingInvalidStateError("_stopOneEffect",C,L):L("SOUND_NOT_EXISTS")},f._pauseOneEffect=function(C,L){var Z=f.audioMixing.sounds[C.soundId];if(Z.state===f.audioMixing.states.BUSY)return f._stopAudioMixingBufferSource(C)?(Z.pauseAt=Date.now(),Z.state=f.audioMixing.states.PAUSED,Z.pauseOffset=Z.resumeAt?Z.pauseAt-Z.resumeAt+Z.resumeOffset:Z.pauseAt-Z.startAt+Z.startOffset,L&&L(null)):void f._handleAudioMixingNoSourceError("_pauseOneEffect",C,L);f._handleAudioMixingInvalidStateError("_pauseOneEffect",C,L)},f._resumeOneEffect=function(C,L){var Z=f.audioMixing.sounds[C.soundId];if(Z.state===f.audioMixing.states.PAUSED){var le=f._startAudioMixingBufferSource({soundId:C.soundId,filePath:Z.options.filePath,cycle:Z.options.cycle,loop:Z.options.loop,playTime:Z.pauseOffset,replace:Z.options.replace});if(!le){var W="CREATE_BUFFERSOURCE_FAILED";return L(W),void v.default.error("[".concat(f.streamId,"] "),W)}Z.source=le,Z.resumeAt=Date.now(),Z.resumeOffset=Z.pauseOffset,Z.state=f.audioMixing.states.BUSY,Z.pauseAt=null,Z.pauseOffset=null,L(null)}else f._handleAudioMixingInvalidStateError("_resumeOneEffect",C,L)},f._getOneEffectDuration=function(C){var L=f.audioMixing.sounds[C.soundId];return L.options&&L.options.filePath&&f.audioMixing.buffer[L.options.filePath]?1e3*f.audioMixing.buffer[L.options.filePath].duration:null},f._getOneEffectCurrentPosition=function(C,L){var Z=f.audioMixing.sounds[C.soundId];return Z.state===f.audioMixing.states.PAUSED?Z.pauseOffset%f._getOneEffectDuration(C):Z.state===f.audioMixing.states.BUSY?Z.resumeAt?(Date.now()-Z.resumeAt+Z.resumeOffset)%f._getOneEffectDuration(C):(Date.now()-Z.startAt+Z.startOffset)%f._getOneEffectDuration(C):void(L&&f._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",C))},f._setOneEffectPosition=function(C,L,Z){var ee=f.audioMixing.sounds[C.soundId];if(ee.state===f.audioMixing.states.BUSY){if(!f._stopAudioMixingBufferSource(C))return void f._handleAudioMixingNoSourceError("_setOneEffectPosition",C,Z);var W=f._startAudioMixingBufferSource({soundId:C.soundId,filePath:ee.options.filePath,loop:ee.options.loop,cycle:ee.options.cycle,playTime:L});if(!W){var B="CREATE_BUFFERSOURCE_FAILED";return Z&&Z(B),void v.default.error("[".concat(f.streamId,"] "),B)}ee.source=W,ee.startAt=Date.now(),ee.startOffset=L,ee.resumeAt=null,ee.resumeOffset=null,ee.pauseOffset=null,ee.pauseAt=null}else{if(ee.state!==f.audioMixing.states.PAUSED)return void f._handleAudioMixingInvalidStateError("_setOneEffectPosition",C,Z);ee.pauseOffset=L}Z&&Z(null)},f.startAudioMixing=function(C,L){var Z=g.report.reportApiInvoke(f.sid,{callback:function(se){if(se)return L&&L(se);f.dispatchEvent({type:"audioMixingPlayed"}),L&&L(null)},getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:C});Object(j.checkValidObject)(C,"options");var ee=C.filePath,le=C.cacheResource,W=C.cycle,B=C.loop,z=C.playTime,Q=C.replace;Object(j.checkValidString)(ee,"filePath",1,Object(m.getParameter)("FILEPATH_LENMAX"),!1),Object(j.checkValidNumber)(z,"playTime",0,1e8),!Object(j.isEmpty)(W)&&Object(j.checkValidNumber)(W,"cycle"),!Object(j.isEmpty)(B)&&Object(j.checkValidBoolean)(B,"loop"),!Object(j.isEmpty)(Q)&&Object(j.checkValidBoolean)(Q,"replace"),!Object(j.isEmpty)(le)&&Object(j.checkValidBoolean)(le,"cacheResource");var ge=b()({soundId:-1},C);f._playOneEffect(ge,Z)},f.stopAudioMixing=function(C){var L=g.report.reportApiInvoke(f.sid,{callback:C,getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});f._stopOneEffect({soundId:-1},L)},f.pauseAudioMixing=function(C){var L=g.report.reportApiInvoke(f.sid,{callback:C,getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return f._pauseOneEffect({soundId:-1},L)},f.resumeAudioMixing=function(C){var L=g.report.reportApiInvoke(f.sid,{callback:function(Z,ee){if(Z)return C&&C(Z);f.dispatchEvent({type:"audioMixingPlayed"}),C&&C(null)},getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});f._resumeOneEffect({soundId:-1},L)},f.adjustAudioMixingVolume=function(C){var L=g.report.reportApiInvoke(f.sid,{getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(j.checkValidNumber)(C,"volume",0,100),f.audioMixing.sounds[-1].volume=C,f._flushAudioMixingMuteStatus(),L()},f.getAudioMixingDuration=function(){var C=g.report.reportApiInvoke(f.sid,{getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),L=f._getOneEffectDuration({soundId:-1});return C(null,L),L},f.getAudioMixingCurrentPosition=function(){var C=g.report.reportApiInvoke(f.sid,{getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),L=f._getOneEffectCurrentPosition({soundId:-1},!0);return C(null,L),L},f.setAudioMixingPosition=function(C,L){var Z=g.report.reportApiInvoke(f.sid,{callback:L,options:arguments,tag:"tracer",getStates:f._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(j.checkValidNumber)(C,"position",0,1e8),f._setOneEffectPosition({soundId:-1},C,Z)},f.playEffect=function(C,L){var Z=g.report.reportApiInvoke(f.sid,{callback:function(B){if(B)return L&&L(B);f.dispatchEvent({type:"effectPlayed"}),L&&L(null)},name:"Stream.playEffect",options:C});Object(j.checkValidObject)(C,"options");var ee=C.soundId,le=C.filePath,W=C.cycle;Object(j.checkValidNumber)(ee,"soundId",1,1e4),Object(j.checkValidString)(le,"filePath",0,Object(m.getParameter)("FILEPATH_LENMAX"),!1),!Object(j.isEmpty)(W)&&Object(j.checkValidNumber)(W,"cycle"),f._playOneEffect(C,Z)},f.stopEffect=function(C,L){var Z=g.report.reportApiInvoke(f.sid,{callback:L,getStates:f._getOneEffectStates({soundId:C}),name:"Stream.stopEffect"});Object(j.checkValidNumber)(C,"soundId",1,1e4),f._stopOneEffect({soundId:C},Z)},f.stopAllEffects=function(C){var L=g.report.reportApiInvoke(f.sid,{callback:C,name:"Stream.stopAllEffect"}),Z=!1,ee=0,le=0,W=function(Q){Z||(Q?(L(Q),Z=!0):ee+=1,ee===le&&(L(null),Z=!0))};for(var B in f.audioMixing.sounds){var z=f.audioMixing.sounds[B];-1!==z.soundId&&(z.state!==f.audioMixing.states.BUSY&&z.state!==f.audioMixing.states.PAUSED||(le++,f._stopOneEffect({soundId:B},W)))}le||L(null)},f.preloadEffect=function(C,L,Z){var ee=g.report.reportApiInvoke(f.sid,{callback:Z,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(j.checkValidNumber)(C,"soundId",1,1e4),Object(j.checkValidString)(L,"filePath",1,Object(m.getParameter)("FILEPATH_LENMAX"),!1),f._initSoundIfNotExists(C,L),f.audioMixing.buffer[L]?ee(null):f.loadAudioBuffer(L,L,ee)},f.unloadEffect=function(C,L){var Z=g.report.reportApiInvoke(f.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(j.checkValidNumber)(C,"soundId",1,1e4);var ee=f.audioMixing.sounds[C];if(!ee){var le="SOUND_NOT_EXISTS";return v.default.error(le,C),void Z(le)}var W=ee.options?ee.options.filePath:ee.filePath;if(W)delete f.audioMixing.buffer[W],delete f.audioMixing.sounds[C],Z(null);else{var B="SOUND_BUFFER_NOT_FOUND";v.default.error(B,C),Z(B)}},f.pauseEffect=function(C,L){var Z=g.report.reportApiInvoke(f.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return f._pauseOneEffect({soundId:C},Z)},f.pauseAllEffects=function(C){var L=g.report.reportApiInvoke(f.sid,{callback:C,name:"Stream.pauseAllEffects"}),Z=!1,ee=0,le=0,W=function(z){Z||(z?(L(z),Z=!0):ee+=1,ee===le&&(L(null),Z=!0))};for(var B in f.audioMixing.sounds)"-1"!==B&&f.audioMixing.sounds[B].state===f.audioMixing.states.BUSY&&(le++,f._pauseOneEffect({soundId:B},W));le||L(null)},f.resumeEffect=function(C,L){Object(j.checkValidNumber)(C,"soundId",1,1e4);var Z=g.report.reportApiInvoke(f.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return f._resumeOneEffect({soundId:C},Z)},f.resumeAllEffects=function(C){var L=g.report.reportApiInvoke(f.sid,{callback:C,name:"Stream.resumeAllEffects"}),Z=!1,ee=0,le=0,W=function(z){Z||(z?(L(z),Z=!0):ee+=1,ee===le&&(L(null),Z=!0))};for(var B in f.audioMixing.sounds)"-1"!==B&&f.audioMixing.sounds[B].state===f.audioMixing.states.PAUSED&&(le++,f._resumeOneEffect({soundId:B},W));le||L(null)},f.getEffectsVolume=function(){var C=[];for(var L in f.audioMixing.sounds){var Z=f.audioMixing.sounds[L];Z&&"-1"!==L&&C.push({soundId:parseInt(L),volume:Z.volume})}return C},f.setEffectsVolume=function(C,L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:L});for(var ee in Object(j.checkValidNumber)(C,"volume",0,100),f.audioMixing.defaultVolume=C,f.audioMixing.sounds){var le=f.audioMixing.sounds[ee];"-1"!==ee&&(le.volume=C)}f._flushAudioMixingMuteStatus(),Z(null)},f.setVolumeOfEffect=function(C,L,Z){var ee=g.report.reportApiInvoke(f.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:Z});Object(j.checkValidNumber)(C,"soundId",0,1e4),Object(j.checkValidNumber)(L,"volume",0,100),f._initSoundIfNotExists(C);var le=f.audioMixing.sounds[C];le.volume=L,f._flushAudioMixingMuteStatus(),ee(null)},Y.a.addVideoEffectCapability(c),function(f,C){f.videoConstraint={},C.cameraId&&(f.videoConstraint.deviceId={exact:C.cameraId}),C.facingMode&&(f.videoConstraint.facingMode=C.facingMode),f.videoSize&&(f.videoConstraint.width=f.videoSize[0],f.videoConstraint.height=f.videoSize[1]),Object(R.isLegacyChrome)()||(f.videoConstraint.frameRate=30),f.audioConstraint={},C.microphoneId&&(f.audioConstraint.deviceId={exact:C.microphoneId}),Object(R.isLegacyChrome)()||f.audioProcessing&&(void 0!==f.audioProcessing.AGC&&(Object(R.isFireFox)()?f.audioConstraint.autoGainControl=f.audioProcessing.AGC:Object(R.isChrome)()&&(f.audioConstraint.googAutoGainControl=f.audioProcessing.AGC,f.audioConstraint.googAutoGainControl2=f.audioProcessing.AGC)),void 0!==f.audioProcessing.AEC&&(f.audioConstraint.echoCancellation=f.audioProcessing.AEC),void 0!==f.audioProcessing.ANS&&(Object(R.isFireFox)()?f.audioConstraint.noiseSuppression=f.audioProcessing.ANS:Object(R.isChrome)()&&(f.audioConstraint.googNoiseSuppression=f.audioProcessing.ANS))),f.screenConstraint={},C.sourceId&&(f.screenConstraint.sourceId=C.sourceId),C.extensionId&&Object(R.isChrome)()?(f.screenConstraint.extensionId=C.extensionId,f.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:f.screenAttributes.width,maxHeight:f.screenAttributes.height,maxFrameRate:f.screenAttributes.maxFr,minFrameRate:f.screenAttributes.minFr}):(f.screenConstraint.mediaSource="screen",f.screenConstraint.width=f.screenAttributes.width,f.screenConstraint.height=f.screenAttributes.height,f.screenConstraint.frameRate={ideal:f.screenAttributes.maxFr,max:f.screenAttributes.maxFr}),C.mediaSource&&(f.screenConstraint.mediaSource=C.mediaSource),f.setVideoResolution=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(L instanceof Array)){var ee=re(L+="");return ee&&ee.video?(f.videoConstraint=b()(f.videoConstraint,{width:{ideal:ee.video.width},height:{ideal:ee.video.height}}),C.attributes.resolution=ee.attributes.resolution,(le=f.stream&&f.stream.getVideoTracks&&f.stream.getVideoTracks()[0])&&le.applyConstraints?(v.default.debug("setVideoResolution applyConstraints",f.videoConstraint),le.applyConstraints(f.videoConstraint).then(Z).catch(Z)):Z(),!0):(Z("NO_PROFILE_".concat(L)),!1)}var le,W=L[0],B=L[1];f.videoConstraint=b()(f.videoConstraint,{width:{ideal:W},height:{ideal:B}}),C.attributes.resolution="".concat(W,"x").concat(B),(le=f.stream&&f.stream.getVideoTracks&&f.stream.getVideoTracks()[0])&&le.applyConstraints?(v.default.debug("setVideoResolution applyConstraints",f.videoConstraint),Y.a.disableVideoEffect(f).then(function(){return le.applyConstraints(f.videoConstraint).then(Z).catch(Z)}).then(function(){return Y.a.restoreVideoEffect(f)})):Z()},f.setVideoFrameRate=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(R.isFireFox)())return Z("FIREFOX_NOT_SUPPORTED"),!1;if("object"===J()(L)&&L instanceof Array&&L.length>1){f.videoConstraint=b()(f.videoConstraint,{frameRate:L[0]}),f.attributes.minFrameRate=L[0],f.attributes.maxFrameRate=L[1];var ee=f.stream&&f.stream.getVideoTracks&&f.stream.getVideoTracks()[0];return ee&&ee.applyConstraints?(v.default.debug("setVideoFrameRate applyConstraints",f.videoConstraint),ee.applyConstraints(f.videoConstraint).then(Z).catch(Z)):Z(),!0}return Z("INVALID_PARAM_".concat(JSON.stringify(L))),!1},f.setVideoBitRate=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===J()(L)&&L instanceof Array&&L.length>1?(C.attributes.minVideoBW=L[0],C.attributes.maxVideoBW=L[1],f.connectionSpec&&(f.connectionSpec.minVideoBW=L[0],f.connectionSpec.maxVideoBW=L[1]),f.pc&&f.pc.renegotiate&&f.pc.renegotiate(),Z(),!0):(Z("INVALID_PARAM_".concat(JSON.stringify(L))),!1)},f.setScreenBitRate=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===J()(L)&&L instanceof Array&&L.length>1?(f.screenAttributes.minVideoBW=L[0],f.screenAttributes.maxVideoBW=L[1],Z(),!0):(Z("INVALID_PARAM_".concat(JSON.stringify(L))),!1)},f.setScreenProfile=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(j.checkValidEnum)(L,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var ee=re(L);return ee&&ee.screen?(f.screenConstraint.mandatory?(f.screenConstraint.mandatory.maxWidth=ee.screen.width,f.screenConstraint.mandatory.maxHeight=ee.screen.height,ee.screen.frameRate&&ee.screen.frameRate.min&&ee.screen.frameRate.max&&(f.screenConstraint.mandatory.minFrameRate=ee.screen.frameRate.min,f.screenConstraint.mandatory.maxFrameRate=ee.screen.frameRate.max)):f.screenConstraint=b()(f.screenConstraint,ee.screen),f.screenAttributes.width=ee.screen.width,f.screenAttributes.height=ee.screen.height,f.screenAttributes.minFr=ee.screen.frameRate.min,f.screenAttributes.maxFr=ee.screen.frameRate.max,Z(),!0):(Z("NO_SCREEN_PROFILE_".concat(JSON.stringify(L))),!1)},f.setVideoProfileCustom=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});f.setVideoResolution(L[0]),f.setVideoFrameRate([L[1],L[1]]),f.setVideoBitRate([L[2],L[2]]),Z()},f.setVideoProfileCustomPlus=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});f.setVideoResolution([L.width,L.height]),C.attributes.resolution="".concat(L.width,"x").concat(L.height),f.setVideoFrameRate([L.framerate,L.framerate]),f.setVideoBitRate([L.bitrate,L.bitrate]),Z()},f.setVideoProfile=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),ee=re(L);if(!ee){var le="Invalid Profile ".concat(L);throw new Error(le)}if(f.profile=L,ee&&ee.video){f.profile=ee.profileName,f.videoConstraint=b()(f.videoConstraint,ee.video),f.connectionSpec&&ee.attributes.maxVideoBW&&(f.connectionSpec.minVideoBW=ee.attributes.minVideoBW,f.connectionSpec.maxVideoBW=ee.attributes.maxVideoBW),Object(R.isEdge)()&&(f.videoConstraint.frameRate.max=60),Object(R.isFireFox)()&&(f.videoConstraint.frameRate=30),C.attributes=b()(C.attributes,ee.attributes),f.pc&&f.pc.renegotiate&&f.pc.renegotiate();var W=f.stream&&f.stream.getVideoTracks&&f.stream.getVideoTracks()[0];return W&&W.applyConstraints?(v.default.debug("setVideoProfile applyConstraints",f.videoConstraint),Y.a.disableVideoEffect(f).then(function(){return W.applyConstraints(f.videoConstraint)}).then(function(){return Y.a.restoreVideoEffect(f)}).then(function(B){return new Promise(function(z,Q){Z(B),setTimeout(function(){Object(E.vsResHack)(f.stream,function(ge,se){f.videoWidth=ge,f.videoHeight=se,z()},function(ge){v.default.warning("[".concat(f.streamId,"] vsResHack failed: "),ge),Q()})},2500)})}).catch(Z)):Z(),!0}return Z("INVALID_VIDEO_PROFILE_".concat(L)),!1},f.setAudioProfile=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(j.checkValidEnum)(L,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),f.audioProfile=L;var ee=y(L);return f.highQuality=ee.highQuality,f.stereo=ee.stereo,f.speech=ee.speech,f.lowQuality=ee.lowQuality,f.stereo&&Object(R.isChrome)()&&(f.audioConstraint.googAutoGainControl=!1,f.audioConstraint.googAutoGainControl2=!1,f.audioConstraint.echoCancellation=!1,f.audioConstraint.googNoiseSuppression=!1),Z(),!0},f.setVideoEncoderConfiguration=function(L){Object(j.checkValidObject)(L,"config");var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.setVideoEncoderConfiguration",options:L,tag:"tracer"});L.resolution&&(Object(j.checkValidNumber)(L.resolution.width,"config.resolution.width"),Object(j.checkValidNumber)(L.resolution.height,"config.resolution.height"),f.setVideoResolution([L.resolution.width,L.resolution.height])),L.frameRate&&(Object(j.checkValidNumber)(L.frameRate.min,"config.frameRate.min"),Object(j.checkValidNumber)(L.frameRate.max,"config.frameRate.max"),f.setVideoFrameRate([L.frameRate.min,L.frameRate.max])),L.bitrate&&(Object(j.checkValidNumber)(L.bitrate.min,"config.bitrate.min",1,1e7),Object(j.checkValidNumber)(L.bitrate.max,"config.bitrate.max",1,1e7),f.setVideoBitRate([L.bitrate.min,L.bitrate.max])),Z()},f.getSupportedProfile=function(L){var Z=g.report.reportApiInvoke(f.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:L});if(!f.local){var ee="ONLY_LOCAL_STREAM_SUPPORTED";return v.default.error(ee),Z(ee)}if(!f.stream)return v.default.error(ee="STREAM_NOT_INIT"),Z(ee);if(!f.stream.getVideoTracks)return v.default.error(ee="TRACK_NOT_SUPPORT"),Z(ee);var le=f.stream.getVideoTracks()[0];if(!le)return v.default.error(ee="NO_VIDEO_TRACK_FOUND"),Z(ee);if(!le.getCapabilities)return v.default.error(ee="GETCAPABILITY_NOT_SUPPORT"),Z(ee);var W=le.getCapabilities(),B=U(W);return Z(null,B)}}(c,_),c.getId=function(){return c.streamId},c.getUserId=function(){return c.userId},c.checkDualStreamEnabled=function(){return!(!Object(m.getParameter)("DUALSTREAM_OPERATION_CHECK")||!c.isDualStream)&&(v.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},c.setUserId=function(f){var C=g.report.reportApiInvoke(c.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});c.userId&&v.default.warning("[".concat(c.streamId,"] Stream.userId ").concat(c.userId," => ").concat(f)),c.userId=f,C()},c.getAttributes=function(){return _.screen?c.screenAttributes:_.attributes},c.hasAudio=function(){return!!c.audio},c.hasVideo=function(){return!!c.video},c.hasScreen=function(){return!!c.screen},c.hasScreenAudio=function(){return!!c.screenAudio},c.isVideoOn=function(){return(c.hasVideo()||c.hasScreen())&&!c.userMuteVideo},c.isAudioOn=function(){return c.hasAudio()&&!c.userMuteAudio},c.init=function(f,C){var L=g.report.reportApiInvoke(c.sid,{callback:function(W,B){if(W)return C&&C(W);f&&f(B)},name:"Stream.init",options:arguments,tag:"tracer"}),Z=((new Date).getTime(),arguments[2]);if(void 0===Z&&(Z=2),!0===c.initialized)return L({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==c.local)return L({type:"warning",msg:"STREAM_NOT_LOCAL"});var ee=Math.random().toString().slice(3);c._streamInitID=ee,c.videoSource?c.videoName="videoSource":c.video&&(c.videoName=D.a.searchDeviceNameById(_.cameraId)||"default"),c.audioSource?c.audioName="audioSource":c.audio&&(c.audioName=D.a.searchDeviceNameById(_.microphoneId)||"default"),c.screen&&(c.screenName=_.extensionId||"default");try{if(_.audio||_.video||_.screen||_.screenAudio||_.videoSource||_.audioSource){v.default.debug("[".concat(c.streamId,"] Requested access to local media"));var le={streamId:c.streamId};_.videoSource?le.videoSource=_.videoSource:_.screen?le.screen=c.screenConstraint:_.video&&(le.video=c.videoConstraint),_.audioSource?le.audioSource=_.audioSource:_.screenAudio?le.screenAudio=_.screenAudio:_.audio&&(le.audio=c.audioConstraint),Object(I.b)(le,function(W){if(le.screenAudio&&!W.getAudioTracks()[0]&&v.default.warning("[".concat(c.streamId,"] Audio sharing is not selected")),le.screen&&v.default.debug("[".concat(c.streamId,"] User has granted access to screen sharing")),(le.video||le.audio)&&v.default.debug("[".concat(c.streamId,"] User has granted access to local media")),null===c._streamInitID){W.getTracks().forEach(function(z){z.stop()});var B={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return v.default.error(c.streamId,B.info),void L(B)}if(c._streamInitID!==ee)return W.getTracks().forEach(function(z){z.stop()}),v.default.error(c.streamId,(B={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"}).info),void L(B);c.dispatchEvent({type:"accessAllowed"}),c.stream=W,c.initialized=!0,c.reloadDeviceName(),c.hasVideo()&&Object(E.vsResHack)(W,function(z,Q){c.videoWidth=z,c.videoHeight=Q},function(z){v.default.warning("[".concat(c.streamId,"] vsResHack failed: "),z)}),_.screen&&c.stream&&c.stream.getVideoTracks()[0]&&(c.stream.getVideoTracks()[0].onended=function(){c.dispatchEvent({type:"stopScreenSharing"})}),c.stream&&c.stream.getTracks&&c.stream.getTracks().forEach(function(z){z&&!z.onended&&(z.onended=q),"video"===z.kind&&_.optimizationMode&&(z.contentHint=_.optimizationMode,z.contentHint===_.optimizationMode&&v.default.debug("[".concat(c.streamId,"] set content hint to"),_.optimizationMode))}),L()},function(W){var B={type:"error",info:null};switch(W&&(B.msg=W.name||W.code||W,W.message&&(B.info=W.message),W.code&&(B.info?B.info+=". "+W.code:B.info=" "+W.code),W.constraint&&(B.info?B.info+=". Constraint: "+W.constraint:B.info="constraint: "+W.constraint)),B.msg){case"Starting video failed":case"TrackStartError":if(c.videoConstraint&&(delete c.videoConstraint.width,delete c.videoConstraint.height),Z>0)return void setTimeout(function(){c.init(function(Q){return L(Q)},L,Z-1)},1);B.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":B.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":B.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":B.msg="PERMISSION_DENIED",c.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":c.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":B.msg="CONSTRAINT_NOT_SATISFIED";break;default:B.msg||(B.msg="UNDEFINED")}var z="Media access ".concat(B.msg).concat(B.info?": "+B.info:"");v.default.error("[".concat(c.streamId,"] "),z),L(B)})}else L({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(W){v.default.error("[".concat(c.streamId,"] Stream init: "),W),L({type:"error",msg:W.message||W})}},c.reloadDeviceName=function(){if(c.stream){if(c.stream.getVideoTracks){var f=c.stream.getVideoTracks()[0];f&&f.label&&(c.videoName=f.label)}if(c.stream.getAudioTracks){var C=c.stream.getAudioTracks()[0];C&&C.label&&(c.audioName=C.label)}}},c.close=function(){var f=g.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(v.default.debug("[".concat(c.streamId,"] Close stream with id"),c.streamId),c._originStream)try{c._originStream.getTracks().map(function(ee){return ee.stop()})}catch(ee){}if(void 0!==c.stream){var C=c.stream.getTracks();for(var L in C)C.hasOwnProperty(L)&&(C[L].stop(),C[L].onended=null);!c.isLowStream&&c.local?Y.a.disableVideoEffect(c).then(function(){c.stream=void 0}):(c.stream&&c.stream.clean&&c.stream.clean(),c.stream=void 0)}if(c._originStream){for(var L in console.log("clear _originStream"),C=c._originStream.getTracks())C.hasOwnProperty(L)&&(C[L].stop(),C[L].onended=null,console.log("clear onended"));!c.isLowStream&&c.local?Y.a.disableVideoEffect(c).then(function(){c._originStream=void 0}):(c._originStream&&c._originStream.clean&&c._originStream.clean(),c._originStream=void 0)}if(Object(R.isSafari)()&&c.pc&&c.pc.peerConnection&&c.pc.peerConnection.removeTrack&&c.pc.peerConnection.getSenders){var Z=c.pc.peerConnection.getSenders();Z.forEach(function(ee){ee&&(v.default.debug("[".concat(c.streamId,"] Remove Track"),ee),c.pc.peerConnection.removeTrack(ee))})}c.local&&(c.initialized=!1),c._streamInitID=null,c._onAudioMute=void 0,c._onAudioUnmute=void 0,c._onVideoMute=void 0,c._onVideoUnmute=void 0,c.lowStream&&c.lowStream.close(),c.player&&c.player.video&&c.player.video.srcObject&&(c.player.video.srcObject=null),c.player&&c.player.audio&&c.player.audio.srcObject&&(c.player.audio.srcObject=null),f()},c.enableAudio=function(){var f,C=g.report.reportApiInvoke(c.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return v.default.deprecate("[".concat(c.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),c.userMuteAudio||v.default.warning("[".concat(c.streamId,"] User already enableAudio")),c.userMuteAudio=!1,C(null,f=!c.peerMuteAudio&&c._unmuteAudio()),f},c.disableAudio=function(){var f=g.report.reportApiInvoke(c.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});v.default.deprecate("[".concat(c.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),c.userMuteAudio&&v.default.warning("[".concat(c.streamId,"] User already disableAudio")),c.userMuteAudio=!0;var C=c._muteAudio();return f(null,C),C},c.enableVideo=function(){var f,C=g.report.reportApiInvoke(c.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return v.default.deprecate("[".concat(c.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),c.userMuteVideo||v.default.warning("[".concat(c.streamId,"] User already enableVideo")),c.userMuteVideo=!1,c.lowStream&&(c.lowStream.userMuteVideo=!1),C(null,f=!c.peerMuteVideo&&c._unmuteVideo()),f},c.disableVideo=function(){var f=g.report.reportApiInvoke(c.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});v.default.deprecate("[".concat(c.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),c.userMuteVideo&&v.default.warning("[".concat(c.streamId,"] User already disableVideo")),c.userMuteVideo=!0,c.lowStream&&(c.lowStream.userMuteVideo=!0);var C=c._muteVideo();return f(null,C),C},c.unmuteAudio=function(){var f,C=g.report.reportApiInvoke(c.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return c.userMuteAudio||v.default.warning("[".concat(c.streamId,"] User already unmuteAudio")),c.userMuteAudio=!1,C(null,f=!c.peerMuteAudio&&c._unmuteAudio()),f},c.muteAudio=function(){var f=g.report.reportApiInvoke(c.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});c.userMuteAudio&&v.default.warning("[".concat(c.streamId,"] User already muteAudio")),c.userMuteAudio=!0;var C=c._muteAudio();return f(null,C),C},c.unmuteVideo=function(){var f,C=g.report.reportApiInvoke(c.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return c.userMuteVideo||v.default.warning("[".concat(c.streamId,"] User already unmuteVideo")),c.userMuteVideo=!1,c.lowStream&&(c.lowStream.userMuteVideo=!1),C(null,f=!c.peerMuteVideo&&c._unmuteVideo()),f},c.muteVideo=function(){var f=g.report.reportApiInvoke(c.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});c.userMuteVideo&&v.default.warning("[".concat(c.streamId,"] User already muteVideo")),c.userMuteVideo=!0,c.lowStream&&(c.lowStream.userMuteVideo=!0);var C=c._muteVideo();return f(null,C),C},c._unmuteAudio=function(){return v.default.debug("[".concat(c.streamId,"] Unmuted audio stream with id "),c.streamId),c._flushAudioMixingMuteStatus(!1),!(!c.hasAudio()||!c.initialized||void 0===c.stream||!0===c.stream.getAudioTracks()[0].enabled||(c._onAudioUnmute&&c._onAudioUnmute(),c.pc&&(c.pc.isAudioMute=!1),c.stream.getAudioTracks()[0].enabled=!0,0))},c._isAudioMuted=function(){if(c.stream&&c.hasAudio()){var f=c.stream.getAudioTracks();return f.length>0&&!f[0].enabled}return!1},c._isVideoMuted=function(){if(c.stream&&c.hasVideo()){var f=c.stream.getVideoTracks();return f.length>0&&!f[0].enabled}return!1},c._muteAudio=function(){return v.default.debug("[".concat(c.streamId,"] Muted audio stream with id "),c.streamId),c._flushAudioMixingMuteStatus(!0),!!(c.hasAudio()&&c.initialized&&void 0!==c.stream&&c.stream.getAudioTracks()[0].enabled)&&(c._onAudioMute&&c._onAudioMute(),c.pc&&(c.pc.isAudioMute=!0),c.stream.getAudioTracks()[0].enabled=!1,c.sid&&g.report.audioSendingStopped(c.sid,{succ:!0,reason:"muteAudio"}),!0)},c._unmuteVideo=function(){return v.default.debug("[".concat(c.streamId,"] Unmuted video stream with id"),c.streamId),!(!c.initialized||void 0===c.stream||!c.stream.getVideoTracks().length||!0===c.stream.getVideoTracks()[0].enabled||(c._onVideoUnmute&&c._onVideoUnmute(),c.pc&&(c.pc.isVideoMute=!1),c.stream.getVideoTracks()[0].enabled=!0,c.lowStream&&c.lowStream._unmuteVideo(),0))},c._muteVideo=function(){return v.default.debug("[".concat(c.streamId,"] Muted video stream with id"),c.streamId),!!(c.initialized&&void 0!==c.stream&&c.stream.getVideoTracks().length&&c.stream.getVideoTracks()[0].enabled)&&(c._onVideoMute&&c._onVideoMute(),c.pc&&(c.pc.isVideoMute=!0),c.stream.getVideoTracks()[0].enabled=!1,c.lowStream&&c.lowStream._muteVideo(),c.sid&&g.report.videoSendingStopped(c.sid,{succ:!0,reason:"muteVideo"}),!0)},c.addTrack=function(f){if(c.audio&&"audio"===f.kind)v.default.warning("already added audio track");else if(c.video&&"video"===f.kind)v.default.warning("already added video track");else{var C=g.report.reportApiInvoke(c.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(c.pc&&c.pc.addTrack(f,c.stream),"audio"==f.kind){c._cleanupAudioMixing();var L=new MediaStream;c.userMuteAudio&&(f.enabled=!1),L.addTrack(f);var Z=c.stream.getVideoTracks()[0];Z&&L.addTrack(Z),c.audio=!0,_.audio=!0,c.stream=L,c.audioLevelHelper=null,c.player&&c.player.video&&(c.player.video.srcObject=c.stream)}else c.userMuteVideo&&(f.enabled=!1),c.stream.addTrack(f),c.video=!0,_.video=!0;f.onended||(f.onended=q),C()}},c.removeTrack=function(f){if(f)if(c.audio||"audio"!==f.kind)if(c.video||"video"!==f.kind){var C=g.report.reportApiInvoke(c.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});c.pc&&c.pc.removeTrack(f,c.stream),c.stream.removeTrack(f),c._cleanupAudioMixing(),"audio"===f.kind?(c.audio=!1,_.audio=!1):(c.video=!1,_.video=!1),c.audioLevelHelper=null,"live"==f.readyState&&(f.stop(),v.default.debug("[".concat(c.streamId,"] Track ").concat(f.kind," Stopped"))),C()}else v.default.warning("already removed video track");else v.default.warning("already removed audio track");else v.default.warning("track doesn't exist.")},c.setAudioOutput=function(f,C,L){var Z=g.report.reportApiInvoke(c.sid,{callback:function(ee,le){if(ee)return L&&L(ee);C&&C(le)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(j.isValidString)(f,1,255)?(c.audioOutput=f,c.player?void c.player.setAudioOutput(f,function(){return Z()},Z):Z()):(v.default.error("[".concat(c.streamId,"] setAudioOutput Invalid Parameter"),f),Z(d.default.INVALID_PARAMETER))},c.play=function(f,C,L){"function"==typeof C&&(L=C,C=null),v.default.debug("[".concat(c.streamId,"] play()."),f,C);var Z=g.report.reportApiInvoke(c.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:L});if(Object(j.checkValidString)(f,"elementID"),Object(j.isEmpty)(C)||(Object(j.isEmpty)(C.fit)||Object(j.checkValidEnum)(C.fit,"fit",["cover","contain"]),Object(j.isEmpty)(C.muted)||Object(j.checkValidBoolean)(C.muted,"muted")),c.player)v.default.warning("[".concat(c.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),c.resume().then(function(){Z(null)}).catch(Z);else{c.elementID=f,c.playOptions=C,!c.local||c.video||c.screen?(c.player=new P({id:c.getId(),stream:c,elementID:f,options:C}),c.local&&Y.a.applyEffectInPlayer(c)):c.hasAudio()&&(c.player=new P({id:c.getId(),stream:c,elementID:f,options:C}));var ee={video:null,audio:null},le=function W(B){if(ee[B.mediaType]=B,ee.video&&ee.audio)if(c.removeEventListener("player-status-change",W),ee.video.isErrorState||ee.audio.isErrorState){var z=ee.video.isErrorState?ee.video:ee.audio;Z({isErrorState:!0,status:z.status,reason:z.reason,video:ee.video,audio:ee.audio})}else Z("aborted"===ee.video.status&&"aborted"===ee.audio.status?{status:"aborted",reason:"stop",video:ee.video,audio:ee.audio}:null)};c.on("player-status-change",le),c.audioOutput&&c.player.setAudioOutput(c.audioOutput),void 0!==c.audioLevel&&c.player.setAudioVolume(c.audioLevel),c._flushAudioMixingMuteStatus(!1)}},c.stop=function(){var f=g.report.reportApiInvoke(c.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});v.default.debug("[".concat(c.streamId,"] Stop stream player with id "),c.streamId),c.player?(Y.a.removeEffectFromLocalPlayer(c),c.player.destroy(),delete c.player):v.default.error("[".concat(c.streamId,"] Stream.stop(): Stream is not playing")),c._flushAudioMixingMuteStatus(!0),f()},c.isPlaying=function(){return!!c.player},c.isPaused=function(){return!(!c.player||!(c.player.video&&c.player.video.paused&&c.player.mediaElemExists(c.player.video)||c.player.audio&&c.player.audio.paused&&c.player.mediaElemExists(c.player.audio)))},c.resume=function(){var f,C;return c.player?(c.player.video&&c.player.video.play&&(f=c.player.video.play()),f=f||Promise.resolve(),c.player.audio&&c.player.audio.play&&(C=c.player.audio.play()),C=C||Promise.resolve(),Promise.all([f,C])):Promise.reject("NO_PLAYER_FOUND")},c.getVideoTrack=function(){var f=g.report.reportApiInvoke(c.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(c.stream&&c.stream.getVideoTracks){var C=c.stream.getVideoTracks()[0];if(C)return v.default.info("[".concat(c.streamId,"] getVideoTrack"),C),f(),C}v.default.info("[".concat(c.streamId,"] getVideoTrack None")),f(null,"getVideoTrack None")},c.getAudioTrack=function(){var f=g.report.reportApiInvoke(c.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(c.stream&&c.stream.getAudioTracks){var C=c.stream.getAudioTracks()[0];if(C)return v.default.info("[".concat(c.streamId,"] getAudioTracks"),C),f(),C}v.default.info("[".concat(c.streamId,"] getAudioTracks None")),f(null,"getAudioTracks None")},c._hasVideoTracks=function(){return!!(c.stream&&c.stream.getVideoTracks&&c.stream.getVideoTracks()[0])},c._hasAudioTracks=function(){return!!(c.stream&&c.stream.getAudioTracks&&c.stream.getAudioTracks()[0])},c._replaceMediaStreamTrack=function(f,C,L){if(c.stream){if("video"==f.kind){if(ee=c.stream.getVideoTracks()[0])return c.userMuteVideo&&(f.enabled=!1),c.stream.removeTrack(ee),c.stream.addTrack(f),v.default.debug("[".concat(c.streamId,"] _replaceMediaStreamTrack ").concat(f.kind," SUCCESS")),"live"==ee.readyState&&(ee.stop(),v.default.debug("[".concat(c.streamId,"] Track ").concat(ee.kind," Stopped"))),C&&C();var Z="MEDIASTREAM_TRACK_NOT_FOUND";return v.default.error("[".concat(c.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(f.kind)),L(Z)}if("audio"==f.kind){var ee;if(ee=c.stream.getAudioTracks()[0]){c.userMuteAudio&&(f.enabled=!1);var le=new MediaStream;le.addTrack(f);var W=c.stream&&c.stream.getVideoTracks()[0];return W&&le.addTrack(W),c.stream=le,c.audioLevelHelper=null,c.player&&c.player.video&&(c.player.video.srcObject=c.stream),v.default.debug("[".concat(c.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==ee.readyState&&(ee.stop(),v.default.debug("[".concat(c.streamId,"] Track ").concat(ee.kind," Stopped"))),C&&C()}return Z="MEDIASTREAM_TRACK_NOT_FOUND",v.default.error("[".concat(c.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(f.kind)),L(Z)}return Z="INVALID_TRACK_TYPE",v.default.error("[".concat(c.streamId,"] _replaceMediaStreamTrack ").concat(Z," ").concat(f.kind)),L&&L(Z)}return Z="NO_STREAM_FOUND",v.default.error("[".concat(c.streamId,"] _replaceMediaStreamTrack ").concat(Z)),L&&L(Z)},c.replaceTrack=function(f,C,L){var Z=g.report.reportApiInvoke(c.sid,{callback:function(ee,le){if(ee)return L&&L(ee);C&&C(le)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return f&&f.kind?(c._cleanupAudioMixing(),f.onended||(f.onended=q),c.pc&&c.pc.hasSender&&c.pc.hasSender(f.kind)?void c.pc.replaceTrack(f,function(){return v.default.debug("[".concat(c.streamId,"] PeerConnection.replaceTrack ").concat(f.kind," SUCCESS")),c._replaceMediaStreamTrack(f,function(ee){return Z(null,ee)},Z)},function(ee){return v.default.error("[".concat(c.streamId,"] PeerConnection.replaceTrack ").concat(f.kind," Failed ").concat(ee)),Z(ee)}):c._replaceMediaStreamTrack(f,function(ee){return Z(null,ee)},Z)):Z("INVALID_TRACK")},c.setAudioVolume=function(f){var C=g.report.reportApiInvoke(c.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(j.checkValidNumber)(f,"level",0,100),c.audioLevel=f,c.player&&c.player.setAudioVolume(f),C()},c.getStats=function(f,C,L){var Z=[];Z.push(c._getPCStats(L)),Z.push(new Promise(function(ee){var le={};c.pc&&c.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(k.b)(le,"videoReceiveResolutionHeight",c.videoHeight),Object(k.b)(le,"videoReceiveResolutionWidth",c.videoWidth)):c.pc&&!c.pc.isSubscriber&&((Object(R.isSafari)()||Object(R.isFireFox)())&&(Object(k.b)(le,"videoSendResolutionHeight",c.videoHeight),Object(k.b)(le,"videoSendResolutionWidth",c.videoWidth)),(Object(R.isSafari)()||Object(R.isFireFox)())&&c.uplinkStats&&Object(k.b)(le,"videoSendPacketsLost",c.uplinkStats.uplink_cumulative_lost)),ee(le)})),Z.push(new Promise(function(ee){var le={};return c.traffic_stats&&c.pc&&c.pc.isSubscriber?(Object(k.b)(le,"accessDelay",c.traffic_stats.access_delay),Object(k.b)(le,"endToEndDelay",c.traffic_stats.e2e_delay),Object(k.b)(le,"videoReceiveDelay",c.traffic_stats.video_delay),Object(k.b)(le,"audioReceiveDelay",c.traffic_stats.audio_delay)):c.traffic_stats&&c.pc&&!c.pc.isSubscriber&&Object(k.b)(le,"accessDelay",c.traffic_stats.access_delay),ee(le)})),Promise.all(Z).then(function(ee){for(var le={},W=ee.length-1;W>=0;W--){var B=ee[W];b()(le,B)}f&&setTimeout(f.bind(c,le),0)}).catch(function(ee){C&&setTimeout(C.bind(c,ee),0)})},c._getPCStats=function(f){return new Promise(function(C,L){if(!c.pc||"established"!==c.pc.state||!c.pc.getStats)return L("PEER_CONNECTION_NOT_ESTABLISHED");c.pc.getStats(function(Z){if(!c.pc||"established"!==c.pc.state||!c.pc.getStats)return L("PEER_CONNECTION_STATE_CHANGE");var ee=c.pc.isSubscriber?Object(k.c)(Z):Object(k.a)(Z);return C(ee)},f)}).then(function(C){return c.pc.isSubscriber?(Object(R.isFireFox)()||Object(R.isSafari)())&&(C.videoReceiveResolutionHeight&&"0"!==C.videoReceiveResolutionHeight||C.videoReceiveResolutionWidth&&"0"!==C.videoReceiveResolutionWidth||(Object(k.b)(C,"videoReceiveResolutionHeight",c.videoHeight),Object(k.b)(C,"videoReceiveResolutionWidth",c.videoWidth))):((Object(R.isSafari)()||Object(R.isFireFox)())&&(C.videoSendResolutionHeight&&"0"!==C.videoSendResolutionHeight||C.videoSendResolutionWidth&&"0"!==C.videoSendResolutionWidth||(Object(k.b)(C,"videoSendResolutionHeight",c.videoHeight),Object(k.b)(C,"videoSendResolutionWidth",c.videoWidth))),(Object(R.isSafari)()||Object(R.isFireFox)())&&c.uplinkStats&&Object(k.b)(C,"videoSendPacketsLost",c.uplinkStats.uplink_cumulative_lost)),Promise.resolve(C)})},c.getAudioLevel=function(){if(c.audioLevelHelper)return c.audioLevelHelper.getAudioLevel();if(c.stream){if(0!==c.stream.getAudioTracks().length)return c.audioLevelHelper=new E.audioLevelHelper(c.stream),c.audioLevelHelper.getAudioLevel();v.default.warning("[".concat(c.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else v.default.warning("[".concat(c.streamId,"] can't get audioLevel beacuse no stream exist"))},c.setVideoProfile("480p_1"),c._switchVideoDevice=function(f,C,L){if(f===c.cameraId)return C&&C();var Z={video:b()({},c.videoConstraint,{deviceId:{exact:f}}),audio:!1};v.default.debug("[".concat(c.streamId,"] ").concat(Z)),Object(I.b)(Z,function(ee){try{var le=function(){c.isPlaying()&&(c.stop(),c.elementID&&c.play(c.elementID,c.playOptions)),c.cameraId=f,c.videoConstraint.deviceId={exact:f},c.userMuteVideo&&(c.stream.getVideoTracks()[0].enabled=!1),Y.a.restoreVideoEffect(c).then(function(){C&&C()})};Y.a.disableVideoEffect(c).then(function(){var W=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(W=!0),W?c.replaceTrack(ee.getVideoTracks()[0],le,L):(c.removeTrack(c.stream.getVideoTracks()[0]),c.addTrack(ee.getVideoTracks()[0]),le())})}catch(W){return L&&L(W)}},function(ee){return L&&L(ee)})},c._switchAudioDevice=function(f,C,L){if(f===c.microphoneId)return C&&C();var Z={video:!1,audio:b()({},c.audioConstraint,{deviceId:{exact:f}})};v.default.debug("[".concat(c.streamId,"] "),Z);var ee=c.stream.getAudioTracks()[0];ee&&ee.stop(),Object(I.b)(Z,function(le){var W=function(){c._cleanupAudioMixing(),c.userMuteAudio&&(c.stream.getAudioTracks()[0].enabled=!1),c.isPlaying()&&(c.stop(),c.elementID&&c.play(c.elementID,c.playOptions)),c.microphoneId=f,c.audioConstraint.deviceId={exact:f},C&&C()};try{var B=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(B=!0),B?c.replaceTrack(le.getAudioTracks()[0],W,L):(c.removeTrack(c.stream.getAudioTracks()[0]),c.addTrack(le.getAudioTracks()[0]),W())}catch(z){return L&&L(z)}},function(le){return L&&L(le)})},c.switchDevice=function(f,C,L,Z){var ee=g.report.reportApiInvoke(c.sid,{callback:function(se,ae){if(se)return Z&&Z(se);L&&L(ae)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(j.checkValidString)(C,"deviceId");var le=function(){return c.inSwitchDevice=!1,ee()},W=function(se){c.inSwitchDevice=!1,v.default.error("[".concat(c.streamId,"] "),se),ee(se)};if(c.inSwitchDevice)return ee("Device switch is in process.");if(c.inSwitchDevice=!0,!c.local)return W("Only the local stream can switch the device.");if(c.screen&&"video"===f)return W("The device cannot be switched during screen-sharing.");if(!c.video&&"video"===f)return W("Video track not exist.");if(!c.audio&&"audio"===f)return W("Audio track not exist.");if(c.videoSource||c.audioSource)return W("The device cannot be switched when using videoSource or audioSource.");var B=!1;for(var z in c.audioMixing.sounds){var Q=c.audioMixing.sounds[z];if(Q.state!==c.audioMixing.states.IDLE){B=!0;break}}var ge=c.audioMixing.audioContextInited;if(ge&&B)return W("The device cannot be switched when using audio Mixing.");D.a.getDeviceById(C,function(){if("video"===f)c._switchVideoDevice(C,le,W);else{if("audio"!==f)return W("Invalid type.");c._switchAudioDevice(C,le,W)}},function(){return W("The device does not exist.")})},c},H=function(_){var c=g.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:_&&_.audioSource?_.audioSource.enabled:null,videoTrackEnable:_&&_.videoSource?_.videoSource.enabled:null}}});Object(j.checkValidObject)(_,"StreamSpec");var q=_.streamID,f=_.audio,C=_.video,L=_.screen,Z=_.screenAudio,ee=_.cameraId,le=_.facingMode,W=_.microphoneId,B=_.mirror,z=_.extensionId,Q=_.mediaSource,ge=_.audioProcessing,se=_.optimizationMode;if(!Object(j.isEmpty)(q)&&!Object(E.is32Uint)(q)&&!Object(j.isValidString)(q,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(j.checkValidBoolean)(f,"audio"),Object(j.checkValidBoolean)(C,"video"),Object(j.isEmpty)(L)||Object(j.checkValidBoolean)(L,"screen"),Object(j.isEmpty)(Z)||Object(j.checkValidBoolean)(Z,"screenAudio"),Object(j.isEmpty)(ee)||Object(j.checkValidString)(ee,"cameraId",0,255,!1),Object(j.isEmpty)(le)||Object(j.checkValidEnum)(le,"facingMode",["user","environment","left","right"]),Object(j.isEmpty)(W)||Object(j.checkValidString)(W,"microphoneId",0,255,!1),Object(j.isEmpty)(z)||Object(j.checkValidString)(z,"extensionId"),Object(j.isEmpty)(Q)||Object(j.checkValidEnum)(Q,"mediaSource",["screen","application","window"]),Object(j.isEmpty)(B)||Object(j.checkValidBoolean)(B,"mirror"),!Object(j.isEmpty)(ge)){var ae=ge.AGC,Se=ge.AEC,Te=ge.ANS;Object(j.isEmpty)(ae)||Object(j.checkValidBoolean)(ae,"AGC"),Object(j.isEmpty)(Se)||Object(j.checkValidBoolean)(Se,"AEC"),Object(j.isEmpty)(Te)||Object(j.checkValidBoolean)(Te,"ANS")}Object(j.isEmpty)(se)||Object(j.checkValidEnum)(se,"optimizationMode",["detail","motion"]),v.default.debug("Create stream"),!0===Z&&!0===f&&v.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),_.screen&&!se&&(_.optimizationMode="detail");var Ee=s(_);return c(),Ee}},function(oe,X,x){"use strict";x.d(X,"a",function(){return re}),x.d(X,"b",function(){return U});var M=x(5),b=x(7),R=x.n(b),S=x(12),w=x.n(S),v=x(17),A=x.n(v),d=x(0),m=x(15),g=x(2);function P(y,s){(null==s||s>y.length)&&(s=y.length);for(var H=0,_=new Array(s);H<s;H++)_[H]=y[H];return _}function k(y){if("undefined"==typeof Symbol||null==y[Symbol.iterator]){if(Array.isArray(y)||(y=function(C,L){if(C){if("string"==typeof C)return D(C,L);var Z=Object.prototype.toString.call(C).slice(8,-1);if("Object"===Z&&C.constructor&&(Z=C.constructor.name),"Map"===Z||"Set"===Z)return Array.from(Z);if("Arguments"===Z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return D(C,L)}}(y))){var s=0,H=function(){};return{s:H,n:function(){return s>=y.length?{done:!0}:{done:!1,value:y[s++]}},e:function(C){throw C},f:H}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,c,q=!0,f=!1;return{s:function(){_=y[Symbol.iterator]()},n:function(){var C=_.next();return q=C.done,C},e:function(C){f=!0,c=C},f:function(){try{q||null==_.return||_.return()}finally{if(f)throw c}}}}function D(y,s){(null==s||s>y.length)&&(s=y.length);for(var H=0,_=new Array(s);H<s;H++)_[H]=y[H];return _}var N=x(50),Y=x.n(N),te=x(26),J=(x(4),103),re=function(y){var s={};if(s.clientId=y.clientId,y.session_id=J+=1,"undefined"==typeof window||!window.navigator)throw d.default.error("["+s.streamId+"]["+s.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(s.browser="mozilla",s=function(y){var B,s={},H=(mozRTCPeerConnection,mozRTCSessionDescription),_=!1;s.uid=y.uid,s.isVideoMute=y.isVideoMute,s.isAudioMute=y.isAudioMute,s.isSubscriber=y.isSubscriber,s.clientId=y.clientId,s.filterStatsCache=[],s.originStatsCache=[],s.lastTimeGetStats=null,s.pc_config={iceServers:[]},y.iceServers instanceof Array?y.iceServers.map(function(B){0===B.url.indexOf("stun:")&&s.pc_config.iceServers.push({url:B.url})}):(y.stunServerUrl&&(y.stunServerUrl instanceof Array?y.stunServerUrl.map(function(B){"string"==typeof B&&""!==B&&s.pc_config.iceServers.push({url:B})}):"string"==typeof y.stunServerUrl&&""!==y.stunServerUrl&&s.pc_config.iceServers.push({url:y.stunServerUrl})),y.turnServers&&(y.turnServers instanceof Array?y.turnServers.map(function(B){B.udpport&&s.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.udpport+"?transport=udp"}),"string"==typeof B.tcpport&&""!==B.tcpport&&s.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.tcpport+"?transport=tcp"}),!0===B.forceturn&&(s.pc_config.iceTransportPolicy="relay")}):d.default.error("[".concat(s.clientId,"] turnServers is not a array")))),void 0===y.audio&&(y.audio=!0),void 0===y.video&&(y.video=!0),s.mediaConstraints={offerToReceiveAudio:y.audio,offerToReceiveVideo:y.video,mozDontOfferDataChannel:!0},s.roapSessionId=103,s.peerConnection=new m.RTCPeerConnection(s.pc_config),s.iceCandidateTimer=setTimeout(function(){s.iceCandidateTimer=null,d.default.debug("[".concat(s.clientId,"]Candidates collected: ").concat(s.iceCandidateCount)),s.moreIceComing&&(s.moreIceComing=!1,s.markActionNeeded())},Object(g.getParameter)("CANDIDATE_TIMEOUT")),s.peerConnection.onicecandidate=function(B){var z,Q,ge,se;Q=(z=s.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),ge=z.match(/a=candidate:.+typ\shost.+\r\n/),se=z.match(/a=candidate:.+typ\srelay.+\r\n/),null===Q&&null===ge&&null===se||void 0!==s.ice||!s.iceCandidateTimer||(clearTimeout(s.iceCandidateTimer),s.iceCandidateTimer=null,s.ice=0,s.moreIceComing=!1,s.markActionNeeded()),s.iceCandidateCount=s.iceCandidateCount+1},s.checkMLineReverseInSDP=function(B){return!(!~B.indexOf("m=audio")||!~B.indexOf("m=video"))&&B.indexOf("m=audio")>B.indexOf("m=video")},s.reverseMLineInSDP=function(B){var z=B.split("m=audio"),Q=z[1].split("m=video");return z[0]+"m=video"+Q[1]+"m=audio"+Q[0]},s.processSignalingMessage=function(B){var z,Q=JSON.parse(B);s.incomingMessage=Q,"new"===s.state?"OFFER"===Q.messageType?(Q.sdp=le(Q.sdp),s.peerConnection.setRemoteDescription(new H(z={sdp:Q.sdp,type:"offer"}),function(){d.default.debug("["+s.clientId+"]setRemoteDescription succeeded")},function(ge){d.default.info("["+s.clientId+"]setRemoteDescription failed: "+ge.name)}),s.state="offer-received",s.markActionNeeded()):s.error("Illegal message for this state: "+Q.messageType+" in state "+s.state):"offer-sent"===s.state?"ANSWER"===Q.messageType?(Q.sdp=le(Q.sdp),Q.sdp=Q.sdp.replace(/ generation 0/g,""),Q.sdp=Q.sdp.replace(/ udp /g," UDP "),-1!==Q.sdp.indexOf("a=group:BUNDLE")?(Q.sdp=Q.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),Q.sdp=Q.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),Q.sdp=Q.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(Q.sdp=Q.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),Q.sdp=Q.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),z={sdp:Q.sdp,type:"answer"},y.screen&&"detail"===y.optimizationMode&&(d.default.debug("[".concat(s.client,"] remove screen share abs ext")),Q.sdp=W(z.sdp)),s.peerConnection.setRemoteDescription(new H(z),function(){d.default.debug("["+s.clientId+"]setRemoteDescription succeeded")},function(ge){d.default.info("["+s.clientId+"]setRemoteDescription failed: "+ge)}),s.state="established"):"pr-answer"===Q.messageType?s.peerConnection.setRemoteDescription(new H(z={sdp:Q.sdp,type:"pr-answer"}),function(){d.default.debug("["+s.clientId+"]setRemoteDescription succeeded")},function(ge){d.default.info("["+s.clientId+"]setRemoteDescription failed: "+ge.name)}):s.error("offer"===Q.messageType?"Not written yet":"Illegal message for this state: "+Q.messageType+" in state "+s.state):"established"===s.state&&("OFFER"===Q.messageType?(s.peerConnection.setRemoteDescription(new H(z={sdp:Q.sdp,type:"offer"}),function(){d.default.debug("["+s.clientId+"]setRemoteDescription succeeded")},function(ge){d.default.info("["+s.clientId+"]setRemoteDescription failed: "+ge.name)}),s.state="offer-received",s.markActionNeeded()):s.error("Illegal message for this state: "+Q.messageType+" in state "+s.state))},s.setRtpSenderParameters=(B=A()(w.a.mark(function z(Q){var ge,se,ae;return w.a.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(ge=s.peerConnection.getSenders(),se=ge.find(function(Te){return"video"===Te.track.kind})){Se.next=4;break}return Se.abrupt("return");case 4:return(ae=se.getParameters()).degradationPreference=Q,Se.prev=6,d.default.debug("[".concat(s.clientId,"] setParameters"),ae),Se.next=10,se.setParameters(ae);case 10:Se.next=15;break;case 12:Se.prev=12,Se.t0=Se.catch(6),d.default.debug("[".concat(s.clientId,"] setParameters failed, ignore"));case 15:case"end":return Se.stop()}},z,null,[[6,12]])})),function(z){return B.apply(this,arguments)});var c={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},q={id:"",type:"",mediaType:"",googCodecName:y.codec?y.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},f={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},C={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},L=0,Z=0,ee=0;s.getVideoRelatedStats=function(B){s.peerConnection.getStats().then(function(z){var Q,ge=k(z.values());try{for(ge.s();!(Q=ge.n()).done;){var se=Q.value;if(s.isSubscriber){if(("inbound-rtp"===se.type||"inboundrtp"===se.type)&&"video"===se.mediaType){if(!s.lastReport)return void(s.lastReport=se);B&&B({browser:"firefox",mediaType:"video",peerId:s.uid,isVideoMute:s.isVideoMute,frameRateReceived:Math.round(se.framerateMean)+"",frameRateDecoded:se.framesDecoded-s.lastReport.framesDecoded+"",bytesReceived:se.bytesReceived+"",packetsReceived:se.packetsReceived+"",packetsLost:se.packetsLost+""}),s.lastReport=se}}else if(("outbound-rtp"===se.type||"outboundrtp"===se.type)&&"video"===se.mediaType){if(!s.lastReport)return void(s.lastReport=se);B&&B({mediaType:"video",isVideoMute:s.isVideoMute,frameRateInput:Math.round(se.framerateMean)+"",frameRateSent:se.framesEncoded-s.lastReport.framesEncoded+""}),s.lastReport=se}}}catch(ae){ge.e(ae)}finally{ge.f()}})},s.getAudioRelatedStats=function(B){s.peerConnection.getStats().then(function(z){var Q,ge=k(z.values());try{for(ge.s();!(Q=ge.n()).done;){var se=Q.value;s.isSubscriber&&("inbound-rtp"!==se.type&&"inboundrtp"!==se.type||"audio"!==se.mediaType||B&&B({browser:"firefox",mediaType:"audio",peerId:s.uid,isAudioMute:s.isAudioMute,frameDropped:se.packetsLost+"",frameReceived:se.packetsReceived+"",googJitterReceived:se.jitter+"",bytesReceived:se.bytesReceived+"",packetsReceived:se.packetsReceived+"",packetsLost:se.packetsLost+""}))}}catch(ae){ge.e(ae)}finally{ge.f()}})},s.getStatsRate=function(B){s.getStats(function(z){z.forEach(function(Q){}),B(z)})},s.getStats=function(B,z){z=(z=z||500)>500?500:z,s.lastTimeGetStats&&Date.now()-s.lastTimeGetStats<z?B&&B(s.filterStatsCache,s.originStatsCache):this._getStats(function(Q,ge){s.filterStatsCache=Q,s.originStatsCache=ge,s.lastTimeGetStats=Date.now(),B&&B(Q,ge)})},s._getStats=function(B){s.peerConnection.getStats().then(function(z){var Q,ge=[],se=k(z.values());try{for(se.s();!(Q=se.n()).done;){var ae=Q.value;ge.push(ae),"outbound-rtp"!==ae.type&&"outboundrtp"!==ae.type||"video"!==ae.mediaType||-1!==ae.id.indexOf("rtcp")||(q.id=ae.id,q.type=ae.type,q.mediaType=ae.mediaType,q.bytesSent=ae.bytesSent?ae.bytesSent+"":"0",q.packetsSent=ae.packetsSent?ae.packetsSent+"":"0",q.googPlisReceived=ae.pliCount?ae.pliCount+"":"0",q.googNacksReceived=ae.nackCount?ae.nackCount+"":"0",q.googFirsReceived=ae.firCount?ae.firCount+"":"0",q.googFrameRateSent=ae.framerateMean?Math.round(ae.framerateMean)+"":"0"),"outbound-rtp"!==ae.type&&"outboundrtp"!==ae.type||"audio"!==ae.mediaType||-1!==ae.id.indexOf("rtcp")||(c.id=ae.id,c.type=ae.type,c.mediaType=ae.mediaType,c.bytesSent=ae.bytesSent?ae.bytesSent+"":"0",c.packetsSent=ae.packetsSent?ae.packetsSent+"":"0",y.agoraStream.local&&(c.audioInputLevel=Math.round(32767*y.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ae.type&&"inboundrtp"!==ae.type||"audio"!==ae.mediaType||ae.isRemote||-1!==ae.id.indexOf("rtcp")||(f.id=ae.id,f.type=ae.type,f.mediaType=ae.mediaType,f.bytesReceived=ae.bytesReceived?ae.bytesReceived+"":"0",f.packetsLost=ae.packetsLost?ae.packetsLost+"":"0",f.packetsReceived=ae.packetsReceived?ae.packetsReceived+"":"0",f.googJitterReceived=ae.jitter?ae.jitter+"":"0",y.agoraStream.local||(f.audioOutputLevel=Math.round(32767*y.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ae.type&&"inboundrtp"!==ae.type||"video"!==ae.mediaType||ae.isRemote||-1!==ae.id.indexOf("rtcp")||(C.id=ae.id,C.type=ae.type,C.mediaType=ae.mediaType,C.bytesReceived=ae.bytesReceived?ae.bytesReceived+"":"0",C.googFrameRateReceived=ae.framerateMean?Math.round(ae.framerateMean)+"":"0",C.googFramesDecoded=ae.framesDecoded?ae.framesDecoded+"":"0",Date.now()-ee>=1e3?(C.googFrameRateDecoded=(ae.framesDecoded-L)/((Date.now()-ee)/1e3),C.googFrameRateDecoded=Math.round(Math.max(0,C.googFrameRateDecoded)),ee=Date.now(),Z=C.googFrameRateDecoded,L=ae.framesDecoded,C.googFrameRateDecoded=C.googFrameRateDecoded.toString()):C.googFrameRateDecoded=Z.toString(),C.packetsLost=ae.packetsLost?ae.packetsLost+"":"0",C.packetsReceived=ae.packetsReceived?ae.packetsReceived+"":"0",C.googJitterBufferMs=ae.jitter?ae.jitter+"":"0",C.googNacksSent=ae.nackCount?ae.nackCount+"":"0",C.googPlisSent=ae.pliCount?ae.pliCount+"":"0",C.googFirsSent=ae.firCount?ae.firCount+"":"0"),-1!==ae.id.indexOf("outbound_rtcp_video")&&(q.packetsLost=ae.packetsLost?ae.packetsLost+"":"0")}}catch(Te){se.e(Te)}finally{se.f()}var Se=[q,c,f,C];Se.push({id:"time",startTime:s.connectedTime,timestamp:new Date}),B(Se,ge)},function(z){d.default.error("["+s.clientId+"]"+z)})},s.addStream=function(B){_=!0,s.peerConnection.addStream(B),s.markActionNeeded()},s.removeStream=function(){s.markActionNeeded()},s.close=function(){s.state="closed",s.peerConnection.close()},s.markActionNeeded=function(){s.actionNeeded=!0,s.doLater(function(){s.onstablestate()})},s.doLater=function(B){window.setTimeout(B,1)},s.onstablestate=function(){if(s.actionNeeded){if("new"===s.state||"established"===s.state)_&&(s.mediaConstraints=void 0),s.peerConnection.createOffer(function(z){if(z.sdp=le(z.sdp),z.sdp=z.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),z.sdp!==s.prevOffer)return s.peerConnection.setLocalDescription(z),s.state="preparing-offer",void s.markActionNeeded();d.default.debug("["+s.clientId+"]Not sending a new offer")},function(z){d.default.debug("["+s.clientId+"]Ups! create offer failed ",z)},s.mediaConstraints);else if("preparing-offer"===s.state){if(s.moreIceComing)return;s.prevOffer=s.peerConnection.localDescription.sdp,s.offerCandidates=s.prevOffer.match(/a=candidate.+\r\n/g)||[],s.offerCandidates.length||(y.isCloudProxy3&&y.onNoIceCandidate&&y.onNoIceCandidate(),d.default.warning("[".concat(s.clientId,"]No Ice Candidate generated")),Object(g.getParameter)("SHIM_CANDIDATE")?(d.default.debug("Shimming fake candidate"),s.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):d.default.error("[".concat(s.clientId,"]None Ice Candidate not allowed"))),s.prevOffer=s.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),s.sendMessage("OFFER",s.prevOffer),s.state="offer-sent"}else if("offer-received"===s.state)s.peerConnection.createAnswer(function(z){if(s.peerConnection.setLocalDescription(z),s.state="offer-received-preparing-answer",s.iceStarted)s.markActionNeeded();else{var Q=new Date;d.default.debug("["+s.clientId+"]"+Q.getTime()+": Starting ICE in responder"),s.iceStarted=!0}},function(){d.default.debug("["+s.clientId+"]Ups! Something went wrong")});else if("offer-received-preparing-answer"===s.state){if(s.moreIceComing)return;s.sendMessage("ANSWER",s.peerConnection.localDescription.sdp),s.state="established"}else s.debug("Dazed and confused in state "+s.state+", stopping here");s.actionNeeded=!1}},s.sendMessage=function(B,z){var Q={};Q.messageType=B,Q.sdp=z,"OFFER"===B?(Q.offererSessionId=s.sessionId,Q.answererSessionId=s.otherSessionId,Q.seq=s.sequenceNumber+=1,Q.tiebreaker=Math.floor(429496723*Math.random()+1)):(Q.offererSessionId=s.incomingMessage.offererSessionId,Q.answererSessionId=s.sessionId,Q.seq=s.incomingMessage.seq),s.onsignalingmessage(JSON.stringify(Q))},s._getSender=function(B){if(s.peerConnection&&s.peerConnection.getSenders){var z=s.peerConnection.getSenders().find(function(Q){return Q.track.kind==B});if(z)return z}return null},s.hasSender=function(B){return!!s._getSender(B)},s.replaceTrack=function(B,z,Q){var ge=s._getSender(B.kind);if(!ge)return Q("NO_SENDER_FOUND");try{ge.replaceTrack(B)}catch(se){return Q&&Q(se)}setTimeout(function(){return z&&z()},50)},s.error=function(B){throw"Error in RoapOnJsep: "+B},s.sessionId=s.roapSessionId+=1,s.sequenceNumber=0,s.actionNeeded=!1,s.iceStarted=!1,s.moreIceComing=!0,s.iceCandidateCount=0,s.onsignalingmessage=y.callback,s.peerConnection.ontrack=function(B){s.onaddstream&&s.onaddstream(B,"ontrack")},s.peerConnection.onremovestream=function(B){s.onremovestream&&s.onremovestream(B)},s.peerConnection.oniceconnectionstatechange=function(B){"connected"===B.currentTarget.iceConnectionState&&(s.connectedTime=new Date),s.oniceconnectionstatechange&&s.oniceconnectionstatechange(B.currentTarget.iceConnectionState)};var le=function(B){var z;if(y.video&&y.maxVideoBW&&(null==(z=B.match(/m=video.*\r\n/))&&(z=B.match(/m=video.*\n/)),z&&z.length>0)){var Q=z[0]+"b=TIAS:"+1e3*y.maxVideoBW+"\r\n";B=B.replace(z[0],Q)}return y.audio&&y.maxAudioBW&&(null==(z=B.match(/m=audio.*\r\n/))&&(z=B.match(/m=audio.*\n/)),z&&z.length>0)&&(B=B.replace(z[0],Q=z[0]+"b=TIAS:"+1e3*y.maxAudioBW+"\r\n")),B},W=function(B){return(B=B.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return s.onaddstream=null,s.onremovestream=null,s.state="new",s.markActionNeeded(),s}(y)):"iOS"===M.getBrowserOS()||M.isSafari()?(d.default.debug("["+s.streamId+"]["+s.clientId+"]Safari"),(s=function(y){var s={},H=m.RTCPeerConnection;s.uid=y.uid,s.isVideoMute=y.isVideoMute,s.isAudioMute=y.isAudioMute,s.isSubscriber=y.isSubscriber,s.clientId=y.clientId,s.filterStatsCache=[],s.originStatsCache=[],s.lastTimeGetStats=null,s.pc_config={iceServers:[],bundlePolicy:"max-bundle"},s.con={optional:[{DtlsSrtpKeyAgreement:!0}]},y.iceServers instanceof Array?s.pc_config.iceServers=y.iceServers:(y.stunServerUrl&&(y.stunServerUrl instanceof Array?y.stunServerUrl.map(function(B){"string"==typeof B&&""!==B&&s.pc_config.iceServers.push({url:B})}):"string"==typeof y.stunServerUrl&&""!==y.stunServerUrl&&s.pc_config.iceServers.push({url:y.stunServerUrl})),y.turnServers&&(y.turnServers instanceof Array?y.turnServers.map(function(B){B.udpport&&s.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.udpport+"?transport=udp"}),"string"==typeof B.tcpport&&""!==B.tcpport&&s.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.tcpport+"?transport=tcp"}),!0===B.forceturn&&(s.pc_config.iceTransportPolicy="relay")}):d.default.error("[".concat(s.clientId,"] turnServers is not a array")))),void 0===y.audio&&(y.audio=!0),void 0===y.video&&(y.video=!0),s.mediaConstraints={mandatory:{OfferToReceiveVideo:y.video,OfferToReceiveAudio:y.audio}},s.roapSessionId=103;try{s.pc_config.sdpSemantics=Object(g.getParameter)("PLAN"),s.peerConnection=new H(s.pc_config,s.con)}catch(B){delete s.pc_config.sdpSemantics,s.peerConnection=new H(s.pc_config,s.con)}s.iceCandidateTimer=setTimeout(function(){s.iceCandidateTimer=null,s.moreIceComing&&(s.moreIceComing=!1,s.markActionNeeded())},Object(g.getParameter)("CANDIDATE_TIMEOUT")),s.peerConnection.onicecandidate=function(B){var z,Q,ge,se;Q=(z=s.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),ge=z.match(/a=candidate:.+typ\shost.+\r\n/),se=z.match(/a=candidate:.+typ\srelay.+\r\n/),0===s.iceCandidateCount&&(s.timeout=setTimeout(function(){s.moreIceComing&&(s.moreIceComing=!1,s.markActionNeeded())},1e3)),null===Q&&null===ge&&null===se||void 0!==s.ice||!s.iceCandidateTimer||(clearTimeout(s.iceCandidateTimer),s.iceCandidateTimer=null,s.ice=0,s.moreIceComing=!1,s.markActionNeeded()),s.iceCandidateCount=s.iceCandidateCount+1};var B,_=function(B){return y.screen&&(B=B.replace("a=x-google-flag:conference\r\n","")),B},c=function(B){var z;return(z=B.match(/m=video.*\r\n/))&&y.minVideoBW&&y.maxVideoBW&&(B=B.replace(z[0],z[0]+"b=AS:"+y.maxVideoBW+"\r\n"),d.default.debug("["+s.clientId+"]Set Video Bitrate - min:"+y.minVideoBW+" max:"+y.maxVideoBW)),(z=B.match(/m=audio.*\r\n/))&&y.maxAudioBW&&(B=B.replace(z[0],z[0]+"b=AS:"+y.maxAudioBW+"\r\n")),B};s.processSignalingMessage=function(B){var z,Q=JSON.parse(B);s.incomingMessage=Q,"new"===s.state?"OFFER"===Q.messageType?(z={sdp:Q.sdp,type:"offer"},s.peerConnection.setRemoteDescription(new RTCSessionDescription(z)),s.state="offer-received",s.markActionNeeded()):s.error("Illegal message for this state: "+Q.messageType+" in state "+s.state):"offer-sent"===s.state?"ANSWER"===Q.messageType?((z={sdp:Q.sdp,type:"answer"}).sdp=_(z.sdp),z.sdp=c(z.sdp),z.sdp=z.sdp.replace(/a=x-google-flag:conference\r\n/g,""),y.screen&&"detail"===y.optimizationMode&&(d.default.debug("[".concat(s.client,"] remove screen share abs ext")),z.sdp=z.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),s.peerConnection.setRemoteDescription(new RTCSessionDescription(z)),s.state="established"):"pr-answer"===Q.messageType?(z={sdp:Q.sdp,type:"pr-answer"},s.peerConnection.setRemoteDescription(new RTCSessionDescription(z))):s.error("offer"===Q.messageType?"Not written yet":"Illegal message for this state: "+Q.messageType+" in state "+s.state):"established"===s.state&&("OFFER"===Q.messageType?(z={sdp:Q.sdp,type:"offer"},s.peerConnection.setRemoteDescription(new RTCSessionDescription(z)),s.state="offer-received",s.markActionNeeded()):"ANSWER"===Q.messageType?((z={sdp:Q.sdp,type:"answer"}).sdp=_(z.sdp),z.sdp=c(z.sdp),s.peerConnection.setRemoteDescription(new RTCSessionDescription(z))):s.error("Illegal message for this state: "+Q.messageType+" in state "+s.state))},s.setRtpSenderParameters=(B=A()(w.a.mark(function z(Q){return w.a.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:s.degradation=Q;case 1:case"end":return ge.stop()}},z)})),function(z){return B.apply(this,arguments)}),s._setRtpSenderParameters=function(){var B=A()(w.a.mark(function z(Q){var ge,se,ae;return w.a.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(ge=s.peerConnection.getSenders(),se=ge.find(function(Te){return Te&&Te.track&&"video"===Te.track.kind})){Se.next=4;break}return Se.abrupt("return");case 4:return(ae=se.getParameters()).degradationPreference=Q,Se.prev=6,d.default.debug("[".concat(s.clientId,"] setParameters"),ae),Se.next=10,se.setParameters(ae);case 10:Se.next=15;break;case 12:Se.prev=12,Se.t0=Se.catch(6),d.default.debug("[".concat(s.clientId,"] setParameters failed, ignore"));case 15:case"end":return Se.stop()}},z,null,[[6,12]])}));return function(z){return B.apply(this,arguments)}}();var q={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},f={id:"",type:"",mediaType:"",googCodecName:y.codec?y.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},C={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},L={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},Z={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},ee=0,le=0,W=0;return s.isRemoteVideoStats=function(B){return!!(B.frameHeight&&B.frameWidth&&B.remoteSource)},s.getVideoRelatedStats=function(B){s.peerConnection.getStats().then(function(z){z.forEach(function(Q){if(s.isSubscriber){var ge={peerId:s.uid,mediaType:"video",isVideoMute:s.isVideoMute};if("track"===Q.type&&(~Q.id.indexOf("video")||~Q.trackIdentifier.indexOf("v")||s.isRemoteVideoStats(Q))){if(!s.lastReport)return void(s.lastReport=Q);ge.frameRateReceived=Q.framesReceived-s.lastReport.framesReceived+"",ge.frameRateDecoded=Q.framesDecoded-s.lastReport.framesDecoded+"",s.lastReport=Q}"inbound-rtp"===Q.type&&~Q.id.indexOf("Video")&&(ge.bytesReceived=Q.bytesReceived+"",ge.packetsReceived=Q.packetsReceived+"",ge.packetsLost=Q.packetsLost+""),B&&B(ge)}else if("outbound-rtp"===Q.type&&~Q.id.indexOf("Video")){if(!s.lastReport)return void(s.lastReport=Q);B&&B({mediaType:"video",isVideoMute:s.isVideoMute,frameRateInput:y.maxFrameRate+"",frameRateSent:Q.framesEncoded-s.lastReport.framesEncoded+""}),s.lastReport=Q}})})},s.getAudioRelatedStats=function(B){s.peerConnection.getStats().then(function(z){z.forEach(function(Q){s.isSubscriber&&"inbound-rtp"===Q.type&&~Q.id.indexOf("Audio")&&B&&B({peerId:s.uid,mediaType:"audio",isAudioMute:s.isAudioMute,frameDropped:Q.packetsLost+"",frameReceived:Q.packetsReceived+"",googJitterReceived:Q.jitter+"",bytesReceived:Q.bytesReceived+"",packetsReceived:Q.packetsReceived+"",packetsLost:Q.packetsLost+""})})})},s.getStatsRate=function(B){s.getStats(function(z){z.forEach(function(Q){"outbound-rtp"===Q.type&&"video"===Q.mediaType&&Q.googFramesEncoded&&(Q.googFrameRateSent=Math.ceil((Q.googFramesEncoded-ee)/3).toString(),ee=Q.googFramesEncoded),"inbound-rtp"===Q.type&&-1!=Q.id.indexOf("55543")&&(Q.googFrameRateReceived&&(Q.googFrameRateReceived=Math.ceil((Q.googFrameReceived-W)/3).toString(),W=Q.googFrameReceived),Q.googFrameRateDecoded&&(Q.googFrameRateDecoded=Math.ceil((Q.googFramesDecoded-le)/3).toString(),le=Q.googFramesDecoded))}),B(z)})},s.getStats=function(B,z){z=(z=z||500)>500?500:z,s.lastTimeGetStats&&Date.now()-s.lastTimeGetStats<z?B&&B(s.filterStatsCache,s.originStatsCache):this._getStats(function(Q,ge){s.filterStatsCache=Q,s.originStatsCache=ge,s.lastTimeGetStats=Date.now(),B&&B(Q,ge)})},s._getStats=function(B){var z=[];s.peerConnection.getStats().then(function(Q){Q.forEach(function(se){var ae;z.push(se),"outbound-rtp"===se.type&&"audio"===se.mediaType&&(q.id=se.id,q.type=se.type,q.mediaType=se.mediaType,q.bytesSent=se.bytesSent?se.bytesSent+"":"0",q.packetsSent=se.packetsSent?se.packetsSent+"":"0",y.agoraStream.local&&(q.audioInputLevel=Math.round(32767*y.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===se.type&&"video"===se.mediaType&&(f.id=se.id,f.type=se.type,f.mediaType=se.mediaType,f.bytesSent=se.bytesSent?se.bytesSent+"":"0",f.packetsSent=se.packetsSent?se.packetsSent+"":"0",f.googPlisReceived=se.pliCount?se.pliCount+"":"0",f.googNacksReceived=se.nackCount?se.nackCount+"":"0",f.googFirsReceived=se.firCount?se.firCount+"":"0",f.googFramesEncoded=se.framesEncoded?se.framesEncoded+"":"0",(ae=Q.get(se.trackId))&&(f.googFrameHeightSent=ae.frameHeight&&ae.frameHeight.toString(),f.googFrameWidthSent=ae.frameWidth&&ae.frameWidth.toString())),"inbound-rtp"!==se.type||-1==se.id.indexOf("44444")&&"audio"!==se.mediaType||(C.id=se.id,C.type=se.type,C.mediaType="audio",C.packetsReceived=se.packetsReceived?se.packetsReceived+"":"0",C.bytesReceived=se.bytesReceived?se.bytesReceived+"":"0",C.packetsLost=se.packetsLost?se.packetsLost+"":"0",C.packetsReceived=se.packetsReceived?se.packetsReceived+"":"0",C.googJitterReceived=se.jitter?se.jitter+"":"0",(ae=Q.get(se.trackId))&&(C.audioOutputLevel=ae.audioLevel&&Math.round(32767*ae.audioLevel).toString()),y.agoraStream.local||C.audioOutputLevel||(C.audioOutputLevel=Math.round(32767*y.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==se.type||-1==se.id.indexOf("55543")&&"video"!==se.mediaType||(L.id=se.id,L.type=se.type,L.mediaType="video",L.packetsReceived=se.packetsReceived?se.packetsReceived+"":"0",L.bytesReceived=se.bytesReceived?se.bytesReceived+"":"0",L.packetsLost=se.packetsLost?se.packetsLost+"":"0",L.googJitterBufferMs=se.jitter?se.jitter+"":"0",L.googNacksSent=se.nackCount?se.nackCount+"":"0",L.googPlisSent=se.pliCount?se.pliCount+"":"0",L.googFirsSent=se.firCount?se.firCount+"":"0",(ae=Q.get(se.trackId))&&(L.googFrameHeightReceived=ae.frameHeight&&ae.frameHeight.toString(),L.googFrameWidthReceived=ae.frameWidth&&ae.frameWidth.toString(),L.googFrameReceived=ae.framesReceived&&ae.framesReceived.toString(),L.googFramesDecoded=ae.framesDecoded&&ae.framesDecoded.toString())),"candidate-pair"===se.type&&(0==se.availableIncomingBitrate?Z.googAvailableSendBandwidth=se.availableOutgoingBitrate+"":Z.googAvailableReceiveBandwidth=se.availableIncomingBitrate+"")});var ge=[Z,q,f,C,L];ge.push({id:"time",startTime:s.connectedTime,timestamp:new Date}),B(ge,z)}).catch(function(Q){d.default.error("["+s.clientId+"] ",Q)})},s.addTrack=function(B,z){s.peerConnection.addTrack(B,z)},s.removeTrack=function(B,z){var Q=s.peerConnection.getSenders().find(function(ge){return ge.track==B});Q.replaceTrack(null),s.peerConnection.removeTrack(Q)},s.addStream=function(B){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?B.getTracks().forEach(function(z){return s.peerConnection.addTrack(z,B)}):s.peerConnection.addStream(B),s.markActionNeeded()},s.removeStream=function(){s.markActionNeeded()},s.close=function(){s.state="closed",s.peerConnection.close()},s.markActionNeeded=function(){s.actionNeeded=!0,s.doLater(function(){s.onstablestate()})},s.doLater=function(B){window.setTimeout(B,1)},s.onstablestate=function(){if(s.actionNeeded){if("new"===s.state||"established"===s.state)y.isSubscriber&&(s.peerConnection.addTransceiver("audio",{direction:"recvonly"}),s.peerConnection.addTransceiver("video",{direction:"recvonly"})),s.peerConnection.createOffer(s.mediaConstraints).then(function(z){if(z.sdp=c(z.sdp),y.isSubscriber||(z.sdp=z.sdp.replace(/a=.*video-orientation\r\n/g,"")),z.sdp!==s.prevOffer)return s.peerConnection.setLocalDescription(z),s.state="preparing-offer",void s.markActionNeeded();d.default.debug("["+s.clientId+"]Not sending a new offer")}).catch(function(z){d.default.debug("["+s.clientId+"]peer connection create offer failed ",z)});else if("preparing-offer"===s.state){if(s.moreIceComing)return;s.prevOffer=s.peerConnection.localDescription.sdp,s.offerCandidates=s.prevOffer.match(/a=candidate.+\r\n/g)||[],s.offerCandidates.length||(d.default.warning("[".concat(s.clientId,"]No Ice Candidate generated")),y.isCloudProxy3&&y.onNoIceCandidate&&y.onNoIceCandidate(),Object(g.getParameter)("SHIM_CANDIDATE")?(d.default.debug("Shimming fake candidate"),s.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):d.default.error("[".concat(s.clientId,"]None Ice Candidate not allowed"))),s.prevOffer=s.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),s.sendMessage("OFFER",s.prevOffer),s.state="offer-sent"}else if("offer-received"===s.state)s.peerConnection.createAnswer(function(z){if(s.peerConnection.setLocalDescription(z),s.state="offer-received-preparing-answer",s.iceStarted)s.markActionNeeded();else{var Q=new Date;d.default.debug("["+s.clientId+"]"+Q.getTime()+": Starting ICE in responder"),s.iceStarted=!0}},function(z){d.default.debug("["+s.clientId+"]peer connection create answer failed ",z)},s.mediaConstraints);else if("offer-received-preparing-answer"===s.state){if(s.moreIceComing)return;s.sendMessage("ANSWER",s.peerConnection.localDescription.sdp),s.state="established"}else s.debug("Dazed and confused in state "+s.state+", stopping here");s.actionNeeded=!1}},s.sendMessage=function(B,z){var Q={};Q.messageType=B,Q.sdp=z,"OFFER"===B?(Q.offererSessionId=s.sessionId,Q.answererSessionId=s.otherSessionId,Q.seq=s.sequenceNumber+=1,Q.tiebreaker=Math.floor(429496723*Math.random()+1)):(Q.offererSessionId=s.incomingMessage.offererSessionId,Q.answererSessionId=s.sessionId,Q.seq=s.incomingMessage.seq),s.onsignalingmessage(JSON.stringify(Q))},s._getSender=function(B){if(s.peerConnection&&s.peerConnection.getSenders){var z=s.peerConnection.getSenders().find(function(Q){return Q.track.kind==B});if(z)return z}return null},s.hasSender=function(B){return!!s._getSender(B)},s.replaceTrack=function(B,z,Q){var ge=s._getSender(B.kind);if(!ge)return Q("NO_SENDER_FOUND");try{ge.replaceTrack(B)}catch(se){return Q&&Q(se)}setTimeout(function(){return z&&z()},50)},s.error=function(B){throw"Error in RoapOnJsep: "+B},s.sessionId=s.roapSessionId+=1,s.sequenceNumber=0,s.actionNeeded=!1,s.iceStarted=!1,s.moreIceComing=!0,s.iceCandidateCount=0,s.onsignalingmessage=y.callback,s.peerConnection.ontrack=function(B){console.log("!!! ontrack, ",B.track.kind,B.track),s.onaddstream&&s.onaddstream(B,"ontrack")},s.peerConnection.onremovestream=function(B){s.onremovestream&&s.onremovestream(B)},s.peerConnection.oniceconnectionstatechange=function(B){"connected"===B.currentTarget.iceConnectionState&&(s.connectedTime=new Date,s._setRtpSenderParameters(s.degradation)),s.oniceconnectionstatechange&&s.oniceconnectionstatechange(B.currentTarget.iceConnectionState)},s.renegotiate=function(){s.isSubscriber||(d.default.debug("[".concat(s.uid,"]"),"renegotiating"),void 0!==s.prevOffer&&s.peerConnection.createOffer().then(function(B){return B.sdp=B.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),B.sdp=_(B.sdp),B.sdp=c(B.sdp),s.peerConnection.setLocalDescription(B)}).then(function(){s.onnegotiationneeded&&s.onnegotiationneeded(s.peerConnection.localDescription.sdp)}).catch(function(B){console.log("createOffer error: ",B)}))},s.isSubscriber||(s.peerConnection.onnegotiationneeded=s.renegotiate),s.onaddstream=null,s.onremovestream=null,s.state="new",s.markActionNeeded(),s}(y)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?s=new Y.a(y):(s=function(y){var s={},H=m.RTCPeerConnection;s.uid=y.uid,s.isVideoMute=y.isVideoMute,s.isAudioMute=y.isAudioMute,s.isSubscriber=y.isSubscriber,s.clientId=y.clientId,s.filterStatsCache=[],s.originStatsCache=[],s.lastTimeGetStats=null,s.pc_config={iceServers:[]};var _={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},c={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:y.codec?y.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},q={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},f={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},C={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};s.con={optional:[{DtlsSrtpKeyAgreement:!0}]},y.iceServers instanceof Array?s.pc_config.iceServers=y.iceServers:(y.stunServerUrl&&(y.stunServerUrl instanceof Array?y.stunServerUrl.map(function(W){"string"==typeof W&&""!==W&&s.pc_config.iceServers.push({url:W})}):"string"==typeof y.stunServerUrl&&""!==y.stunServerUrl&&s.pc_config.iceServers.push({url:y.stunServerUrl})),y.turnServers&&(y.turnServers instanceof Array?y.turnServers.map(function(W){W.udpport&&s.pc_config.iceServers.push({username:W.username,credential:W.credential,credentialType:"password",urls:(W.useTurns?"turns:":"turn:")+W.url+":"+W.udpport+"?transport=udp"}),"string"==typeof W.tcpport&&""!==W.tcpport&&s.pc_config.iceServers.push({username:W.username,credential:W.credential,credentialType:"password",urls:(W.useTurns?"turns:":"turn:")+W.url+":"+W.tcpport+"?transport=tcp"}),!0===W.forceturn&&(s.pc_config.iceTransportPolicy="relay")}):d.default.error("[".concat(s.clientId,"] turnServers is not a array")))),void 0===y.audio&&(y.audio=!0),void 0===y.video&&(y.video=!0),s.mediaConstraints={mandatory:{OfferToReceiveVideo:y.video,OfferToReceiveAudio:y.audio}},s.roapSessionId=103;try{s.pc_config.sdpSemantics=Object(g.getParameter)("PLAN"),s.peerConnection=new H(s.pc_config,s.con)}catch(W){delete s.pc_config.sdpSemantics,s.peerConnection=new H(s.pc_config,s.con)}s.iceCandidateTimer=setTimeout(function(){s.iceCandidateTimer=null,d.default.debug("[".concat(s.clientId,"]Candidates collected: ").concat(s.iceCandidateCount)),s.moreIceComing&&(s.moreIceComing=!1,s.markActionNeeded())},Object(g.getParameter)("CANDIDATE_TIMEOUT")),s.peerConnection.onicecandidate=function(W){var B,z,Q,ge;z=(B=s.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),Q=B.match(/a=candidate:.+typ\shost.+\r\n/),ge=B.match(/a=candidate:.+typ\srelay.+\r\n/),null===z&&null===Q&&null===ge||void 0!==s.ice||!s.iceCandidateTimer||(clearTimeout(s.iceCandidateTimer),s.iceCandidateTimer=null,s.ice=0,s.moreIceComing=!1,s.markActionNeeded()),s.iceCandidateCount=s.iceCandidateCount+1};var W,L=function(W){return W.replace("a=x-google-flag:conference\r\n","")},Z=function(W){var B,z;if((B=W.match(/m=video.*\r\n/))&&y.minVideoBW&&y.maxVideoBW){z=B[0]+"b=AS:"+y.maxVideoBW+"\r\n";var Q=0,ge=0;"h264"===y.codec?(Q=W.search(/a=rtpmap:(\d+) H264\/90000\r\n/),ge=W.search(/H264\/90000\r\n/)):"vp8"===y.codec?(Q=W.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),ge=W.search(/VP8\/90000\r\n/)):"vp9"===y.codec&&(Q=W.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),ge=W.search(/VP9\/90000\r\n/)),-1!==Q&&-1!==ge&&ge-Q>10&&(z=z+"a=fmtp:"+W.slice(Q+9,ge-1)+" x-google-min-bitrate="+y.minVideoBW+"\r\n"),W=(W=W.replace(B[0],z)).replace(/42001f/g,"42e01f"),d.default.debug("["+s.clientId+"]Set Video Bitrate - min:"+y.minVideoBW+" max:"+y.maxVideoBW)}return(B=W.match(/m=audio.*\r\n/))&&y.maxAudioBW&&(W=W.replace(B[0],z=B[0]+"b=AS:"+y.maxAudioBW+"\r\n")),W};s.processSignalingMessage=function(W){var B,z=JSON.parse(W);s.incomingMessage=z,"new"===s.state?"OFFER"===z.messageType?(B={sdp:z.sdp,type:"offer"},s.peerConnection.setRemoteDescription(new RTCSessionDescription(B)).catch(function(Q){}),s.state="offer-received",s.markActionNeeded()):s.error("Illegal message for this state: "+z.messageType+" in state "+s.state):"offer-sent"===s.state?"ANSWER"===z.messageType?((B={sdp:z.sdp,type:"answer"}).sdp=L(B.sdp),B.sdp=Z(B.sdp),y.screen&&"detail"===y.optimizationMode&&(d.default.debug("[".concat(s.client,"] remove screen share abs ext")),B.sdp=B.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),y.isSubscriber&&(B.sdp=B.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),s.peerConnection.setRemoteDescription(new RTCSessionDescription(B)).catch(function(Q){}),s.state="established"):"pr-answer"===z.messageType?(B={sdp:z.sdp,type:"pr-answer"},s.peerConnection.setRemoteDescription(new RTCSessionDescription(B)).catch(function(Q){})):s.error("offer"===z.messageType?"Not written yet":"Illegal message for this state: "+z.messageType+" in state "+s.state):"established"===s.state&&("OFFER"===z.messageType?(B={sdp:z.sdp,type:"offer"},s.peerConnection.setRemoteDescription(new RTCSessionDescription(B)).catch(function(Q){}),s.state="offer-received",s.markActionNeeded()):"ANSWER"===z.messageType?((B={sdp:z.sdp,type:"answer"}).sdp=L(B.sdp),B.sdp=Z(B.sdp),s.peerConnection.setRemoteDescription(new RTCSessionDescription(B)).catch(function(Q){})):s.error("Illegal message for this state: "+z.messageType+" in state "+s.state))},s.setRtpSenderParameters=(W=A()(w.a.mark(function B(z){var Q,ge,se;return w.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(Q=s.peerConnection.getSenders(),console.log("senders",Q),ge=Q.find(function(Se){return"video"===Se.track.kind})){ae.next=5;break}return ae.abrupt("return");case 5:return(se=ge.getParameters()).degradationPreference=z,ae.prev=7,d.default.debug("[".concat(s.clientId,"] setParameters"),se),ae.next=11,ge.setParameters(se);case 11:ae.next=16;break;case 13:ae.prev=13,ae.t0=ae.catch(7),d.default.debug("[".concat(s.clientId,"] setParameters failed, ignore"));case 16:case"end":return ae.stop()}},B,null,[[7,13]])})),function(B){return W.apply(this,arguments)});var ee=0,le=0;return s.getVideoRelatedStats=function(W){s.getStats(function(B){B.forEach(function(z){if(s.isSubscriber){if("video"===z.mediaType&&z.id&&~z.id.indexOf("recv")){if(M.isChromeKernel()&&+M.getBrowserVersion()>=76){var ge=+z.googFramesDecoded-le;s._setStat(f,"googFrameRateReceived",+z.googFramesReceived-ee),s._setStat(f,"googFrameRateDecoded",ge),s._setStat(f,"googFrameRateOutput",ge),ee=+z.googFramesReceived,le=+z.googFramesDecoded}W&&W({mediaType:"video",peerId:s.uid,isVideoMute:s.isVideoMute,frameRateReceived:z.googFrameRateReceived,frameRateDecoded:z.googFrameRateDecoded,bytesReceived:z.bytesReceived,packetsReceived:z.packetsReceived,packetsLost:z.packetsLost})}}else"video"===z.mediaType&&z.id&&~z.id.indexOf("send")&&W&&W({mediaType:"video",isVideoMute:s.isVideoMute,frameRateInput:z.googFrameRateInput,frameRateSent:z.googFrameRateSent,googRtt:z.googRtt})})})},s.getAudioRelatedStats=function(W){s.getStats(function(B){B.forEach(function(z){s.isSubscriber&&"audio"===z.mediaType&&z.id&&~z.id.indexOf("recv")&&W&&W({mediaType:"audio",peerId:s.uid,isAudioMute:s.isAudioMute,frameDropped:parseInt(z.googDecodingPLC)+parseInt(z.googDecodingPLCCNG)+"",frameReceived:z.googDecodingCTN,googJitterReceived:z.googJitterReceived,bytesReceived:z.bytesReceived,packetsReceived:z.packetsReceived,packetsLost:z.packetsLost})})})},s.getStatsRate=function(W){s.getStats(function(B){W(B)})},s.getStats=function(W,B){B=(B=B||500)>500?500:B,s.lastTimeGetStats&&Date.now()-s.lastTimeGetStats<B?W&&W(s.filterStatsCache,s.originStatsCache):(s.lastTimeGetStats=Date.now(),this._getStats(function(z,Q){s.filterStatsCache=z,s.originStatsCache=Q,W&&W(z,Q)}))},s._setStat=function(W,B,z){W.hasOwnProperty(B)&&(null!=z&&z!==1/0&&z==z||(z=0),W[B]=z+"")},s._processGetStatsAfterChrome76=function(W){var B=this;s.lastStats||(s.lastStats=new Map),s.peerConnection.getStats().then(function(z){var Q,ge=[],se=[],ae=new Map,Se=new Date,Te=function(y){if("undefined"==typeof Symbol||null==y[Symbol.iterator]){if(Array.isArray(y)||(y=function(C,L){if(C){if("string"==typeof C)return P(C,L);var Z=Object.prototype.toString.call(C).slice(8,-1);if("Object"===Z&&C.constructor&&(Z=C.constructor.name),"Map"===Z||"Set"===Z)return Array.from(Z);if("Arguments"===Z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return P(C,L)}}(y))){var s=0,H=function(){};return{s:H,n:function(){return s>=y.length?{done:!0}:{done:!1,value:y[s++]}},e:function(C){throw C},f:H}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,c,q=!0,f=!1;return{s:function(){_=y[Symbol.iterator]()},n:function(){var C=_.next();return q=C.done,C},e:function(C){f=!0,c=C},f:function(){try{q||null==_.return||_.return()}finally{if(f)throw c}}}}(z.values());try{for(Te.s();!(Q=Te.n()).done;){var Ee=Q.value;"codec"!=Ee.type?"candidate-pair"!=Ee.type?("inbound-rtp"===Ee.type&&"video"===Ee.mediaType&&ae.set("inbound-video",Ee),"inbound-rtp"===Ee.type&&"audio"===Ee.mediaType&&ae.set("inbound-audio",Ee),"outbound-rtp"===Ee.type&&"audio"===Ee.mediaType&&ae.set("outbound-audio",Ee),"outbound-rtp"===Ee.type&&"video"===Ee.mediaType&&ae.set("outbound-video",Ee),"track"===Ee.type&&"video"===Ee.kind&&Ee.remoteSource&&ae.set("remote-video-track",Ee),"track"===Ee.type&&"audio"===Ee.kind&&Ee.remoteSource&&ae.set("remote-audio-track",Ee),"remote-inbound-rtp"===Ee.type&&"video"===Ee.mediaType&&ae.set("remote-inbound-video",Ee),"remote-inbound-rtp"===Ee.type&&"audio"===Ee.mediaType&&ae.set("remote-inbound-audio",Ee),"track"!==Ee.type||"video"!==Ee.kind||Ee.remoteSource||ae.set("local-video-track",Ee),"track"!==Ee.type||"audio"!==Ee.kind||Ee.remoteSource||ae.set("local-audio-track",Ee),"media-source"===Ee.type&&"video"===Ee.kind&&ae.set("media-source-video",Ee),"media-source"===Ee.type&&"audio"===Ee.kind&&ae.set("media-source-audio",Ee)):se.push(Ee):ge.push(Ee)}}catch(Ue){Te.e(Ue)}finally{Te.f()}ae.set("codec",ge),ae.set("candidatePairs",se),ae.set("timestamp",+Se);var _e=null,Me=null;if(f.timestamp=Se,q.timestamp=Se,_.timestamp=Se,_.timestamp=Se,C.timestamp=Se,B.isSubscriber)(_e=ae.get("inbound-video"))&&(s._setStat(f,"id","inbound_video_ssrc_recv"),s._setStat(f,"mediaType",_e.mediaType),s._setStat(f,"packetsLost",_e.packetsLost),s._setStat(f,"googDecodeMs",null),s._setStat(f,"googMaxDecodeMs",null),s._setStat(f,"googRenderDelayMs",null),s._setStat(f,"googMinPlayoutDelayMs",null),s._setStat(f,"googNacksSent",_e.nackCount),s._setStat(f,"googPlisSent",_e.pliCount),s._setStat(f,"googFirsSent",_e.firCount),s._setStat(f,"bytesReceived",_e.bytesReceived),s._setStat(f,"packetsReceived",_e.packetsReceived)),(_e=ae.get("inbound-audio"))&&(s._setStat(q,"id","inbound_audio_ssrc_recv"),s._setStat(q,"mediaType",_e.mediaType),s._setStat(q,"bytesReceived",_e.bytesReceived),s._setStat(q,"packetsLost",_e.packetsLost),s._setStat(q,"packetsReceived",_e.packetsReceived),s._setStat(q,"googAccelerateRate",_e.removedSamplesForAcceleration),s._setStat(q,"googCurrentDelayMs",_e.jitterBufferDelay),s._setStat(q,"googDecodingCNG",null),s._setStat(q,"googDecodingCTN",null),s._setStat(q,"googDecodingCTSG",null),s._setStat(q,"googDecodingNormal",null),s._setStat(q,"googDecodingPLC",null),s._setStat(q,"googDecodingPLCCNG",null),s._setStat(q,"googJitterReceived",_e.jitter),s._setStat(q,"googPreferredJitterBufferMs",null),s._setStat(q,"googSecondaryDecodedRate",null)),(_e=ae.get("remote-video-track"))&&(s._setStat(f,"googTargetDelayMs",_e.jitterBufferDelay),s._setStat(f,"googFrameWidthReceived",_e.frameWidth),s._setStat(f,"googFrameHeightReceived",_e.frameHeight),s._setStat(f,"googJitterBufferMs",_e.jitterBufferDelay/_e.jitterBufferEmittedCount*1e3),s._setStat(f,"googCurrentDelayMs",_e.jitterBufferDelay),s._setStat(f,"googFramesDecoded",_e.framesDecoded),s._setStat(f,"googFramesReceived",_e.framesReceived)),(_e=ae.get("remote-audio-track"))&&(s._setStat(q,"audioOutputLevel",32767*_e.audioLevel),s._setStat(q,"googJitterBufferMs",_e.jitterBufferDelay/_e.jitterBufferEmittedCount*1e3),s._setStat(q,"googExpandRate",_e.concealedSamples),s._setStat(q,"googPreemptiveExpandRate",_e.insertedSamplesForDeceleration),s._setStat(q,"googSpeechExpandRate",_e.silentConcealedSamples));else{var xe=s.lastStats.get("timestamp"),u=s.lastStats.get("outbound-video");if((_e=ae.get("outbound-audio"))&&(s._setStat(_,"id","outbound_audio_ssrc_send"),s._setStat(_,"mediaType",_e.mediaType),s._setStat(_,"aecDivergentFilterFraction",null),s._setStat(_,"bytesSent",_e.bytesSent),s._setStat(_,"packetsSent",_e.packetsSent),Me=_e.transportId),_e=ae.get("outbound-video")){if(s._setStat(c,"id","outbound_video_ssrc_send"),s._setStat(c,"mediaType",_e.mediaType),s._setStat(c,"bytesSent",_e.bytesSent),s._setStat(c,"packetsSent",_e.packetsSent),s._setStat(c,"googAdaptationChanges",_e.qualityLimitationDurations),s._setStat(c,"googAvgEncodeMs",null),s._setStat(c,"googEncodeUsagePercent",null),Me=_e.transportId,_e.totalEncodedBytesTarget&&u&&u.totalEncodedBytesTarget){var de=(_e.totalEncodedBytesTarget-u.totalEncodedBytesTarget)/(+new Date-xe);s._setStat(C,"googTargetEncBitrate",Math.floor(8*de*1e3))}if(_e.retransmittedBytesSent&&u&&u.retransmittedBytesSent){var V=(_e.retransmittedBytesSent-u.retransmittedBytesSent)/(+new Date-xe);s._setStat(C,"googRetransmitBitrate",Math.floor(8*V*1e3))}if(_e.bytesSent&&u&&u.bytesSent){var Ae=(_e.bytesSent-u.bytesSent)/(+new Date-xe);s._setStat(C,"googTransmitBitrate",Math.floor(8*Ae*1e3)),s._setStat(C,"googActualEncBitrate",Math.floor(8*Ae*1e3))}if(_e.totalPacketSendDelay&&u&&u.totalPacketSendDelay){var Be=(_e.totalPacketSendDelay-u.totalPacketSendDelay)/(+new Date-xe);s._setStat(C,"googBucketDelay",Math.floor(1e3*Be))}}if((_e=ae.get("remote-inbound-video"))&&(s._setStat(c,"packetsLost",_e.packetsLost),s._setStat(c,"googRtt",_e.roundTripTime)),(_e=ae.get("local-video-track"))&&(s._setStat(c,"googFrameHeightSent",_e.frameHeight),s._setStat(c,"googFrameWidthSent",_e.frameWidth),void 0!==_e.framesPerSecond&&s._setStat(c,"googFrameRateSent",_e.framesPerSecond)),(_e=ae.get("local-audio-track"))&&(s._setStat(_,"googEchoCancellationReturnLoss",_e.echoReturnLoss),s._setStat(_,"googEchoCancellationReturnLossEnhancement",_e.echoReturnLossEnhancement)),(_e=ae.get("media-source-video"))&&(s._setStat(c,"googFrameHeightInput",_e.height),s._setStat(c,"googFrameWidthInput",_e.width),s._setStat(c,"googFrameRateInput",_e.framesPerSecond)),(_e=ae.get("media-source-audio"))&&s._setStat(_,"audioInputLevel",32767*_e.totalAudioEnergy),(_e=ae.get("inbound-video"))&&(s._setStat(c,"googFirsReceived",_e.firCount),s._setStat(c,"googNacksReceived",_e.nackCount),s._setStat(c,"googPlisReceived",_e.pliCount)),Me)ae.get("candidatePairs").map(function(Ue){Me==Ue.transportId&&s._setStat(C,"googAvailableSendBandwidth",Ue.availableOutgoingBitrate)});else{var ke=ae.get("candidatePairs")[0];ke&&s._setStat(C,"googAvailableSendBandwidth",ke.availableOutgoingBitrate)}}s.lastStats=ae;var Ve=[R()({},c),R()({},_),R()({},f),R()({},q),R()({},C)];Ve.push({id:"time",startTime:s.connectedTime,timestamp:new Date}),W(Ve)})},s._processGetStatsBeforeChrome76=function(W){s.peerConnection.getStats(function(B){var z=[],Q=[],ge=null;Object.keys(B).forEach(function(se){var ae=B[se];ae&&(Q.push(ae),ge=ae.timestamp,"VideoBwe"===ae.type?C=ae:ae.id.indexOf("_send")>-1&&"video"===ae.mediaType?c=ae:ae.id.indexOf("_send")>-1&&"audio"===ae.mediaType?_=ae:ae.id.indexOf("_recv")>-1&&"video"===ae.mediaType?f=ae:ae.id.indexOf("_recv")>-1&&"audio"===ae.mediaType&&(q=ae))}),(z=[R()({},c),R()({},_),R()({},f),R()({},q),R()({},C)]).push({id:"time",startTime:s.connectedTime,timestamp:ge||new Date}),W(z,Q)})},s._getStats=function(W){Object(g.getParameter)("CHROME_NEW_STATS")&&M.isChromeKernel()&&+M.getBrowserVersion()>=76?s._processGetStatsAfterChrome76(W):s._processGetStatsBeforeChrome76(W)},s.addTrack=function(W,B){if("unified-plan"===Object(g.getParameter)("PLAN")){var z="audio"===W.kind?s._audioSender:s._videoSender;if(z){var Q=s.peerConnection.getTransceivers().find(function(ge){return ge.sender===z});z.replaceTrack(W).then(function(){Q.direction="sendrecv",s.renegotiate()})}else z=s.peerConnection.addTrack(W,B),"audio"===W.kind?s._audioSender=z:s._videoSender=z}else s.peerConnection.addTrack(W,B)},s.removeTrack=function(W,B){if("unified-plan"===Object(g.getParameter)("PLAN")){var z=s.peerConnection.getTransceivers().find(function(Q){return Q.sender.track===W});z&&(z.direction="inactive",s.peerConnection.removeTrack(z.sender))}else s.peerConnection.removeTrack(s.peerConnection.getSenders().find(function(Q){return Q.track==W}))},s.addStream=function(W){"unified-plan"===Object(g.getParameter)("PLAN")?W.getTracks().forEach(function(B){var z=s.peerConnection.addTrack(B,W);"audio"===B.kind?s._audioSender=z:s._videoSender=z}):(s.peerConnection.addStream(W),s.markActionNeeded())},s.removeStream=function(){s.markActionNeeded()},s.close=function(){s.state="closed",s.peerConnection.close()},s.markActionNeeded=function(){s.actionNeeded=!0,s.doLater(function(){s.onstablestate()})},s.doLater=function(W){window.setTimeout(W,1)},s.onstablestate=function(){if(s.actionNeeded){if("new"===s.state||"established"===s.state)s.peerConnection.createOffer(s.mediaConstraints).then(function(B){return B?B.sdp!==s.prevOffer?(y.isSubscriber&&(B.sdp=B.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),s.peerConnection.setLocalDescription(B),s.state="preparing-offer",void s.markActionNeeded()):void d.default.debug("["+s.clientId+"]Not sending a new offer"):(d.default.debug("["+s.clientId+"]sessionDescription is null"),void s.onsignalingmessage(null))}).catch(function(B){d.default.debug("["+s.clientId+"]peer connection create offer failed ",B)});else if("preparing-offer"===s.state){if(s.moreIceComing)return;s.prevOffer=s.peerConnection.localDescription.sdp,s.offerCandidates=s.prevOffer.match(/a=candidate.+\r\n/g)||[],s.offerCandidates.length||(y.isCloudProxy3&&y.onNoIceCandidate&&y.onNoIceCandidate(),d.default.warning("[".concat(s.clientId,"]No Ice Candidate generated")),Object(g.getParameter)("SHIM_CANDIDATE")?(d.default.debug("Shimming fake candidate"),s.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):d.default.error("[".concat(s.clientId,"]None Ice Candidate not allowed"))),s.prevOffer=s.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),s.sendMessage("OFFER",s.prevOffer),s.state="offer-sent"}else if("offer-received"===s.state)s.peerConnection.createAnswer(function(B){if(s.peerConnection.setLocalDescription(B),s.state="offer-received-preparing-answer",s.iceStarted)s.markActionNeeded();else{var z=new Date;d.default.debug("["+s.clientId+"]"+z.getTime()+": Starting ICE in responder"),s.iceStarted=!0}},function(B){d.default.debug("["+s.clientId+"]peer connection create answer failed ",B)},s.mediaConstraints);else if("offer-received-preparing-answer"===s.state){if(s.moreIceComing)return;s.sendMessage("ANSWER",s.peerConnection.localDescription.sdp),s.state="established"}else d.default.debug("[".concat(s.clientId,"] Dazed and confused in state ").concat(s.state,", stopping here'"));s.actionNeeded=!1}},s.sendMessage=function(W,B){var z={};z.messageType=W,z.sdp=B,"OFFER"===W?(z.offererSessionId=s.sessionId,z.answererSessionId=s.otherSessionId,z.seq=s.sequenceNumber+=1,z.tiebreaker=Math.floor(429496723*Math.random()+1)):(z.offererSessionId=s.incomingMessage.offererSessionId,z.answererSessionId=s.sessionId,z.seq=s.incomingMessage.seq),s.onsignalingmessage(JSON.stringify(z))},s._getSender=function(W){if(s.peerConnection&&s.peerConnection.getSenders){var B=s.peerConnection.getSenders().find(function(z){return z.track.kind==W});if(B)return B}return null},s.hasSender=function(W){return!!s._getSender(W)},s.replaceTrack=function(W,B,z){var Q=s._getSender(W.kind);if(!Q)return z("NO_SENDER_FOUND");try{Q.replaceTrack(W)}catch(ge){return z&&z(ge)}setTimeout(function(){return B&&B()},50)},s.error=function(W){throw"Error in RoapOnJsep: "+W},s.sessionId=s.roapSessionId+=1,s.sequenceNumber=0,s.actionNeeded=!1,s.iceStarted=!1,s.moreIceComing=!0,s.iceCandidateCount=0,s.onsignalingmessage=y.callback,s.peerConnection.ontrack=function(W){s.onaddstream&&(s.onaddstream(W,"ontrack"),s.peerConnection.onaddstream=null)},s.peerConnection.onaddstream=function(W){s.onaddstream&&(s.onaddstream(W,"onaddstream"),s.peerConnection.ontrack=null)},s.peerConnection.onremovestream=function(W){s.onremovestream&&s.onremovestream(W)},s.peerConnection.oniceconnectionstatechange=function(W){console.log(W),console.log(s.peerConnection.iceConnectionState),"connected"===W.currentTarget.iceConnectionState&&(s.connectedTime=new Date),s.oniceconnectionstatechange&&s.oniceconnectionstatechange(W.currentTarget.iceConnectionState)},s.renegotiate=function(){void 0!==s.prevOffer&&s.peerConnection.createOffer().then(function(W){return"unified-plan"!==Object(g.getParameter)("PLAN")&&(W.sdp=W.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")),W.sdp=L(W.sdp),W.sdp=Z(W.sdp),s.peerConnection.setLocalDescription(W)}).then(function(){s.onnegotiationneeded&&s.onnegotiationneeded(s.peerConnection.localDescription.sdp)}).catch(function(W){console.log("createOffer error: ",W)})},s.peerConnection.onnegotiationneeded=s.renegotiate,s.onaddstream=null,s.onremovestream=null,s.onnegotiationneeded=null,s.state="new",s.markActionNeeded(),s}(y)).browser="chrome-stable",s},U=function(y,s,H){var _={};_.config=y,_.streamId=y.streamId,delete y.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var c=0,q=1,f=!1,C=null,L=function(W){if(c++,C)if(C===W)d.default.debug("Using Video Source/ Audio Source");else{var B=C.getVideoTracks()[0],z=C.getAudioTracks()[0],Q=W.getVideoTracks()[0],ge=W.getAudioTracks()[0];Q&&(B&&C.removeTrack(B),C.addTrack(Q)),ge&&(z&&C.removeTrack(z),C.addTrack(ge))}else C=W;c!==q||f||(f=!0,setTimeout(function(){s(C)},0))},Z=function(W){d.default.error("Failed to GetUserMedia",W.name,W.code,W.message,W),c++,f||(f=!0,setTimeout(function(){H&&H(W)},0))},ee=function(){var W={video:y.video,audio:y.audio};if(d.default.debug("GetUserMedia",JSON.stringify(W)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(W).then(L).catch(Z);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(y,L,Z);else{var B={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};d.default.error("["+_.streamId+"]"+B.message),H&&H(B)}};if((y.videoSource||y.audioSource)&&(C=new MediaStream,y.videoSource&&C.addTrack(y.videoSource),y.audioSource&&C.addTrack(y.audioSource)),y.video||y.audio||y.screen||y.screenAudio){if(!y.screen&&y.screenAudio)return H&&H({code:"Set screen to true before sharing the audio"});if(y.screen){if(te.a.isElectron())return y.screen.sourceId?te.a.getScreenStream(y.screen.sourceId,y.screen,function(W,B){W?Z(W):(y.audio&&(q++,ee()),L(B))}):te.a.shareScreen(y.screen,function(W,B){W?Z(W):(y.audio&&(q++,ee()),L(B))});if(M.isFireFox()){if(d.default.debug("["+_.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(y.screen.mediaSource))return H&&H({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:y.screen},function(W){y.audio&&(q++,ee()),L(W)},Z)}else if(M.isChromeKernel()&&y.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void H({code:"This browser does not support screen sharing"});d.default.debug("["+_.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(y.screen.extensionId,{getStream:!0},function(W){void 0===W?(d.default.error("["+_.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),Z({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(y.screen.mandatory.chromeMediaSourceId=W.streamId,navigator.getMedia({video:y.screen},function(B){y.audio&&(q++,ee()),L(B)},Z))})}catch(W){return d.default.debug("["+_.streamId+"]AgoraRTC screensharing plugin is not accessible"),void H({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var le={};return le.video="number"==typeof y.screen.width&&"number"==typeof y.screen.height?{width:{ideal:y.screen.width},height:{ideal:y.screen.height}}:{width:y.screen.width,height:y.screen.height},le.video.frameRate=y.screen.frameRate&&y.screen.frameRate.min?{ideal:y.screen.frameRate.max,max:y.screen.frameRate.max}:y.screen.frameRate,y.screenAudio&&(le.audio=y.screenAudio),d.default.debug("use getDisplayMedia, constraints:",le),window.navigator.mediaDevices.getDisplayMedia(le).then(function(W){!y.screenAudio&&y.audio&&(q++,ee()),L(W)}).catch(Z)}d.default.error("["+_.streamId+"]This browser does not support screenSharing"),H({code:"This browser does not support screen sharing"})}}else ee()}else L(C)}},function(oe,X,x){"use strict";var M=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(X,"__esModule",{value:!0});var S,b=M(x(0)),R=function(){function S(w,v,A){void 0===v&&(v=""),this.name="AgoraRTCException",this.code=w,this.message="AgoraRTCError "+this.code+": "+v,this.data=A}return S.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},S.prototype.throw=function(){throw b.default.error(this.toString()),this},S}();X.AgoraRTCError=R,(S=X.AgoraRTCErrorCode||(X.AgoraRTCErrorCode={})).UNEXPECTED_ERROR="UNEXPECTED_ERROR",S.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",S.TIMEOUT="TIMEOUT",S.INVALID_PARAMS="INVALID_PARAMS",S.NOT_SUPPORT="NOT_SUPPORT",S.INVALID_OPERATION="INVALID_OPERATION",S.OPERATION_ABORT="OPERATION_ABORT",S.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",S.NETWORK_ERROR="NETWORK_ERROR",S.NETWORK_TIMEOUT="NETWORK_TIMEOUT",S.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",S.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",S.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",S.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",S.ELECTRON_IS_NULL="ELECTRON_IS_NULL",S.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",S.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",S.STREAM_IS_CLOSED="STREAM_IS_CLOSED",S.ABORT_OTHER_INIT="ABORT_OTHER_INIT",S.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",S.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",S.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",S.PERMISSION_DENIED="PERMISSION_DENIED",S.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",S.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",S.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",S.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",S.TRACK_IS_DISABLED="TRACK_IS_DISABLED",S.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",S.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",S.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",S.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",S.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",S.UID_CONFLICT="UID_CONFLICT",S.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",S.INVALID_TRACK="INVALID_TRACK",S.SENDER_NOT_FOUND="SENDER_NOT_FOUND",S.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",S.SET_ANSWER_FAILED="SET_ANSWER_FAILED",S.ICE_FAILED="ICE_FAILED",S.PC_CLOSED="PC_CLOSED",S.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",S.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",S.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",S.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",S.INVALID_REMOTE_USER="INVALID_REMOTE_USER",S.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",S.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",S.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",S.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",S.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",S.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",S.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",S.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",S.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",S.WS_ABORT="WS_ABORT",S.WS_DISCONNECT="WS_DISCONNECT",S.WS_ERR="WS_ERR",S.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",S.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",S.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",S.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",S.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",S.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",S.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",S.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",S.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",S.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",S.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",S.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",S.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",S.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",S.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",S.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",S.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",S.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",S.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"},function(oe,X,x){"use strict";x.d(X,"a",function(){return v});var M=x(0),b=window.AudioContext||window.webkitAudioContext,R=x(2),S=R.getParameter,w=R.setParameter,v=function(){return S("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),w("AUDIO_CONTEXT",function(){if(b){var A=new b;return window.ctx=A,new Promise(function(d){document.body?d():window.addEventListener("load",d)}).then(function(){var d=function m(){"suspended"==A.state?(M.default.debug("AudioContext is suspended, auto resume"),A.resume().then(function(){M.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",m,!0),document.body.removeEventListener("mousedown",m,!0)})):(M.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",m,!0),document.body.removeEventListener("mousedown",m,!0))};M.default.debug(">>> add event listener >>>>"),document.body.addEventListener("touchend",d,!0),document.body.addEventListener("mousedown",d,!0)}),A}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),S("AUDIO_CONTEXT")};v()},function(oe,X,x){"use strict";var M=x(1),b=null,R=function(){try{b=window.require("electron")}catch(v){}return b},S=function(v){var A=M.report.reportApiInvoke(null,{callback:v,name:"getScreenSources",options:arguments,tag:"tracer"}),d=R();if(!d)return A&&A("electron is null");try{var m=d.desktopCapturer.getSources({types:["window","screen"]})}catch(g){console.log(g)}m instanceof Promise?(console.log("electron.desktopCapturer.getSources return type is Promise"),m.then(function(g){return A&&A(null,g)}).catch(function(g){return A&&A(g)})):m=d.desktopCapturer.getSources({types:["window","screen"]},function(g,O){console.log("electron.desktopCapturer.getSources return type is callback"),A&&A(null,O)})},w=function(v,A,d){A={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:v,maxHeight:A.height,maxWidth:A.width,maxFrameRate:A.frameRate&&A.frameRate.max,minFrameRate:A.frameRate&&A.frameRate.min}}},navigator.webkitGetUserMedia(A,function(g){d&&d(null,g)},function(g){d&&d(g)})};X.a={isElectron:function(){return!!R()},getElectronInstance:R,getScreenSources:S,getScreenStream:w,shareScreen:function(v,A){S(function(d,m){if(d)return A&&A(d);!function(g,O){var P=document.createElement("div");P.innerText="share screen",P.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var I=document.createElement("div");I.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");var k=document.createElement("div");k.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var D=document.createElement("div");D.setAttribute("style","text-align: right; padding: 16px 0;");var j=document.createElement("button");j.innerHTML="cancel",j.setAttribute("style","width: 85px;"),j.onclick=function(){document.body.removeChild(N),O&&O("NotAllowedError")},D.appendChild(j),I.appendChild(E),I.appendChild(k),I.appendChild(D);var N=document.createElement("div");N.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),N.appendChild(P),N.appendChild(I),document.body.appendChild(N),g.map(function(Y){if(Y.id){var te=document.createElement("div");te.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var J=Y.thumbnail;J.getSize().width>1920&&(J=J.resize({width:1920})),te.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+J.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+Y.name.replace(/[\u00A0-\u9999<>\&]/g,function(re){return"&#"+re.charCodeAt(0)+";"})+"</span>",te.onclick=function(){document.body.removeChild(N),O&&O(null,Y.id)},k.appendChild(te)}})}(m,function(g,O){if(g)return A&&A(g);w(O,v,A)})})}}},function(oe,X,x){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var b,M=x(3);(b=X.LiveStreamingServiceMode||(X.LiveStreamingServiceMode={})).TRANSCODE="mix_streaming",b.RAW="raw_streaming",b.INJECT="inject_streaming",X.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},X.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},X.isLiveStreamingTranscodingConfig=function(b){return M.isEmpty(b.width)||M.checkValidNumber(b.width,"config.width",0),M.isEmpty(b.height)||M.checkValidNumber(b.height,"config.height",0),M.isEmpty(b.videoBitrate)||M.checkValidNumber(b.videoBitrate,"config.videoBitrate",1,1e6),M.isEmpty(b.videoFramerate)||M.checkValidNumber(b.videoFramerate,"config.videoFramerate"),M.isEmpty(b.lowLatency)||M.checkValidBoolean(b.lowLatency,"config.lowLatency"),M.isEmpty(b.audioSampleRate)||M.checkValidEnum(b.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),M.isEmpty(b.audioBitrate)||M.checkValidNumber(b.audioBitrate,"config.audioBitrate",1,128),M.isEmpty(b.audioChannels)||M.checkValidEnum(b.audioChannels,"config.audioChannels",[1,2,3,4,5]),M.isEmpty(b.videoGop)||M.checkValidNumber(b.videoGop,"config.videoGop"),M.isEmpty(b.videoCodecProfile)||M.checkValidEnum(b.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),M.isEmpty(b.userCount)||M.checkValidNumber(b.userCount,"config.userCount",0,17),M.isEmpty(b.backgroundColor)||M.checkValidNumber(b.backgroundColor,"config.backgroundColor",0,16777215),b.transcodingUsers&&!M.isEmpty(b.transcodingUsers)&&(M.checkValidArray(b.transcodingUsers,"config.transcodingUsers"),b.transcodingUsers.forEach(function(R,S){M.checkValidUID(R.uid),M.isEmpty(R.x)||M.checkValidNumber(R.x,"transcodingUser["+S+"].x",0,1e4),M.isEmpty(R.y)||M.checkValidNumber(R.y,"transcodingUser["+S+"].y",0,1e4),M.isEmpty(R.width)||M.checkValidNumber(R.width,"transcodingUser["+S+"].width",0,1e4),M.isEmpty(R.height)||M.checkValidNumber(R.height,"transcodingUser["+S+"].height",0,1e4),M.isEmpty(R.zOrder)||M.checkValidNumber(R.zOrder-1,"transcodingUser["+S+"].zOrder",0,100),M.isEmpty(R.alpha)||M.checkValidFloatNumber(R.alpha,"transcodingUser["+S+"].alpha",0,1)})),b.images&&!M.isEmpty(b.images)&&(M.checkValidArray(b.images,"config.images"),b.images.forEach(function(R,S){M.checkValidString(R.url,"images["+S+"].url",1,1e3,!1),M.isEmpty(R.x)||M.checkValidNumber(R.x,"images["+S+"].x",0,1e4),M.isEmpty(R.y)||M.checkValidNumber(R.y,"images["+S+"].y",0,1e4),M.isEmpty(R.width)||M.checkValidNumber(R.width,"images["+S+"].width",0,1e4),M.isEmpty(R.height)||M.checkValidNumber(R.height,"images["+S+"].height",0,1e4),M.isEmpty(R.zOrder)||M.checkValidNumber(R.zOrder,"images["+S+"].zOrder",0,255),M.isEmpty(R.alpha)||M.checkValidFloatNumber(R.alpha,"images["+S+"].alpha",0,1)})),!0},X.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},X.isInjectStreamConfig=function(b){return M.isEmpty(b.audioVolume)||M.checkValidNumber(b.audioVolume,"config.audioVolume",0,1e3),M.isEmpty(b.audioBitrate)||M.checkValidNumber(b.audioBitrate,"config.audioBitrate",1,1e4),M.isEmpty(b.audioChannels)||M.checkValidEnum(b.audioChannels,"config.audioChannels",[1,2]),M.isEmpty(b.audioSampleRate)||M.checkValidEnum(b.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),M.isEmpty(b.width)||M.checkValidNumber(b.width,"config.width",0,1e4),M.isEmpty(b.height)||M.checkValidNumber(b.height,"config.height",0,1e4),M.isEmpty(b.videoBitrate)||M.checkValidNumber(b.videoBitrate,"config.videoBitrate",1,1e4),M.isEmpty(b.videoFramerate)||M.checkValidNumber(b.videoFramerate,"config.videoFramerate",1,1e4),M.isEmpty(b.videoGop)||M.checkValidNumber(b.videoGop,"config.videoGop",1,1e4),!0},X.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(b){b.WARNING="@live_uap-warning",b.ERROR="@line_uap-error",b.PUBLISH_STREAM_STATUS="@live_uap-publish-status",b.INJECT_STREAM_STATUS="@live_uap-inject-status",b.WORKER_STATUS="@live_uap-worker-status",b.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(X.LiveStreamingUapSignalEvents||(X.LiveStreamingUapSignalEvents={})),function(b){b.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(X.LiveStreamingInternalEvents||(X.LiveStreamingInternalEvents={})),function(b){b[b.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",b[b.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",b[b.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",b[b.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",b[b.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",b[b.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",b[b.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",b[b.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",b[b.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",b[b.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",b[b.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",b[b.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",b[b.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",b[b.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",b[b.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",b[b.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",b[b.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",b[b.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",b[b.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",b[b.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",b[b.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",b[b.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(X.LIVE_STREAM_ERROR_CODE||(X.LIVE_STREAM_ERROR_CODE={})),function(b){b.CONNECTED="websocket:connected",b.RECONNECTING="websocket:reconnecting",b.WILL_RECONNECT="websocket:will_reconnect",b.CLOSED="websocket:closed",b.FAILED="websocket:failed",b.ON_MESSAGE="websocket:on_message",b.REQUEST_NEW_URLS="websocket:request_new_urls"}(X.WebSocketManagerEvents||(X.WebSocketManagerEvents={}))},function(oe,X,x){var M=x(57),b=x(58);oe.exports=function(R,S,w){var v=S&&w||0;"string"==typeof R&&(S="binary"===R?new Array(16):null,R=null);var A=(R=R||{}).random||(R.rng||M)();if(A[6]=15&A[6]|64,A[8]=63&A[8]|128,S)for(var d=0;d<16;++d)S[v+d]=A[d];return S||b(A)}},function(oe,X,x){var M;oe.exports=(M=x(73),function(b){var R=M,S=R.lib,w=S.WordArray,v=S.Hasher,A=R.algo,d=[],m=[];!function(){function P(D){for(var j=b.sqrt(D),N=2;N<=j;N++)if(!(D%N))return!1;return!0}function I(D){return 4294967296*(D-(0|D))|0}for(var E=2,k=0;k<64;)P(E)&&(k<8&&(d[k]=I(b.pow(E,.5))),m[k]=I(b.pow(E,1/3)),k++),E++}();var g=[],O=A.SHA256=v.extend({_doReset:function(){this._hash=new w.init(d.slice(0))},_doProcessBlock:function(P,I){for(var E=this._hash.words,k=E[0],D=E[1],j=E[2],N=E[3],Y=E[4],te=E[5],J=E[6],re=E[7],U=0;U<64;U++){if(U<16)g[U]=0|P[I+U];else{var y=g[U-15],H=g[U-2];g[U]=((y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3)+g[U-7]+((H<<15|H>>>17)^(H<<13|H>>>19)^H>>>10)+g[U-16]}var c=k&D^k&j^D&j,f=re+((Y<<26|Y>>>6)^(Y<<21|Y>>>11)^(Y<<7|Y>>>25))+(Y&te^~Y&J)+m[U]+g[U];re=J,J=te,te=Y,Y=N+f|0,N=j,j=D,D=k,k=f+(((k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22))+c)|0}E[0]=E[0]+k|0,E[1]=E[1]+D|0,E[2]=E[2]+j|0,E[3]=E[3]+N|0,E[4]=E[4]+Y|0,E[5]=E[5]+te|0,E[6]=E[6]+J|0,E[7]=E[7]+re|0},_doFinalize:function(){var P=this._data,I=P.words,E=8*this._nDataBytes,k=8*P.sigBytes;return I[k>>>5]|=128<<24-k%32,I[14+(k+64>>>9<<4)]=b.floor(E/4294967296),I[15+(k+64>>>9<<4)]=E,P.sigBytes=4*I.length,this._process(),this._hash},clone:function(){var P=v.clone.call(this);return P._hash=this._hash.clone(),P}});R.SHA256=v._createHelper(O),R.HmacSHA256=v._createHmacHelper(O)}(Math),M.SHA256)},function(oe,X,x){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.randomString=function(M){void 0===M&&(M=8);for(var b="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",R=b.length,S="",w=0;w<M;w++)S+=b.charAt(Math.floor(Math.random()*R));return S}},function(oe,X,x){"use strict";var M=this&&this.__assign||function(){return(M=Object.assign||function(D){for(var j,N=1,Y=arguments.length;N<Y;N++)for(var te in j=arguments[N])Object.prototype.hasOwnProperty.call(j,te)&&(D[te]=j[te]);return D}).apply(this,arguments)},b=this&&this.__awaiter||function(D,j,N,Y){return new(N||(N=Promise))(function(te,J){function re(s){try{y(Y.next(s))}catch(H){J(H)}}function U(s){try{y(Y.throw(s))}catch(H){J(H)}}function y(s){var H;s.done?te(s.value):(H=s.value,H instanceof N?H:new N(function(_){_(H)})).then(re,U)}y((Y=Y.apply(D,j||[])).next())})},R=this&&this.__generator||function(D,j){var N,Y,te,J,re={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return J={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(J[Symbol.iterator]=function(){return this}),J;function U(y){return function(s){return function(H){if(N)throw new TypeError("Generator is already executing.");for(;re;)try{if(N=1,Y&&(te=2&H[0]?Y.return:H[0]?Y.throw||((te=Y.return)&&te.call(Y),0):Y.next)&&!(te=te.call(Y,H[1])).done)return te;switch(Y=0,te&&(H=[2&H[0],te.value]),H[0]){case 0:case 1:te=H;break;case 4:return re.label++,{value:H[1],done:!1};case 5:re.label++,Y=H[1],H=[0];continue;case 7:H=re.ops.pop(),re.trys.pop();continue;default:if(!((te=(te=re.trys).length>0&&te[te.length-1])||6!==H[0]&&2!==H[0])){re=0;continue}if(3===H[0]&&(!te||H[1]>te[0]&&H[1]<te[3])){re.label=H[1];break}if(6===H[0]&&re.label<te[1]){re.label=te[1],te=H;break}if(te&&re.label<te[2]){re.label=te[2],re.ops.push(H);break}te[2]&&re.ops.pop(),re.trys.pop();continue}H=j.call(D,re)}catch(_){H=[6,_],Y=0}finally{N=te=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([y,s])}}},S=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(X,"__esModule",{value:!0});var w=x(2),v=S(x(37)),A=x(24),d=S(x(0)),m=x(1);function g(D){return new Promise(function(j){window.setTimeout(j,D)})}function O(D,j){return new Promise(function(N,Y){j.timeout=j.timeout||w.getParameter("HTTP_CONNECT_TIMEOUT"),j.responseType=j.responseType||"json",j.data&&(j.data=JSON.stringify(j.data)),j.headers=j.headers||{},j.headers["Content-Type"]="application/json",j.method="POST",j.url=D,v.default.request(j).then(function(te){N(te.data)}).catch(function(te){v.default.isCancel(te)?Y(new A.AgoraRTCError(A.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):Y("ECONNABORTED"===te.code?new A.AgoraRTCError(A.AgoraRTCErrorCode.NETWORK_TIMEOUT,te.message):te.response?new A.AgoraRTCError(A.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,te.response.status):new A.AgoraRTCError(A.AgoraRTCErrorCode.NETWORK_ERROR,te.message))})})}function P(D,j,N,Y){var te=this,J=Object.assign({},X.DEFAULT_RETRY_CONFIG,Y),re=J.timeout,U=function(){return b(te,void 0,void 0,function(){return R(this,function(H){switch(H.label){case 0:return[4,g(re)];case 1:return H.sent(),re*=J.timeoutFactor,re=Math.min(J.maxRetryTimeout,re),[2]}})})},y=!1,s=new Promise(function(H,_){return b(te,void 0,void 0,function(){var c,q,f;return R(this,function(C){switch(C.label){case 0:j=j||function(){return!1},N=N||function(){return!0},c=0,C.label=1;case 1:if(!(c<J.maxRetryCount))return[3,12];if(y)return[2,_(new A.AgoraRTCError(A.AgoraRTCErrorCode.OPERATION_ABORT))];C.label=2;case 2:return C.trys.push([2,7,,11]),[4,D()];case 3:return q=C.sent(),j(q,c)?c+1===J.maxRetryCount?[2,H(q)]:[4,U()]:[3,5];case 4:return C.sent(),[3,6];case 5:return[2,H(q)];case 6:return[3,11];case 7:return f=C.sent(),N(f,c)?c+1===J.maxRetryCount?[2,_(f)]:[4,U()]:[3,9];case 8:return C.sent(),[3,10];case 9:return[2,_(f)];case 10:return[3,11];case 11:return c+=1,[3,1];case 12:return[2]}})})});return s.cancel=function(){return y=!0},s}function I(D,j){return{addressList:D.servers.map(function(N,Y){return"wss://"+N.address.replace(/\./g,"-")+".edge.agora.io:"+N.wss+"?serviceName="+encodeURIComponent(j)}),workerToken:D.workerToken,vid:D.vid}}X.wait=g,X.post=O,X.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},X.getRetryWaitTime=function(D,j){var N=j.timeout*Math.pow(j.timeoutFactor,D);return Math.min(j.maxRetryTimeout,N)},X.retryable=P,X.liveStreamingServerResponseToResult=I;var E=1;function k(D,j,N,Y,te){var J=this;void 0===te&&(te=X.DEFAULT_RETRY_CONFIG),E+=1;var re,U,y={sid:N.sid,command:"convergeAllocateEdge",uid:"666",appId:N.appId,ts:Math.floor(Date.now()/1e3),seq:E,requestId:E,version:w.VERSION,cname:N.cname},s={service_name:j,json_body:JSON.stringify(y)},H=D[0];return P(function(){return b(J,void 0,void 0,function(){var _,c,q,f,C;return R(this,function(L){switch(L.label){case 0:return re=Date.now(),[4,O(H,{data:s,cancelToken:Y,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(_=L.sent(),U=Date.now()-re,0!==_.code)throw q=new A.AgoraRTCError(A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+_.code,{retry:!0}),d.default.error(q.toString()),q;if(200!==(c=JSON.parse(_.json_body)).code)throw q=new A.AgoraRTCError(A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+c.code+", reason: "+c.reason),d.default.error(q.toString()),q;if(!c.servers||0===c.servers.length)throw q=new A.AgoraRTCError(A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),d.default.error(q.toString()),q;if(f=I(c,j),w.getParameter("LIVE_STREAMING_ADDRESS"))try{C=JSON.parse(w.getParameter("LIVE_STREAMING_ADDRESS")),f.addressList=C}catch(Z){f.addressList=[w.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,M(M({},f),{responseTime:U})]}})})},function(_,c){return m.report.requestApWorkerEvent(N.sid,{success:!0,sc:200,serviceName:j,responseDetail:JSON.stringify(_.addressList),firstSuccess:0===c,responseTime:U,serverIp:D[c%D.length]}),!1},function(_,c){return m.report.requestApWorkerEvent(N.sid,{success:!1,sc:_.data&&_.data.code||200,serviceName:j,responseTime:U,serverIp:D[c%D.length]}),!!(_.code!==A.AgoraRTCErrorCode.OPERATION_ABORT&&_.code!==A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||_.data&&_.data.retry)&&(H=D[(c+1)%D.length],!0)},te)}X.requestLiveStreamingWorkerManager=k,X.getLiveStreamingWorkerMangerResult=function(D,j,N){return b(this,void 0,void 0,function(){var Y,te;return R(this,function(J){switch(J.label){case 0:Y=w.getParameter("UAP_AP").map(function(re){return j.proxyServer?"https://"+j.proxyServer+"/ap/?url="+re+"/api/v1?action=uap":"https://"+re+"/api/v1?action=uap"}),J.label=1;case 1:return J.trys.push([1,3,,4]),[4,k(Y,D,j,N)];case 2:return[2,J.sent()];case 3:throw te=J.sent(),m.report.requestApWorkerEvent(j.sid,{success:!1,sc:te.data&&te.data.code||200,serviceName:D,responseTime:te.data&&te.data.responseTime}),te;case 4:return[2]}})})}},function(oe,X,x){var M=x(70),b=x(71),R=x(34),S=x(72);oe.exports=function(w){return M(w)||b(w)||R(w)||S()}},function(oe,X){var x;x=function(){return this}();try{x=x||new Function("return this")()}catch(M){"object"==typeof window&&(x=window)}oe.exports=x},function(oe,X,x){var M=x(35);oe.exports=function(b,R){if(b){if("string"==typeof b)return M(b,R);var S=Object.prototype.toString.call(b).slice(8,-1);return"Object"===S&&b.constructor&&(S=b.constructor.name),"Map"===S||"Set"===S?Array.from(S):"Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?M(b,R):void 0}}},function(oe,X){oe.exports=function(x,M){(null==M||M>x.length)&&(M=x.length);for(var b=0,R=new Array(M);b<M;b++)R[b]=x[b];return R}},function(oe,X,x){"use strict";var M=this&&this.__spreadArrays||function(){for(var w=0,v=0,A=arguments.length;v<A;v++)w+=arguments[v].length;var d=Array(w),m=0;for(v=0;v<A;v++)for(var g=arguments[v],O=0,P=g.length;O<P;O++,m++)d[m]=g[O];return d};Object.defineProperty(X,"__esModule",{value:!0});var b=x(24),R=function(){function w(){this._events={},this.addListener=this.on}return w.prototype.getListeners=function(v){return this._events[v]?this._events[v].map(function(A){return A.listener}):[]},w.prototype.on=function(v,A){this._events[v]||(this._events[v]=[]);var d=this._events[v];-1===this._indexOfListener(d,A)&&d.push({listener:A,once:!1})},w.prototype.once=function(v,A){this._events[v]||(this._events[v]=[]);var d=this._events[v];-1===this._indexOfListener(d,A)&&d.push({listener:A,once:!0})},w.prototype.off=function(v,A){if(this._events[v]){var d=this._events[v],m=this._indexOfListener(d,A);-1!==m&&d.splice(m,1),0===this._events[v].length&&delete this._events[v]}},w.prototype.removeAllListeners=function(v){v?delete this._events[v]:this._events={}},w.prototype.emit=function(v){for(var A=[],d=1;d<arguments.length;d++)A[d-1]=arguments[d];this._events[v]||(this._events[v]=[]);for(var m=this._events[v].map(function(P){return P}),g=0;g<m.length;g+=1){var O=m[g];O.once&&this.off(v,O.listener),O.listener.apply(this,A||[])}},w.prototype._indexOfListener=function(v,A){for(var d=v.length;d--;)if(v[d].listener===A)return d;return-1},w}();function S(w,v){for(var A=[],d=2;d<arguments.length;d++)A[d-2]=arguments[d];var m=null,g=null;if(w.emit.apply(w,M([v],A,[function(O){m=O},function(O){g=O}])),null!==g)throw g;if(null===m)throw new b.AgoraRTCError(b.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return m}X.EventEmitter=R,X.emitAsPromise=function(w,v){for(var A=[],d=2;d<arguments.length;d++)A[d-2]=arguments[d];return 0===w.getListeners(v).length?Promise.reject(new b.AgoraRTCError(b.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise(function(m,g){w.emit.apply(w,M([v],A,[m,g]))})},X.emitAsInvokerNoResponse=function(w,v){for(var A=[],d=2;d<arguments.length;d++)A[d-2]=arguments[d];return 0===w.getListeners(v).length?null:S.apply(void 0,M([w,v],A))},X.emitAsInvoker=S},function(oe,X,x){oe.exports=x(78)},function(oe,X,x){"use strict";oe.exports=function(M,b){return function(){for(var R=new Array(arguments.length),S=0;S<R.length;S++)R[S]=arguments[S];return M.apply(b,R)}}},function(oe,X,x){"use strict";var M=x(18);function b(R){return encodeURIComponent(R).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}oe.exports=function(R,S,w){if(!S)return R;var v;if(w)v=w(S);else if(M.isURLSearchParams(S))v=S.toString();else{var A=[];M.forEach(S,function(m,g){null!=m&&(M.isArray(m)?g+="[]":m=[m],M.forEach(m,function(O){M.isDate(O)?O=O.toISOString():M.isObject(O)&&(O=JSON.stringify(O)),A.push(b(g)+"="+b(O))}))}),v=A.join("&")}if(v){var d=R.indexOf("#");-1!==d&&(R=R.slice(0,d)),R+=(-1===R.indexOf("?")?"?":"&")+v}return R}},function(oe,X,x){"use strict";oe.exports=function(M){return!(!M||!M.__CANCEL__)}},function(oe,X,x){"use strict";(function(M){var b=x(18),R=x(84),S={"Content-Type":"application/x-www-form-urlencoded"};function w(d,m){!b.isUndefined(d)&&b.isUndefined(d["Content-Type"])&&(d["Content-Type"]=m)}var v,A={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==M&&"[object process]"===Object.prototype.toString.call(M))&&(v=x(42)),v),transformRequest:[function(d,m){return R(m,"Accept"),R(m,"Content-Type"),b.isFormData(d)||b.isArrayBuffer(d)||b.isBuffer(d)||b.isStream(d)||b.isFile(d)||b.isBlob(d)?d:b.isArrayBufferView(d)?d.buffer:b.isURLSearchParams(d)?(w(m,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):b.isObject(d)?(w(m,"application/json;charset=utf-8"),JSON.stringify(d)):d}],transformResponse:[function(d){if("string"==typeof d)try{d=JSON.parse(d)}catch(m){}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};b.forEach(["delete","get","head"],function(d){A.headers[d]={}}),b.forEach(["post","put","patch"],function(d){A.headers[d]=b.merge(S)}),oe.exports=A}).call(this,x(83))},function(oe,X,x){"use strict";var M=x(18),b=x(85),R=x(39),S=x(87),w=x(90),v=x(91),A=x(43);oe.exports=function(d){return new Promise(function(m,g){var O=d.data,P=d.headers;M.isFormData(O)&&delete P["Content-Type"];var I=new XMLHttpRequest;d.auth&&(P.Authorization="Basic "+btoa((d.auth.username||"")+":"+(d.auth.password||"")));var D=S(d.baseURL,d.url);if(I.open(d.method.toUpperCase(),R(D,d.params,d.paramsSerializer),!0),I.timeout=d.timeout,I.onreadystatechange=function(){if(I&&4===I.readyState&&(0!==I.status||I.responseURL&&0===I.responseURL.indexOf("file:"))){var Y="getAllResponseHeaders"in I?w(I.getAllResponseHeaders()):null;b(m,g,{data:d.responseType&&"text"!==d.responseType?I.response:I.responseText,status:I.status,statusText:I.statusText,headers:Y,config:d,request:I}),I=null}},I.onabort=function(){I&&(g(A("Request aborted",d,"ECONNABORTED",I)),I=null)},I.onerror=function(){g(A("Network Error",d,null,I)),I=null},I.ontimeout=function(){var Y="timeout of "+d.timeout+"ms exceeded";d.timeoutErrorMessage&&(Y=d.timeoutErrorMessage),g(A(Y,d,"ECONNABORTED",I)),I=null},M.isStandardBrowserEnv()){var j=x(92),N=(d.withCredentials||v(D))&&d.xsrfCookieName?j.read(d.xsrfCookieName):void 0;N&&(P[d.xsrfHeaderName]=N)}if("setRequestHeader"in I&&M.forEach(P,function(Y,te){void 0===O&&"content-type"===te.toLowerCase()?delete P[te]:I.setRequestHeader(te,Y)}),M.isUndefined(d.withCredentials)||(I.withCredentials=!!d.withCredentials),d.responseType)try{I.responseType=d.responseType}catch(Y){if("json"!==d.responseType)throw Y}"function"==typeof d.onDownloadProgress&&I.addEventListener("progress",d.onDownloadProgress),"function"==typeof d.onUploadProgress&&I.upload&&I.upload.addEventListener("progress",d.onUploadProgress),d.cancelToken&&d.cancelToken.promise.then(function(Y){I&&(I.abort(),g(Y),I=null)}),void 0===O&&(O=null),I.send(O)})}},function(oe,X,x){"use strict";var M=x(86);oe.exports=function(b,R,S,w,v){var A=new Error(b);return M(A,R,S,w,v)}},function(oe,X,x){"use strict";var M=x(18);oe.exports=function(b,R){R=R||{};var S={},w=["url","method","params","data"],v=["headers","auth","proxy"],A=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];M.forEach(w,function(g){void 0!==R[g]&&(S[g]=R[g])}),M.forEach(v,function(g){M.isObject(R[g])?S[g]=M.deepMerge(b[g],R[g]):void 0!==R[g]?S[g]=R[g]:M.isObject(b[g])?S[g]=M.deepMerge(b[g]):void 0!==b[g]&&(S[g]=b[g])}),M.forEach(A,function(g){void 0!==R[g]?S[g]=R[g]:void 0!==b[g]&&(S[g]=b[g])});var d=w.concat(v).concat(A),m=Object.keys(R).filter(function(g){return-1===d.indexOf(g)});return M.forEach(m,function(g){void 0!==R[g]?S[g]=R[g]:void 0!==b[g]&&(S[g]=b[g])}),S}},function(oe,X,x){"use strict";function M(b){this.message=b}M.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},M.prototype.__CANCEL__=!0,oe.exports=M},function(oe,X){oe.exports=function(x,M,b){return M in x?Object.defineProperty(x,M,{value:b,enumerable:!0,configurable:!0,writable:!0}):x[M]=b,x}},function(oe,X,x){"use strict";var M=this&&this.__awaiter||function(I,E,k,D){return new(k||(k=Promise))(function(j,N){function Y(re){try{J(D.next(re))}catch(U){N(U)}}function te(re){try{J(D.throw(re))}catch(U){N(U)}}function J(re){var U;re.done?j(re.value):(U=re.value,U instanceof k?U:new k(function(y){y(U)})).then(Y,te)}J((D=D.apply(I,E||[])).next())})},b=this&&this.__generator||function(I,E){var k,D,j,N,Y={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return N={next:te(0),throw:te(1),return:te(2)},"function"==typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N;function te(J){return function(re){return function(U){if(k)throw new TypeError("Generator is already executing.");for(;Y;)try{if(k=1,D&&(j=2&U[0]?D.return:U[0]?D.throw||((j=D.return)&&j.call(D),0):D.next)&&!(j=j.call(D,U[1])).done)return j;switch(D=0,j&&(U=[2&U[0],j.value]),U[0]){case 0:case 1:j=U;break;case 4:return Y.label++,{value:U[1],done:!1};case 5:Y.label++,D=U[1],U=[0];continue;case 7:U=Y.ops.pop(),Y.trys.pop();continue;default:if(!((j=(j=Y.trys).length>0&&j[j.length-1])||6!==U[0]&&2!==U[0])){Y=0;continue}if(3===U[0]&&(!j||U[1]>j[0]&&U[1]<j[3])){Y.label=U[1];break}if(6===U[0]&&Y.label<j[1]){Y.label=j[1],j=U;break}if(j&&Y.label<j[2]){Y.label=j[2],Y.ops.push(U);break}j[2]&&Y.ops.pop(),Y.trys.pop();continue}U=E.call(I,Y)}catch(y){U=[6,y],D=0}finally{k=j=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([J,re])}}},R=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}},S=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var E={};if(null!=I)for(var k in I)Object.hasOwnProperty.call(I,k)&&(E[k]=I[k]);return E.default=I,E};Object.defineProperty(X,"__esModule",{value:!0});var w=R(x(59)),v=S(x(62)),A=S(x(63)),d=R(x(0)),m=x(2),g=w.default.Root.fromJSON(A),O=function(){function I(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return I.prototype.setProxy=function(E){this.proxyServer=E},I.prototype.sendReportList=function(E,k){var D=this,j=this._dataConvert("ProtoRaws",{vid:k,sendTs:Math.round(Date.now()/1e3),payloads:E.map(function(N){return{id:v[N.type],msg:D._dataConvert(N.type,N.data)}})});this.send(j)},I.prototype._dataConvert=function(E,k){var D;try{D=g.lookupType("protobuf."+E)}catch(N){d.default.error("[send-proto] invalid proto name "+E)}var j=D.create(k);return D.encode(j).finish()},I.prototype.send=function(E){0==this.state?this._send(E):this.requestArray.push(E)},I.prototype._send=function(E){return M(this,void 0,void 0,function(){return b(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,4]),this.state=1,[4,this.request(E)];case 1:return k.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return k.sent(),[4,P(this.retryBackoffCount++<2?200:1e4)];case 3:return k.sent(),this._send(E),[3,4];case 4:return[2]}})})},I.prototype.request=function(E){return M(this,void 0,void 0,function(){var k,D;return b(this,function(j){switch(j.label){case 0:k=this._getAddress(),D=this._getBackupAddress(),j.label=1;case 1:return j.trys.push([1,3,,5]),[4,this._request(k,E)];case 2:return j.sent(),[3,5];case 3:return j.sent(),[4,this._request(D,E)];case 4:return j.sent(),[3,5];case 5:return[2]}})})},I.prototype._request=function(E,k){return this._post(E,k)},I.prototype._post=function(E,k){var D=this;return new Promise(function(j,N){var Y=new XMLHttpRequest;Y.timeout=m.getParameter("HTTP_CONNECT_TIMEOUT"),Y.open("POST",E,!0),Y.setRequestHeader("Content-type","application/octet-stream"),D.proxyServer||(Y.setRequestHeader("Cache-Control","no-cache, no-store"),Y.setRequestHeader("Pragma","no-cache"),Y.setRequestHeader("Expires","0")),Y.onload=function(te){j(Y.responseText)},Y.onerror=function(te){N(te)},Y.ontimeout=function(te){N(te)},Y.send(k)})},I.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+m.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+m.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},I.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+m.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+m.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},I}();X.default=O;var P=function(I){return new Promise(function(E){window.setTimeout(E,I)})}},function(oe,X){oe.exports=function(x,M){if(!(x instanceof M))throw new TypeError("Cannot call a class as a function")}},function(oe,X){function x(M,b){for(var R=0;R<b.length;R++){var S=b[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(M,S.key,S)}}oe.exports=function(M,b,R){return b&&x(M.prototype,b),R&&x(M,R),M}},function(oe,X,x){"use strict";var M=this&&this.__awaiter||function(d,m,g,O){return new(g||(g=Promise))(function(P,I){function E(j){try{D(O.next(j))}catch(N){I(N)}}function k(j){try{D(O.throw(j))}catch(N){I(N)}}function D(j){var N;j.done?P(j.value):(N=j.value,N instanceof g?N:new g(function(Y){Y(N)})).then(E,k)}D((O=O.apply(d,m||[])).next())})},b=this&&this.__generator||function(d,m){var g,O,P,I,E={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return I={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function k(D){return function(j){return function(N){if(g)throw new TypeError("Generator is already executing.");for(;E;)try{if(g=1,O&&(P=2&N[0]?O.return:N[0]?O.throw||((P=O.return)&&P.call(O),0):O.next)&&!(P=P.call(O,N[1])).done)return P;switch(O=0,P&&(N=[2&N[0],P.value]),N[0]){case 0:case 1:P=N;break;case 4:return E.label++,{value:N[1],done:!1};case 5:E.label++,O=N[1],N=[0];continue;case 7:N=E.ops.pop(),E.trys.pop();continue;default:if(!((P=(P=E.trys).length>0&&P[P.length-1])||6!==N[0]&&2!==N[0])){E=0;continue}if(3===N[0]&&(!P||N[1]>P[0]&&N[1]<P[3])){E.label=N[1];break}if(6===N[0]&&E.label<P[1]){E.label=P[1],P=N;break}if(P&&E.label<P[2]){E.label=P[2],E.ops.push(N);break}P[2]&&E.ops.pop(),E.trys.pop();continue}N=m.call(d,E)}catch(Y){N=[6,Y],O=0}finally{g=P=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([D,j])}}},R=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(X,"__esModule",{value:!0});var S,d,w=R(x(0)),v=x(15);(d=S||(S={})).NEW="new",d.PREPARING_OFFER="preparing-offer",d.OFFER_SENT="offer-sent",d.ESTABLISHED="established",d.CLOSED="closed";var A=function(){function d(m){this.candidate=null,this.state=S.NEW,this.config=m,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(m),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return d.prototype.addStream=function(m){this.peerConnection.addStream(m)},d.prototype.setRtpSenderParameters=function(m){return M(this,void 0,void 0,function(){return b(this,function(g){return[2]})})},d.prototype.setAnswer=function(m){var g=JSON.parse(m);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:g.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},d.prototype.close=function(){this.peerConnection.close()},d.prototype.getStats=function(m,g){if(void 0===g&&(g=500),g=g>500?500:g,Date.now()-this.lastTimeGetStats<g){var O=[];this.config.isSubscriber?(O.push(this.receiveVideoStats),O.push(this.receiveAudioStats)):(O.push(this.sendAudioStats),O.push(this.sendVideoStats)),O.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),m&&m(O)}else this._getStats(m)},d.prototype._getStats=function(m){var g=this,O=[];this.peerConnection.getStats(null).then(function(P){g.lastTimeGetStats=Date.now(),Object.keys(P).map(function(I){var E=P[I];g.config.isSubscriber?E.type&&"inboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(g.receiveAudioStats.id=E.id+"recv",g.receiveAudioStats.type=E.type+"",g.receiveAudioStats.mediaType=E.mediaType+"",g.receiveAudioStats.packetsReceived=E.packetsReceived+"",g.receiveAudioStats.bytesReceived=E.bytesReceived+"",g.receiveAudioStats.packetsLost=E.packetsLost+"",g.receiveAudioStats.googJitterReceived=E.jitter+""):E.type&&"inboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(g.receiveVideoStats.id=E.id+"recv",g.receiveVideoStats.type=E.type+"",g.receiveVideoStats.mediaType=E.mediaType+"",g.receiveVideoStats.packetsReceived=E.packetsReceived+"",g.receiveVideoStats.bytesReceived=E.bytesReceived+"",g.receiveVideoStats.packetsLost=E.packetsLost+"",g.receiveVideoStats.googJitterBufferMs=E.jitter+"",g.receiveVideoStats.googPlisSent=E.pliCount+"",g.receiveVideoStats.googFirsSent=E.firCount+"",g.receiveVideoStats.googNacksSent=E.nackCount+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("v")?(g.receiveVideoStats.googFrameHeightReceived=E.frameHeight+"",g.receiveVideoStats.googFrameWidthReceived=E.frameWidth+"",g.receiveVideoStats.googFrameRateDecoded=E.framesPerSecond+"",g.receiveVideoStats.googFrameRateOutput=E.framesPerSecond+"",g.receiveVideoStats.googFrameRateReceived=E.framesPerSecond+"",g.receiveVideoStats.googFramesDecoded=E.framesDecoded+"",g.receiveVideoStats.googFrameReceived=E.framesReceived+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("a")&&(g.receiveAudioStats.audioOutputLevel=E.audioLevel+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(g.sendAudioStats.id=E.id+"send",g.sendAudioStats.type=E.type+"",g.sendAudioStats.mediaType=E.mediaType+"",g.sendAudioStats.packetsSent=E.packetsSent+"",g.sendAudioStats.bytesSent=E.bytesSent+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(g.sendVideoStats.id=E.id+"send",g.sendVideoStats.type=E.type+"",g.sendVideoStats.mediaType=E.mediaType+"",g.sendVideoStats.packetsSent=E.packetsSent+"",g.sendVideoStats.bytesSent=E.bytesSent+"",g.sendVideoStats.googRtt=E.roundTripTime+"",g.sendVideoStats.googPlisReceived=E.pliCount+"",g.sendVideoStats.googFirsReceived=E.firCount+"",g.sendVideoStats.googNacksReceived=E.nackCount+""):!E.remoteSource&&E.type&&"track"===E.type&&E.framesSent&&0!==E.framesSent&&(g.sendVideoStats.googFrameHeightSent=E.frameHeight+"",g.sendVideoStats.googFrameHeightInput=E.frameHeight+"",g.sendVideoStats.googFrameWidthSent=E.frameWidth+"",g.sendVideoStats.googFrameWidthInput=E.frameWidth+"",g.sendVideoStats.googFramesEncoded=E.framesSent+"",g.sendVideoStats.googFrameRateSent=E.framesPerSecond+"")}),g.config.isSubscriber?(O.push(g.receiveVideoStats),O.push(g.receiveAudioStats)):(O.push(g.sendAudioStats),O.push(g.sendVideoStats)),O.push({id:"time",startTime:g.connectedTime,timestamp:Date.now()}),m&&m(O)})},d.prototype.getStatsRate=function(m){this.getStats(m)},d.prototype.initPeecConnection=function(m){var g=m.stunServerUrl,O=m.turnServer,P=m.iceServers;return this.pcConfig={iceServers:[]},P instanceof Array?this.pcConfig.iceServers=m.iceServers:g&&(g instanceof Array?g.map(function(I){"string"==typeof I&&""!==I&&this.pcConfig.iceServers.push({urls:I})}):"string"==typeof g&&""!==g&&this.pcConfig.iceServers.push({urls:g})),O&&(O instanceof Array?O.map(function(I){"string"==typeof I.url&&""!==I.url&&this.pcConfig.iceServers.push({username:I.username,credential:I.credential,url:I.url})}):"auto"!==O.mode&&"manual"!==O.mode||(O.udpport&&this.pcConfig.iceServers.push({username:O.username,credential:O.credential,credentialType:"password",urls:"turn:"+O.url+":"+O.udpport+"?transport=udp"}),"string"==typeof O.tcpport&&""!==O.tcpport&&this.pcConfig.iceServers.push({username:O.username,credential:O.credential,credentialType:"password",urls:"turn:"+O.url+":"+O.tcpport+"?transport=tcp"}),!0===O.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new v.RTCPeerConnection(this.pcConfig)},d.prototype._ontrack=function(m){this.onaddstream&&this.onaddstream(m,"ontrack")},d.prototype._onaddstream=function(m){this.onaddstream&&this.onaddstream(m,"onaddstream")},d.prototype._oniceconnectionstatechange=function(m){"connected"===m.currentTarget.iceConnectionState&&(this.state=S.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(m.currentTarget.iceConnectionState)},d.prototype._onicecandidate=function(m){!this.candidate&&m&&(this.candidate=m.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},d.prototype.setLocalSDP=function(m){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:m.sdp,type:"offer"})),this.state=S.PREPARING_OFFER,m},d.prototype.editLocalSDP=function(m){return m.sdp=this.setBandWidth(m.sdp),m.sdp=this.reviseOpus(m.sdp),m.sdp=this.addCandidate(m.sdp),m},d.prototype.setSendRecv=function(m){return(m=(m=m.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},d.prototype.setBandWidth=function(m){var g,O,P=this.config,I=P.codec,E=P.minVideoBW,k=P.maxVideoBW,D=P.maxAudioBW,j=P.clientId;if((g=m.match(/m=video.*\r\n/))&&E&&k){O=g[0]+"b=AS:"+k+"\r\n";var N=0,Y=0;"h264"===I?(N=m.search(/a=rtpmap:(\d+) H264\/90000\r\n/),Y=m.search(/H264\/90000\r\n/)):"vp8"===I?(N=m.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),Y=m.search(/VP8\/90000\r\n/)):"vp9"===I&&(N=m.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),Y=m.search(/VP9\/90000\r\n/)),-1!==N&&-1!==Y&&Y-N>10&&(O=O+"a=fmtp:"+m.slice(N+9,Y-1)+" x-google-min-bitrate="+E+"\r\n"),m=m.replace(g[0],O),w.default.debug("["+j+"]Set Video Bitrate - min:"+E+" max:"+k)}return(g=m.match(/m=audio.*\r\n/))&&D&&(m=m.replace(g[0],O=g[0]+"b=AS:"+D+"\r\n")),m},d.prototype.reviseOpus=function(m){return(m=m.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},d.prototype.addCandidate=function(m){return m+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},d.prototype.sendOffer=function(m){this.config.callback(JSON.stringify({sdp:m.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=S.OFFER_SENT},d}();X.default=A},function(oe,X,x){var M=x(65),b=x(66),R=x(34),S=x(67);oe.exports=function(w,v){return M(w)||b(w,v)||R(w,v)||S()}},function(oe,X,x){var M,b,R;b=this,R=function(){"use strict";var S,w=this;function v(O){w.console&&(w.console.error?w.console.error(O):w.console.log&&w.console.log(O))}function A(O,P,I,E){var k=E||v,D=O.createShader(I);return O.shaderSource(D,P),O.compileShader(D),O.getShaderParameter(D,O.COMPILE_STATUS)?D:(k("*** Error compiling shader '"+D+"':"+O.getShaderInfoLog(D)),O.deleteShader(D),null)}function d(O,P,I,E,k){var D=k||v,j=O.createProgram();return P.forEach(function(N){O.attachShader(j,N)}),I&&I.forEach(function(N,Y){O.bindAttribLocation(j,E?E[Y]:Y,N)}),O.linkProgram(j),O.getProgramParameter(j,O.LINK_STATUS)?j:(D("Error in program linking:"+O.getProgramInfoLog(j)),O.deleteProgram(j),null)}(S=S||w)===S.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var m,g=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(m=HTMLCanvasElement.prototype.getContext,function(){var O=arguments,P=O[0];return"webgl"===P&&((O=[].slice.call(arguments))[0]="experimental-webgl"),m.apply(this,O)})),{createProgram:d,createProgramFromSources:function(O,P,I,E,k){for(var D=[],j=0;j<P.length;++j)D.push(A(O,P[j],O[g[j]],k));return d(O,D,I,E,k)}}},void 0===(M=function(){return R.call(b)}.apply(X,[]))||(oe.exports=M)},function(oe,X,x){"use strict";var M=this&&this.__awaiter||function(d,m,g,O){return new(g||(g=Promise))(function(P,I){function E(j){try{D(O.next(j))}catch(N){I(N)}}function k(j){try{D(O.throw(j))}catch(N){I(N)}}function D(j){var N;j.done?P(j.value):(N=j.value,N instanceof g?N:new g(function(Y){Y(N)})).then(E,k)}D((O=O.apply(d,m||[])).next())})},b=this&&this.__generator||function(d,m){var g,O,P,I,E={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return I={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function k(D){return function(j){return function(N){if(g)throw new TypeError("Generator is already executing.");for(;E;)try{if(g=1,O&&(P=2&N[0]?O.return:N[0]?O.throw||((P=O.return)&&P.call(O),0):O.next)&&!(P=P.call(O,N[1])).done)return P;switch(O=0,P&&(N=[2&N[0],P.value]),N[0]){case 0:case 1:P=N;break;case 4:return E.label++,{value:N[1],done:!1};case 5:E.label++,O=N[1],N=[0];continue;case 7:N=E.ops.pop(),E.trys.pop();continue;default:if(!((P=(P=E.trys).length>0&&P[P.length-1])||6!==N[0]&&2!==N[0])){E=0;continue}if(3===N[0]&&(!P||N[1]>P[0]&&N[1]<P[3])){E.label=N[1];break}if(6===N[0]&&E.label<P[1]){E.label=P[1],P=N;break}if(P&&E.label<P[2]){E.label=P[2],E.ops.push(N);break}P[2]&&E.ops.pop(),E.trys.pop();continue}N=m.call(d,E)}catch(Y){N=[6,Y],O=0}finally{g=P=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([D,j])}}},R=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(X,"__esModule",{value:!0});var S=x(68),w=x(5),v=R(x(0));X.getSupportedCodec=function(d){return M(void 0,void 0,void 0,function(){var m,g,O,P;return b(this,function(E){switch(E.label){case 0:return m={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(v.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{g=S.createRTCPeerConnection({iceServers:[]})}catch(k){return v.default.error("Failed to init RTCPeerConnection",k),[2,Promise.reject(k)]}return g?[3,2]:(v.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(m)]);case 2:return d&&d.stream?[3,7]:(O={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},P=void 0,(w.isSafari()||w.isFireFox()||w.isWeChatBrowser())&&g.addTransceiver?(g.addTransceiver("audio"),g.addTransceiver("video"),[4,g.createOffer()]):[3,4]);case 3:return P=E.sent(),[3,6];case 4:return[4,new Promise(function(k,D){var j=setTimeout(function(){D("CREATEOFFER_TIMEOUT")},3e3);g.createOffer(function(N){clearTimeout(j),k(N)},function(N){clearTimeout(j),D(N)},O)})];case 5:P=E.sent(),E.label=6;case 6:return g.close(),[2,A(P.sdp)];case 7:return d.stream.getTracks&&g.addTrack?d.stream.getTracks().forEach(function(k){g.addTrack(k,d.stream)}):g.addStream(d.stream),P=void 0,w.isSafari()||w.isFireFox()?[4,g.createOffer()]:[3,9];case 8:return P=E.sent(),[3,11];case 9:return[4,new Promise(function(k,D){g.createOffer(k,D)})];case 10:P=E.sent(),E.label=11;case 11:return g.close(),[2,A(P.sdp)]}})})};var A=function(d){var m={video:[],audio:[]};return d.match(/ VP8/i)&&m.video.push("VP8"),d.match(/ VP9/i)&&m.video.push("VP9"),d.match(/ H264/i)&&m.video.push("H264"),d.match(/ opus/i)&&m.audio.push("OPUS"),Promise.resolve(m)}},function(oe,X,x){"use strict";var M=this&&this.__awaiter||function(w,v,A,d){return new(A||(A=Promise))(function(m,g){function O(E){try{I(d.next(E))}catch(k){g(k)}}function P(E){try{I(d.throw(E))}catch(k){g(k)}}function I(E){var k;E.done?m(E.value):(k=E.value,k instanceof A?k:new A(function(D){D(k)})).then(O,P)}I((d=d.apply(w,v||[])).next())})},b=this&&this.__generator||function(w,v){var A,d,m,g,O={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return g={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function P(I){return function(E){return function(k){if(A)throw new TypeError("Generator is already executing.");for(;O;)try{if(A=1,d&&(m=2&k[0]?d.return:k[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,k[1])).done)return m;switch(d=0,m&&(k=[2&k[0],m.value]),k[0]){case 0:case 1:m=k;break;case 4:return O.label++,{value:k[1],done:!1};case 5:O.label++,d=k[1],k=[0];continue;case 7:k=O.ops.pop(),O.trys.pop();continue;default:if(!((m=(m=O.trys).length>0&&m[m.length-1])||6!==k[0]&&2!==k[0])){O=0;continue}if(3===k[0]&&(!m||k[1]>m[0]&&k[1]<m[3])){O.label=k[1];break}if(6===k[0]&&O.label<m[1]){O.label=m[1],m=k;break}if(m&&O.label<m[2]){O.label=m[2],O.ops.push(k);break}m[2]&&O.ops.pop(),O.trys.pop();continue}k=v.call(w,O)}catch(D){k=[6,D],d=0}finally{A=m=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([I,E])}}};Object.defineProperty(X,"__esModule",{value:!0});var R=x(10);function S(w){for(var v="",A=0;A<w.length;A+=1)v+=String.fromCharCode(w[A]);return window.btoa(v)}X.encryptRSA=function(w){return M(void 0,void 0,void 0,function(){var v,A,d,m;return b(this,function(g){switch(g.label){case 0:return v=R.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",v,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return A=g.sent(),O=w,d=(new TextEncoder).encode(O),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},A,d)];case 2:return m=g.sent(),[2,S(new Uint8Array(m))]}var O})})}},function(oe,X,x){"use strict";var M=this&&this.__awaiter||function(m,g,O,P){return new(O||(O=Promise))(function(I,E){function k(N){try{j(P.next(N))}catch(Y){E(Y)}}function D(N){try{j(P.throw(N))}catch(Y){E(Y)}}function j(N){var Y;N.done?I(N.value):(Y=N.value,Y instanceof O?Y:new O(function(te){te(Y)})).then(k,D)}j((P=P.apply(m,g||[])).next())})},b=this&&this.__generator||function(m,g){var O,P,I,E,k={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return E={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function D(j){return function(N){return function(Y){if(O)throw new TypeError("Generator is already executing.");for(;k;)try{if(O=1,P&&(I=2&Y[0]?P.return:Y[0]?P.throw||((I=P.return)&&I.call(P),0):P.next)&&!(I=I.call(P,Y[1])).done)return I;switch(P=0,I&&(Y=[2&Y[0],I.value]),Y[0]){case 0:case 1:I=Y;break;case 4:return k.label++,{value:Y[1],done:!1};case 5:k.label++,P=Y[1],Y=[0];continue;case 7:Y=k.ops.pop(),k.trys.pop();continue;default:if(!((I=(I=k.trys).length>0&&I[I.length-1])||6!==Y[0]&&2!==Y[0])){k=0;continue}if(3===Y[0]&&(!I||Y[1]>I[0]&&Y[1]<I[3])){k.label=Y[1];break}if(6===Y[0]&&k.label<I[1]){k.label=I[1],I=Y;break}if(I&&k.label<I[2]){k.label=I[2],k.ops.push(Y);break}I[2]&&k.ops.pop(),k.trys.pop();continue}Y=g.call(m,k)}catch(te){Y=[6,te],P=0}finally{O=I=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([j,N])}}},R=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(X,"__esModule",{value:!0});var S=R(x(0)),w=x(75),v=x(24),A=x(1),d=x(27);X.addLiveStreamingCapability=function(m,g){var O=this,P=function(I){var E=I.type;if(!m.joinInfo)return new v.AgoraRTCError(v.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(E){case d.LiveStreamingServiceMode.INJECT:return m._injectStreamingClient||(m._injectStreamingClient=new w.AgoraRTCLiveStreamingClient(m.joinInfo),m._injectStreamingClient.onInjectStatusChange=function(k,D,j){m.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:j,status:k})}),m._injectStreamingClient;case d.LiveStreamingServiceMode.RAW:return m._liveRawStreamingClient||(m._liveRawStreamingClient=new w.AgoraRTCLiveStreamingClient(m.joinInfo),m._liveRawStreamingClient.setGatewayConnectionState(m.getConnectionState()),m.on("connection-state-change",function(k){m._liveRawStreamingClient.setGatewayConnectionState(k.curState),"CONNECTING"===k.prevState&&"CONNECTED"===k.curState&&m._liveRawStreamingClient&&m._liveRawStreamingClient.resetAllTask()}),m._liveRawStreamingClient.onLiveStreamError=function(k,D){S.default.error("LIVE_STREAMING_ERROR",D.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:k,reason:D.code})},m._liveRawStreamingClient.onLiveStreamWarning=function(k,D){S.default.warning("LIVE_STREAMING_WARNING",D.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:k,reason:D.code})}),m._liveRawStreamingClient;case d.LiveStreamingServiceMode.TRANSCODE:return m._liveTranscodeStreamingClient||(m._liveTranscodeStreamingClient=new w.AgoraRTCLiveStreamingClient(m.joinInfo),m._liveTranscodeStreamingClient.setGatewayConnectionState(m.getConnectionState()),m.on("connection-state-change",function(k){m._liveTranscodeStreamingClient.setGatewayConnectionState(k.curState),"CONNECTING"===k.prevState&&"CONNECTED"===k.curState&&m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.resetAllTask()}),m._liveTranscodeStreamingClient.onLiveStreamError=function(k,D){S.default.error("LIVE_STREAMING_ERROR",D.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:k,reason:D.code})},m._liveTranscodeStreamingClient.onLiveStreamWarning=function(k,D){S.default.warning("LIVE_STREAMING_WARNING",D.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:k,reason:D})}),m._liveTranscodeStreamingClient}};m.gatewayClient.addEventListener("join",function(I){m._injectStreamingClient&&m._injectStreamingClient.resetAllTask()}),m.gatewayClient.addEventListener("stream-unpublished",function(I){I.options&&0===I.options.streamType&&(m._liveRawStreamingClient&&m._liveRawStreamingClient.resetAllTask(),m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.resetAllTask())}),m.gatewayClient.addEventListener("stream-published",function(I){}),m.startLiveStreaming=function(I,E){S.default.debug("startLiveStreaming");var k=A.report.reportApiInvoke(g.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(m.gatewayClient&&"audience"===m.gatewayClient.role){var D={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw k(D),D}var j=m._startLiveStreaming(I,E);return j.then(function(N){k(null,N)}).catch(function(N){S.default.error("LIVE_STREAMING_ERROR",N.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:I,reason:N.code}),k(N)}),j},m._startLiveStreaming=function(I,E){return M(O,void 0,void 0,function(){var k;return b(this,function(D){switch(D.label){case 0:return E||("vp8"===g.codec&&S.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===g.codec&&S.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===g.mode&&S.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(m._liveRawStreamingClient&&m._liveRawStreamingClient.haveUrl(I)||m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.haveUrl(I))&&new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),[4,P({type:k=E?d.LiveStreamingServiceMode.TRANSCODE:d.LiveStreamingServiceMode.RAW}).startLiveStreamingTask(I,k)];case 1:return D.sent(),m.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:I}),[2]}})})},m.setLiveTranscoding=function(I){S.default.debug("setLiveTranscoding: "+JSON.stringify(I));var E=A.report.reportApiInvoke(g.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"}),k=P({type:d.LiveStreamingServiceMode.TRANSCODE});return k.setTranscodingConfig(I).then(function(){m.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),E(null)}).catch(function(D){S.default.error("SET_LIVE_TRANSCODING_ERROR",D.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:D.code}),E(D)})},m.stopLiveStreaming=function(I){var E=A.report.reportApiInvoke(g.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),k=m._stopLiveStreaming(I);return k.then(function(D){E(null,D)}).catch(function(D){S.default.error("STOP_LIVE_STREAMING_ERROR",D.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:I,reason:D.code}),E(D)}),k},m._stopLiveStreaming=function(I){return M(this,void 0,void 0,function(){return b(this,function(k){switch(k.label){case 0:return S.default.debug("stopLiveStreaming: "+JSON.stringify(I)),[4,Promise.all([m._liveRawStreamingClient,m._liveTranscodeStreamingClient].map(function(D){return D&&D.haveUrl(I)&&D.stopLiveStreamingTask(I)}))];case 1:return k.sent(),S.default.debug("stopLiveStreaming sucess: "+JSON.stringify(I)),m.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:I}),[2]}})})},m.addInjectStreamUrl=function(I,E){var k=A.report.reportApiInvoke(g.sessionId,{name:"Client.addInjectStreamUrl",options:[I,E],tag:"tracer"});if("audience"===m.gatewayClient.role){var D={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw k(D),D}var j=m._addInjectStreamUrl(I,E);return j.then(function(N){k(null,N)}).catch(function(N){S.default.error("ADD_INJECT_STREAM_ERROR",N.toString()),k(N)}),j},m._addInjectStreamUrl=function(I,E){return M(O,void 0,void 0,function(){var k;return b(this,function(D){switch(D.label){case 0:return(k=P({type:d.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(E,0),[4,k.startLiveStreamingTask(I,d.LiveStreamingServiceMode.INJECT)];case 1:return D.sent(),[2]}})})},m.removeInjectStreamUrl=function(I){return M(this,void 0,void 0,function(){var E,k;return b(this,function(D){return E=A.report.reportApiInvoke(g.sessionId,{name:"Client.removeInjectStreamUrl",options:[I],tag:"tracer"}),(k=m._removeInjectStreamUrl(I)).then(function(j){E(null,j)}).catch(function(j){S.default.error("REMOVE_INJECT_STREAM_ERROR",j.toString()),E(j)}),[2,k]})})},m._removeInjectStreamUrl=function(I){return M(O,void 0,void 0,function(){return b(this,function(E){switch(E.label){case 0:return[4,P({type:d.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(I)];case 1:return E.sent(),[2]}})})},m._terminateLiveStreaming=function(){return M(O,void 0,void 0,function(){return b(this,function(I){return[m._injectStreamingClient,m._liveRawStreamingClient,m._liveTranscodeStreamingClient].forEach(function(E){E&&E.terminate()}),[2]})})}}},function(oe,X,x){"use strict";var M=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(X,"__esModule",{value:!0});var b=M(x(4)),R=M(x(0)),S=x(10);X.default=function(w,v){void 0===v&&(v={width:160,height:120,framerate:15});var A=v.width,d=v.height,m=v.framerate,g=w.stream;if(!g)throw b.default.INVALID_LOCAL_STREAM;if(!g.getVideoTracks()[0])throw b.default.HIGH_STREAM_NOT_VIDEO_TRACE;var O=g.getVideoTracks()[0];R.default.debug("Start getLowStream");var P=document.createElement("video"),I=document.createElement("canvas");P.setAttribute("style","display:none"),P.setAttribute("muted",""),P.muted=!0,P.setAttribute("autoplay",""),P.autoplay=!0,P.setAttribute("playsinline",""),I.setAttribute("style","display:none"),I.setAttribute("width",A.toString()),I.setAttribute("height",d.toString());var E=I.getContext("2d");if(!E)throw new Error("not get canvas context");P.srcObject=g,document.body.append(P),document.body.append(I),P.play(),R.default.debug("Start render lowStream");var k=S.audioTimerLoop(function(){return function(){if(P.paused&&P.play(),P.videoHeight>2&&P.videoWidth>2){var te=I.width*(P.videoHeight/P.videoWidth);Math.abs(te-I.height)>=2&&(R.default.debug("adjust low stream resolution",I.width+"x"+I.height+" -> "+I.width+"x"+te),I.height=te)}E.drawImage(P,0,0,I.width,I.height);var J=w.stream;if(J){var re=J.getVideoTracks()[0];O!==re&&(R.default.debug("adjust low stream track"),P.srcObject=J,O=re)}}()},m),D=I.captureStream(m),j=D.getVideoTracks()[0];return j.requestFrame&&j.requestFrame(),D.clean=function(){R.default.debug("Start clean lowStream"),k(),(P||P.parentNode||P.parentNode.removeChild)&&P.parentNode.removeChild(P),(I||I.parentNode||I.parentNode.removeChild)&&I.parentNode.removeChild(I),R.default.debug("Clean lowStream")},D}},function(oe,X){var x="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(x){var M=new Uint8Array(16);oe.exports=function(){return x(M),M}}else{var b=new Array(16);oe.exports=function(){for(var R,S=0;S<16;S++)0==(3&S)&&(R=4294967296*Math.random()),b[S]=R>>>((3&S)<<3)&255;return b}}},function(oe,X){for(var x=[],M=0;M<256;++M)x[M]=(M+256).toString(16).substr(1);oe.exports=function(b,R){var S=R||0;return[x[b[S++]],x[b[S++]],x[b[S++]],x[b[S++]],"-",x[b[S++]],x[b[S++]],"-",x[b[S++]],x[b[S++]],"-",x[b[S++]],x[b[S++]],"-",x[b[S++]],x[b[S++]],x[b[S++]],x[b[S++]],x[b[S++]],x[b[S++]]].join("")}},function(module,exports,__nested_webpack_require_639050__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(undefined){"use strict";var oe,X,M;oe={1:[function(oe,X,x){X.exports=function(M,b){for(var R=new Array(arguments.length-1),S=0,w=2,v=!0;w<arguments.length;)R[S++]=arguments[w++];return new Promise(function(A,d){R[S]=function(m){if(v)if(v=!1,m)d(m);else{for(var g=new Array(arguments.length-1),O=0;O<g.length;)g[O++]=arguments[O];A.apply(null,g)}};try{M.apply(b||null,R)}catch(m){v&&(v=!1,d(m))}})}},{}],2:[function(oe,X,x){var M=x;M.length=function(w){var v=w.length;if(!v)return 0;for(var A=0;--v%4>1&&"="===w.charAt(v);)++A;return Math.ceil(3*w.length)/4-A};for(var b=new Array(64),R=new Array(123),S=0;S<64;)R[b[S]=S<26?S+65:S<52?S+71:S<62?S-4:S-59|43]=S++;M.encode=function(w,v,A){for(var d,m=null,g=[],O=0,P=0;v<A;){var I=w[v++];switch(P){case 0:g[O++]=b[I>>2],d=(3&I)<<4,P=1;break;case 1:g[O++]=b[d|I>>4],d=(15&I)<<2,P=2;break;case 2:g[O++]=b[d|I>>6],g[O++]=b[63&I],P=0}O>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,g)),O=0)}return P&&(g[O++]=b[d],g[O++]=61,1===P&&(g[O++]=61)),m?(O&&m.push(String.fromCharCode.apply(String,g.slice(0,O))),m.join("")):String.fromCharCode.apply(String,g.slice(0,O))},M.decode=function(w,v,A){for(var d,m=A,g=0,O=0;O<w.length;){var P=w.charCodeAt(O++);if(61===P&&g>1)break;if((P=R[P])===undefined)throw Error("invalid encoding");switch(g){case 0:d=P,g=1;break;case 1:v[A++]=d<<2|(48&P)>>4,d=P,g=2;break;case 2:v[A++]=(15&d)<<4|(60&P)>>2,d=P,g=3;break;case 3:v[A++]=(3&d)<<6|P,g=0}}if(1===g)throw Error("invalid encoding");return A-m},M.test=function(w){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(w)}},{}],3:[function(oe,X,x){function M(b,R){"string"==typeof b&&(R=b,b=undefined);var S=[];function w(A){if("string"!=typeof A){var d=v();if(M.verbose&&console.log("codegen: "+d),d="return "+d,A){for(var m=Object.keys(A),g=new Array(m.length+1),O=new Array(m.length),P=0;P<m.length;)g[P]=m[P],O[P]=A[m[P++]];return g[P]=d,Function.apply(null,g).apply(null,O)}return Function(d)()}for(var I=new Array(arguments.length-1),E=0;E<I.length;)I[E]=arguments[++E];if(E=0,A=A.replace(/%([%dfijs])/g,function(k,D){var j=I[E++];switch(D){case"d":case"f":return String(Number(j));case"i":return String(Math.floor(j));case"j":return JSON.stringify(j);case"s":return String(j)}return"%"}),E!==I.length)throw Error("parameter count mismatch");return S.push(A),w}function v(A){return"function "+(A||R||"")+"("+(b&&b.join(",")||"")+"){\n  "+S.join("\n  ")+"\n}"}return w.toString=v,w}X.exports=M,M.verbose=!1},{}],4:[function(oe,X,x){function M(){this._listeners={}}X.exports=M,M.prototype.on=function(b,R,S){return(this._listeners[b]||(this._listeners[b]=[])).push({fn:R,ctx:S||this}),this},M.prototype.off=function(b,R){if(b===undefined)this._listeners={};else if(R===undefined)this._listeners[b]=[];else for(var S=this._listeners[b],w=0;w<S.length;)S[w].fn===R?S.splice(w,1):++w;return this},M.prototype.emit=function(b){var R=this._listeners[b];if(R){for(var S=[],w=1;w<arguments.length;)S.push(arguments[w++]);for(w=0;w<R.length;)R[w].fn.apply(R[w++].ctx,S)}return this}},{}],5:[function(oe,X,x){X.exports=R;var M=oe(1),b=oe(7)("fs");function R(S,w,v){return"function"==typeof w?(v=w,w={}):w||(w={}),v?!w.xhr&&b&&b.readFile?b.readFile(S,function(A,d){return A&&"undefined"!=typeof XMLHttpRequest?R.xhr(S,w,v):A?v(A):v(null,w.binary?d:d.toString("utf8"))}):R.xhr(S,w,v):M(R,this,S,w)}R.xhr=function(S,w,v){var A=new XMLHttpRequest;A.onreadystatechange=function(){if(4!==A.readyState)return undefined;if(0!==A.status&&200!==A.status)return v(Error("status "+A.status));if(w.binary){var d=A.response;if(!d){d=[];for(var m=0;m<A.responseText.length;++m)d.push(255&A.responseText.charCodeAt(m))}return v(null,"undefined"!=typeof Uint8Array?new Uint8Array(d):d)}return v(null,A.responseText)},w.binary&&("overrideMimeType"in A&&A.overrideMimeType("text/plain; charset=x-user-defined"),A.responseType="arraybuffer"),A.open("GET",S),A.send()}},{1:1,7:7}],6:[function(oe,X,x){function M(v){return"undefined"!=typeof Float32Array?function(){var A=new Float32Array([-0]),d=new Uint8Array(A.buffer),m=128===d[3];function g(E,k,D){A[0]=E,k[D]=d[0],k[D+1]=d[1],k[D+2]=d[2],k[D+3]=d[3]}function O(E,k,D){A[0]=E,k[D]=d[3],k[D+1]=d[2],k[D+2]=d[1],k[D+3]=d[0]}function P(E,k){return d[0]=E[k],d[1]=E[k+1],d[2]=E[k+2],d[3]=E[k+3],A[0]}function I(E,k){return d[3]=E[k],d[2]=E[k+1],d[1]=E[k+2],d[0]=E[k+3],A[0]}v.writeFloatLE=m?g:O,v.writeFloatBE=m?O:g,v.readFloatLE=m?P:I,v.readFloatBE=m?I:P}():function(){function A(m,g,O,P){var I=g<0?1:0;if(I&&(g=-g),0===g)m(1/g>0?0:2147483648,O,P);else if(isNaN(g))m(2143289344,O,P);else if(g>34028234663852886e22)m((I<<31|2139095040)>>>0,O,P);else if(g<11754943508222875e-54)m((I<<31|Math.round(g/1401298464324817e-60))>>>0,O,P);else{var E=Math.floor(Math.log(g)/Math.LN2);m((I<<31|E+127<<23|8388607&Math.round(g*Math.pow(2,-E)*8388608))>>>0,O,P)}}function d(m,g,O){var P=m(g,O),I=2*(P>>31)+1,E=P>>>23&255,k=8388607&P;return 255===E?k?NaN:I*(1/0):0===E?1401298464324817e-60*I*k:I*Math.pow(2,E-150)*(k+8388608)}v.writeFloatLE=A.bind(null,b),v.writeFloatBE=A.bind(null,R),v.readFloatLE=d.bind(null,S),v.readFloatBE=d.bind(null,w)}(),"undefined"!=typeof Float64Array?function(){var A=new Float64Array([-0]),d=new Uint8Array(A.buffer),m=128===d[7];function g(E,k,D){A[0]=E,k[D]=d[0],k[D+1]=d[1],k[D+2]=d[2],k[D+3]=d[3],k[D+4]=d[4],k[D+5]=d[5],k[D+6]=d[6],k[D+7]=d[7]}function O(E,k,D){A[0]=E,k[D]=d[7],k[D+1]=d[6],k[D+2]=d[5],k[D+3]=d[4],k[D+4]=d[3],k[D+5]=d[2],k[D+6]=d[1],k[D+7]=d[0]}function P(E,k){return d[0]=E[k],d[1]=E[k+1],d[2]=E[k+2],d[3]=E[k+3],d[4]=E[k+4],d[5]=E[k+5],d[6]=E[k+6],d[7]=E[k+7],A[0]}function I(E,k){return d[7]=E[k],d[6]=E[k+1],d[5]=E[k+2],d[4]=E[k+3],d[3]=E[k+4],d[2]=E[k+5],d[1]=E[k+6],d[0]=E[k+7],A[0]}v.writeDoubleLE=m?g:O,v.writeDoubleBE=m?O:g,v.readDoubleLE=m?P:I,v.readDoubleBE=m?I:P}():function(){function A(m,g,O,P,I,E){var k=P<0?1:0;if(k&&(P=-P),0===P)m(0,I,E+g),m(1/P>0?0:2147483648,I,E+O);else if(isNaN(P))m(0,I,E+g),m(2146959360,I,E+O);else if(P>17976931348623157e292)m(0,I,E+g),m((k<<31|2146435072)>>>0,I,E+O);else{var D;if(P<22250738585072014e-324)m((D=P/5e-324)>>>0,I,E+g),m((k<<31|D/4294967296)>>>0,I,E+O);else{var j=Math.floor(Math.log(P)/Math.LN2);1024===j&&(j=1023),m(4503599627370496*(D=P*Math.pow(2,-j))>>>0,I,E+g),m((k<<31|j+1023<<20|1048576*D&1048575)>>>0,I,E+O)}}}function d(m,g,O,P,I){var E=m(P,I+g),k=m(P,I+O),D=2*(k>>31)+1,j=k>>>20&2047,N=4294967296*(1048575&k)+E;return 2047===j?N?NaN:D*(1/0):0===j?5e-324*D*N:D*Math.pow(2,j-1075)*(N+4503599627370496)}v.writeDoubleLE=A.bind(null,b,0,4),v.writeDoubleBE=A.bind(null,R,4,0),v.readDoubleLE=d.bind(null,S,0,4),v.readDoubleBE=d.bind(null,w,4,0)}(),v}function b(v,A,d){A[d]=255&v,A[d+1]=v>>>8&255,A[d+2]=v>>>16&255,A[d+3]=v>>>24}function R(v,A,d){A[d]=v>>>24,A[d+1]=v>>>16&255,A[d+2]=v>>>8&255,A[d+3]=255&v}function S(v,A){return(v[A]|v[A+1]<<8|v[A+2]<<16|v[A+3]<<24)>>>0}function w(v,A){return(v[A]<<24|v[A+1]<<16|v[A+2]<<8|v[A+3])>>>0}X.exports=M(M)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(oe){}return null}module.exports=inquire},{}],8:[function(oe,X,x){var M=x,b=M.isAbsolute=function(S){return/^(?:\/|\w+:)/.test(S)},R=M.normalize=function(S){var w=(S=S.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),v=b(S),A="";v&&(A=w.shift()+"/");for(var d=0;d<w.length;)".."===w[d]?d>0&&".."!==w[d-1]?w.splice(--d,2):v?w.splice(d,1):++d:"."===w[d]?w.splice(d,1):++d;return A+w.join("/")};M.resolve=function(S,w,v){return v||(w=R(w)),b(w)?w:(v||(S=R(S)),(S=S.replace(/(?:\/|^)[^/]+$/,"")).length?R(S+"/"+w):w)}},{}],9:[function(oe,X,x){X.exports=function(M,b,R){var S=R||8192,w=S>>>1,v=null,A=S;return function(d){if(d<1||d>w)return M(d);A+d>S&&(v=M(S),A=0);var m=b.call(v,A,A+=d);return 7&A&&(A=1+(7|A)),m}}},{}],10:[function(oe,X,x){var M=x;M.length=function(b){for(var R=0,S=0,w=0;w<b.length;++w)(S=b.charCodeAt(w))<128?R+=1:S<2048?R+=2:55296==(64512&S)&&56320==(64512&b.charCodeAt(w+1))?(++w,R+=4):R+=3;return R},M.read=function(b,R,S){if(S-R<1)return"";for(var w,v=null,A=[],d=0;R<S;)(w=b[R++])<128?A[d++]=w:w>191&&w<224?A[d++]=(31&w)<<6|63&b[R++]:w>239&&w<365?(w=((7&w)<<18|(63&b[R++])<<12|(63&b[R++])<<6|63&b[R++])-65536,A[d++]=55296+(w>>10),A[d++]=56320+(1023&w)):A[d++]=(15&w)<<12|(63&b[R++])<<6|63&b[R++],d>8191&&((v||(v=[])).push(String.fromCharCode.apply(String,A)),d=0);return v?(d&&v.push(String.fromCharCode.apply(String,A.slice(0,d))),v.join("")):String.fromCharCode.apply(String,A.slice(0,d))},M.write=function(b,R,S){for(var w,v,A=S,d=0;d<b.length;++d)(w=b.charCodeAt(d))<128?R[S++]=w:w<2048?(R[S++]=w>>6|192,R[S++]=63&w|128):55296==(64512&w)&&56320==(64512&(v=b.charCodeAt(d+1)))?(++d,R[S++]=(w=65536+((1023&w)<<10)+(1023&v))>>18|240,R[S++]=w>>12&63|128,R[S++]=w>>6&63|128,R[S++]=63&w|128):(R[S++]=w>>12|224,R[S++]=w>>6&63|128,R[S++]=63&w|128);return S-A}},{}],11:[function(oe,X,x){var M=x,b=oe(14),R=oe(33);function S(v,A,d,m){if(A.resolvedType)if(A.resolvedType instanceof b){v("switch(d%s){",m);for(var g=A.resolvedType.values,O=Object.keys(g),P=0;P<O.length;++P)A.repeated&&g[O[P]]===A.typeDefault&&v("default:"),v("case%j:",O[P])("case %i:",g[O[P]])("m%s=%j",m,g[O[P]])("break");v("}")}else v('if(typeof d%s!=="object")',m)("throw TypeError(%j)",A.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",m,d,m);else{var I=!1;switch(A.type){case"double":case"float":v("m%s=Number(d%s)",m,m);break;case"uint32":case"fixed32":v("m%s=d%s>>>0",m,m);break;case"int32":case"sint32":case"sfixed32":v("m%s=d%s|0",m,m);break;case"uint64":I=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":v("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",m,m,I)('else if(typeof d%s==="string")',m)("m%s=parseInt(d%s,10)",m,m)('else if(typeof d%s==="number")',m)("m%s=d%s",m,m)('else if(typeof d%s==="object")',m)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",m,m,m,I?"true":"");break;case"bytes":v('if(typeof d%s==="string")',m)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",m,m,m)("else if(d%s.length)",m)("m%s=d%s",m,m);break;case"string":v("m%s=String(d%s)",m,m);break;case"bool":v("m%s=Boolean(d%s)",m,m)}}return v}function w(v,A,d,m){if(A.resolvedType)A.resolvedType instanceof b?v("d%s=o.enums===String?types[%i].values[m%s]:m%s",m,d,m,m):v("d%s=types[%i].toObject(m%s,o)",m,d,m);else{var g=!1;switch(A.type){case"double":case"float":v("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",m,m,m,m);break;case"uint64":g=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":v('if(typeof m%s==="number")',m)("d%s=o.longs===String?String(m%s):m%s",m,m,m)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",m,m,m,m,g?"true":"",m);break;case"bytes":v("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",m,m,m,m,m);break;default:v("d%s=m%s",m,m)}}return v}M.fromObject=function(v){var A=v.fieldsArray,d=R.codegen(["d"],v.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!A.length)return d("return new this.ctor");d("var m=new this.ctor");for(var m=0;m<A.length;++m){var g=A[m].resolve(),O=R.safeProp(g.name);g.map?(d("if(d%s){",O)('if(typeof d%s!=="object")',O)("throw TypeError(%j)",g.fullName+": object expected")("m%s={}",O)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",O),S(d,g,m,O+"[ks[i]]")("}")("}")):g.repeated?(d("if(d%s){",O)("if(!Array.isArray(d%s))",O)("throw TypeError(%j)",g.fullName+": array expected")("m%s=[]",O)("for(var i=0;i<d%s.length;++i){",O),S(d,g,m,O+"[i]")("}")("}")):(g.resolvedType instanceof b||d("if(d%s!=null){",O),S(d,g,m,O),g.resolvedType instanceof b||d("}"))}return d("return m")},M.toObject=function(v){var A=v.fieldsArray.slice().sort(R.compareFieldsById);if(!A.length)return R.codegen()("return {}");for(var d=R.codegen(["m","o"],v.name+"$toObject")("if(!o)")("o={}")("var d={}"),m=[],g=[],O=[],P=0;P<A.length;++P)A[P].partOf||(A[P].resolve().repeated?m:A[P].map?g:O).push(A[P]);if(m.length){for(d("if(o.arrays||o.defaults){"),P=0;P<m.length;++P)d("d%s=[]",R.safeProp(m[P].name));d("}")}if(g.length){for(d("if(o.objects||o.defaults){"),P=0;P<g.length;++P)d("d%s={}",R.safeProp(g[P].name));d("}")}if(O.length){for(d("if(o.defaults){"),P=0;P<O.length;++P){var I=O[P],E=R.safeProp(I.name);if(I.resolvedType instanceof b)d("d%s=o.enums===String?%j:%j",E,I.resolvedType.valuesById[I.typeDefault],I.typeDefault);else if(I.long)d("if(util.Long){")("var n=new util.Long(%i,%i,%j)",I.typeDefault.low,I.typeDefault.high,I.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",E)("}else")("d%s=o.longs===String?%j:%i",E,I.typeDefault.toString(),I.typeDefault.toNumber());else if(I.bytes){var k="["+Array.prototype.slice.call(I.typeDefault).join(",")+"]";d("if(o.bytes===String)d%s=%j",E,String.fromCharCode.apply(String,I.typeDefault))("else{")("d%s=%s",E,k)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",E,E)("}")}else d("d%s=%j",E,I.typeDefault)}d("}")}var D=!1;for(P=0;P<A.length;++P){var j=v._fieldsArray.indexOf(I=A[P]);E=R.safeProp(I.name),I.map?(D||(D=!0,d("var ks2")),d("if(m%s&&(ks2=Object.keys(m%s)).length){",E,E)("d%s={}",E)("for(var j=0;j<ks2.length;++j){"),w(d,I,j,E+"[ks2[j]]")("}")):I.repeated?(d("if(m%s&&m%s.length){",E,E)("d%s=[]",E)("for(var j=0;j<m%s.length;++j){",E),w(d,I,j,E+"[j]")("}")):(d("if(m%s!=null&&m.hasOwnProperty(%j)){",E,I.name),w(d,I,j,E),I.partOf&&d("if(o.oneofs)")("d%s=%j",R.safeProp(I.partOf.name),I.name)),d("}")}return d("return d")}},{14:14,33:33}],12:[function(oe,X,x){X.exports=function(w){var v=R.codegen(["r","l"],w.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(w.fieldsArray.filter(function(P){return P.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");w.group&&v("if((t&7)===4)")("break"),v("switch(t>>>3){");for(var A=0;A<w.fieldsArray.length;++A){var d=w._fieldsArray[A].resolve(),m=d.resolvedType instanceof M?"int32":d.type,g="m"+R.safeProp(d.name);v("case %i:",d.id),d.map?(v("if(%s===util.emptyObject)",g)("%s={}",g)("var c2 = r.uint32()+r.pos"),b.defaults[d.keyType]!==undefined?v("k=%j",b.defaults[d.keyType]):v("k=null"),b.defaults[m]!==undefined?v("value=%j",b.defaults[m]):v("value=null"),v("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",d.keyType)("case 2:"),b.basic[m]===undefined?v("value=types[%i].decode(r,r.uint32())",A):v("value=r.%s()",m),v("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),v(b.long[d.keyType]!==undefined?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",g)):d.repeated?(v("if(!(%s&&%s.length))",g,g)("%s=[]",g),b.packed[m]!==undefined&&v("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",g,m)("}else"),b.basic[m]===undefined?v(d.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",g,A):v("%s.push(r.%s())",g,m)):b.basic[m]===undefined?v(d.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",g,A):v("%s=r.%s()",g,m),v("break")}for(v("default:")("r.skipType(t&7)")("break")("}")("}"),A=0;A<w._fieldsArray.length;++A){var O=w._fieldsArray[A];O.required&&v("if(!m.hasOwnProperty(%j))",O.name)("throw util.ProtocolError(%j,{instance:m})",S(O))}return v("return m")};var M=oe(14),b=oe(32),R=oe(33);function S(w){return"missing required '"+w.name+"'"}},{14:14,32:32,33:33}],13:[function(oe,X,x){X.exports=function(w){for(var v,A=R.codegen(["m","w"],w.name+"$encode")("if(!w)")("w=Writer.create()"),d=w.fieldsArray.slice().sort(R.compareFieldsById),m=0;m<d.length;++m){var g=d[m].resolve(),O=w._fieldsArray.indexOf(g),P=g.resolvedType instanceof M?"int32":g.type,I=b.basic[P];v="m"+R.safeProp(g.name),g.map?(A("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",v,g.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",v)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(g.id<<3|2)>>>0,8|b.mapKey[g.keyType],g.keyType),I===undefined?A("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",O,v):A(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|I,P,v),A("}")("}")):g.repeated?(A("if(%s!=null&&%s.length){",v,v),g.packed&&b.packed[P]!==undefined?A("w.uint32(%i).fork()",(g.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",v)("w.%s(%s[i])",P,v)("w.ldelim()"):(A("for(var i=0;i<%s.length;++i)",v),I===undefined?S(A,g,O,v+"[i]"):A("w.uint32(%i).%s(%s[i])",(g.id<<3|I)>>>0,P,v)),A("}")):(g.optional&&A("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",v,g.name),I===undefined?S(A,g,O,v):A("w.uint32(%i).%s(%s)",(g.id<<3|I)>>>0,P,v))}return A("return w")};var M=oe(14),b=oe(32),R=oe(33);function S(w,v,A,d){return v.resolvedType.group?w("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",A,d,(v.id<<3|3)>>>0,(v.id<<3|4)>>>0):w("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",A,d,(v.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(oe,X,x){X.exports=S;var M=oe(22);((S.prototype=Object.create(M.prototype)).constructor=S).className="Enum";var b=oe(21),R=oe(33);function S(w,v,A,d,m){if(M.call(this,w,A),v&&"object"!=typeof v)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=d,this.comments=m||{},this.reserved=undefined,v)for(var g=Object.keys(v),O=0;O<g.length;++O)"number"==typeof v[g[O]]&&(this.valuesById[this.values[g[O]]=v[g[O]]]=g[O])}S.fromJSON=function(w,v){var A=new S(w,v.values,v.options,v.comment,v.comments);return A.reserved=v.reserved,A},S.prototype.toJSON=function(w){var v=!!w&&Boolean(w.keepComments);return R.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",v?this.comment:undefined,"comments",v?this.comments:undefined])},S.prototype.add=function(w,v,A){if(!R.isString(w))throw TypeError("name must be a string");if(!R.isInteger(v))throw TypeError("id must be an integer");if(this.values[w]!==undefined)throw Error("duplicate name '"+w+"' in "+this);if(this.isReservedId(v))throw Error("id "+v+" is reserved in "+this);if(this.isReservedName(w))throw Error("name '"+w+"' is reserved in "+this);if(this.valuesById[v]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+v+" in "+this);this.values[w]=v}else this.valuesById[this.values[w]=v]=w;return this.comments[w]=A||null,this},S.prototype.remove=function(w){if(!R.isString(w))throw TypeError("name must be a string");var v=this.values[w];if(null==v)throw Error("name '"+w+"' does not exist in "+this);return delete this.valuesById[v],delete this.values[w],delete this.comments[w],this},S.prototype.isReservedId=function(w){return b.isReservedId(this.reserved,w)},S.prototype.isReservedName=function(w){return b.isReservedName(this.reserved,w)}},{21:21,22:22,33:33}],15:[function(oe,X,x){X.exports=A;var M=oe(22);((A.prototype=Object.create(M.prototype)).constructor=A).className="Field";var b,R=oe(14),S=oe(32),w=oe(33),v=/^required|optional|repeated$/;function A(d,m,g,O,P,I,E){if(w.isObject(O)?(E=P,I=O,O=P=undefined):w.isObject(P)&&(E=I,I=P,P=undefined),M.call(this,d,I),!w.isInteger(m)||m<0)throw TypeError("id must be a non-negative integer");if(!w.isString(g))throw TypeError("type must be a string");if(O!==undefined&&!v.test(O=O.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(P!==undefined&&!w.isString(P))throw TypeError("extend must be a string");this.rule=O&&"optional"!==O?O:undefined,this.type=g,this.id=m,this.extend=P||undefined,this.required="required"===O,this.optional=!this.required,this.repeated="repeated"===O,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!w.Long&&S.long[g]!==undefined,this.bytes="bytes"===g,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=E}A.fromJSON=function(d,m){return new A(d,m.id,m.type,m.rule,m.extend,m.options,m.comment)},Object.defineProperty(A.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),A.prototype.setOption=function(d,m,g){return"packed"===d&&(this._packed=null),M.prototype.setOption.call(this,d,m,g)},A.prototype.toJSON=function(d){var m=!!d&&Boolean(d.keepComments);return w.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",m?this.comment:undefined])},A.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=S.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof b?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof R&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof R)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=w.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var d;w.base64.test(this.typeDefault)?w.base64.decode(this.typeDefault,d=w.newBuffer(w.base64.length(this.typeDefault)),0):w.utf8.write(this.typeDefault,d=w.newBuffer(w.utf8.length(this.typeDefault)),0),this.typeDefault=d}return this.defaultValue=this.map?w.emptyObject:this.repeated?w.emptyArray:this.typeDefault,this.parent instanceof b&&(this.parent.ctor.prototype[this.name]=this.defaultValue),M.prototype.resolve.call(this)},A.d=function(d,m,g,O){return"function"==typeof m?m=w.decorateType(m).name:m&&"object"==typeof m&&(m=w.decorateEnum(m).name),function(P,I){w.decorateType(P.constructor).add(new A(I,d,m,g,{default:O}))}},A._configure=function(d){b=d}},{14:14,22:22,32:32,33:33}],16:[function(oe,X,x){var M=X.exports=oe(17);M.build="light",M.load=function(b,R,S){return"function"==typeof R?(S=R,R=new M.Root):R||(R=new M.Root),R.load(b,S)},M.loadSync=function(b,R){return R||(R=new M.Root),R.loadSync(b)},M.encoder=oe(13),M.decoder=oe(12),M.verifier=oe(36),M.converter=oe(11),M.ReflectionObject=oe(22),M.Namespace=oe(21),M.Root=oe(26),M.Enum=oe(14),M.Type=oe(31),M.Field=oe(15),M.OneOf=oe(23),M.MapField=oe(18),M.Service=oe(30),M.Method=oe(20),M.Message=oe(19),M.wrappers=oe(37),M.types=oe(32),M.util=oe(33),M.ReflectionObject._configure(M.Root),M.Namespace._configure(M.Type,M.Service,M.Enum),M.Root._configure(M.Type),M.Field._configure(M.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(oe,X,x){var M=x;function b(){M.util._configure(),M.Writer._configure(M.BufferWriter),M.Reader._configure(M.BufferReader)}M.build="minimal",M.Writer=oe(38),M.BufferWriter=oe(39),M.Reader=oe(24),M.BufferReader=oe(25),M.util=oe(35),M.rpc=oe(28),M.roots=oe(27),M.configure=b,b()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(oe,X,x){X.exports=S;var M=oe(15);((S.prototype=Object.create(M.prototype)).constructor=S).className="MapField";var b=oe(32),R=oe(33);function S(w,v,A,d,m,g){if(M.call(this,w,v,d,undefined,undefined,m,g),!R.isString(A))throw TypeError("keyType must be a string");this.keyType=A,this.resolvedKeyType=null,this.map=!0}S.fromJSON=function(w,v){return new S(w,v.id,v.keyType,v.type,v.options,v.comment)},S.prototype.toJSON=function(w){var v=!!w&&Boolean(w.keepComments);return R.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",v?this.comment:undefined])},S.prototype.resolve=function(){if(this.resolved)return this;if(b.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return M.prototype.resolve.call(this)},S.d=function(w,v,A){return"function"==typeof A?A=R.decorateType(A).name:A&&"object"==typeof A&&(A=R.decorateEnum(A).name),function(d,m){R.decorateType(d.constructor).add(new S(m,w,v,A))}}},{15:15,32:32,33:33}],19:[function(oe,X,x){X.exports=b;var M=oe(35);function b(R){if(R)for(var S=Object.keys(R),w=0;w<S.length;++w)this[S[w]]=R[S[w]]}b.create=function(R){return this.$type.create(R)},b.encode=function(R,S){return this.$type.encode(R,S)},b.encodeDelimited=function(R,S){return this.$type.encodeDelimited(R,S)},b.decode=function(R){return this.$type.decode(R)},b.decodeDelimited=function(R){return this.$type.decodeDelimited(R)},b.verify=function(R){return this.$type.verify(R)},b.fromObject=function(R){return this.$type.fromObject(R)},b.toObject=function(R,S){return this.$type.toObject(R,S)},b.prototype.toJSON=function(){return this.$type.toObject(this,M.toJSONOptions)}},{35:35}],20:[function(oe,X,x){X.exports=R;var M=oe(22);((R.prototype=Object.create(M.prototype)).constructor=R).className="Method";var b=oe(33);function R(S,w,v,A,d,m,g,O){if(b.isObject(d)?(g=d,d=m=undefined):b.isObject(m)&&(g=m,m=undefined),w!==undefined&&!b.isString(w))throw TypeError("type must be a string");if(!b.isString(v))throw TypeError("requestType must be a string");if(!b.isString(A))throw TypeError("responseType must be a string");M.call(this,S,g),this.type=w||"rpc",this.requestType=v,this.requestStream=!!d||undefined,this.responseType=A,this.responseStream=!!m||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=O}R.fromJSON=function(S,w){return new R(S,w.type,w.requestType,w.responseType,w.requestStream,w.responseStream,w.options,w.comment)},R.prototype.toJSON=function(S){var w=!!S&&Boolean(S.keepComments);return b.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",w?this.comment:undefined])},R.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),M.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(oe,X,x){X.exports=d;var M=oe(22);((d.prototype=Object.create(M.prototype)).constructor=d).className="Namespace";var b,R,S,w=oe(15),v=oe(33);function A(g,O){if(!g||!g.length)return undefined;for(var P={},I=0;I<g.length;++I)P[g[I].name]=g[I].toJSON(O);return P}function d(g,O){M.call(this,g,O),this.nested=undefined,this._nestedArray=null}function m(g){return g._nestedArray=null,g}d.fromJSON=function(g,O){return new d(g,O.options).addJSON(O.nested)},d.arrayToJSON=A,d.isReservedId=function(g,O){if(g)for(var P=0;P<g.length;++P)if("string"!=typeof g[P]&&g[P][0]<=O&&g[P][1]>O)return!0;return!1},d.isReservedName=function(g,O){if(g)for(var P=0;P<g.length;++P)if(g[P]===O)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=v.toArray(this.nested))}}),d.prototype.toJSON=function(g){return v.toObject(["options",this.options,"nested",A(this.nestedArray,g)])},d.prototype.addJSON=function(g){if(g)for(var O,P=Object.keys(g),I=0;I<P.length;++I)this.add(((O=g[P[I]]).fields!==undefined?b.fromJSON:O.values!==undefined?S.fromJSON:O.methods!==undefined?R.fromJSON:O.id!==undefined?w.fromJSON:d.fromJSON)(P[I],O));return this},d.prototype.get=function(g){return this.nested&&this.nested[g]||null},d.prototype.getEnum=function(g){if(this.nested&&this.nested[g]instanceof S)return this.nested[g].values;throw Error("no such enum: "+g)},d.prototype.add=function(g){if(!(g instanceof w&&g.extend!==undefined||g instanceof b||g instanceof S||g instanceof R||g instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var O=this.get(g.name);if(O){if(!(O instanceof d&&g instanceof d)||O instanceof b||O instanceof R)throw Error("duplicate name '"+g.name+"' in "+this);for(var P=O.nestedArray,I=0;I<P.length;++I)g.add(P[I]);this.remove(O),this.nested||(this.nested={}),g.setOptions(O.options,!0)}}else this.nested={};return this.nested[g.name]=g,g.onAdd(this),m(this)},d.prototype.remove=function(g){if(!(g instanceof M))throw TypeError("object must be a ReflectionObject");if(g.parent!==this)throw Error(g+" is not a member of "+this);return delete this.nested[g.name],Object.keys(this.nested).length||(this.nested=undefined),g.onRemove(this),m(this)},d.prototype.define=function(g,O){if(v.isString(g))g=g.split(".");else if(!Array.isArray(g))throw TypeError("illegal path");if(g&&g.length&&""===g[0])throw Error("path must be relative");for(var P=this;g.length>0;){var I=g.shift();if(P.nested&&P.nested[I]){if(!((P=P.nested[I])instanceof d))throw Error("path conflicts with non-namespace objects")}else P.add(P=new d(I))}return O&&P.addJSON(O),P},d.prototype.resolveAll=function(){for(var g=this.nestedArray,O=0;O<g.length;)g[O]instanceof d?g[O++].resolveAll():g[O++].resolve();return this.resolve()},d.prototype.lookup=function(g,O,P){if("boolean"==typeof O?(P=O,O=undefined):O&&!Array.isArray(O)&&(O=[O]),v.isString(g)&&g.length){if("."===g)return this.root;g=g.split(".")}else if(!g.length)return this;if(""===g[0])return this.root.lookup(g.slice(1),O);var I=this.get(g[0]);if(I){if(1===g.length){if(!O||O.indexOf(I.constructor)>-1)return I}else if(I instanceof d&&(I=I.lookup(g.slice(1),O,!0)))return I}else for(var E=0;E<this.nestedArray.length;++E)if(this._nestedArray[E]instanceof d&&(I=this._nestedArray[E].lookup(g,O,!0)))return I;return null===this.parent||P?null:this.parent.lookup(g,O)},d.prototype.lookupType=function(g){var O=this.lookup(g,[b]);if(!O)throw Error("no such type: "+g);return O},d.prototype.lookupEnum=function(g){var O=this.lookup(g,[S]);if(!O)throw Error("no such Enum '"+g+"' in "+this);return O},d.prototype.lookupTypeOrEnum=function(g){var O=this.lookup(g,[b,S]);if(!O)throw Error("no such Type or Enum '"+g+"' in "+this);return O},d.prototype.lookupService=function(g){var O=this.lookup(g,[R]);if(!O)throw Error("no such Service '"+g+"' in "+this);return O},d._configure=function(g,O,P){b=g,R=O,S=P}},{15:15,22:22,33:33}],22:[function(oe,X,x){X.exports=R,R.className="ReflectionObject";var M,b=oe(33);function R(S,w){if(!b.isString(S))throw TypeError("name must be a string");if(w&&!b.isObject(w))throw TypeError("options must be an object");this.options=w,this.parsedOptions=null,this.name=S,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(R.prototype,{root:{get:function(){for(var S=this;null!==S.parent;)S=S.parent;return S}},fullName:{get:function(){for(var S=[this.name],w=this.parent;w;)S.unshift(w.name),w=w.parent;return S.join(".")}}}),R.prototype.toJSON=function(){throw Error()},R.prototype.onAdd=function(S){this.parent&&this.parent!==S&&this.parent.remove(this),this.parent=S,this.resolved=!1;var w=S.root;w instanceof M&&w._handleAdd(this)},R.prototype.onRemove=function(S){var w=S.root;w instanceof M&&w._handleRemove(this),this.parent=null,this.resolved=!1},R.prototype.resolve=function(){return this.resolved||this.root instanceof M&&(this.resolved=!0),this},R.prototype.getOption=function(S){return this.options?this.options[S]:undefined},R.prototype.setOption=function(S,w,v){return v&&this.options&&this.options[S]!==undefined||((this.options||(this.options={}))[S]=w),this},R.prototype.setParsedOption=function(S,w,v){this.parsedOptions||(this.parsedOptions=[]);var A=this.parsedOptions;if(v){var d=A.find(function(O){return Object.prototype.hasOwnProperty.call(O,S)});d?b.setProperty(d[S],v,w):((d={})[S]=b.setProperty({},v,w),A.push(d))}else{var g={};g[S]=w,A.push(g)}return this},R.prototype.setOptions=function(S,w){if(S)for(var v=Object.keys(S),A=0;A<v.length;++A)this.setOption(v[A],S[v[A]],w);return this},R.prototype.toString=function(){var S=this.constructor.className,w=this.fullName;return w.length?S+" "+w:S},R._configure=function(S){M=S}},{33:33}],23:[function(oe,X,x){X.exports=S;var M=oe(22);((S.prototype=Object.create(M.prototype)).constructor=S).className="OneOf";var b=oe(15),R=oe(33);function S(v,A,d,m){if(Array.isArray(A)||(d=A,A=undefined),M.call(this,v,d),A!==undefined&&!Array.isArray(A))throw TypeError("fieldNames must be an Array");this.oneof=A||[],this.fieldsArray=[],this.comment=m}function w(v){if(v.parent)for(var A=0;A<v.fieldsArray.length;++A)v.fieldsArray[A].parent||v.parent.add(v.fieldsArray[A])}S.fromJSON=function(v,A){return new S(v,A.oneof,A.options,A.comment)},S.prototype.toJSON=function(v){var A=!!v&&Boolean(v.keepComments);return R.toObject(["options",this.options,"oneof",this.oneof,"comment",A?this.comment:undefined])},S.prototype.add=function(v){if(!(v instanceof b))throw TypeError("field must be a Field");return v.parent&&v.parent!==this.parent&&v.parent.remove(v),this.oneof.push(v.name),this.fieldsArray.push(v),v.partOf=this,w(this),this},S.prototype.remove=function(v){if(!(v instanceof b))throw TypeError("field must be a Field");var A=this.fieldsArray.indexOf(v);if(A<0)throw Error(v+" is not a member of "+this);return this.fieldsArray.splice(A,1),(A=this.oneof.indexOf(v.name))>-1&&this.oneof.splice(A,1),v.partOf=null,this},S.prototype.onAdd=function(v){M.prototype.onAdd.call(this,v);for(var A=0;A<this.oneof.length;++A){var d=v.get(this.oneof[A]);d&&!d.partOf&&(d.partOf=this,this.fieldsArray.push(d))}w(this)},S.prototype.onRemove=function(v){for(var A,d=0;d<this.fieldsArray.length;++d)(A=this.fieldsArray[d]).parent&&A.parent.remove(A);M.prototype.onRemove.call(this,v)},S.d=function(){for(var v=new Array(arguments.length),A=0;A<arguments.length;)v[A]=arguments[A++];return function(d,m){R.decorateType(d.constructor).add(new S(m,v)),Object.defineProperty(d,m,{get:R.oneOfGetter(v),set:R.oneOfSetter(v)})}}},{15:15,22:22,33:33}],24:[function(oe,X,x){X.exports=v;var M,b=oe(35),R=b.LongBits,S=b.utf8;function w(I,E){return RangeError("index out of range: "+I.pos+" + "+(E||1)+" > "+I.len)}function v(I){this.buf=I,this.pos=0,this.len=I.length}var A,d="undefined"!=typeof Uint8Array?function(I){if(I instanceof Uint8Array||Array.isArray(I))return new v(I);throw Error("illegal buffer")}:function(I){if(Array.isArray(I))return new v(I);throw Error("illegal buffer")},m=function(){return b.Buffer?function(I){return(v.create=function(E){return b.Buffer.isBuffer(E)?new M(E):d(E)})(I)}:d};function g(){var I=new R(0,0),E=0;if(!(this.len-this.pos>4)){for(;E<3;++E){if(this.pos>=this.len)throw w(this);if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return I}return I.lo=(I.lo|(127&this.buf[this.pos++])<<7*E)>>>0,I}for(;E<4;++E)if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return I;if(I.lo=(I.lo|(127&this.buf[this.pos])<<28)>>>0,I.hi=(I.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return I;if(E=0,this.len-this.pos>4){for(;E<5;++E)if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return I}else for(;E<5;++E){if(this.pos>=this.len)throw w(this);if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return I}throw Error("invalid varint encoding")}function O(I,E){return(I[E-4]|I[E-3]<<8|I[E-2]<<16|I[E-1]<<24)>>>0}function P(){if(this.pos+8>this.len)throw w(this,8);return new R(O(this.buf,this.pos+=4),O(this.buf,this.pos+=4))}v.create=m(),v.prototype._slice=b.Array.prototype.subarray||b.Array.prototype.slice,v.prototype.uint32=(A=4294967295,function(){if(A=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(A=(A|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(A=(A|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(A=(A|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(A=(A|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return A;if((this.pos+=5)>this.len)throw this.pos=this.len,w(this,10);return A}),v.prototype.int32=function(){return 0|this.uint32()},v.prototype.sint32=function(){var I=this.uint32();return I>>>1^-(1&I)|0},v.prototype.bool=function(){return 0!==this.uint32()},v.prototype.fixed32=function(){if(this.pos+4>this.len)throw w(this,4);return O(this.buf,this.pos+=4)},v.prototype.sfixed32=function(){if(this.pos+4>this.len)throw w(this,4);return 0|O(this.buf,this.pos+=4)},v.prototype.float=function(){if(this.pos+4>this.len)throw w(this,4);var I=b.float.readFloatLE(this.buf,this.pos);return this.pos+=4,I},v.prototype.double=function(){if(this.pos+8>this.len)throw w(this,4);var I=b.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,I},v.prototype.bytes=function(){var I=this.uint32(),E=this.pos,k=this.pos+I;if(k>this.len)throw w(this,I);return this.pos+=I,Array.isArray(this.buf)?this.buf.slice(E,k):E===k?new this.buf.constructor(0):this._slice.call(this.buf,E,k)},v.prototype.string=function(){var I=this.bytes();return S.read(I,0,I.length)},v.prototype.skip=function(I){if("number"==typeof I){if(this.pos+I>this.len)throw w(this,I);this.pos+=I}else do{if(this.pos>=this.len)throw w(this)}while(128&this.buf[this.pos++]);return this},v.prototype.skipType=function(I){switch(I){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(I=7&this.uint32());)this.skipType(I);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+I+" at offset "+this.pos)}return this},v._configure=function(I){M=I,v.create=m(),M._configure();var E=b.Long?"toLong":"toNumber";b.merge(v.prototype,{int64:function(){return g.call(this)[E](!1)},uint64:function(){return g.call(this)[E](!0)},sint64:function(){return g.call(this).zzDecode()[E](!1)},fixed64:function(){return P.call(this)[E](!0)},sfixed64:function(){return P.call(this)[E](!1)}})}},{35:35}],25:[function(oe,X,x){X.exports=R;var M=oe(24);(R.prototype=Object.create(M.prototype)).constructor=R;var b=oe(35);function R(S){M.call(this,S)}R._configure=function(){b.Buffer&&(R.prototype._slice=b.Buffer.prototype.slice)},R.prototype.string=function(){var S=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+S,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+S,this.len))},R._configure()},{24:24,35:35}],26:[function(oe,X,x){X.exports=m;var M=oe(21);((m.prototype=Object.create(M.prototype)).constructor=m).className="Root";var b,R,S,w=oe(15),v=oe(14),A=oe(23),d=oe(33);function m(I){M.call(this,"",I),this.deferred=[],this.files=[]}function g(){}m.fromJSON=function(I,E){return E||(E=new m),I.options&&E.setOptions(I.options),E.addJSON(I.nested)},m.prototype.resolvePath=d.path.resolve,m.prototype.fetch=d.fetch,m.prototype.load=function I(E,k,D){"function"==typeof k&&(D=k,k=undefined);var j=this;if(!D)return d.asPromise(I,j,E,k);var N=D===g;function Y(H,_){if(D){var c=D;if(D=null,N)throw H;c(H,_)}}function te(H){var _=H.lastIndexOf("google/protobuf/");if(_>-1){var c=H.substring(_);if(c in S)return c}return null}function J(H,_){try{if(d.isString(_)&&"{"===_.charAt(0)&&(_=JSON.parse(_)),d.isString(_)){R.filename=H;var c,q=R(_,j,k),f=0;if(q.imports)for(;f<q.imports.length;++f)(c=te(q.imports[f])||j.resolvePath(H,q.imports[f]))&&re(c);if(q.weakImports)for(f=0;f<q.weakImports.length;++f)(c=te(q.weakImports[f])||j.resolvePath(H,q.weakImports[f]))&&re(c,!0)}else j.setOptions(_.options).addJSON(_.nested)}catch(C){Y(C)}N||U||Y(null,j)}function re(H,_){if(!(j.files.indexOf(H)>-1))if(j.files.push(H),H in S)N?J(H,S[H]):(++U,setTimeout(function(){--U,J(H,S[H])}));else if(N){var c;try{c=d.fs.readFileSync(H).toString("utf8")}catch(q){return void(_||Y(q))}J(H,c)}else++U,j.fetch(H,function(q,f){--U,D&&(q?_?U||Y(null,j):Y(q):J(H,f))})}var U=0;d.isString(E)&&(E=[E]);for(var y,s=0;s<E.length;++s)(y=j.resolvePath("",E[s]))&&re(y);return N?j:(U||Y(null,j),undefined)},m.prototype.loadSync=function(I,E){if(!d.isNode)throw Error("not supported");return this.load(I,E,g)},m.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(I){return"'extend "+I.extend+"' in "+I.parent.fullName}).join(", "));return M.prototype.resolveAll.call(this)};var O=/^[A-Z]/;function P(I,E){var k=E.parent.lookup(E.extend);if(k){var D=new w(E.fullName,E.id,E.type,E.rule,undefined,E.options);return D.declaringField=E,E.extensionField=D,k.add(D),!0}return!1}m.prototype._handleAdd=function(I){if(I instanceof w)I.extend===undefined||I.extensionField||P(0,I)||this.deferred.push(I);else if(I instanceof v)O.test(I.name)&&(I.parent[I.name]=I.values);else if(!(I instanceof A)){if(I instanceof b)for(var E=0;E<this.deferred.length;)P(0,this.deferred[E])?this.deferred.splice(E,1):++E;for(var k=0;k<I.nestedArray.length;++k)this._handleAdd(I._nestedArray[k]);O.test(I.name)&&(I.parent[I.name]=I)}},m.prototype._handleRemove=function(I){if(I instanceof w){if(I.extend!==undefined)if(I.extensionField)I.extensionField.parent.remove(I.extensionField),I.extensionField=null;else{var E=this.deferred.indexOf(I);E>-1&&this.deferred.splice(E,1)}}else if(I instanceof v)O.test(I.name)&&delete I.parent[I.name];else if(I instanceof M){for(var k=0;k<I.nestedArray.length;++k)this._handleRemove(I._nestedArray[k]);O.test(I.name)&&delete I.parent[I.name]}},m._configure=function(I,E,k){b=I,R=E,S=k}},{14:14,15:15,21:21,23:23,33:33}],27:[function(oe,X,x){X.exports={}},{}],28:[function(oe,X,x){x.Service=oe(29)},{29:29}],29:[function(oe,X,x){X.exports=b;var M=oe(35);function b(R,S,w){if("function"!=typeof R)throw TypeError("rpcImpl must be a function");M.EventEmitter.call(this),this.rpcImpl=R,this.requestDelimited=Boolean(S),this.responseDelimited=Boolean(w)}(b.prototype=Object.create(M.EventEmitter.prototype)).constructor=b,b.prototype.rpcCall=function R(S,w,v,A,d){if(!A)throw TypeError("request must be specified");var m=this;if(!d)return M.asPromise(R,m,S,w,v,A);if(!m.rpcImpl)return setTimeout(function(){d(Error("already ended"))},0),undefined;try{return m.rpcImpl(S,w[m.requestDelimited?"encodeDelimited":"encode"](A).finish(),function(g,O){if(g)return m.emit("error",g,S),d(g);if(null===O)return m.end(!0),undefined;if(!(O instanceof v))try{O=v[m.responseDelimited?"decodeDelimited":"decode"](O)}catch(P){return m.emit("error",P,S),d(P)}return m.emit("data",O,S),d(null,O)})}catch(g){return m.emit("error",g,S),setTimeout(function(){d(g)},0),undefined}},b.prototype.end=function(R){return this.rpcImpl&&(R||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(oe,X,x){X.exports=w;var M=oe(21);((w.prototype=Object.create(M.prototype)).constructor=w).className="Service";var b=oe(20),R=oe(33),S=oe(28);function w(A,d){M.call(this,A,d),this.methods={},this._methodsArray=null}function v(A){return A._methodsArray=null,A}w.fromJSON=function(A,d){var m=new w(A,d.options);if(d.methods)for(var g=Object.keys(d.methods),O=0;O<g.length;++O)m.add(b.fromJSON(g[O],d.methods[g[O]]));return d.nested&&m.addJSON(d.nested),m.comment=d.comment,m},w.prototype.toJSON=function(A){var d=M.prototype.toJSON.call(this,A),m=!!A&&Boolean(A.keepComments);return R.toObject(["options",d&&d.options||undefined,"methods",M.arrayToJSON(this.methodsArray,A)||{},"nested",d&&d.nested||undefined,"comment",m?this.comment:undefined])},Object.defineProperty(w.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=R.toArray(this.methods))}}),w.prototype.get=function(A){return this.methods[A]||M.prototype.get.call(this,A)},w.prototype.resolveAll=function(){for(var A=this.methodsArray,d=0;d<A.length;++d)A[d].resolve();return M.prototype.resolve.call(this)},w.prototype.add=function(A){if(this.get(A.name))throw Error("duplicate name '"+A.name+"' in "+this);return A instanceof b?(this.methods[A.name]=A,A.parent=this,v(this)):M.prototype.add.call(this,A)},w.prototype.remove=function(A){if(A instanceof b){if(this.methods[A.name]!==A)throw Error(A+" is not a member of "+this);return delete this.methods[A.name],A.parent=null,v(this)}return M.prototype.remove.call(this,A)},w.prototype.create=function(A,d,m){for(var g,O=new S.Service(A,d,m),P=0;P<this.methodsArray.length;++P){var I=R.lcFirst((g=this._methodsArray[P]).resolve().name).replace(/[^$\w_]/g,"");O[I]=R.codegen(["r","c"],R.isReserved(I)?I+"_":I)("return this.rpcCall(m,q,s,r,c)")({m:g,q:g.resolvedRequestType.ctor,s:g.resolvedResponseType.ctor})}return O}},{20:20,21:21,28:28,33:33}],31:[function(oe,X,x){X.exports=D;var M=oe(21);((D.prototype=Object.create(M.prototype)).constructor=D).className="Type";var b=oe(14),R=oe(23),S=oe(15),w=oe(18),v=oe(30),A=oe(19),d=oe(24),m=oe(38),g=oe(33),O=oe(13),P=oe(12),I=oe(36),E=oe(11),k=oe(37);function D(N,Y){M.call(this,N,Y),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function j(N){return N._fieldsById=N._fieldsArray=N._oneofsArray=null,delete N.encode,delete N.decode,delete N.verify,N}Object.defineProperties(D.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var N=Object.keys(this.fields),Y=0;Y<N.length;++Y){var te=this.fields[N[Y]],J=te.id;if(this._fieldsById[J])throw Error("duplicate id "+J+" in "+this);this._fieldsById[J]=te}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=g.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=g.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=D.generateConstructor(this)())},set:function(N){var Y=N.prototype;Y instanceof A||((N.prototype=new A).constructor=N,g.merge(N.prototype,Y)),N.$type=N.prototype.$type=this,g.merge(N,A,!0),this._ctor=N;for(var te=0;te<this.fieldsArray.length;++te)this._fieldsArray[te].resolve();var J={};for(te=0;te<this.oneofsArray.length;++te)J[this._oneofsArray[te].resolve().name]={get:g.oneOfGetter(this._oneofsArray[te].oneof),set:g.oneOfSetter(this._oneofsArray[te].oneof)};te&&Object.defineProperties(N.prototype,J)}}}),D.generateConstructor=function(N){for(var Y,te=g.codegen(["p"],N.name),J=0;J<N.fieldsArray.length;++J)(Y=N._fieldsArray[J]).map?te("this%s={}",g.safeProp(Y.name)):Y.repeated&&te("this%s=[]",g.safeProp(Y.name));return te("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},D.fromJSON=function(N,Y){var te=new D(N,Y.options);te.extensions=Y.extensions,te.reserved=Y.reserved;for(var J=Object.keys(Y.fields),re=0;re<J.length;++re)te.add((void 0!==Y.fields[J[re]].keyType?w.fromJSON:S.fromJSON)(J[re],Y.fields[J[re]]));if(Y.oneofs)for(J=Object.keys(Y.oneofs),re=0;re<J.length;++re)te.add(R.fromJSON(J[re],Y.oneofs[J[re]]));if(Y.nested)for(J=Object.keys(Y.nested),re=0;re<J.length;++re){var U=Y.nested[J[re]];te.add((U.id!==undefined?S.fromJSON:U.fields!==undefined?D.fromJSON:U.values!==undefined?b.fromJSON:U.methods!==undefined?v.fromJSON:M.fromJSON)(J[re],U))}return Y.extensions&&Y.extensions.length&&(te.extensions=Y.extensions),Y.reserved&&Y.reserved.length&&(te.reserved=Y.reserved),Y.group&&(te.group=!0),Y.comment&&(te.comment=Y.comment),te},D.prototype.toJSON=function(N){var Y=M.prototype.toJSON.call(this,N),te=!!N&&Boolean(N.keepComments);return g.toObject(["options",Y&&Y.options||undefined,"oneofs",M.arrayToJSON(this.oneofsArray,N),"fields",M.arrayToJSON(this.fieldsArray.filter(function(J){return!J.declaringField}),N)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",Y&&Y.nested||undefined,"comment",te?this.comment:undefined])},D.prototype.resolveAll=function(){for(var N=this.fieldsArray,Y=0;Y<N.length;)N[Y++].resolve();var te=this.oneofsArray;for(Y=0;Y<te.length;)te[Y++].resolve();return M.prototype.resolveAll.call(this)},D.prototype.get=function(N){return this.fields[N]||this.oneofs&&this.oneofs[N]||this.nested&&this.nested[N]||null},D.prototype.add=function(N){if(this.get(N.name))throw Error("duplicate name '"+N.name+"' in "+this);if(N instanceof S&&N.extend===undefined){if(this._fieldsById?this._fieldsById[N.id]:this.fieldsById[N.id])throw Error("duplicate id "+N.id+" in "+this);if(this.isReservedId(N.id))throw Error("id "+N.id+" is reserved in "+this);if(this.isReservedName(N.name))throw Error("name '"+N.name+"' is reserved in "+this);return N.parent&&N.parent.remove(N),this.fields[N.name]=N,N.message=this,N.onAdd(this),j(this)}return N instanceof R?(this.oneofs||(this.oneofs={}),this.oneofs[N.name]=N,N.onAdd(this),j(this)):M.prototype.add.call(this,N)},D.prototype.remove=function(N){if(N instanceof S&&N.extend===undefined){if(!this.fields||this.fields[N.name]!==N)throw Error(N+" is not a member of "+this);return delete this.fields[N.name],N.parent=null,N.onRemove(this),j(this)}if(N instanceof R){if(!this.oneofs||this.oneofs[N.name]!==N)throw Error(N+" is not a member of "+this);return delete this.oneofs[N.name],N.parent=null,N.onRemove(this),j(this)}return M.prototype.remove.call(this,N)},D.prototype.isReservedId=function(N){return M.isReservedId(this.reserved,N)},D.prototype.isReservedName=function(N){return M.isReservedName(this.reserved,N)},D.prototype.create=function(N){return new this.ctor(N)},D.prototype.setup=function(){for(var N=this.fullName,Y=[],te=0;te<this.fieldsArray.length;++te)Y.push(this._fieldsArray[te].resolve().resolvedType);this.encode=O(this)({Writer:m,types:Y,util:g}),this.decode=P(this)({Reader:d,types:Y,util:g}),this.verify=I(this)({types:Y,util:g}),this.fromObject=E.fromObject(this)({types:Y,util:g}),this.toObject=E.toObject(this)({types:Y,util:g});var J=k[N];if(J){var re=Object.create(this);re.fromObject=this.fromObject,this.fromObject=J.fromObject.bind(re),re.toObject=this.toObject,this.toObject=J.toObject.bind(re)}return this},D.prototype.encode=function(N,Y){return this.setup().encode(N,Y)},D.prototype.encodeDelimited=function(N,Y){return this.encode(N,Y&&Y.len?Y.fork():Y).ldelim()},D.prototype.decode=function(N,Y){return this.setup().decode(N,Y)},D.prototype.decodeDelimited=function(N){return N instanceof d||(N=d.create(N)),this.decode(N,N.uint32())},D.prototype.verify=function(N){return this.setup().verify(N)},D.prototype.fromObject=function(N){return this.setup().fromObject(N)},D.prototype.toObject=function(N,Y){return this.setup().toObject(N,Y)},D.d=function(N){return function(Y){g.decorateType(Y,N)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(oe,X,x){var M=x,b=oe(33),R=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function S(w,v){var A=0,d={};for(v|=0;A<w.length;)d[R[A+v]]=w[A++];return d}M.basic=S([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),M.defaults=S([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",b.emptyArray,null]),M.long=S([0,0,0,1,1],7),M.mapKey=S([0,0,0,5,5,0,0,0,1,1,0,2],2),M.packed=S([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(oe,X,x){var M,b,R=X.exports=oe(35),S=oe(27);R.codegen=oe(3),R.fetch=oe(5),R.path=oe(8),R.fs=R.inquire("fs"),R.toArray=function(m){if(m){for(var g=Object.keys(m),O=new Array(g.length),P=0;P<g.length;)O[P]=m[g[P++]];return O}return[]},R.toObject=function(m){for(var g={},O=0;O<m.length;){var P=m[O++],I=m[O++];I!==undefined&&(g[P]=I)}return g};var w=/\\/g,v=/"/g;R.isReserved=function(m){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(m)},R.safeProp=function(m){return!/^[$\w_]+$/.test(m)||R.isReserved(m)?'["'+m.replace(w,"\\\\").replace(v,'\\"')+'"]':"."+m},R.ucFirst=function(m){return m.charAt(0).toUpperCase()+m.substring(1)};var A=/_([a-z])/g;R.camelCase=function(m){return m.substring(0,1)+m.substring(1).replace(A,function(g,O){return O.toUpperCase()})},R.compareFieldsById=function(m,g){return m.id-g.id},R.decorateType=function(m,g){if(m.$type)return g&&m.$type.name!==g&&(R.decorateRoot.remove(m.$type),m.$type.name=g,R.decorateRoot.add(m.$type)),m.$type;M||(M=oe(31));var O=new M(g||m.name);return R.decorateRoot.add(O),O.ctor=m,Object.defineProperty(m,"$type",{value:O,enumerable:!1}),Object.defineProperty(m.prototype,"$type",{value:O,enumerable:!1}),O};var d=0;R.decorateEnum=function(m){if(m.$type)return m.$type;b||(b=oe(14));var g=new b("Enum"+d++,m);return R.decorateRoot.add(g),Object.defineProperty(m,"$type",{value:g,enumerable:!1}),g},R.setProperty=function(m,g,O){if("object"!=typeof m)throw TypeError("dst must be an object");if(!g)throw TypeError("path must be specified");return function P(I,E,k){var D=E.shift();if(E.length>0)I[D]=P(I[D]||{},E,k);else{var j=I[D];j&&(k=[].concat(j).concat(k)),I[D]=k}return I}(m,g=g.split("."),O)},Object.defineProperty(R,"decorateRoot",{get:function(){return S.decorated||(S.decorated=new(oe(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(oe,X,x){X.exports=b;var M=oe(35);function b(v,A){this.lo=v>>>0,this.hi=A>>>0}var R=b.zero=new b(0,0);R.toNumber=function(){return 0},R.zzEncode=R.zzDecode=function(){return this},R.length=function(){return 1};var S=b.zeroHash="\0\0\0\0\0\0\0\0";b.fromNumber=function(v){if(0===v)return R;var A=v<0;A&&(v=-v);var d=v>>>0,m=(v-d)/4294967296>>>0;return A&&(m=~m>>>0,d=~d>>>0,++d>4294967295&&(d=0,++m>4294967295&&(m=0))),new b(d,m)},b.from=function(v){if("number"==typeof v)return b.fromNumber(v);if(M.isString(v)){if(!M.Long)return b.fromNumber(parseInt(v,10));v=M.Long.fromString(v)}return v.low||v.high?new b(v.low>>>0,v.high>>>0):R},b.prototype.toNumber=function(v){if(!v&&this.hi>>>31){var A=1+~this.lo>>>0,d=~this.hi>>>0;return A||(d=d+1>>>0),-(A+4294967296*d)}return this.lo+4294967296*this.hi},b.prototype.toLong=function(v){return M.Long?new M.Long(0|this.lo,0|this.hi,Boolean(v)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(v)}};var w=String.prototype.charCodeAt;b.fromHash=function(v){return v===S?R:new b((w.call(v,0)|w.call(v,1)<<8|w.call(v,2)<<16|w.call(v,3)<<24)>>>0,(w.call(v,4)|w.call(v,5)<<8|w.call(v,6)<<16|w.call(v,7)<<24)>>>0)},b.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},b.prototype.zzEncode=function(){var v=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^v)>>>0,this.lo=(this.lo<<1^v)>>>0,this},b.prototype.zzDecode=function(){var v=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^v)>>>0,this.hi=(this.hi>>>1^v)>>>0,this},b.prototype.length=function(){var v=this.lo,A=(this.lo>>>28|this.hi<<4)>>>0,d=this.hi>>>24;return 0===d?0===A?v<16384?v<128?1:2:v<2097152?3:4:A<16384?A<128?5:6:A<2097152?7:8:d<128?9:10}},{35:35}],35:[function(oe,X,x){var M=x;function b(S,w,v){for(var A=Object.keys(w),d=0;d<A.length;++d)S[A[d]]!==undefined&&v||(S[A[d]]=w[A[d]]);return S}function R(S){function w(v,A){if(!(this instanceof w))return new w(v,A);Object.defineProperty(this,"message",{get:function(){return v}}),Error.captureStackTrace?Error.captureStackTrace(this,w):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),A&&b(this,A)}return(w.prototype=Object.create(Error.prototype)).constructor=w,Object.defineProperty(w.prototype,"name",{get:function(){return S}}),w.prototype.toString=function(){return this.name+": "+this.message},w}M.asPromise=oe(1),M.base64=oe(2),M.EventEmitter=oe(4),M.float=oe(6),M.inquire=oe(7),M.utf8=oe(10),M.pool=oe(9),M.LongBits=oe(34),M.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),M.global=M.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,M.emptyArray=Object.freeze?Object.freeze([]):[],M.emptyObject=Object.freeze?Object.freeze({}):{},M.isInteger=Number.isInteger||function(S){return"number"==typeof S&&isFinite(S)&&Math.floor(S)===S},M.isString=function(S){return"string"==typeof S||S instanceof String},M.isObject=function(S){return S&&"object"==typeof S},M.isset=M.isSet=function(S,w){var v=S[w];return!(null==v||!S.hasOwnProperty(w))&&("object"!=typeof v||(Array.isArray(v)?v.length:Object.keys(v).length)>0)},M.Buffer=function(){try{var S=M.inquire("buffer").Buffer;return S.prototype.utf8Write?S:null}catch(w){return null}}(),M._Buffer_from=null,M._Buffer_allocUnsafe=null,M.newBuffer=function(S){return"number"==typeof S?M.Buffer?M._Buffer_allocUnsafe(S):new M.Array(S):M.Buffer?M._Buffer_from(S):"undefined"==typeof Uint8Array?S:new Uint8Array(S)},M.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,M.Long=M.global.dcodeIO&&M.global.dcodeIO.Long||M.global.Long||M.inquire("long"),M.key2Re=/^true|false|0|1$/,M.key32Re=/^-?(?:0|[1-9][0-9]*)$/,M.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,M.longToHash=function(S){return S?M.LongBits.from(S).toHash():M.LongBits.zeroHash},M.longFromHash=function(S,w){var v=M.LongBits.fromHash(S);return M.Long?M.Long.fromBits(v.lo,v.hi,w):v.toNumber(Boolean(w))},M.merge=b,M.lcFirst=function(S){return S.charAt(0).toLowerCase()+S.substring(1)},M.newError=R,M.ProtocolError=R("ProtocolError"),M.oneOfGetter=function(S){for(var w={},v=0;v<S.length;++v)w[S[v]]=1;return function(){for(var A=Object.keys(this),d=A.length-1;d>-1;--d)if(1===w[A[d]]&&this[A[d]]!==undefined&&null!==this[A[d]])return A[d]}},M.oneOfSetter=function(S){return function(w){for(var v=0;v<S.length;++v)S[v]!==w&&delete this[S[v]]}},M.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},M._configure=function(){var S=M.Buffer;S?(M._Buffer_from=S.from!==Uint8Array.from&&S.from||function(w,v){return new S(w,v)},M._Buffer_allocUnsafe=S.allocUnsafe||function(w){return new S(w)}):M._Buffer_from=M._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(oe,X,x){X.exports=function(v){var A=b.codegen(["m"],v.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),m={};v.oneofsArray.length&&A("var p={}");for(var g=0;g<v.fieldsArray.length;++g){var O=v._fieldsArray[g].resolve(),P="m"+b.safeProp(O.name);if(O.optional&&A("if(%s!=null&&m.hasOwnProperty(%j)){",P,O.name),O.map)A("if(!util.isObject(%s))",P)("return%j",R(O,"object"))("var k=Object.keys(%s)",P)("for(var i=0;i<k.length;++i){"),w(A,O,"k[i]"),S(A,O,g,P+"[k[i]]")("}");else if(O.repeated)A("if(!Array.isArray(%s))",P)("return%j",R(O,"array"))("for(var i=0;i<%s.length;++i){",P),S(A,O,g,P+"[i]")("}");else{if(O.partOf){var I=b.safeProp(O.partOf.name);1===m[O.partOf.name]&&A("if(p%s===1)",I)("return%j",O.partOf.name+": multiple values"),m[O.partOf.name]=1,A("p%s=1",I)}S(A,O,g,P)}O.optional&&A("}")}return A("return null")};var M=oe(14),b=oe(33);function R(v,A){return v.name+": "+A+(v.repeated&&"array"!==A?"[]":v.map&&"object"!==A?"{k:"+v.keyType+"}":"")+" expected"}function S(v,A,d,m){if(A.resolvedType)if(A.resolvedType instanceof M){v("switch(%s){",m)("default:")("return%j",R(A,"enum value"));for(var g=Object.keys(A.resolvedType.values),O=0;O<g.length;++O)v("case %i:",A.resolvedType.values[g[O]]);v("break")("}")}else v("{")("var e=types[%i].verify(%s);",d,m)("if(e)")("return%j+e",A.name+".")("}");else switch(A.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":v("if(!util.isInteger(%s))",m)("return%j",R(A,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":v("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",m,m,m,m)("return%j",R(A,"integer|Long"));break;case"float":case"double":v('if(typeof %s!=="number")',m)("return%j",R(A,"number"));break;case"bool":v('if(typeof %s!=="boolean")',m)("return%j",R(A,"boolean"));break;case"string":v("if(!util.isString(%s))",m)("return%j",R(A,"string"));break;case"bytes":v('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',m,m,m)("return%j",R(A,"buffer"))}return v}function w(v,A,d){switch(A.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":v("if(!util.key32Re.test(%s))",d)("return%j",R(A,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":v("if(!util.key64Re.test(%s))",d)("return%j",R(A,"integer|Long key"));break;case"bool":v("if(!util.key2Re.test(%s))",d)("return%j",R(A,"boolean key"))}return v}},{14:14,33:33}],37:[function(oe,X,x){var M=x,b=oe(19);M[".google.protobuf.Any"]={fromObject:function(R){if(R&&R["@type"]){var S=R["@type"].substring(R["@type"].lastIndexOf("/")+1),w=this.lookup(S);if(w){var v="."===R["@type"].charAt(0)?R["@type"].substr(1):R["@type"];return-1===v.indexOf("/")&&(v="/"+v),this.create({type_url:v,value:w.encode(w.fromObject(R)).finish()})}}return this.fromObject(R)},toObject:function(R,S){var w="",v="";if(S&&S.json&&R.type_url&&R.value){v=R.type_url.substring(R.type_url.lastIndexOf("/")+1),w=R.type_url.substring(0,R.type_url.lastIndexOf("/")+1);var A=this.lookup(v);A&&(R=A.decode(R.value))}if(!(R instanceof this.ctor)&&R instanceof b){var d=R.$type.toObject(R,S);return""===w&&(w="type.googleapis.com/"),v=w+("."===R.$type.fullName[0]?R.$type.fullName.substr(1):R.$type.fullName),d["@type"]=v,d}return this.toObject(R,S)}}},{19:19}],38:[function(oe,X,x){X.exports=m;var M,b=oe(35),R=b.LongBits,S=b.base64,w=b.utf8;function v(D,j,N){this.fn=D,this.len=j,this.next=undefined,this.val=N}function A(){}function d(D){this.head=D.head,this.tail=D.tail,this.len=D.len,this.next=D.states}function m(){this.len=0,this.head=new v(A,0,0),this.tail=this.head,this.states=null}var g=function(){return b.Buffer?function(){return(m.create=function(){return new M})()}:function(){return new m}};function O(D,j,N){j[N]=255&D}function P(D,j){this.len=D,this.next=undefined,this.val=j}function I(D,j,N){for(;D.hi;)j[N++]=127&D.lo|128,D.lo=(D.lo>>>7|D.hi<<25)>>>0,D.hi>>>=7;for(;D.lo>127;)j[N++]=127&D.lo|128,D.lo=D.lo>>>7;j[N++]=D.lo}function E(D,j,N){j[N]=255&D,j[N+1]=D>>>8&255,j[N+2]=D>>>16&255,j[N+3]=D>>>24}m.create=g(),m.alloc=function(D){return new b.Array(D)},b.Array!==Array&&(m.alloc=b.pool(m.alloc,b.Array.prototype.subarray)),m.prototype._push=function(D,j,N){return this.tail=this.tail.next=new v(D,j,N),this.len+=j,this},(P.prototype=Object.create(v.prototype)).fn=function(D,j,N){for(;D>127;)j[N++]=127&D|128,D>>>=7;j[N]=D},m.prototype.uint32=function(D){return this.len+=(this.tail=this.tail.next=new P((D>>>=0)<128?1:D<16384?2:D<2097152?3:D<268435456?4:5,D)).len,this},m.prototype.int32=function(D){return D<0?this._push(I,10,R.fromNumber(D)):this.uint32(D)},m.prototype.sint32=function(D){return this.uint32((D<<1^D>>31)>>>0)},m.prototype.int64=m.prototype.uint64=function(D){var j=R.from(D);return this._push(I,j.length(),j)},m.prototype.sint64=function(D){var j=R.from(D).zzEncode();return this._push(I,j.length(),j)},m.prototype.bool=function(D){return this._push(O,1,D?1:0)},m.prototype.sfixed32=m.prototype.fixed32=function(D){return this._push(E,4,D>>>0)},m.prototype.sfixed64=m.prototype.fixed64=function(D){var j=R.from(D);return this._push(E,4,j.lo)._push(E,4,j.hi)},m.prototype.float=function(D){return this._push(b.float.writeFloatLE,4,D)},m.prototype.double=function(D){return this._push(b.float.writeDoubleLE,8,D)};var k=b.Array.prototype.set?function(D,j,N){j.set(D,N)}:function(D,j,N){for(var Y=0;Y<D.length;++Y)j[N+Y]=D[Y]};m.prototype.bytes=function(D){var j=D.length>>>0;if(!j)return this._push(O,1,0);if(b.isString(D)){var N=m.alloc(j=S.length(D));S.decode(D,N,0),D=N}return this.uint32(j)._push(k,j,D)},m.prototype.string=function(D){var j=w.length(D);return j?this.uint32(j)._push(w.write,j,D):this._push(O,1,0)},m.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new v(A,0,0),this.len=0,this},m.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new v(A,0,0),this.len=0),this},m.prototype.ldelim=function(){var D=this.head,j=this.tail,N=this.len;return this.reset().uint32(N),N&&(this.tail.next=D.next,this.tail=j,this.len+=N),this},m.prototype.finish=function(){for(var D=this.head.next,j=this.constructor.alloc(this.len),N=0;D;)D.fn(D.val,j,N),N+=D.len,D=D.next;return j},m._configure=function(D){M=D,m.create=g(),M._configure()}},{35:35}],39:[function(oe,X,x){X.exports=R;var M=oe(38);(R.prototype=Object.create(M.prototype)).constructor=R;var b=oe(35);function R(){M.call(this)}function S(w,v,A){w.length<40?b.utf8.write(w,v,A):v.utf8Write?v.utf8Write(w,A):v.write(w,A)}R._configure=function(){R.alloc=b._Buffer_allocUnsafe,R.writeBytesBuffer=b.Buffer&&b.Buffer.prototype instanceof Uint8Array&&"set"===b.Buffer.prototype.set.name?function(w,v,A){v.set(w,A)}:function(w,v,A){if(w.copy)w.copy(v,A,0,w.length);else for(var d=0;d<w.length;)v[A++]=w[d++]}},R.prototype.bytes=function(w){b.isString(w)&&(w=b._Buffer_from(w,"base64"));var v=w.length>>>0;return this.uint32(v),v&&this._push(R.writeBytesBuffer,v,w),this},R.prototype.string=function(w){var v=b.Buffer.byteLength(w);return this.uint32(v),v&&this._push(S,v,w),this},R._configure()},{35:35,38:38}]},X={},M=function b(R){var S=X[R];return S||oe[R][0].call(S=X[R]={exports:{}},b,S,S.exports),S.exports}(16),M.util.global.protobuf=M,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_639050__(61)],(__WEBPACK_AMD_DEFINE_RESULT__=function(b){return b&&b.isLong&&(M.util.Long=b,M.configure()),M}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=M)})()}).call(this,__nested_webpack_require_639050__(33),__nested_webpack_require_639050__(60)(module))},function(oe,X){oe.exports=function(x){return x.webpackPolyfill||(x.deprecate=function(){},x.paths=[],x.children||(x.children=[]),Object.defineProperty(x,"loaded",{enumerable:!0,get:function(){return x.l}}),Object.defineProperty(x,"id",{enumerable:!0,get:function(){return x.i}}),x.webpackPolyfill=1),x}},function(oe,X){oe.exports=M;var x=null;try{x=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function M(y,s,H){this.low=0|y,this.high=0|s,this.unsigned=!!H}function b(y){return!0===(y&&y.__isLong__)}Object.defineProperty(M.prototype,"__isLong__",{value:!0}),M.isLong=b;var R={},S={};function w(y,s){var H,_,c;return s?(c=0<=(y>>>=0)&&y<256)&&(_=S[y])?_:(H=A(y,(0|y)<0?-1:0,!0),c&&(S[y]=H),H):(c=-128<=(y|=0)&&y<128)&&(_=R[y])?_:(H=A(y,y<0?-1:0,!1),c&&(R[y]=H),H)}function v(y,s){if(isNaN(y))return s?D:k;if(s){if(y<0)return D;if(y>=P)return J}else{if(y<=-I)return re;if(y+1>=I)return te}return y<0?v(-y,s).neg():A(y%O|0,y/O|0,s)}function A(y,s,H){return new M(y,s,H)}M.fromInt=w,M.fromNumber=v,M.fromBits=A;var d=Math.pow;function m(y,s,H){if(0===y.length)throw Error("empty string");if("NaN"===y||"Infinity"===y||"+Infinity"===y||"-Infinity"===y)return k;if("number"==typeof s?(H=s,s=!1):s=!!s,(H=H||10)<2||36<H)throw RangeError("radix");var _;if((_=y.indexOf("-"))>0)throw Error("interior hyphen");if(0===_)return m(y.substring(1),s,H).neg();for(var c=v(d(H,8)),q=k,f=0;f<y.length;f+=8){var C=Math.min(8,y.length-f),L=parseInt(y.substring(f,f+C),H);if(C<8){var Z=v(d(H,C));q=q.mul(Z).add(v(L))}else q=(q=q.mul(c)).add(v(L))}return q.unsigned=s,q}function g(y,s){return"number"==typeof y?v(y,s):"string"==typeof y?m(y,s):A(y.low,y.high,"boolean"==typeof s?s:y.unsigned)}M.fromString=m,M.fromValue=g;var O=4294967296,P=O*O,I=P/2,E=w(1<<24),k=w(0);M.ZERO=k;var D=w(0,!0);M.UZERO=D;var j=w(1);M.ONE=j;var N=w(1,!0);M.UONE=N;var Y=w(-1);M.NEG_ONE=Y;var te=A(-1,2147483647,!1);M.MAX_VALUE=te;var J=A(-1,-1,!0);M.MAX_UNSIGNED_VALUE=J;var re=A(0,-2147483648,!1);M.MIN_VALUE=re;var U=M.prototype;U.toInt=function(){return this.unsigned?this.low>>>0:this.low},U.toNumber=function(){return this.unsigned?(this.high>>>0)*O+(this.low>>>0):this.high*O+(this.low>>>0)},U.toString=function(y){if((y=y||10)<2||36<y)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(re)){var s=v(y),H=this.div(s),_=H.mul(s).sub(this);return H.toString(y)+_.toInt().toString(y)}return"-"+this.neg().toString(y)}for(var c=v(d(y,6),this.unsigned),q=this,f="";;){var C=q.div(c),L=(q.sub(C.mul(c)).toInt()>>>0).toString(y);if((q=C).isZero())return L+f;for(;L.length<6;)L="0"+L;f=""+L+f}},U.getHighBits=function(){return this.high},U.getHighBitsUnsigned=function(){return this.high>>>0},U.getLowBits=function(){return this.low},U.getLowBitsUnsigned=function(){return this.low>>>0},U.getNumBitsAbs=function(){if(this.isNegative())return this.eq(re)?64:this.neg().getNumBitsAbs();for(var y=0!=this.high?this.high:this.low,s=31;s>0&&0==(y&1<<s);s--);return 0!=this.high?s+33:s+1},U.isZero=function(){return 0===this.high&&0===this.low},U.eqz=U.isZero,U.isNegative=function(){return!this.unsigned&&this.high<0},U.isPositive=function(){return this.unsigned||this.high>=0},U.isOdd=function(){return 1==(1&this.low)},U.isEven=function(){return 0==(1&this.low)},U.equals=function(y){return b(y)||(y=g(y)),(this.unsigned===y.unsigned||this.high>>>31!=1||y.high>>>31!=1)&&this.high===y.high&&this.low===y.low},U.eq=U.equals,U.notEquals=function(y){return!this.eq(y)},U.neq=U.notEquals,U.ne=U.notEquals,U.lessThan=function(y){return this.comp(y)<0},U.lt=U.lessThan,U.lessThanOrEqual=function(y){return this.comp(y)<=0},U.lte=U.lessThanOrEqual,U.le=U.lessThanOrEqual,U.greaterThan=function(y){return this.comp(y)>0},U.gt=U.greaterThan,U.greaterThanOrEqual=function(y){return this.comp(y)>=0},U.gte=U.greaterThanOrEqual,U.ge=U.greaterThanOrEqual,U.compare=function(y){if(b(y)||(y=g(y)),this.eq(y))return 0;var s=this.isNegative(),H=y.isNegative();return s&&!H?-1:!s&&H?1:this.unsigned?y.high>>>0>this.high>>>0||y.high===this.high&&y.low>>>0>this.low>>>0?-1:1:this.sub(y).isNegative()?-1:1},U.comp=U.compare,U.negate=function(){return!this.unsigned&&this.eq(re)?re:this.not().add(j)},U.neg=U.negate,U.add=function(y){b(y)||(y=g(y));var L=0,Z=0,ee=0,le=0;return ee+=(le+=(65535&this.low)+(65535&y.low))>>>16,Z+=(ee+=(this.low>>>16)+(y.low>>>16))>>>16,L+=(Z+=(65535&this.high)+(65535&y.high))>>>16,L+=(this.high>>>16)+(y.high>>>16),A((ee&=65535)<<16|(le&=65535),(L&=65535)<<16|(Z&=65535),this.unsigned)},U.subtract=function(y){return b(y)||(y=g(y)),this.add(y.neg())},U.sub=U.subtract,U.multiply=function(y){if(this.isZero())return k;if(b(y)||(y=g(y)),x)return A(x.mul(this.low,this.high,y.low,y.high),x.get_high(),this.unsigned);if(y.isZero())return k;if(this.eq(re))return y.isOdd()?re:k;if(y.eq(re))return this.isOdd()?re:k;if(this.isNegative())return y.isNegative()?this.neg().mul(y.neg()):this.neg().mul(y).neg();if(y.isNegative())return this.mul(y.neg()).neg();if(this.lt(E)&&y.lt(E))return v(this.toNumber()*y.toNumber(),this.unsigned);var H=65535&this.high,_=this.low>>>16,c=65535&this.low,f=65535&y.high,C=y.low>>>16,L=65535&y.low,Z=0,ee=0,le=0,W=0;return le+=(W+=c*L)>>>16,ee+=(le+=_*L)>>>16,le&=65535,ee+=(le+=c*C)>>>16,Z+=(ee+=H*L)>>>16,ee&=65535,Z+=(ee+=_*C)>>>16,ee&=65535,Z+=(ee+=c*f)>>>16,Z+=(this.high>>>16)*L+H*C+_*f+c*(y.high>>>16),A((le&=65535)<<16|(W&=65535),(Z&=65535)<<16|(ee&=65535),this.unsigned)},U.mul=U.multiply,U.divide=function(y){if(b(y)||(y=g(y)),y.isZero())throw Error("division by zero");var s,H,_;if(x)return this.unsigned||-2147483648!==this.high||-1!==y.low||-1!==y.high?A((this.unsigned?x.div_u:x.div_s)(this.low,this.high,y.low,y.high),x.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?D:k;if(this.unsigned){if(y.unsigned||(y=y.toUnsigned()),y.gt(this))return D;if(y.gt(this.shru(1)))return N;_=D}else{if(this.eq(re))return y.eq(j)||y.eq(Y)?re:y.eq(re)?j:(s=this.shr(1).div(y).shl(1)).eq(k)?y.isNegative()?j:Y:(H=this.sub(y.mul(s)),_=s.add(H.div(y)));if(y.eq(re))return this.unsigned?D:k;if(this.isNegative())return y.isNegative()?this.neg().div(y.neg()):this.neg().div(y).neg();if(y.isNegative())return this.div(y.neg()).neg();_=k}for(H=this;H.gte(y);){s=Math.max(1,Math.floor(H.toNumber()/y.toNumber()));for(var c=Math.ceil(Math.log(s)/Math.LN2),q=c<=48?1:d(2,c-48),f=v(s),C=f.mul(y);C.isNegative()||C.gt(H);)C=(f=v(s-=q,this.unsigned)).mul(y);f.isZero()&&(f=j),_=_.add(f),H=H.sub(C)}return _},U.div=U.divide,U.modulo=function(y){return b(y)||(y=g(y)),x?A((this.unsigned?x.rem_u:x.rem_s)(this.low,this.high,y.low,y.high),x.get_high(),this.unsigned):this.sub(this.div(y).mul(y))},U.mod=U.modulo,U.rem=U.modulo,U.not=function(){return A(~this.low,~this.high,this.unsigned)},U.and=function(y){return b(y)||(y=g(y)),A(this.low&y.low,this.high&y.high,this.unsigned)},U.or=function(y){return b(y)||(y=g(y)),A(this.low|y.low,this.high|y.high,this.unsigned)},U.xor=function(y){return b(y)||(y=g(y)),A(this.low^y.low,this.high^y.high,this.unsigned)},U.shiftLeft=function(y){return b(y)&&(y=y.toInt()),0==(y&=63)?this:y<32?A(this.low<<y,this.high<<y|this.low>>>32-y,this.unsigned):A(0,this.low<<y-32,this.unsigned)},U.shl=U.shiftLeft,U.shiftRight=function(y){return b(y)&&(y=y.toInt()),0==(y&=63)?this:y<32?A(this.low>>>y|this.high<<32-y,this.high>>y,this.unsigned):A(this.high>>y-32,this.high>=0?0:-1,this.unsigned)},U.shr=U.shiftRight,U.shiftRightUnsigned=function(y){if(b(y)&&(y=y.toInt()),0==(y&=63))return this;var s=this.high;return y<32?A(this.low>>>y|s<<32-y,s>>>y,this.unsigned):A(32===y?s:s>>>y-32,0,this.unsigned)},U.shru=U.shiftRightUnsigned,U.shr_u=U.shiftRightUnsigned,U.toSigned=function(){return this.unsigned?A(this.low,this.high,!1):this},U.toUnsigned=function(){return this.unsigned?this:A(this.low,this.high,!0)},U.toBytes=function(y){return y?this.toBytesLE():this.toBytesBE()},U.toBytesLE=function(){var y=this.high,s=this.low;return[255&s,s>>>8&255,s>>>16&255,s>>>24,255&y,y>>>8&255,y>>>16&255,y>>>24]},U.toBytesBE=function(){var y=this.high,s=this.low;return[y>>>24,y>>>16&255,y>>>8&255,255&y,s>>>24,s>>>16&255,s>>>8&255,255&s]},M.fromBytes=function(y,s,H){return H?M.fromBytesLE(y,s):M.fromBytesBE(y,s)},M.fromBytesLE=function(y,s){return new M(y[0]|y[1]<<8|y[2]<<16|y[3]<<24,y[4]|y[5]<<8|y[6]<<16|y[7]<<24,s)},M.fromBytesBE=function(y,s){return new M(y[4]<<24|y[5]<<16|y[6]<<8|y[7],y[0]<<24|y[1]<<16|y[2]<<8|y[3],s)}},function(oe){oe.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(oe){oe.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(oe,X,x){var M=function(b){"use strict";var R=Object.prototype,S=R.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},v=w.iterator||"@@iterator",A=w.asyncIterator||"@@asyncIterator",d=w.toStringTag||"@@toStringTag";function m(_,c,q,f){var ee,le,W,B,L=Object.create((c&&c.prototype instanceof P?c:P).prototype),Z=new y(f||[]);return L._invoke=(ee=_,le=q,W=Z,B="suspendedStart",function(z,Q){if("executing"===B)throw new Error("Generator is already running");if("completed"===B){if("throw"===z)throw Q;return{value:void 0,done:!0}}for(W.method=z,W.arg=Q;;){var ge=W.delegate;if(ge){var se=J(ge,W);if(se){if(se===O)continue;return se}}if("next"===W.method)W.sent=W._sent=W.arg;else if("throw"===W.method){if("suspendedStart"===B)throw B="completed",W.arg;W.dispatchException(W.arg)}else"return"===W.method&&W.abrupt("return",W.arg);B="executing";var ae=g(ee,le,W);if("normal"===ae.type){if(B=W.done?"completed":"suspendedYield",ae.arg===O)continue;return{value:ae.arg,done:W.done}}"throw"===ae.type&&(B="completed",W.method="throw",W.arg=ae.arg)}}),L}function g(_,c,q){try{return{type:"normal",arg:_.call(c,q)}}catch(f){return{type:"throw",arg:f}}}b.wrap=m;var O={};function P(){}function I(){}function E(){}var k={};k[v]=function(){return this};var D=Object.getPrototypeOf,j=D&&D(D(s([])));j&&j!==R&&S.call(j,v)&&(k=j);var N=E.prototype=P.prototype=Object.create(k);function Y(_){["next","throw","return"].forEach(function(c){_[c]=function(q){return this._invoke(c,q)}})}function te(_,c){var q;this._invoke=function(f,C){function L(){return new c(function(Z,ee){!function le(W,B,z,Q){var ge=g(_[W],_,B);if("throw"!==ge.type){var se=ge.arg,ae=se.value;return ae&&"object"==typeof ae&&S.call(ae,"__await")?c.resolve(ae.__await).then(function(Se){le("next",Se,z,Q)},function(Se){le("throw",Se,z,Q)}):c.resolve(ae).then(function(Se){se.value=Se,z(se)},function(Se){return le("throw",Se,z,Q)})}Q(ge.arg)}(f,C,Z,ee)})}return q=q?q.then(L,L):L()}}function J(_,c){var q=_.iterator[c.method];if(void 0===q){if(c.delegate=null,"throw"===c.method){if(_.iterator.return&&(c.method="return",c.arg=void 0,J(_,c),"throw"===c.method))return O;c.method="throw",c.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var f=g(q,_.iterator,c.arg);if("throw"===f.type)return c.method="throw",c.arg=f.arg,c.delegate=null,O;var C=f.arg;return C?C.done?(c[_.resultName]=C.value,c.next=_.nextLoc,"return"!==c.method&&(c.method="next",c.arg=void 0),c.delegate=null,O):C:(c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,O)}function re(_){var c={tryLoc:_[0]};1 in _&&(c.catchLoc=_[1]),2 in _&&(c.finallyLoc=_[2],c.afterLoc=_[3]),this.tryEntries.push(c)}function U(_){var c=_.completion||{};c.type="normal",delete c.arg,_.completion=c}function y(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(re,this),this.reset(!0)}function s(_){if(_){var c=_[v];if(c)return c.call(_);if("function"==typeof _.next)return _;if(!isNaN(_.length)){var q=-1,f=function C(){for(;++q<_.length;)if(S.call(_,q))return C.value=_[q],C.done=!1,C;return C.value=void 0,C.done=!0,C};return f.next=f}}return{next:H}}function H(){return{value:void 0,done:!0}}return I.prototype=N.constructor=E,E.constructor=I,E[d]=I.displayName="GeneratorFunction",b.isGeneratorFunction=function(_){var c="function"==typeof _&&_.constructor;return!!c&&(c===I||"GeneratorFunction"===(c.displayName||c.name))},b.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,E):(_.__proto__=E,d in _||(_[d]="GeneratorFunction")),_.prototype=Object.create(N),_},b.awrap=function(_){return{__await:_}},Y(te.prototype),te.prototype[A]=function(){return this},b.AsyncIterator=te,b.async=function(_,c,q,f,C){void 0===C&&(C=Promise);var L=new te(m(_,c,q,f),C);return b.isGeneratorFunction(c)?L:L.next().then(function(Z){return Z.done?Z.value:L.next()})},Y(N),N[d]="Generator",N[v]=function(){return this},N.toString=function(){return"[object Generator]"},b.keys=function(_){var c=[];for(var q in _)c.push(q);return c.reverse(),function f(){for(;c.length;){var C=c.pop();if(C in _)return f.value=C,f.done=!1,f}return f.done=!0,f}},b.values=s,y.prototype={constructor:y,reset:function(_){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(U),!_)for(var c in this)"t"===c.charAt(0)&&S.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=void 0)},stop:function(){this.done=!0;var _=this.tryEntries[0].completion;if("throw"===_.type)throw _.arg;return this.rval},dispatchException:function(_){if(this.done)throw _;var c=this;function q(le,W){return L.type="throw",L.arg=_,c.next=le,W&&(c.method="next",c.arg=void 0),!!W}for(var f=this.tryEntries.length-1;f>=0;--f){var C=this.tryEntries[f],L=C.completion;if("root"===C.tryLoc)return q("end");if(C.tryLoc<=this.prev){var Z=S.call(C,"catchLoc"),ee=S.call(C,"finallyLoc");if(Z&&ee){if(this.prev<C.catchLoc)return q(C.catchLoc,!0);if(this.prev<C.finallyLoc)return q(C.finallyLoc)}else if(Z){if(this.prev<C.catchLoc)return q(C.catchLoc,!0)}else{if(!ee)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return q(C.finallyLoc)}}}},abrupt:function(_,c){for(var q=this.tryEntries.length-1;q>=0;--q){var f=this.tryEntries[q];if(f.tryLoc<=this.prev&&S.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var C=f;break}}C&&("break"===_||"continue"===_)&&C.tryLoc<=c&&c<=C.finallyLoc&&(C=null);var L=C?C.completion:{};return L.type=_,L.arg=c,C?(this.method="next",this.next=C.finallyLoc,O):this.complete(L)},complete:function(_,c){if("throw"===_.type)throw _.arg;return"break"===_.type||"continue"===_.type?this.next=_.arg:"return"===_.type?(this.rval=this.arg=_.arg,this.method="return",this.next="end"):"normal"===_.type&&c&&(this.next=c),O},finish:function(_){for(var c=this.tryEntries.length-1;c>=0;--c){var q=this.tryEntries[c];if(q.finallyLoc===_)return this.complete(q.completion,q.afterLoc),U(q),O}},catch:function(_){for(var c=this.tryEntries.length-1;c>=0;--c){var q=this.tryEntries[c];if(q.tryLoc===_){var f=q.completion;if("throw"===f.type){var C=f.arg;U(q)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(_,c,q){return this.delegate={iterator:s(_),resultName:c,nextLoc:q},"next"===this.method&&(this.arg=void 0),O}},b}(oe.exports);try{regeneratorRuntime=M}catch(b){Function("r","regeneratorRuntime = r")(M)}},function(oe,X){oe.exports=function(x){if(Array.isArray(x))return x}},function(oe,X){oe.exports=function(x,M){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(x)){var b=[],R=!0,S=!1,w=void 0;try{for(var v,A=x[Symbol.iterator]();!(R=(v=A.next()).done)&&(b.push(v.value),!M||b.length!==M);R=!0);}catch(d){S=!0,w=d}finally{try{R||null==A.return||A.return()}finally{if(S)throw w}}return b}}},function(oe,X){oe.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(oe,X,x){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var M="object"==typeof window&&window.RTCPeerConnection,b="object"==typeof window&&window.webkitRTCPeerConnection,R="object"==typeof window&&window.mozRTCPeerConnection;X.createRTCPeerConnection=function(S){var w=M||b||R;return w?new w(S):null}},function(oe,X,x){var M;!function(b){"use strict";function R(){}var S=R.prototype,w=b.EventEmitter;function v(d,m){for(var g=d.length;g--;)if(d[g].listener===m)return g;return-1}function A(d){return function(){return this[d].apply(this,arguments)}}S.getListeners=function(d){var m,g,O=this._getEvents();if(d instanceof RegExp)for(g in m={},O)O.hasOwnProperty(g)&&d.test(g)&&(m[g]=O[g]);else m=O[d]||(O[d]=[]);return m},S.flattenListeners=function(d){var m,g=[];for(m=0;m<d.length;m+=1)g.push(d[m].listener);return g},S.getListenersAsObject=function(d){var m,g=this.getListeners(d);return g instanceof Array&&((m={})[d]=g),m||g},S.addListener=function(d,m){if(!function I(E){return"function"==typeof E||E instanceof RegExp||!(!E||"object"!=typeof E)&&I(E.listener)}(m))throw new TypeError("listener must be a function");var g,O=this.getListenersAsObject(d),P="object"==typeof m;for(g in O)O.hasOwnProperty(g)&&-1===v(O[g],m)&&O[g].push(P?m:{listener:m,once:!1});return this},S.on=A("addListener"),S.addOnceListener=function(d,m){return this.addListener(d,{listener:m,once:!0})},S.once=A("addOnceListener"),S.defineEvent=function(d){return this.getListeners(d),this},S.defineEvents=function(d){for(var m=0;m<d.length;m+=1)this.defineEvent(d[m]);return this},S.removeListener=function(d,m){var g,O,P=this.getListenersAsObject(d);for(O in P)P.hasOwnProperty(O)&&-1!==(g=v(P[O],m))&&P[O].splice(g,1);return this},S.off=A("removeListener"),S.addListeners=function(d,m){return this.manipulateListeners(!1,d,m)},S.removeListeners=function(d,m){return this.manipulateListeners(!0,d,m)},S.manipulateListeners=function(d,m,g){var O,P,I=d?this.removeListener:this.addListener,E=d?this.removeListeners:this.addListeners;if("object"!=typeof m||m instanceof RegExp)for(O=g.length;O--;)I.call(this,m,g[O]);else for(O in m)m.hasOwnProperty(O)&&(P=m[O])&&("function"==typeof P?I.call(this,O,P):E.call(this,O,P));return this},S.removeEvent=function(d){var m,g=typeof d,O=this._getEvents();if("string"===g)delete O[d];else if(d instanceof RegExp)for(m in O)O.hasOwnProperty(m)&&d.test(m)&&delete O[m];else delete this._events;return this},S.removeAllListeners=A("removeEvent"),S.emitEvent=function(d,m){var g,O,P,I,E=this.getListenersAsObject(d);for(I in E)if(E.hasOwnProperty(I))for(g=E[I].slice(0),P=0;P<g.length;P++)!0===(O=g[P]).once&&this.removeListener(d,O.listener),O.listener.apply(this,m||[])===this._getOnceReturnValue()&&this.removeListener(d,O.listener);return this},S.trigger=A("emitEvent"),S.emit=function(d){var m=Array.prototype.slice.call(arguments,1);return this.emitEvent(d,m)},S.setOnceReturnValue=function(d){return this._onceReturnValue=d,this},S._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},S._getEvents=function(){return this._events||(this._events={})},R.noConflict=function(){return b.EventEmitter=w,R},void 0===(M=function(){return R}.call(b,x,b,oe))||(oe.exports=M)}("undefined"!=typeof window?window:this||{})},function(oe,X,x){var M=x(35);oe.exports=function(b){if(Array.isArray(b))return M(b)}},function(oe,X){oe.exports=function(x){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(x))return Array.from(x)}},function(oe,X){oe.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(oe,X,x){(function(M){var b;oe.exports=(b=b||function(R,S){var w;if("undefined"!=typeof window&&window.crypto&&(w=window.crypto),"undefined"!=typeof self&&self.crypto&&(w=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(w=globalThis.crypto),!w&&"undefined"!=typeof window&&window.msCrypto&&(w=window.msCrypto),!w&&void 0!==M&&M.crypto&&(w=M.crypto),!w)try{w=x(74)}catch(N){}var v=function(){if(w){if("function"==typeof w.getRandomValues)try{return w.getRandomValues(new Uint32Array(1))[0]}catch(N){}if("function"==typeof w.randomBytes)try{return w.randomBytes(4).readInt32LE()}catch(N){}}throw new Error("Native crypto module could not be used to get secure random number.")},A=Object.create||function(){function N(){}return function(Y){var te;return N.prototype=Y,te=new N,N.prototype=null,te}}(),d={},m=d.lib={},g=m.Base={extend:function(N){var Y=A(this);return N&&Y.mixIn(N),Y.hasOwnProperty("init")&&this.init!==Y.init||(Y.init=function(){Y.$super.init.apply(this,arguments)}),Y.init.prototype=Y,Y.$super=this,Y},create:function(){var N=this.extend();return N.init.apply(N,arguments),N},init:function(){},mixIn:function(N){for(var Y in N)N.hasOwnProperty(Y)&&(this[Y]=N[Y]);N.hasOwnProperty("toString")&&(this.toString=N.toString)},clone:function(){return this.init.prototype.extend(this)}},O=m.WordArray=g.extend({init:function(N,Y){N=this.words=N||[],this.sigBytes=null!=Y?Y:4*N.length},toString:function(N){return(N||I).stringify(this)},concat:function(N){var Y=this.words,te=N.words,J=this.sigBytes,re=N.sigBytes;if(this.clamp(),J%4)for(var U=0;U<re;U++)Y[J+U>>>2]|=(te[U>>>2]>>>24-U%4*8&255)<<24-(J+U)%4*8;else for(var s=0;s<re;s+=4)Y[J+s>>>2]=te[s>>>2];return this.sigBytes+=re,this},clamp:function(){var N=this.words,Y=this.sigBytes;N[Y>>>2]&=4294967295<<32-Y%4*8,N.length=R.ceil(Y/4)},clone:function(){var N=g.clone.call(this);return N.words=this.words.slice(0),N},random:function(N){for(var Y=[],te=0;te<N;te+=4)Y.push(v());return new O.init(Y,N)}}),P=d.enc={},I=P.Hex={stringify:function(N){for(var Y=N.words,te=N.sigBytes,J=[],re=0;re<te;re++){var U=Y[re>>>2]>>>24-re%4*8&255;J.push((U>>>4).toString(16)),J.push((15&U).toString(16))}return J.join("")},parse:function(N){for(var Y=N.length,te=[],J=0;J<Y;J+=2)te[J>>>3]|=parseInt(N.substr(J,2),16)<<24-J%8*4;return new O.init(te,Y/2)}},E=P.Latin1={stringify:function(N){for(var Y=N.words,te=N.sigBytes,J=[],re=0;re<te;re++)J.push(String.fromCharCode(Y[re>>>2]>>>24-re%4*8&255));return J.join("")},parse:function(N){for(var Y=N.length,te=[],J=0;J<Y;J++)te[J>>>2]|=(255&N.charCodeAt(J))<<24-J%4*8;return new O.init(te,Y)}},k=P.Utf8={stringify:function(N){try{return decodeURIComponent(escape(E.stringify(N)))}catch(Y){throw new Error("Malformed UTF-8 data")}},parse:function(N){return E.parse(unescape(encodeURIComponent(N)))}},D=m.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=new O.init,this._nDataBytes=0},_append:function(N){"string"==typeof N&&(N=k.parse(N)),this._data.concat(N),this._nDataBytes+=N.sigBytes},_process:function(N){var Y,te=this._data,J=te.words,re=te.sigBytes,U=this.blockSize,y=re/(4*U),s=(y=N?R.ceil(y):R.max((0|y)-this._minBufferSize,0))*U,H=R.min(4*s,re);if(s){for(var _=0;_<s;_+=U)this._doProcessBlock(J,_);Y=J.splice(0,s),te.sigBytes-=H}return new O.init(Y,H)},clone:function(){var N=g.clone.call(this);return N._data=this._data.clone(),N},_minBufferSize:0}),j=(m.Hasher=D.extend({cfg:g.extend(),init:function(N){this.cfg=this.cfg.extend(N),this.reset()},reset:function(){D.reset.call(this),this._doReset()},update:function(N){return this._append(N),this._process(),this},finalize:function(N){return N&&this._append(N),this._doFinalize()},blockSize:16,_createHelper:function(N){return function(Y,te){return new N.init(te).finalize(Y)}},_createHmacHelper:function(N){return function(Y,te){return new j.HMAC.init(N,te).finalize(Y)}}}),d.algo={});return d}(Math),b)}).call(this,x(33))},function(oe,X){},function(oe,X,x){"use strict";var M=this&&this.__assign||function(){return(M=Object.assign||function(E){for(var k,D=1,j=arguments.length;D<j;D++)for(var N in k=arguments[D])Object.prototype.hasOwnProperty.call(k,N)&&(E[N]=k[N]);return E}).apply(this,arguments)},b=this&&this.__awaiter||function(E,k,D,j){return new(D||(D=Promise))(function(N,Y){function te(U){try{re(j.next(U))}catch(y){Y(y)}}function J(U){try{re(j.throw(U))}catch(y){Y(y)}}function re(U){var y;U.done?N(U.value):(y=U.value,y instanceof D?y:new D(function(s){s(y)})).then(te,J)}re((j=j.apply(E,k||[])).next())})},R=this&&this.__generator||function(E,k){var D,j,N,Y,te={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return Y={next:J(0),throw:J(1),return:J(2)},"function"==typeof Symbol&&(Y[Symbol.iterator]=function(){return this}),Y;function J(re){return function(U){return function(y){if(D)throw new TypeError("Generator is already executing.");for(;te;)try{if(D=1,j&&(N=2&y[0]?j.return:y[0]?j.throw||((N=j.return)&&N.call(j),0):j.next)&&!(N=N.call(j,y[1])).done)return N;switch(j=0,N&&(y=[2&y[0],N.value]),y[0]){case 0:case 1:N=y;break;case 4:return te.label++,{value:y[1],done:!1};case 5:te.label++,j=y[1],y=[0];continue;case 7:y=te.ops.pop(),te.trys.pop();continue;default:if(!((N=(N=te.trys).length>0&&N[N.length-1])||6!==y[0]&&2!==y[0])){te=0;continue}if(3===y[0]&&(!N||y[1]>N[0]&&y[1]<N[3])){te.label=y[1];break}if(6===y[0]&&te.label<N[1]){te.label=N[1],N=y;break}if(N&&te.label<N[2]){te.label=N[2],te.ops.push(y);break}N[2]&&te.ops.pop(),te.trys.pop();continue}y=k.call(E,te)}catch(s){y=[6,s],j=0}finally{D=N=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([re,U])}}},S=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(X,"__esModule",{value:!0});var w=x(76),v=x(27),A=x(95),d=x(20),m=x(24),g=x(31),O=S(x(0)),P=S(x(37)),I=function(){function E(k){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new A.PromiseMutex("LS"),this.cancelToken=P.default.CancelToken.source(),this.injectConfig=M({},v.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=k}return Object.defineProperty(E.prototype,"isNeedReset",{get:function(){for(var k=this,D=0,j=Array.from(this.streamingTasks.values());D<j.length;D++){var N=j[D];if(N.mode===v.LiveStreamingServiceMode.INJECT||N.mode===v.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find(function(Y){return Y.uid===k.spec.uid}))return!0}return!1},enumerable:!0,configurable:!0}),E.prototype.setTranscodingConfig=function(k){return b(this,void 0,void 0,function(){var D,j,N,Y,te,J=this;return R(this,function(re){switch(re.label){case 0:(D=M(M({},v.DEFAULT_TRANSCODING_CONFIG),k)).transcodingUsers||(D.transcodingUsers=D.userConfigs),66!==D.videoCodecProfile&&77!==D.videoCodecProfile&&100!==D.videoCodecProfile&&(O.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+D.videoCodecProfile+" -> 100"),D.videoCodecProfile=100),D.transcodingUsers&&(D.transcodingUsers=D.transcodingUsers.map(function(U){return M(M(M({},v.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),U),{zOrder:U.zOrder?U.zOrder+1:1})})),D.images&&(D.images=D.images.map(function(U){return M(M({},v.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),U)}));try{v.isLiveStreamingTranscodingConfig(D)}catch(U){throw U}return D.transcodingUsers&&(D.userConfigs=D.transcodingUsers.map(function(U){return M({},U)}),D.userCount=D.transcodingUsers.length,delete D.transcodingUsers),j=(D.userConfigs||[]).map(function(U){return"number"==typeof U.uid?Promise.resolve(U.uid):d.getUserAccount(J.spec,null,U.uid)}),[4,this.taskMutex.lock()];case 1:return N=re.sent(),[4,Promise.all(j)];case 2:if(re.sent().forEach(function(U,y){D.userConfigs&&D.userConfigs[y]&&(D.userConfigs[y].uid=U&&U.uid||U)}),this.transcodingConfig=D,!this.connection)return N(),[2];re.label=3;case 3:return re.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map(function(U){return U.taskId}).join("#")})];case 4:return Y=re.sent(),N(),O.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+Y.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(te=re.sent(),N(),!te.data||!te.data.retry)throw te;return te.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(function(U){O.default.warning("["+J.spec.clientId+"] live streaming receive error",te.toString(),"try to republish",U.url),J.startLiveStreamingTask(U.url,U.mode,te).then(function(){O.default.debug("["+J.spec.clientId+"] live streaming republish "+U.url+" success")}).catch(function(y){O.default.error("["+J.spec.clientId+"] live streaming republish failed",U.url,y.toString()),J.onLiveStreamError&&J.onLiveStreamError(U.url,y)})}),[3,6];case 6:return[2]}})})},E.prototype.setInjectStreamConfig=function(k,D){this.injectConfig=Object.assign({},this.injectConfig,k),this.injectLoopTimes=D},E.prototype.startLiveStreamingTask=function(k,D,j){return b(this,void 0,void 0,function(){var N,Y,te,J,re,U,y,s,H=this;return R(this,function(_){switch(_.label){case 0:return Array.from(this.streamingTasks.values()).find(function(c){return c.mode===v.LiveStreamingServiceMode.INJECT})&&D===v.LiveStreamingServiceMode.INJECT?[2,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(N={command:"PublishStream",ts:Date.now(),url:k,uid:this.spec.uid.toString(),autoDestroyTime:30},O.default.debug("["+this.spec.clientId+"] start live streaming "+k+", mode: "+D),[4,this.taskMutex.lock()]);case 1:if(Y=_.sent(),!this.transcodingConfig&&D===v.LiveStreamingServiceMode.TRANSCODE)throw Y(),new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&j)return Y(),[2];if(this.streamingTasks.get(k)&&!j)return Y(),[2,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&D===v.LiveStreamingServiceMode.TRANSCODE)throw Y(),new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");_.label=2;case 2:return _.trys.push([2,5,,6]),this.connection?[3,4]:(te=this,[4,this.connect(D)]);case 3:te.connection=_.sent(),_.label=4;case 4:return[3,6];case 5:throw J=_.sent(),Y(),J;case 6:switch(D){case v.LiveStreamingServiceMode.TRANSCODE:N.transcodingConfig=M({},this.transcodingConfig);break;case v.LiveStreamingServiceMode.RAW:break;case v.LiveStreamingServiceMode.INJECT:N={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:k,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(N.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,re=this.lastTaskId++,_.label=7;case 7:return _.trys.push([7,9,,14]),U=new Promise(function(c,q){g.wait(H.retryTimeout).then(function(){if(j)return q(j);var f=H.statusError.get(k);return f?(H.statusError.delete(k),q(f)):void 0})}),[4,Promise.race([this.connection.request("request",{clientRequest:N},!0,{url:k,command:"PublishStream",workerType:D===v.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!j,tid:re.toString()}),U])];case 8:return y=_.sent(),this.isStartingStreamingTask=!1,O.default.debug("["+this.spec.clientId+"] live streaming started, code: "+y.code),this.streamingTasks.set(k,{clientRequest:N,mode:D,url:k,taskId:re}),Y(),[3,14];case 9:if(s=_.sent(),Y(),this.isStartingStreamingTask=!1,!s.data||!s.data.retry||j)throw s;return s.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(k,D,s)];case 10:return[2,_.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(k,D,s)];case 12:return[2,_.sent()];case 13:return[3,14];case 14:return[2]}})})},E.prototype.stopLiveStreamingTask=function(k){var D=this;return new Promise(function(j,N){var Y=D.streamingTasks.get(k);if(!Y||!D.connection)return new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var te=Y.mode;Y.abortTask=function(){O.default.debug("["+D.spec.clientId+"] stop live streaming success(worker exception)"),D.streamingTasks.delete(k),j()},O.default.debug("stop live streaming task request: "+JSON.stringify(k)),D.connection.request("request",{clientRequest:{command:te===v.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:Y.url}},!1,{url:k,command:"UnPublishStream",workerType:te===v.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(D.lastTaskId++).toString()}).then(function(J){O.default.debug("["+D.spec.clientId+"] stop live streaming success, code: "+J.code),D.streamingTasks.delete(k),0===D.streamingTasks.size&&te!==v.LiveStreamingServiceMode.INJECT&&(D.connection.close(),D.connection=void 0),j()}).catch(N)})},E.prototype.controlInjectStream=function(k,D,j,N){return b(this,void 0,void 0,function(){var Y;return R(this,function(te){switch(te.label){case 0:if(!(Y=this.streamingTasks.get(k))||!this.connection||Y.mode!==v.LiveStreamingServiceMode.INJECT)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:k,control:D,audioVolume:j,position:N}})];case 1:return[2,te.sent().serverResponse]}})})},E.prototype.resetAllTask=function(){var k=this,D=Array.from(this.streamingTasks.values());this.terminate();for(var j=function(J){N.startLiveStreamingTask(J.url,J.mode).catch(function(re){k.onLiveStreamError&&k.onLiveStreamError(J.url,re)})},N=this,Y=0,te=D;Y<te.length;Y++)j(te[Y])},E.prototype.setGatewayConnectionState=function(k){this.connection&&(this.connection.gatewayConnectionState=k)},E.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=P.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},E.prototype.connect=function(k){return b(this,void 0,void 0,function(){var D,j=this;return R(this,function(N){switch(N.label){case 0:if(this.connection)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,g.getLiveStreamingWorkerMangerResult(k,this.spec,this.cancelToken.token)];case 1:return D=N.sent(),this.uapResponse=D,this.connection=new w.AgoraLiveStreamingUapSignal(D.workerToken,this.spec,k),this.connection.on(v.LiveStreamingUapSignalEvents.WARNING,function(Y,te){return j.onLiveStreamWarning&&j.onLiveStreamWarning(te,Y)}),this.connection.on(v.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,function(Y){return j.handlePublishStreamServer(Y)}),this.connection.on(v.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,function(Y){return j.handleInjectStreamServerStatus(Y)}),this.connection.on(v.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,function(Y,te){if(!j.connection)return te(new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));g.getLiveStreamingWorkerMangerResult(k,j.spec,j.cancelToken.token).then(function(J){j.uapResponse=J,Y(J.addressList)}).catch(te)}),[4,this.connection.init(D.addressList)];case 2:return N.sent(),[2,this.connection]}})})},E.prototype.handlePublishStreamServer=function(k){var D=this,j=k.serverStatus&&k.serverStatus.url;if(!j)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:k.code});var N=this.streamingTasks.get(j);switch(k.code){case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var Y=new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:k.code});if(N)return O.default.error(Y.toString()),this.onLiveStreamError&&this.onLiveStreamError(j,Y);if(!this.isStartingStreamingTask)return;this.statusError.set(j,Y);case v.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case v.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var te=Array.from(this.streamingTasks.values()),J=function(s){if(s.abortTask)return s.abortTask(),"continue";O.default.warning("["+re.spec.clientId+"] publish stream status code",k.code,"try to republish",s.url),re.startLiveStreamingTask(s.url,s.mode,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:k.code})).then(function(){O.default.debug("["+D.spec.clientId+"] republish live stream success",s.url)}).catch(function(H){O.default.error(H.toString()),D.onLiveStreamError&&D.onLiveStreamError(s.url,H)})},re=this,U=0,y=te;U<y.length;U++)J(y[U]);return}},E.prototype.handleInjectStreamServerStatus=function(k){var D=Number(k.uid),j=k.serverStatus&&k.serverStatus.url;switch(k.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,D,j));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,D,j),void this.streamingTasks.delete(j);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,D,j),void this.streamingTasks.delete(j);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,D,j),void this.streamingTasks.delete(j);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,D,j),void this.streamingTasks.delete(j);default:return void O.default.debug("inject stream server status",k)}},E.prototype.haveUrl=function(k){return this.streamingTasks.has(k)||void 0},E}();X.AgoraRTCLiveStreamingClient=I},function(oe,X,x){"use strict";var M,b=this&&this.__extends||(M=function(D,j){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,Y){N.__proto__=Y}||function(N,Y){for(var te in Y)Y.hasOwnProperty(te)&&(N[te]=Y[te])})(D,j)},function(D,j){function N(){this.constructor=D}M(D,j),D.prototype=null===j?Object.create(j):(N.prototype=j.prototype,new N)}),R=this&&this.__assign||function(){return(R=Object.assign||function(D){for(var j,N=1,Y=arguments.length;N<Y;N++)for(var te in j=arguments[N])Object.prototype.hasOwnProperty.call(j,te)&&(D[te]=j[te]);return D}).apply(this,arguments)},S=this&&this.__awaiter||function(D,j,N,Y){return new(N||(N=Promise))(function(te,J){function re(s){try{y(Y.next(s))}catch(H){J(H)}}function U(s){try{y(Y.throw(s))}catch(H){J(H)}}function y(s){var H;s.done?te(s.value):(H=s.value,H instanceof N?H:new N(function(_){_(H)})).then(re,U)}y((Y=Y.apply(D,j||[])).next())})},w=this&&this.__generator||function(D,j){var N,Y,te,J,re={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return J={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(J[Symbol.iterator]=function(){return this}),J;function U(y){return function(s){return function(H){if(N)throw new TypeError("Generator is already executing.");for(;re;)try{if(N=1,Y&&(te=2&H[0]?Y.return:H[0]?Y.throw||((te=Y.return)&&te.call(Y),0):Y.next)&&!(te=te.call(Y,H[1])).done)return te;switch(Y=0,te&&(H=[2&H[0],te.value]),H[0]){case 0:case 1:te=H;break;case 4:return re.label++,{value:H[1],done:!1};case 5:re.label++,Y=H[1],H=[0];continue;case 7:H=re.ops.pop(),re.trys.pop();continue;default:if(!((te=(te=re.trys).length>0&&te[te.length-1])||6!==H[0]&&2!==H[0])){re=0;continue}if(3===H[0]&&(!te||H[1]>te[0]&&H[1]<te[3])){re.label=H[1];break}if(6===H[0]&&re.label<te[1]){re.label=te[1],te=H;break}if(te&&re.label<te[2]){re.label=te[2],re.ops.push(H);break}te[2]&&re.ops.pop(),re.trys.pop();continue}H=j.call(D,re)}catch(_){H=[6,_],Y=0}finally{N=te=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([y,s])}}},v=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(X,"__esModule",{value:!0});var A=x(27),d=x(77),m=x(36),g=x(24),O=x(2),P=v(x(0)),I=x(1),E=x(31),k=function(D){function j(N,Y,te){var J=D.call(this)||this;return J._gatewayConnectionState="CONNECTED",J.reconnectMode="retry",J.reqId=0,J.commandReqId=0,J.waitingResponseList=[],J.handleWebSocketOpen=function(){J.reconnectMode="retry",J.startPingPong()},J.handleWebSocketMessage=function(re){if(re.data){var U=JSON.parse(re.data);if(U.requestId)J.emit("@"+U.requestId,U);else if(J.serviceMode===A.LiveStreamingServiceMode.INJECT)J.emit(A.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,U);else{I.report.requestWorkerEvent(J.spec.sid,{actionType:"status",serverCode:U.code,workerType:J.serviceMode===A.LiveStreamingServiceMode.TRANSCODE?1:2});var y=U.serverStatus&&U.serverStatus.url;y&&J.waitingResponseList.includes(y)&&200===U.code&&J.emit(y),J.emit(A.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,U)}}},J.spec=Y,J.token=N,J.serviceMode=te,J.websocket=new d.AgoraWebSocketManager("live-streaming"),J.websocket.on(A.WebSocketManagerEvents.CONNECTED,J.handleWebSocketOpen),J.websocket.on(A.WebSocketManagerEvents.ON_MESSAGE,J.handleWebSocketMessage),J.websocket.on(A.WebSocketManagerEvents.REQUEST_NEW_URLS,function(re,U){m.emitAsPromise(J,A.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(re).catch(U)}),J.websocket.on(A.WebSocketManagerEvents.RECONNECTING,function(){J.websocket.reconnectMode=J.reconnectMode}),J}return b(j,D),Object.defineProperty(j.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(N){this._gatewayConnectionState=N,"CONNECTED"===N&&this.emit("gateway-connected",N)},enumerable:!0,configurable:!0}),j.prototype.init=function(N){return this.websocket.init(N)},j.prototype.request=function(N,Y,te,J){return S(this,void 0,void 0,function(){var re,U,y,s,H,_,c,q,f,C,L=this;return w(this,function(Z){switch(Z.label){case 0:if(this.reqId+=1,re=this.reqId,"request"===N&&(this.commandReqId+=1),U=this.commandReqId,!re||!this.websocket)throw new g.AgoraRTCError(g.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(y=O.VERSION,"closed"===this.websocket.state)throw new g.AgoraRTCError(g.AgoraRTCErrorCode.WS_DISCONNECT);return s=function(){return new Promise(function(ee,le){var W=function(){"CONNECTED"===L.gatewayConnectionState&&"connected"===L.websocket.state&&(L.off("gateway-connected",W),L.websocket.off(A.WebSocketManagerEvents.CONNECTED,W),ee(void 0))};L.on("gateway-connected",W),L.websocket.once(A.WebSocketManagerEvents.CLOSED,function(){return le(new g.AgoraRTCError(g.AgoraRTCErrorCode.WS_ABORT))}),L.websocket.on(A.WebSocketManagerEvents.CONNECTED,W)})},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,s()];case 1:Z.sent(),Z.label=2;case 2:H=Promise.race([new Promise(function(ee,le){var W=function(){le(new g.AgoraRTCError(g.AgoraRTCErrorCode.WS_ABORT))};L.websocket.once(A.WebSocketManagerEvents.RECONNECTING,W),L.websocket.once(A.WebSocketManagerEvents.CLOSED,W),L.once("@"+re,function(B){ee(B)})}),E.wait(O.getParameter("LIVE_STREAMING_TIMEOUT")).then(function(){return!1})]),(_=R({command:N,sdkVersion:y,seq:re,requestId:re,allocate:te,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},Y)).clientRequest&&(_.clientRequest.workerToken=this.token),J&&I.report.requestWorkerEvent(this.spec.sid,R(R({},J),{requestId:U,actionType:"request",payload:JSON.stringify(Y.clientRequest),serverCode:0,code:0})),c=Date.now(),this.websocket.sendMessage(_),q=null,Z.label=3;case 3:return Z.trys.push([3,5,,8]),[4,H];case 4:return q=Z.sent(),[3,8];case 5:if(f=Z.sent(),"closed"===this.websocket.state)throw f;return[4,s()];case 6:return Z.sent(),[4,this.request(N,Y,te,J)];case 7:return[2,Z.sent()];case 8:if(!1===q)throw C=new g.AgoraRTCError(g.AgoraRTCErrorCode.NETWORK_TIMEOUT,(Y&&Y.clientRequest&&Y.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(A.LiveStreamingUapSignalEvents.WARNING,C,J&&J.url||"unknown url"),J&&I.report.requestWorkerEvent(this.spec.sid,R(R({},J),{requestId:U,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-c})),C;return J&&I.report.requestWorkerEvent(this.spec.sid,R(R({},J),{requestId:U,actionType:"response",payload:JSON.stringify(q.serverResponse),serverCode:q.code,success:200===q.code,responseTime:Date.now()-c})),200===q.code?[3,10]:[4,this.handleResponseError(q)];case 9:Z.sent(),Z.label=10;case 10:return[2,q]}})})},j.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},j.prototype.close=function(){var N="__VERSION__"===O.VERSION?"0.0.1":O.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:N,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},j.prototype.handleResponseError=function(N){return S(this,void 0,void 0,function(){var Y,te,J,re,U=this;return w(this,function(y){switch(P.default.debug("[live-streaming] receive response error "+N.code),N.code){case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return P.default.warning("live stream response already exists stream"),this.emit(A.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",Y=N.serverResponse.url),this.waitingResponseList.includes(Y)||this.waitingResponseList.push(Y),[2,new Promise(function(s,H){U.once(Y,function(){U.waitingResponseList.splice(U.waitingResponseList.indexOf(Y),1),s()}),setTimeout(function(){U.waitingResponseList.splice(U.waitingResponseList.indexOf(Y),1),H(new g.AgoraRTCError(g.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:N.code}))},1e4)})];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:N.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===N.serverResponse.command||"UninjectStream"===N.serverResponse.command)return[2];throw new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:N.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return te=new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(A.LiveStreamingUapSignalEvents.WARNING,te,N.serverResponse.url)];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return te=new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(A.LiveStreamingUapSignalEvents.WARNING,te,N.serverResponse.url)];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:N.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return te=new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(A.LiveStreamingUapSignalEvents.WARNING,te,N.serverResponse.url)];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:N.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===N.serverResponse.command||"UninjectStream"===N.serverResponse.command)return[2];throw new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===N.serverResponse.command||"UninjectStream"===N.serverResponse.command)return[2];if("UpdateTranscoding"===N.serverResponse.command||"ControlStream"===N.serverResponse.command)return[2,new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:N.code}).throw()];throw new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return this.waitingResponseList.includes(J=N.serverResponse.url)||this.waitingResponseList.push(J),re=new g.AgoraRTCError(g.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:N.code}),this.emit(A.LiveStreamingUapSignalEvents.WARNING,re,J),[2,new Promise(function(s,H){U.once(J,function(){U.waitingResponseList.splice(U.waitingResponseList.indexOf(J),1),s()}),setTimeout(function(){U.waitingResponseList.splice(U.waitingResponseList.indexOf(J),1),H(re)},1e4)})]}return[2]})})},j.prototype.startPingPong=function(){var N=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(function(){"connected"===N.websocket.state&&N.request("ping",{}).catch(function(){})},6e3)},j}(m.EventEmitter);X.AgoraLiveStreamingUapSignal=k},function(oe,X,x){"use strict";var M,b=this&&this.__extends||(M=function(P,I){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var D in k)k.hasOwnProperty(D)&&(E[D]=k[D])})(P,I)},function(P,I){function E(){this.constructor=P}M(P,I),P.prototype=null===I?Object.create(I):(E.prototype=I.prototype,new E)}),R=this&&this.__awaiter||function(P,I,E,k){return new(E||(E=Promise))(function(D,j){function N(J){try{te(k.next(J))}catch(re){j(re)}}function Y(J){try{te(k.throw(J))}catch(re){j(re)}}function te(J){var re;J.done?D(J.value):(re=J.value,re instanceof E?re:new E(function(U){U(re)})).then(N,Y)}te((k=k.apply(P,I||[])).next())})},S=this&&this.__generator||function(P,I){var E,k,D,j,N={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return j={next:Y(0),throw:Y(1),return:Y(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j;function Y(te){return function(J){return function(re){if(E)throw new TypeError("Generator is already executing.");for(;N;)try{if(E=1,k&&(D=2&re[0]?k.return:re[0]?k.throw||((D=k.return)&&D.call(k),0):k.next)&&!(D=D.call(k,re[1])).done)return D;switch(k=0,D&&(re=[2&re[0],D.value]),re[0]){case 0:case 1:D=re;break;case 4:return N.label++,{value:re[1],done:!1};case 5:N.label++,k=re[1],re=[0];continue;case 7:re=N.ops.pop(),N.trys.pop();continue;default:if(!((D=(D=N.trys).length>0&&D[D.length-1])||6!==re[0]&&2!==re[0])){N=0;continue}if(3===re[0]&&(!D||re[1]>D[0]&&re[1]<D[3])){N.label=re[1];break}if(6===re[0]&&N.label<D[1]){N.label=D[1],D=re;break}if(D&&N.label<D[2]){N.label=D[2],N.ops.push(re);break}D[2]&&N.ops.pop(),N.trys.pop();continue}re=I.call(P,N)}catch(U){re=[6,U],k=0}finally{E=D=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([te,J])}}},w=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(X,"__esModule",{value:!0});var v=x(24),A=x(36),d=x(31),m=x(27),g=w(x(0)),O=function(P){function I(E){var k=P.call(this)||this;return k.connectionID=0,k.currentURLIndex=0,k.reconnectMode="tryNext",k._state="closed",k.retryConfig=d.DEFAULT_RETRY_CONFIG,k.reconnectCount=0,k.name=E,k}return b(I,P),Object.defineProperty(I.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"state",{get:function(){return this._state},set:function(E){E!==this._state&&(this._state=E,"reconnecting"===this._state?this.emit(m.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(m.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(m.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(m.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),I.prototype.init=function(E){var k=this;return new Promise(function(D,j){k.urls=E;var N=k.urls[k.currentURLIndex];k.state="connecting",k.createWebSocketConnection(N).then(D).catch(j),k.once(m.WebSocketManagerEvents.CLOSED,function(){return j(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT))}),k.once(m.WebSocketManagerEvents.CONNECTED,function(){return D()})})},I.prototype.close=function(E,k){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var D=this.websocket;k?setTimeout(function(){return D.close()},500):D.close(),this.websocket=void 0}this.state=E?"failed":"closed"},I.prototype.reconnect=function(E){if(this.websocket){void 0!==E&&(this.reconnectMode=E);var k=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),k&&k.bind(this.websocket)({code:9999})}else g.default.warning("["+this.name+"] can not reconnect, no websocket")},I.prototype.sendMessage=function(E){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var k=JSON.stringify(E);try{this.websocket.send(k)}catch(D){throw new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+D.toString())}},I.prototype.createWebSocketConnection=function(E){return R(this,void 0,void 0,function(){var k,D=this;return S(this,function(j){return this.connectionID+=1,k=this.connectionID,[2,new Promise(function(N,Y){D.websocket&&(D.websocket.onclose=null,D.websocket.close()),g.default.debug("["+D.name+"] start connect, url: "+E);try{D.websocket=new WebSocket(E),D.websocket.binaryType="arraybuffer"}catch(J){var te=new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+J.toString());return g.default.error("["+D.name+"]"+te),void Y(te)}d.wait(5e3).then(function(){k===D.connectionID&&D.websocket&&D.websocket.readyState!==WebSocket.OPEN&&D.websocket&&D.websocket.close()}),D.websocket.onopen=function(){g.default.debug("["+D.name+"] websockect opened:",E),D.reconnectMode="retry",D.state="connected",D.reconnectCount=0,N()},D.websocket.onclose=function(J){return R(D,void 0,void 0,function(){var re,U;return S(this,function(y){switch(y.label){case 0:return g.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+J.code+", reason: "+J.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),re=A.emitAsInvokerNoResponse(this,m.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(re)]):[3,2];case 1:return U=y.sent(),"closed"===this.state?(g.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):U?(N(),[3,3]):(Y(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+J.code)),this.close(!0),[2]);case 2:Y(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+J.code)),this.close(),y.label=3;case 3:return[2]}})})},D.websocket.onmessage=function(J){D.emit(m.WebSocketManagerEvents.ON_MESSAGE,J)}})]})})},I.prototype.reconnectWithAction=function(E,k){return R(this,void 0,void 0,function(){var D,j,Y;return S(this,function(te){switch(te.label){case 0:return!k&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(D=d.getRetryWaitTime(this.reconnectCount,this.retryConfig),g.default.debug("["+this.name+"] wait "+D+"ms to reconnect websocket, mode: "+E),[4,d.wait(D)]):[2,!1];case 1:if(te.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,te.label=2;case 2:return te.trys.push([2,12,,14]),"retry"!==E?[3,4]:[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 3:return te.sent(),[3,11];case 4:return"tryNext"!==E?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,te.sent()];case 6:return g.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 7:return te.sent(),[3,11];case 8:return"recover"!==E?[3,11]:(g.default.debug("["+this.name+"] request new urls"),j=this,[4,A.emitAsPromise(this,m.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return j.urls=te.sent(),this.currentURLIndex=0,[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 10:te.sent(),te.label=11;case 11:return[2,!0];case 12:return Y=te.sent(),g.default.error("["+this.name+"] reconnect failed",Y.toString()),[4,this.reconnectWithAction(E)];case 13:return[2,te.sent()];case 14:return[2]}})})},I}(A.EventEmitter);X.AgoraWebSocketManager=O},function(oe,X,x){"use strict";var M=x(18),b=x(38),R=x(79),S=x(44);function w(A){var d=new R(A),m=b(R.prototype.request,d);return M.extend(m,R.prototype,d),M.extend(m,d),m}var v=w(x(41));v.Axios=R,v.create=function(A){return w(S(v.defaults,A))},v.Cancel=x(45),v.CancelToken=x(93),v.isCancel=x(40),v.all=function(A){return Promise.all(A)},v.spread=x(94),oe.exports=v,oe.exports.default=v},function(oe,X,x){"use strict";var M=x(18),b=x(39),R=x(80),S=x(81),w=x(44);function v(A){this.defaults=A,this.interceptors={request:new R,response:new R}}v.prototype.request=function(A){"string"==typeof A?(A=arguments[1]||{}).url=arguments[0]:A=A||{},A.method=(A=w(this.defaults,A)).method?A.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var d=[S,void 0],m=Promise.resolve(A);for(this.interceptors.request.forEach(function(g){d.unshift(g.fulfilled,g.rejected)}),this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});d.length;)m=m.then(d.shift(),d.shift());return m},v.prototype.getUri=function(A){return A=w(this.defaults,A),b(A.url,A.params,A.paramsSerializer).replace(/^\?/,"")},M.forEach(["delete","get","head","options"],function(A){v.prototype[A]=function(d,m){return this.request(M.merge(m||{},{method:A,url:d}))}}),M.forEach(["post","put","patch"],function(A){v.prototype[A]=function(d,m,g){return this.request(M.merge(g||{},{method:A,url:d,data:m}))}}),oe.exports=v},function(oe,X,x){"use strict";var M=x(18);function b(){this.handlers=[]}b.prototype.use=function(R,S){return this.handlers.push({fulfilled:R,rejected:S}),this.handlers.length-1},b.prototype.eject=function(R){this.handlers[R]&&(this.handlers[R]=null)},b.prototype.forEach=function(R){M.forEach(this.handlers,function(S){null!==S&&R(S)})},oe.exports=b},function(oe,X,x){"use strict";var M=x(18),b=x(82),R=x(40),S=x(41);function w(v){v.cancelToken&&v.cancelToken.throwIfRequested()}oe.exports=function(v){return w(v),v.headers=v.headers||{},v.data=b(v.data,v.headers,v.transformRequest),v.headers=M.merge(v.headers.common||{},v.headers[v.method]||{},v.headers),M.forEach(["delete","get","head","post","put","patch","common"],function(A){delete v.headers[A]}),(v.adapter||S.adapter)(v).then(function(A){return w(v),A.data=b(A.data,A.headers,v.transformResponse),A},function(A){return R(A)||(w(v),A&&A.response&&(A.response.data=b(A.response.data,A.response.headers,v.transformResponse))),Promise.reject(A)})}},function(oe,X,x){"use strict";var M=x(18);oe.exports=function(b,R,S){return M.forEach(S,function(w){b=w(b,R)}),b}},function(oe,X){var x,M,b=oe.exports={};function R(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}function w(E){if(x===setTimeout)return setTimeout(E,0);if((x===R||!x)&&setTimeout)return x=setTimeout,setTimeout(E,0);try{return x(E,0)}catch(k){try{return x.call(null,E,0)}catch(D){return x.call(this,E,0)}}}!function(){try{x="function"==typeof setTimeout?setTimeout:R}catch(E){x=R}try{M="function"==typeof clearTimeout?clearTimeout:S}catch(E){M=S}}();var v,A=[],d=!1,m=-1;function g(){d&&v&&(d=!1,v.length?A=v.concat(A):m=-1,A.length&&O())}function O(){if(!d){var E=w(g);d=!0;for(var k=A.length;k;){for(v=A,A=[];++m<k;)v&&v[m].run();m=-1,k=A.length}v=null,d=!1,function(D){if(M===clearTimeout)return clearTimeout(D);if((M===S||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(D);try{M(D)}catch(j){try{return M.call(null,D)}catch(N){return M.call(this,D)}}}(E)}}function P(E,k){this.fun=E,this.array=k}function I(){}b.nextTick=function(E){var k=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)k[D-1]=arguments[D];A.push(new P(E,k)),1!==A.length||d||w(O)},P.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=I,b.addListener=I,b.once=I,b.off=I,b.removeListener=I,b.removeAllListeners=I,b.emit=I,b.prependListener=I,b.prependOnceListener=I,b.listeners=function(E){return[]},b.binding=function(E){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(E){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},function(oe,X,x){"use strict";var M=x(18);oe.exports=function(b,R){M.forEach(b,function(S,w){w!==R&&w.toUpperCase()===R.toUpperCase()&&(b[R]=S,delete b[w])})}},function(oe,X,x){"use strict";var M=x(43);oe.exports=function(b,R,S){var w=S.config.validateStatus;!w||w(S.status)?b(S):R(M("Request failed with status code "+S.status,S.config,null,S.request,S))}},function(oe,X,x){"use strict";oe.exports=function(M,b,R,S,w){return M.config=b,R&&(M.code=R),M.request=S,M.response=w,M.isAxiosError=!0,M.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},M}},function(oe,X,x){"use strict";var M=x(88),b=x(89);oe.exports=function(R,S){return R&&!M(S)?b(R,S):S}},function(oe,X,x){"use strict";oe.exports=function(M){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(M)}},function(oe,X,x){"use strict";oe.exports=function(M,b){return b?M.replace(/\/+$/,"")+"/"+b.replace(/^\/+/,""):M}},function(oe,X,x){"use strict";var M=x(18),b=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];oe.exports=function(R){var S,w,v,A={};return R&&M.forEach(R.split("\n"),function(d){if(v=d.indexOf(":"),S=M.trim(d.substr(0,v)).toLowerCase(),w=M.trim(d.substr(v+1)),S){if(A[S]&&b.indexOf(S)>=0)return;A[S]="set-cookie"===S?(A[S]?A[S]:[]).concat([w]):A[S]?A[S]+", "+w:w}}),A}},function(oe,X,x){"use strict";var M=x(18);oe.exports=M.isStandardBrowserEnv()?function(){var b,R=/(msie|trident)/i.test(navigator.userAgent),S=document.createElement("a");function w(v){var A=v;return R&&(S.setAttribute("href",A),A=S.href),S.setAttribute("href",A),{href:S.href,protocol:S.protocol?S.protocol.replace(/:$/,""):"",host:S.host,search:S.search?S.search.replace(/^\?/,""):"",hash:S.hash?S.hash.replace(/^#/,""):"",hostname:S.hostname,port:S.port,pathname:"/"===S.pathname.charAt(0)?S.pathname:"/"+S.pathname}}return b=w(window.location.href),function(v){var A=M.isString(v)?w(v):v;return A.protocol===b.protocol&&A.host===b.host}}():function(){return!0}},function(oe,X,x){"use strict";var M=x(18);oe.exports=M.isStandardBrowserEnv()?{write:function(b,R,S,w,v,A){var d=[];d.push(b+"="+encodeURIComponent(R)),M.isNumber(S)&&d.push("expires="+new Date(S).toGMTString()),M.isString(w)&&d.push("path="+w),M.isString(v)&&d.push("domain="+v),!0===A&&d.push("secure"),document.cookie=d.join("; ")},read:function(b){var R=document.cookie.match(new RegExp("(^|;\\s*)("+b+")=([^;]*)"));return R?decodeURIComponent(R[3]):null},remove:function(b){this.write(b,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(oe,X,x){"use strict";var M=x(45);function b(R){if("function"!=typeof R)throw new TypeError("executor must be a function.");var S;this.promise=new Promise(function(v){S=v});var w=this;R(function(v){w.reason||(w.reason=new M(v),S(w.reason))})}b.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},b.source=function(){var R;return{token:new b(function(S){R=S}),cancel:R}},oe.exports=b},function(oe,X,x){"use strict";oe.exports=function(M){return function(b){return M.apply(null,b)}}},function(oe,X,x){"use strict";var M=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(X,"__esModule",{value:!0});var b=M(x(0)),R=1,S=function(){function w(v){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=R++,v&&(this.name=v),b.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(w.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),w.prototype.lock=function(){var v,A=this;this.locks+=1,b.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var d=new Promise(function(g){v=function(){A.locks-=1,b.default.debug("[lock-"+A.name+"-"+A.lockId+"] is not locked, current queue "+A.locks+"."),g()}}),m=this.lockingPromise.then(function(){return v});return this.lockingPromise=this.lockingPromise.then(function(){return d}),m},w}();X.PromiseMutex=S},function(oe,X,x){"use strict";x.r(X);var M=x(2),b=x(0),R=x(1),S=x(8),w=x(5),v=function(){};v.prototype.set=function(de,V){["BatteryLevel"].indexOf(de)>-1&&(this[de]=V)};var A=new function(){var de=Object(S.b)();return de.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},de.state=de.states.UNINIT,de.batteryManager=null,de._init=function(V,Ae){de.state=de.states.INITING,navigator.getBattery?navigator.getBattery().then(function(Be){de.batteryManager=Be,V&&setTimeout(function(){V()},0)}).catch(function(Be){b.default.debug("navigator.getBattery is disabled",Be),V&&V()}):(de.state=de.states.INITED,V&&V())},de._getBatteryStats=function(){var V={};return V.BatteryLevel=de.batteryManager&&de.batteryManager.level?Math.floor(100*de.batteryManager.level):"UNSUPPORTED",V},de.getStats=function(V,Ae){var Be=new v,ke=de._getBatteryStats();ke&&ke.BatteryLevel&&Be.set("BatteryLevel",ke.BatteryLevel),V&&V(Be)},de._init(),de},d=x(22),m=x(19),g=x(26),O=x(53),P=x(9),I=["live","rtc","web","interop","h264_interop","web-only"],E=["vp8","vp9","h264"],k=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],D=x(11),j=x.n(D),N=x(7),Y=x.n(N),te=x(13),J=x(4),re=x(10),U=x(20),y=x(6),s=x(14),H={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},_={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},c=function(de){var V={remoteStreamStorage:{},localStreamStorage:{}};return V.gatewayClient=de,V.checkAudioOutputLevel=function(Ae){return!(Ae&&parseInt(Ae.audioRecvBytesDelta)>0&&parseInt(Ae.audioDecodingNormalDelta)>0&&0===parseInt(Ae.audioOutputLevel))},V.checkAudioIntputLevel=function(Ae){return!Ae||0!==parseInt(Ae.audioInputLevel)},V.checkFramerateInput=function(Ae,Be){if(!Ae||!Be.attributes)return!0;var ke=parseInt(Be.attributes.maxFrameRate),Ve=parseInt(Ae.googFrameRateInput);return!ke||!Ve||!(ke>10&&Ve<5||ke<10&&ke>=5&&Ve<=1)},V.checkFramerateSent=function(Ae){return!(Ae&&parseInt(Ae.googFrameRateInput)>5&&parseInt(Ae.googFrameRateSent)<=1)},V.checkSendVideoBitrate=function(Ae){return!Ae||0!==parseInt(Ae.videoSendBytesDelta)},V.checkSendAudioBitrate=function(Ae){return!Ae||0!==parseInt(Ae.audioSendBytesDelta)},V.checkVideoDecode=function(Ae){return!Ae||0===parseInt(Ae.videoRecvBytesDelta)||0!==parseInt(Ae.googFrameRateDecoded)},V.checkAudioDecode=function(Ae){return!Ae||0===parseInt(Ae.audioRecvBytesDelta)||0!==parseInt(Ae.audioDecodingNormalDelta)},V.record=function(Ae,Be,ke,Ve,Ue){ke[Ae]||(ke[Ae]={isPrevNormal:!0,record:[]});var ie=ke[Ae],p=V["check"+Ae](Be,Ue);if(ie.record.push(p),ie.record.length>=5){ie.isCurNormal=-1!==ie.record.indexOf(!0);var $=_[Ae];ie.isPrevNormal&&!ie.isCurNormal&&V.gatewayClient.dispatchEvent({type:"exception",code:$,msg:H[$],uid:Ve}),!ie.isPrevNormal&&ie.isCurNormal&&V.gatewayClient.dispatchEvent({type:"exception",code:$+2e3,msg:H[$+2e3],uid:Ve}),ie.isPrevNormal=ie.isCurNormal,ie.record=[]}},V.setLocalStats=function(Ae){var Be={};Object.keys(Ae).map(function(ke){var Ve=Ae[ke],Ue=V.gatewayClient.localStreams[parseInt(ke)],ie=V.localStreamStorage[ke]||{};Ue&&Ue.hasVideo()&&(V.record("SendVideoBitrate",Ve.videoStats,ie,ke),V.record("FramerateInput",Ve.videoStats,ie,ke,Ue),V.record("FramerateSent",Ve.videoStats,ie,ke)),Ue&&Ue.hasAudio()&&(V.record("AudioIntputLevel",Ve.audioStats,ie,ke),V.record("SendAudioBitrate",Ve.audioStats,ie,ke)),Be[ke]=ie}),V.localStreamStorage=Be},V.setRemoteStats=function(Ae){var Be={};Object.keys(Ae).map(function(ke){var Ve=Ae[ke],Ue=de.remoteStreams[ke],ie=V.remoteStreamStorage[ke]||{};Ue&&Ue.hasVideo()&&Ue.isPlaying()&&V.record("VideoDecode",Ve.videoStats,ie,ke),Ue&&Ue.hasAudio()&&Ue.isPlaying()&&(V.record("AudioOutputLevel",Ve.audioStats,ie,ke),V.record("AudioDecode",Ve.audioStats,ie,ke)),Be[ke]=ie}),V.remoteStreamStorage=Be},V};function f(de,V){(null==V||V>de.length)&&(V=de.length);for(var Ae=0,Be=new Array(V);Ae<V;Ae++)Be[Ae]=de[Ae];return Be}var C,L=x(3),Z=new function(){var de=Object(S.b)();return de.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},de.state=de.states.UNINIT,de.type=null,de.lastConnectedAt=null,de.lastDisconnectedAt=null,de.lastTypeChangedAt=null,de.networkChangeTimer=null,de._init=function(V,Ae){if(de.state=de.states.INITING,navigator.connection&&navigator.connection.addEventListener){var Be=de._getNetworkInfo();de.type=Be&&Be.type,de.state=de.states.INITED,V&&V()}else de.state=de.states.UNINIT,Ae&&Ae("DO_NOT_SUPPORT")},de._getNetworkInfo=function(){return navigator.connection},de._reloadNetworkInfo=function(){var V=de._getNetworkInfo(),Ae=V&&V.type||"UNSUPPORTED",Be=Date.now();Ae!==de.type&&(de.lastTypeChangedAt=Be,"none"==Ae?de.lastDisconnectedAt=Be:"none"==de.type&&(de.lastConnectedAt=Be),de.type=Ae,de.dispatchEvent({type:"networkTypeChanged",networkType:Ae}))},de.getStats=function(V,Ae){var Be={},ke=de._getNetworkInfo();ke&&(Be.NetworkType=ke.type||"UNSUPPORTED"),setTimeout(function(){V(Be)},0)},de._init(function(){navigator.connection.addEventListener("change",function(){de._reloadNetworkInfo()}),de.networkChangeTimer=setInterval(function(){de._reloadNetworkInfo()},5e3)},function(V){}),de},ee=x(55),le=x(16),W=x(56),B=x.n(W),z=x(21),Q=function(){return"HTTPS"===(C||C||(C=(window.location.protocol.split(":")[0]||"").toUpperCase()))},ge=function(){return void 0!==window.isSecureContext},se="host",ae=function(de){var ie,p,V={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(V.mode=de.mode,V.codec=de.codec,V.clientId=Object(re.generateSessionId)().slice(0,5),V.uintUid=null,V.customReportCount=0,de=Y()({},de),V.aespassword=null,V.aesmode="none",V.hasPublished=!1,V.getSessionId=function(){return de.sessionId},V.startChannelMediaRelay=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{callback:function(he){if(he)return p&&p(he);p&&p()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(ie instanceof P.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var ce=ie.getSrcChannelMediaInfo(),fe=ie.getDestChannelMediaInfos();if(Object(L.isEmpty)(ce))throw"srcChannelMediaInfo should not be empty";if(Object(L.isEmpty)(fe)||0===fe.length)throw"destChannelMediaInfos should not be empty";if(!Object(re.is32Uint)(ce.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(L.isValidChannelName)(ce.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(ce.token&&!Object(L.isValidToken)(ce.token))throw"Invalid token in srcChannelMediaInfo";if(fe.forEach(function(he){if(!Object(re.is32Uint)(he.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(L.isValidChannelName)(he.channelName))throw"Invalid channelName in destChannelMediaInfo";if(he.token&&!Object(L.isValidToken)(he.token))throw"Invalid token in destChannelMediaInfo"}),V.gatewayClient.state!==te.a.CONNECTED)throw"startChannelMediaRelay should be used after join";V.gatewayClient.startChannelMediaRelay(ie).then(function(){$&&$()}).catch(function(he){$&&$(he)})},V.updateChannelMediaRelay=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{callback:function(he){if(he)return p&&p(he);p&&p()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(ie instanceof P.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var ce=ie.getSrcChannelMediaInfo(),fe=ie.getDestChannelMediaInfos();if(Object(L.isEmpty)(ce))throw"srcChannelMediaInfo should not be empty";if(Object(L.isEmpty)(fe)||0===fe.length)throw"destChannelMediaInfos should not be empty";if(!Object(re.is32Uint)(ce.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(L.isValidChannelName)(ce.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(ce.token&&!Object(L.isValidToken)(ce.token))throw"Invalid token in srcChannelMediaInfo";if(fe.forEach(function(he){if(!Object(re.is32Uint)(he.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(L.isValidChannelName)(he.channelName))throw"Invalid channelName in destChannelMediaInfo";if(he.token&&!Object(L.isValidToken)(he.token))throw"Invalid token in destChannelMediaInfo"}),V.gatewayClient.state!==te.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";V.gatewayClient.updateChannelMediaRelay(ie).then(function(){$&&$()}).catch(function(he){$&&$(he)})},V.stopChannelMediaRelay=function(ie){var p=R.report.reportApiInvoke(de.sessionId,{callback:function($){if($)return ie&&ie($);ie&&ie()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});V.gatewayClient.stopChannelMediaRelay().then(function(){p&&p()}).catch(function($){p&&p($)})},V.getConnectionState=function(){var ie=R.report.reportApiInvoke(de.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),p=te.a.connetionStateMap[V.gatewayClient.state];return ie(),p},V.setClientRole=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{callback:p,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(L.checkValidEnum)(ie,"setClientRole",[se,"audience"]),"rtc"===V.mode){var ce="RTC mode can not use setClientRole";return b.default.warning("[".concat(V.clientId,"] ").concat(ce)),$&&$(ce)}V.gatewayClient&&V.gatewayClient.state===te.a.CONNECTED?("audience"===ie&&(0===this.highStreamState?this._unpublish(this.highStream,function(){$&&$(null,{role:ie})},function(fe){$&&$(fe)}):V.gatewayClient.setClientRole("audience",$)),ie===se&&V.gatewayClient.setClientRole(se,$)):(V.gatewayClient.role=ie,$&&$(null,{role:ie}))},V.getGatewayInfo=function(ie){if(V.gatewayClient.state!==te.a.CONNECTED){var p="Client is not in connected state";return b.default.error("[".concat(V.clientId,"] ").concat(p)),void ie(p)}V.gatewayClient.getGatewayInfo(function($){ie(null,$)},ie)},V.renewToken=function(ie,p,$){var ce=R.report.reportApiInvoke(de.sessionId,{callback:function(fe,he){if(fe)return b.default.error("Failed to renew token ".concat(fe),he),$&&$(fe);p&&p(he)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(L.isValidToken)(ie))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return V.gatewayClient?V.key?(V.key=ie,void V.gatewayClient.renewToken(ie,function(fe){return ce(null,fe)},ce)):(b.default.error("[".concat(V.clientId,"] renewToken should not be called before user join")),ce(J.default.INVALID_OPERATION)):(b.default.error("[".concat(V.clientId,"] renewToken Failed. GatewayClient not Exist")),ce(J.default.INVALID_OPERATION))},V.setLowStreamParameter=function(ie){var p=R.report.reportApiInvoke(de.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(L.checkValidObject)(ie,"param");var $=ie.width,ce=ie.height,fe=ie.framerate,he=ie.bitrate;Object(L.isEmpty)($)||Object(L.checkValidNumber)($,"width"),Object(L.isEmpty)(ce)||Object(L.checkValidNumber)(ce,"height"),Object(L.isEmpty)(fe)||Object(L.checkValidNumber)(fe,"framerate"),Object(L.isEmpty)(he)||Object(L.checkValidNumber)(he,"bitrate",1,1e7),(!$&&ce||$&&!ce)&&b.default.warning("[".concat(V.clientId,"] The width and height parameters take effect only when both are set")),V.lowStreamParameter=ie,p()},V.init=function(ie,p,$){var ce=R.report.reportApiInvoke(de.sessionId,{callback:function(fe,he){if(fe)return $&&$(fe);p&&p(he)},name:"Client.init",options:arguments,tag:"tracer"});Object(L.checkValidString)(ie),Object(w.isChromeKernel)()&&Object(w.getChromeKernelVersion)()<=48?$?ce(J.default.BAD_ENVIRONMENT):Object(re.popBanTip)():(de.appId=ie,de.sessionId=Object(re.generateSessionId)(),ce())},V.setTurnServer=function(ie){var p=R.report.reportApiInvoke(de.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(V.gatewayClient&&V.gatewayClient.state!==te.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(V.useProxyServer)throw new Error("You have already set the proxy");if(V.useLocalAccessPoint)throw new Error("You have already set the local proxy");ie instanceof Array||(ie=[ie]);var $=[];ie.map(function(ce,fe){Object(L.checkValidObject)(ce,"turnServer");var he=ce.turnServerURL,K=ce.username,pe=ce.password,me=ce.udpport,be=ce.forceturn,ye=ce.tcpport;if(Object(L.checkValidString)(he,"turnServerURL"),Object(L.checkValidString)(K,"username"),Object(L.checkValidString)(pe,"password"),Object(L.checkValidString)(me,"udpport"),0===parseInt(me))throw new Error("udpport should not be ".concat(me));Object(L.isEmpty)(be)||Object(L.checkValidBoolean)(be,"forceturn");var Oe={mode:"manual"};if(Oe.url=he,Oe.udpport=me,Oe.username=K,Oe.credential=pe,Oe.forceturn=be||!1,!Object(L.isEmpty)(ye)){if(Object(L.checkValidString)(ye,"tcpport"),0===parseInt(ye))throw new Error("tcpport should not be ".concat(ye));Oe.tcpport=ye,b.default.info("[".concat(V.clientId,"] Set turnserver[").concat(fe,"] tcpurl. ").concat(Oe.url,":").concat(Oe.tcpport))}b.default.info("[".concat(V.clientId,"] Set turnserver[").concat(fe,"] udpurl. ").concat(Oe.url,":").concat(Oe.udpport,",username: ").concat(Oe.username)),$.push(Oe)}),V.turnServers=$,p()},V.setProxyServer=function(ie){var p=R.report.reportApiInvoke(de.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(V.gatewayClient&&V.gatewayClient.state!==te.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!ie)throw new Error("Do not set the proxyServer parameter as empty");if(V.useProxyServer)throw new Error("You have already set the proxy");if(V.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(L.checkValidString)(ie,"proxyServer"),V.proxyServer=ie,R.report.setProxyServer(ie),b.default.setProxyServer(ie),p()},V.startProxyServer=function(ie){var p=R.report.reportApiInvoke(de.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(V.gatewayClient&&V.gatewayClient.state!==te.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(V.proxyServer)throw new Error("You have already set the proxy");if(V.useLocalAccessPoint)throw new Error("You have already set the local proxy");V.useProxyServer=!0,V.proxyServerType=ie||1,p()},V.stopProxyServer=function(){var ie=R.report.reportApiInvoke(de.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(V.gatewayClient&&V.gatewayClient.state!==te.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");R.report.setProxyServer(),b.default.setProxyServer(),V.turnServers=[],V.proxyServer=null,V.useProxyServer=!1,V.proxyServerType=null,ie()},V.setEncryptionSecret=function(ie){var p=R.report.reportApiInvoke(de.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(L.checkValidString)(ie,"password");var $=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");$.test(ie)||console.warn("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),V.aespassword=ie,p()},V.setEncryptionMode=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(L.checkValidString)(ie,"encryptionMode"),-1===k.indexOf(ie))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');var ce=["aes-128-gcm2","aes-256-gcm2"];if(-1!==ce.indexOf(ie)){if(!p||!(p instanceof Uint8Array&&32===p.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(p)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));p&&(V.aesSalt=Object(re.uint8ArrayToBase64)(p)),V.aesmode=ie,$()},V.configPublisher=function(ie){var p=R.report.reportApiInvoke(de.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(L.checkValidObject)(ie,"config");var $=ie.width,ce=ie.height,fe=ie.framerate,he=ie.bitrate,K=ie.publisherUrl;Object(L.checkValidNumber)($,"width"),Object(L.checkValidNumber)(ce,"height"),Object(L.checkValidNumber)(fe,"framerate"),Object(L.checkValidNumber)(he,"bitrate",1,1e7),K&&Object(L.checkValidString)(K,"publisherUrl"),V.gatewayClient.configPublisher(ie),p()},V.enableDualStream=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{callback:function(ce,fe){if(ce)return p&&p(ce);ie&&ie(fe)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(w.getBrowserOS)()?(R.report.streamSwitch(de.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),$(J.default.IOS_NOT_SUPPORT)):Object(w.isWeChatBrowser)()?(R.report.streamSwitch(de.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),$(J.default.WECHAT_NOT_SUPPORT)):(R.report.streamSwitch(de.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),V.isDualStream=!0,V.highStream&&(V.highStream.isDualStream=!0),void(0===V.highStreamState?V._publishLowStream(function(ce){return $(null,ce)},function(ce){b.default.warning("[".concat(V.clientId,"]"),ce),$(J.default.ENABLE_DUALSTREAM_FAILED)}):$(1===V.highStreamState?J.default.STILL_ON_PUBLISHING:null)))},V.disableDualStream=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{callback:function(ce,fe){if(ce)return p&&p(ce);ie&&ie(fe)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});R.report.streamSwitch(de.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),V.isDualStream=!1,V.highStream&&(V.highStream.isDualStream=!1),0===V.highStreamState?V._unpublishLowStream(function(){V.highStream.lowStream=null,$()},function(ce){b.default.warning("[".concat(V.clientId,"]"),ce),$(J.default.DISABLE_DUALSTREAM_FAILED)}):1===V.highStreamState?$(J.default.STILL_ON_PUBLISHING):$()},V._getLowStream=function(ie,p){V.lowStream?ie(V.lowStream):V._createLowStream(function($){V.lowStream=$,ie(V.lowStream)},p)},V._createLowStream=function(ie,p){if(V.highStream&&V.highStream.stream){var $=Y()({},V.highStream.params);if($.streamID+=1,$.audio=!1,$.video)if(V.highStream.stream.getVideoTracks()[0]){var ce=new d.a($);ce.isLowStream=!0,ce.streamId=V.highStream.getId()+1;var fe={};V.lowStreamParameter&&(fe=Y()({},V.lowStreamParameter)),fe.width&&fe.height||(fe.width=160,fe.height=120),fe.framerate=fe.framerate||15,fe.bitrate=fe.bitrate||50,ce.setVideoProfileCustomPlus(fe);try{var he=B()(V.highStream,{width:ce.videoConstraint.width.ideal,height:ce.videoConstraint.height.ideal,framerate:ce.videoConstraint.frameRate});return ce.stream=he,V.highStream.lowStream=ce,V.highStream.userMuteVideo&&ce.muteVideo(),ie&&ie(ce)}catch(K){return p&&p(K)}}else p&&p(J.default.HIGH_STREAM_NOT_VIDEO_TRACE);else p&&p(J.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else p&&p(J.default.HIGH_STREAM_NOT_VIDEO_TRACE)},V._publishLowStream=function(ie,p){return 2!==V.lowStreamState?p&&p(J.default.LOW_STREAM_ALREADY_PUBLISHED):V.highStream&&V.highStream.hasScreen()?p&&p(J.default.SHARING_SCREEN_NOT_SUPPORT):void V._getLowStream(function($){V.lowStreamState=1,V.gatewayClient.publish($,{streamType:1},function(){V.lowStreamState=0,ie&&ie()},function(ce){1===V.lowStreamState&&(V.lowStreamState=2),b.default.debug("[".concat(V.clientId,"] publish low stream failed")),p&&p(ce)})},p)},V._unpublishLowStream=function(ie,p){if(0!==V.lowStreamState)return p&&p(J.default.LOW_STREAM_NOT_YET_PUBLISHED);V.lowStream&&(V.gatewayClient.unpublish(V.lowStream,{streamType:1},function(){},function($){b.default.debug("[".concat(V.clientId,"] unpublish low stream failed")),p&&p($)}),V.lowStream.close(),V.lowStream=null,V.lowStreamState=2,ie&&ie())},V.join=function(ie,p,$,ce,fe,he){ce&&"function"==typeof ce&&(he=fe,fe=ce,ce=null);var K=Q(),pe="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser",me=ge()?window.isSecureContext:"Browser Not Support",be=function(){b.default.warning(pe)};ge()?window.isSecureContext||be():K||be();var ye=R.report.reportApiInvoke(de.sessionId,{callback:function(Fe,i1){if(Fe)return he&&he(Fe);fe&&fe(i1)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:K,isSecureContext:me}},tag:"tracer"});if(ie&&!Object(L.isValidToken)(ie))return b.default.warning("[".concat(V.clientId,"] Param channelKey should be string")),ye(J.default.INVALID_PARAMETER);if(!Object(L.isValidChannelName)(p))return b.default.error("Invalid Channel Name ".concat(p)),b.default.warning("[".concat(V.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),ye(J.default.INVALID_PARAMETER);if("string"==typeof p&&""===p)return b.default.warning("[".concat(V.clientId,"] Param channel should not be empty")),ye(J.default.INVALID_PARAMETER);if(ce&&!Object(L.isValidString)(ce))return b.default.warning("[".concat(V.clientId,"] optionalInfo should be string")),ye(J.default.INVALID_PARAMETER);if($&&!Object(re.is32Uint)($)&&!Object(L.isValidString)($,1,255))return b.default.error("Invalid UID ".concat($," ").concat(j()($))),b.default.warning("[".concat(V.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),ye(J.default.INVALID_PARAMETER);if("string"==typeof $&&0==$.length)return b.default.warning("[".concat(V.clientId,"] String uid should not be empty")),ye(J.default.INVALID_PARAMETER);if("string"==typeof $&&$.length>256)return b.default.warning("[".concat(V.clientId,"] Length of string uid should be less than 255")),ye(J.default.INVALID_PARAMETER);b.default.stopWaitJoin(),V.highStream=null,V.lowStream=null,V.lowStreamParameter=null,V.isDualStream=!1,V.highStreamState=2,V.lowStreamState=2;var Oe=Date.now(),Le=setTimeout(function(){if(1!=V.gatewayClient.hasJoined){b.default.debug("[".concat(V.clientId,"] The time to join the channel is greater than 5 seconds "));var Fe=Date.now();R.report.joinChannelTimeOut({lts:Fe,sid:de.sessionId,cname:p,cid:ze&&ze.cid,uid:ze.uid||("string"==typeof $?void 0:$),elapse:Fe-Oe,timeout:5})}},5e3),ze={clientId:V.clientId,appId:de.appId,sid:de.sessionId,cname:p,uid:$,turnServers:V.turnServers.concat(),proxyServer:V.proxyServer,token:ie||de.appId,useProxyServer:V.useProxyServer,useLocalAccessPoint:V.useLocalAccessPoint,proxyServerType:V.proxyServerType,optionalInfo:ce};if("string"==typeof $&&(ze.stringUid=$,V.uintUid?(ze.uid=V.uintUid,delete V.uintUid):ze.uid=0),V.aespassword&&"none"!==V.aesmode&&Y()(ze,{aespassword:V.aespassword,aesmode:V.aesmode}),V.aesSalt&&(ze.aes_salt=V.aesSalt),R.report.sessionInit(de.sessionId,{lts:(new Date).getTime(),cname:p,appid:de.appId,mode:de.mode,succ:!0}),V.onSuccess=function(Fe){clearTimeout(Le),V.rtcStatsCollector.startNetworkQualityTimer(),V.onSuccess=null,ye(null,Fe)},V.onFailure=function(Fe){return ye(Fe)},V.channel=p,V.gatewayClient.state!==te.a.DISCONNECTED)return b.default.error("[".concat(V.clientId,"] Client already in connecting/connected state")),ye(J.default.INVALID_OPERATION),void R.report.joinGateway(de.sessionId,{lts:Date.now(),succ:!1,ec:J.default.INVALID_OPERATION,addr:null});V.gatewayClient.state=te.a.CONNECTING;var Ge=function(Fe,i1){b.default.info("[".concat(V.clientId,"] Joining channel: ").concat(p)),V.gatewayClient.dispatchEvent({type:"config-distribute",config:i1,joinInfo:ze}),V.key=ie||de.appId,ze.cid=Fe.cid,ze.uid||(ze.uid=Fe.uid),ze.vid=Fe.vid,ze.clientId=V.clientId,ze.apResponse=Fe.res,Fe.uni_lbs_ip&&Fe.uni_lbs_ip[1]&&(ze.uni_lbs_ip=Fe.uni_lbs_ip[1]),ze.gatewayAddr=Fe.gateway_addr,V.joinInfo=ze,V.gatewayClient.join(ze,V.key,function(We){b.default.info("[".concat(V.clientId,"] Join channel ").concat(p," success, join with uid: ").concat(We,".")),V.onSuccess=null,V.rtcStatsCollector.startNetworkQualityTimer(),ye(null,We)},function(We){return ye(We)})};ze.stringUid&&!ze.uid?(V.userAccountReq&&!V.userAccountReq.isFinished()&&V.userAccountReq.cancel(),V.userAccountReq=Object(U.getUserAccount)(ze,V.gatewayClient),V.userAccountReq.then(function(Fe){b.default.debug("getUserAccount Success ".concat(Fe.url," ").concat(ze.stringUid," => ").concat(Fe.uid)),ze.uid=Fe.uid,Object(U.getGatewayList)(ze,Ge,function(i1){return ye(i1)})}).catch(function(Fe){b.default.error("getUserAccount rejected",Fe),ye(Fe)})):Object(U.getGatewayList)(ze,Ge,function(Fe){return ye(Fe)})},V.renewChannelKey=function(ie,p,$){var ce=R.report.reportApiInvoke(de.sessionId,{callback:function(fe,he){if(fe)return $&&$(fe);p&&p(he)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(L.checkValidString)(ie,"key",1,2047),void 0===V.key?(b.default.error("[".concat(V.clientId,"] renewChannelKey should not be called before user join")),ce(J.default.INVALID_OPERATION)):(V.key=ie,V.gatewayClient.joinInfo.token=ie,V.gatewayClient.key=ie,V.gatewayClient.recover(),ce())},V.leave=function(ie,p){V.gatewayClient.isFirstSuccess=!0,V.gatewayClient.hasInvokeLeave=!0;var $=!1,ce=R.report.reportApiInvoke(de.sessionId,{callback:function(fe,he){if(fe)return p&&p(fe);V.gatewayClient.reconnectingCS=!1,V.gatewayClient.state=te.a.DISCONNECTED,clearTimeout(Object(U._getReconnectCSTimer)(V.clientId)),V._renewSession(),V.rtcStatsCollector.clearNetworkQualityTimer(),ie&&ie(he)},name:"Client.leave",options:arguments,tag:"tracer"});b.default.info("[".concat(V.clientId,"] Leaving channel")),V.userAccountReq&&!V.userAccountReq.isFinished()&&(V.userAccountReq.cancel(),V.gatewayClient.state===te.a.CONNECTING&&(V.gatewayClient.state=te.a.DISCONNECTED)),V._terminateLiveStreaming(),V.gatewayClient.leave(function(fe){$=!0,ce(null,fe)},ce),setTimeout(function(){$||(V.gatewayClient.socket&&(V.gatewayClient.socket.close(),V.gatewayClient.socket=null),V.gatewayClient.state=te.a.DISCONNECTED,ce(null,"LEAVE_MSG_TIMEOUT"))},Object(M.getParameter)("LEAVE_MSG_TIMEOUT"))},V._renewSession=function(){var ie=Object(re.generateSessionId)();if(b.default.debug("renewSession ".concat(de.sessionId," => ").concat(ie)),de.sessionId=ie,V.gatewayClient.peerPublishDurationMap.clear(),V.joinInfo&&(V.joinInfo.sid=ie),V.gatewayClient&&(V.gatewayClient.joinInfo&&(V.gatewayClient.joinInfo.sid=ie),V.gatewayClient.localStreams))for(var p in V.gatewayClient.localStreams){var $=V.gatewayClient.localStreams[p];$&&($.sid=ie)}},V._publish=function(ie,p,$,ce){if(2!==V.highStreamState)return b.default.warning("[".concat(V.clientId,"] Can't publish stream when stream already publish ").concat(ie.getId())),$&&$(J.default.STREAM_ALREADY_PUBLISHED);if(0===V.turnServers.length&&Object(M.getParameter)("FORCE_TURN")&&!Object(M.getParameter)("TURN_ENABLE_TCP")&&!Object(M.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");b.default.info("[".concat(V.clientId,"] Publishing stream, uid ").concat(ie.getId())),V.highStream=ie,V.highStreamState=1,V.highStream.streamId=V.joinInfo.stringUid||V.joinInfo.uid,V.hasPublished=!1;var fe=function(he,K,pe){V.gatewayClient.publish(he,{streamType:0},function(){he.sid=de.sessionId,V.highStreamState=0,b.default.info("[".concat(V.clientId,"] Publish success, uid: ").concat(he.getId())),V.highStream&&(V.highStream.isDualStream=V.isDualStream),V.isDualStream?V._publishLowStream(function(){K&&K()},function(me){b.default.warning("[".concat(V.clientId,"] "),me),le.a.replaceWithCanvasTrack(he).then(function(){K&&K()})}):le.a.replaceWithCanvasTrack(he).then(function(){K&&K()})},pe)};"audience"!==V.gatewayClient.role||"live"!==V.mode||ce?fe(ie,p,$):V.gatewayClient.setClientRole(se,function(he){if(he)return $&&$(he);fe(ie,p,$)})},V._unpublish=function(ie,p,$,ce){if(0!==V.highStreamState)return b.default.warning("[".concat(V.clientId,"] Can't unpublish stream when stream not publish")),$&&$(J.default.STREAM_NOT_YET_PUBLISHED);b.default.info("[".concat(V.clientId,"] Unpublish stream, uid ").concat(ie.getId()));var fe=function(he,K,pe){V.isDualStream&&V.lowStream&&V._unpublishLowStream(null,pe),V.gatewayClient.unpublish(he,{streamType:0},function(){V.highStreamState=2,b.default.info("[".concat(V.clientId,"] Unpublish stream success, uid: ").concat(he.getId())),V.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:he}),K&&K()},function(me){b.default.info("[".concat(V.clientId,"] Unpublish stream fail, uid: ").concat(he.getId())),pe&&pe(me)})};V.gatewayClient.role!==se||"live"!==V.mode||ce?fe(ie,p,$):V.gatewayClient.setClientRole("audience",function(he){if(he)return $&&$(he);fe(ie,p,$)})},V.publish=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{callback:function(ce,fe){if(ce)return 1===V.highStreamState&&"REQUEST_ABORT"!==ce&&(V.highStreamState=2),p&&p(ce)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!p}});2===V.highStreamState?ie._hasVideoTracks()||ie._hasAudioTracks()?(V.gatewayClient.publishRequestId=Object(re.generateId)(),V._publish(ie,function(ce){return $(null,ce)},function(ce){return $(ce)})):$(J.default.NO_TRACK_IN_STREAM):$(J.default.STREAM_ALREADY_PUBLISHED)},V.unpublish=function(ie,p,$){var ce=R.report.reportApiInvoke(de.sessionId,{callback:function(fe,he){if(fe)return p&&p(fe);$&&$(he)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!p}});0===V.highStreamState?(V.gatewayClient.publishRequestId=null,V._unpublish(ie,function(fe){return ce(null,fe)},function(fe){return ce(fe)})):ce(J.default.STREAM_NOT_YET_PUBLISHED)},V.subscribe=function(ie,p,$){var ce=R.report.reportApiInvoke(de.sessionId,{callback:function(K,pe){if(K)return $&&$(K)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:p,onFailure:!!$}});"function"==typeof p&&($=p,p=null),Object(L.checkValidObject)(ie,"stream"),Object(L.isEmpty)(p)||(Object(L.checkValidObject)(p,"options"),Object(L.isEmpty)(p.video)||Object(L.checkValidBoolean)(p.video,"options.video"),Object(L.isEmpty)(p.audio)||Object(L.checkValidBoolean)(p.audio,"options.audio"));var fe={video:!0,audio:!0};if(!Object(L.isEmpty)(p)){if(Object(w.isSafari)()&&(!p.video||!p.audio)){var he="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return b.default.error("[".concat(V.clientId,"] "),he),void ce(he)}if(!Object(L.isEmpty)(p.video)&&!Object(L.isValidBoolean)(p.video)||!Object(L.isEmpty)(p.audio)&&!Object(L.isValidBoolean)(p.audio)||!1===p.audio&&!1===p.video)return he="INVALID_PARAMETER ".concat(JSON.stringify(p)),b.default.error("[".concat(V.clientId,"] "),he),void ce(he)}ie.subscribeOptions?(Y()(ie.subscribeOptions,fe,p),V.gatewayClient.subscribeChange(ie,function(K){return ce(null,K)},ce)):(V.gatewayClient.subscribeRequestId.set(ie.getId(),Object(re.generateId)()),ie.subscribeOptions=Y()({},fe,p),V.gatewayClient.subscribe(ie,function(K){return ce(null,K)},ce))},V.unsubscribe=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{callback:function(ce,fe){if(ce)return p&&p(ce)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!p}});b.default.info("[".concat(V.clientId,"] Unsubscribe stream, uid: ").concat(ie.getId())),V.gatewayClient.subscribeRequestId.delete(ie.getId()),V.gatewayClient.unsubscribe(ie,function(ce){return $(null,ce)},$)},V.setRemoteVideoStreamType=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:p}});Object(L.checkValidEnum)(p,"streamType",[0,1]),V.gatewayClient.setRemoteVideoStreamType(ie,p),$()},V.setStreamFallbackOption=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:p}});Object(L.checkValidEnum)(p,"fallbackType",[0,1,2]),V.gatewayClient.setStreamFallbackOption(ie,p),$()},V.enableAudioVolumeIndicator=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});ie=ie||2e3,p=p||3,Object(L.checkValidNumber)(p,"smooth",1,100),Object(L.checkValidNumber)(ie,"interval",50,1e5),V.audioVolumeIndication=V.audioVolumeIndication||{enabled:!0},V.audioVolumeIndication.interval=ie,V.audioVolumeIndication.smooth=p,V.audioVolumeIndication={interval:ie,smooth:p},b.default.info("[".concat(V.clientId,"] enableAudioVolumeIndicator interval ").concat(ie," smooth ").concat(p)),V.gatewayClient.enableAudioVolumeIndicator(ie,p),$()},V.getNetworkStats=function(ie,p){return b.default.deprecate("[".concat(V.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),Z.getStats(ie,p)},V.getSystemStats=function(ie,p){return A.getStats(ie,p)},V.getRecordingDevices=function(ie,p){return m.a.getRecordingDevices(ie,p)},V.getPlayoutDevices=function(ie,p){return m.a.getPlayoutDevices(ie,p)},V.getCameras=function(ie,p){return m.a.getCameras(ie,p)},V.getRemoteAudioStats=function(ie,p){return V.rtcStatsCollector.getRemoteAudioStats(ie,p)},V.getLocalAudioStats=function(ie,p){return V.rtcStatsCollector.getLocalAudioStats(ie,p)},V.getRemoteVideoStats=function(ie,p){return V.rtcStatsCollector.getRemoteVideoStats(ie,p)},V.getLocalVideoStats=function(ie,p){return V.rtcStatsCollector.getLocalVideoStats(ie,p)},V._getRemoteVideoQualityStats=function(ie,p){return V.rtcStatsCollector.getRemoteVideoQualityStats(ie,p)},V._getRemoteAudioQualityStats=function(ie,p){return V.rtcStatsCollector.getRemoteAudioQualityStats(ie,p)},V.getTransportStats=function(ie,p){return V.rtcStatsCollector.getTransportStats(function($){return Z.getStats(function(ce){var fe=Y()({},$,ce);ie&&ie(fe)},p)},p)},V.getSessionStats=function(ie,p){return V.rtcStatsCollector.getSessionStats(ie,p)},V.onNetworkQuality=function(){return V.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},V.sendMetadata=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(ce){if(ce)return p&&p(ce);p&&p()}});V.gatewayClient.sendMetadata(ie,$)},V.sendCustomReportMessage=function(ie,p,$,ce,fe,he){Object(M.getParameter)("CR")?V.customReportCount>Object(M.getParameter)("CRL")?he&&he("REPORT_LIMITED"):(V.gatewayClient.hasJoined||(b.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),he&&he("REPORT_BEFORE_JOINED")),V.customReportTimer||(V.customReportTimer=setInterval(function(){V.customReportCount=0},Object(M.getParameter)("CRI"))),Object(L.checkValidString)(ie,"reportId",0,100,!1),Object(L.checkValidString)(p,"category",0,100,!1),Object(L.checkValidString)($,"event",0,100,!1),Object(L.checkValidString)(ce,"label",0,100,!1),Object(L.checkValidNumber)(fe,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),V.customReportCount++,R.report.sendCustomReportMessage(de.sessionId,{reportId:ie,category:p,event:$,label:ce,value:fe,lts:Date.now()},function(K){K?he&&he("REPORT_FAILED"):he&&he()})):he&&he("REPORT_FORBIDDEN")},V.setLocalAccessPoints=function(ie,p){var $=R.report.reportApiInvoke(de.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(L.checkValidArray)(ie,"serverList"),Object(L.checkValidString)(p,"domain"),V.useProxyServer)throw new Error("You have already set the proxy");var ce=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;ie=ie.map(function(fe){return ce.test(fe)?"".concat(fe.replace(/\./g,"-"),".").concat(p):fe}),V.useLocalAccessPoint=!0,Object(M.setParameter)("WEBCS_DOMAIN",ie),Object(M.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",ie),Object(M.setParameter)("GATEWAY_DOMAINS",[p]),Object(M.setParameter)("EVENT_REPORT_DOMAIN",ie[Math.floor(Math.random()*ie.length)]),Object(M.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",ie[Math.floor(Math.random()*ie.length)]),Object(M.setParameter)("LOG_UPLOAD_SERVER","".concat(ie[Math.floor(Math.random()*ie.length)],":6444")),$()},de.clientId=V.clientId,V.gatewayClient=Object(te.a)(de),V.listenerLoggerTimer=null,V.listenerLoggerCache=[],V.on=function(ie,p){V.gatewayClient.on(ie,p),V.listenerLoggerCache.push("".concat(ie).concat(p.name?":"+p.name:"")),V.listenerLoggerTimer?clearTimeout(V.listenerLoggerTimer):b.default.info("[".concat(V.clientId,"] Adding event handler on ").concat(ie)),V.listenerLoggerTimer=setTimeout(function(){V.listenerLoggerCache.length&&(V.listenerLoggerTimer=null,b.default.info("[".concat(V.clientId,"] Added event handler on ").concat(V.listenerLoggerCache.join(", "))),V.listenerLoggerCache=[])},0)},V.off=function(ie,p){b.default.info("remove event handler from [".concat(ie,"]")),V.gatewayClient.removeEventListener(ie,p)},V.rtcStatsCollector=(ie=V.gatewayClient,(p=Object(S.b)()).gatewayClient=ie,p.exceptionMonitor=new c(ie),p.localStats={},p.remoteStats={},p.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},p.getRemoteAudioStats=function($){var ce=p.gatewayClient.traffic_stats,fe={};for(var he in p.remoteStats){var K={},pe=p.remoteStats[he];if(Object(y.b)(K,"End2EndDelay",pe.peer_delay&&pe.peer_delay.audio_delay),Object(y.b)(K,"TransportDelay",pe.peer_delay&&pe.peer_delay.e2e_delay),Object(y.b)(K,"PacketLossRate",pe.peer_delay&&pe.peer_delay.e2e_audio_lost_ratio_400ms),Object(y.b)(K,"RecvLevel",pe.audioStats&&pe.audioStats.audioOutputLevel),Object(y.b)(K,"RecvBitrate",pe.audioRecvBitrate),Object(y.b)(K,"CodecType",pe.audioStats&&pe.audioStats.googCodecName),Object(y.b)(K,"MuteState",pe.audioDisabled),Object(y.b)(K,"TotalFreezeTime",pe.audioStats&&pe.audioStats.audioTotalFreezeTime),Object(y.b)(K,"TotalPlayDuration",pe.audioStats&&pe.audioStats.audioTotalPlayDuration),ce&&ce.peer_delay){var me=ce.peer_delay.find(function(ye){return ye.peer_uid==he});if(me){var be=me.peer_publish_audio_duration+(Date.now()-ce.timestamp);Object(y.b)(K,"AudioPublishDuration",be)}else Object(y.b)(K,"AudioPublishDuration",-1)}fe[he]=K}$&&$(fe)},p.getLocalAudioStats=function($){var ce={};for(var fe in p.localStats){var he={},K=p.localStats[fe];Object(y.b)(he,"RecordingLevel",K.audioStats&&K.audioStats.audioInputLevel),Object(y.b)(he,"SendLevel",K.audioStats&&K.audioStats.totalAudioEnergy),Object(y.b)(he,"SamplingRate",K.audioStats&&K.audioStats.totalSamplesDuration),Object(y.b)(he,"SendBitrate",K.audioSendBitrate),Object(y.b)(he,"CodecType",K.audioStats&&K.audioStats.googCodecName),Object(y.b)(he,"MuteState",K.audioDisabled),Object(y.b)(he,"audioSendPacketsLost",K.audioStats&&K.audioStats.packetsLost);var pe=p.gatewayClient.localStreams[fe];pe&&pe.isPlaying()&&Object(y.b)(he,"MuteState",pe.userMuteAudio?"1":"0"),ce[fe]=he}$&&$(ce)},p.getRemoteVideoStats=function($){var ce=p.gatewayClient.traffic_stats,fe={};for(var he in p.remoteStats){var K={},pe=p.remoteStats[he];if(Object(y.b)(K,"End2EndDelay",pe.peer_delay&&pe.peer_delay.video_delay),Object(y.b)(K,"TransportDelay",pe.peer_delay&&pe.peer_delay.e2e_delay),Object(y.b)(K,"PacketLossRate",pe.peer_delay&&pe.peer_delay.e2e_video_lost_ratio_400ms),Object(y.b)(K,"RecvBitrate",pe.videoRecvBitrate),Object(y.b)(K,"RecvResolutionWidth",pe.videoStats&&pe.videoStats.googFrameWidthReceived),Object(y.b)(K,"RecvResolutionHeight",pe.videoStats&&pe.videoStats.googFrameHeightReceived),Object(y.b)(K,"RenderResolutionWidth",pe.videoStats&&pe.videoStats.renderRemoteWidth),Object(y.b)(K,"RenderResolutionHeight",pe.videoStats&&pe.videoStats.renderRemoteHeight),Object(y.b)(K,"RenderFrameRate",pe.videoStats&&pe.videoStats.googFrameRateOutput),Object(y.b)(K,"MuteState",pe.videoDisabled),Object(y.b)(K,"TotalFreezeTime",pe.videoStats&&pe.videoStats.videoTotalFreezeTime),Object(y.b)(K,"TotalPlayDuration",pe.videoStats&&pe.videoStats.videoTotalPlayDuration),ce&&ce.peer_delay){var me=ce.peer_delay.find(function(ye){return ye.peer_uid==he});if(me){var be=me.peer_publish_video_duration+(Date.now()-ce.timestamp);Object(y.b)(K,"VideoPublishDuration",be)}else Object(y.b)(K,"VideoPublishDuration",-1)}fe[he]=K}$&&$(fe)},p.getLocalVideoStats=function($){var ce={};for(var fe in p.localStats){var he={},K=p.localStats[fe];Object(y.b)(he,"TargetSendBitrate",K.videoTargetSendBitrate),Object(y.b)(he,"SendFrameRate",K.videoStats&&K.videoStats.googFrameRateSent),Object(y.b)(he,"SendBitrate",K.videoSendBitrate),Object(y.b)(he,"SendResolutionWidth",K.videoStats&&K.videoStats.googFrameWidthSent),Object(y.b)(he,"SendResolutionHeight",K.videoStats&&K.videoStats.googFrameHeightSent),Object(y.b)(he,"CaptureResolutionWidth",K.videoStats&&K.videoStats.googFrameWidthInput),Object(y.b)(he,"CaptureResolutionHeight",K.videoStats&&K.videoStats.googFrameHeightInput),Object(y.b)(he,"EncodeDelay",K.videoStats&&K.videoStats.googAvgEncodeMs),Object(y.b)(he,"MuteState",K.videoDisabled),Object(y.b)(he,"TotalFreezeTime",K.videoStats&&K.videoStats.videoTotalFreezeTime),Object(y.b)(he,"TotalDuration",K.videoStats&&K.videoStats.videoTotalPlayDuration),Object(y.b)(he,"CaptureFrameRate",K.videoStats&&K.videoStats.googFrameRateSent),Object(y.b)(he,"videoSendPacketsLost",K.videoStats&&K.videoStats.packetsLost),K.videoStats&&!K.videoStats.googFrameWidthInput&&Object(y.b)(he,"CaptureResolutionWidth",K.videoStats&&K.videoStats.renderLocalWidth),K.videoStats&&!K.videoStats.googFrameHeightInput&&Object(y.b)(he,"CaptureResolutionHeight",K.videoStats&&K.videoStats.renderLocalHeight),ce[fe]=he}$&&$(ce)},p.getRemoteVideoQualityStats=function($){var ce={};for(var fe in p.remoteStats){var he={},K=p.remoteStats[fe];Object(y.b)(he,"videoReceiveDelay",K.videoStats&&K.videoStats.googCurrentDelayMs),Object(y.b)(he,"VideoFreezeRate",K.videoStats&&K.videoStats.videoFreezeRate),Object(y.b)(he,"FirstFrameTime",K.firstFrameTime),ce[fe]=he}$&&$(ce)},p.getRemoteAudioQualityStats=function($){var ce={};for(var fe in p.remoteStats){var he={},K=p.remoteStats[fe];Object(y.b)(he,"audioReceiveDelay",K.audioStats&&K.audioStats.googCurrentDelayMs),Object(y.b)(he,"AudioFreezeRate",K.videoStats&&K.videoStats.videoFreezeRate),ce[fe]=he}$&&$(ce)},p.getTransportStats=function($){var ce={},fe={},he=p.gatewayClient.traffic_stats,K=he.peer_delay;if(Object(y.b)(ce,"OutgoingAvailableBandwidth",p.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(y.b)(ce,"RTT",he&&2*he.access_delay),K){var pe,me=function(de){if("undefined"==typeof Symbol||null==de[Symbol.iterator]){if(Array.isArray(de)||(de=function(ie,p){if(ie){if("string"==typeof ie)return f(ie,p);var $=Object.prototype.toString.call(ie).slice(8,-1);if("Object"===$&&ie.constructor&&($=ie.constructor.name),"Map"===$||"Set"===$)return Array.from($);if("Arguments"===$||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return f(ie,p)}}(de))){var V=0,Ae=function(){};return{s:Ae,n:function(){return V>=de.length?{done:!0}:{done:!1,value:de[V++]}},e:function(ie){throw ie},f:Ae}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Be,ke,Ve=!0,Ue=!1;return{s:function(){Be=de[Symbol.iterator]()},n:function(){var ie=Be.next();return Ve=ie.done,ie},e:function(ie){Ue=!0,ke=ie},f:function(){try{Ve||null==Be.return||Be.return()}finally{if(Ue)throw ke}}}}(K);try{for(me.s();!(pe=me.n()).done;){var be=pe.value;be.downlink_estimate_bandwidth&&(fe[be.peer_uid]=be.downlink_estimate_bandwidth/1e3+"")}}catch(ye){me.e(ye)}finally{me.f()}}ce.IncomingAvailableBandwidth=fe,$&&$(ce)},p.getSessionStats=function($){var ce={},fe=p.gatewayClient.traffic_stats,he=p.gatewayClient.socket,K=0,pe=0;for(var me in p.remoteStats)(be=p.remoteStats[me])&&be.videoStats&&be.videoStats.videoRecvBytesDelta&&(pe+=parseInt(be.videoStats.videoRecvBytesDelta)),be&&be.audioStats&&be.audioStats.audioRecvBytesDelta&&(pe+=parseInt(be.audioStats.audioRecvBytesDelta));for(var me in p.localStats){var be;(be=p.localStats[me])&&be.videoStats&&be.videoStats.videoSendBytesDelta&&(K+=parseInt(be.videoStats.videoSendBytesDelta)),be&&be.audioStats&&be.audioStats.audioSendBytesDelta&&(K+=parseInt(be.audioStats.audioSendBytesDelta))}var ye=K+p.session.WSSendBytesDelta+p.session.HTTPSendBytesDelta,Oe=pe+p.session.WSRecvBytesDelta+p.session.HTTPRecvBytesDelta,Le=p.session.sendBytes+Object(s.getHTTPSendBytes)(),ze=p.session.recvBytes+Object(s.getHTTPRecvBytes)();p.gatewayClient.socket&&p.gatewayClient.socket.state===p.gatewayClient.CONNECTED&&(Le+=he.getSendBytes(),ze+=he.getRecvBytes());var Ge=1;fe.peer_delay&&(Ge=fe.peer_delay.length,Ge+=1),he?Object(y.b)(ce,"Duration",he.getDuration()):Object(y.b)(ce,"Duration",0),Object(y.b)(ce,"UserCount",Ge),Object(y.b)(ce,"SendBytes",Le),Object(y.b)(ce,"RecvBytes",ze),Object(y.b)(ce,"SendBitrate",8*ye/1e3),Object(y.b)(ce,"RecvBitrate",8*Oe/1e3),$&&$(ce)},p.isLocalVideoFreeze=function($,ce){var fe=0,he=0;if(!$||!ce)return!1;if(Object(w.isChrome)()||Object(w.isOpera)())fe=$.googFrameRateInput,he=$.googFrameRateSent;else if(Object(w.isSafari)())fe=parseInt($.framerateMean),he=parseInt($.framesEncoded)-parseInt(ce.framesEncoded);else{if(!Object(w.isFireFox)())return!1;fe=parseInt($.framerateMean),he=parseInt($.framesEncoded)-parseInt(ce.framesEncoded)}return fe>5&&he<3},p.isRemoteVideoFreeze=function($,ce){var fe=0,he=0;if(!$||!ce)return!1;if(Object(w.isChrome)()||Object(w.isOpera)())fe=$.googFrameRateReceived,he=$.googFrameRateDecoded;else if(Object(w.isSafari)())fe=$.framerateMean,he=parseInt($.framesDecoded)-parseInt(ce.framesDecoded);else{if(!Object(w.isFireFox)())return!1;fe=parseInt($.framesReceived)-parseInt(ce.framesReceived),he=parseInt($.framesDecoded)-parseInt(ce.framesDecoded)}return fe>5&&fe<10&&he<3||fe>10&&fe<20&&he<4||fe>20&&he<5},p.isAudioFreeze=function($){if(Object(w.isChrome)()&&$){if($.googDecodingPLC&&$.googDecodingPLCCNG&&$.googDecodingCTN)return(parseInt($.googDecodingPLC)+parseInt($.googDecodingPLCCNG))/parseInt($.googDecodingCTN)>.2}else if((Object(w.isSafari)()||Object(w.isFireFox)())&&$.packetsLost&&$.packetsReceived)return parseInt($.packetsLost)/(parseInt($.packetsLost)+parseInt($.packetsReceived))>.2;return!1},p.isAudioDecodeFailed=function($){return!!((Object(w.isChrome)()||Object(w.isOpera)())&&$&&parseInt($.bytesReceived)>0&&0===parseInt($.googDecodingNormal))},p.startNetworkQualityTimer=function(){p.clearNetworkQualityTimer(),p.networkQualityTimer=setInterval(function(){if(p.gatewayClient.state===te.a.CONNECTED&&navigator.onLine){var $=p.gatewayClient.traffic_stats;p.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:p.networkQualityTrans($.uplink_network_quality),downlinkNetworkQuality:p.networkQualityTrans($.downlink_network_quality)})}else p.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3)},p.clearNetworkQualityTimer=function(){p.networkQualityTimer&&clearInterval(p.networkQualityTimer)},p.networkQualityTrans=function($){return $>=0&&$<.17?1:$>=.17&&$<.36?2:$>=.36&&$<.59?3:$>=.59&&$<=1?4:$>1?5:0},p.getStatsTimer=setInterval(function(){var $=p.gatewayClient.traffic_stats,ce=Date.now();p.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(p.localStats).length&&p.exceptionMonitor.setLocalStats(p.localStats),Object.keys(p.remoteStats).length&&p.exceptionMonitor.setRemoteStats(p.remoteStats);var fe={};Object.keys(p.gatewayClient.remoteStreams).forEach(function(pe){var me=p.gatewayClient.remoteStreams[pe],be=p.remoteStats[pe],ye={id:pe,updatedAt:ce};fe[pe]=ye,ye.firstFrameTime=me.firstFrameTime,be?(ye.audioTotalPlayDuration=be.audioTotalPlayDuration+1,ye.audioTotalFreezeTime=be.audioTotalFreezeTime,ye.isAudioFreeze=!1,ye.isAudioDecodeFailed=!1,ye.videoTotalPlayDuration=be.videoTotalPlayDuration+1,ye.videoTotalFreezeTime=be.videoTotalFreezeTime,ye.isVideoFreeze=!1):(ye.audioTotalPlayDuration=1,ye.audioTotalFreezeTime=0,ye.videoTotalPlayDuration=1,ye.videoTotalFreezeTime=0);var Oe=$&&$.peer_delay&&$.peer_delay.find(function(Le){return Le.peer_uid==pe});Oe&&(ye.peer_delay=Oe),me&&(me.isPlaying()&&(ye.audioDisabled=me.userMuteAudio||me.peerMuteAudio?"1":"0",ye.videoDisabled=me.userMuteVideo||me.peerMuteVideo?"1":"0"),be&&be.peer_delay&&Oe&&be.peer_delay.stream_type!==Oe.stream_type&&p.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:pe,streamType:Oe.stream_type}),me.pc&&"established"==me.pc.state&&me.pc.getStats(function(Le){if(ye.pcStats=Le,ye.audioStats=Le.find(function(We){return"audio"==We.mediaType&&(We.id.indexOf("_recv")>-1||We.id.toLowerCase().indexOf("inbound")>-1)}),ye.videoStats=Le.find(function(We){return"video"==We.mediaType&&(We.id.indexOf("_recv")>-1||We.id.toLowerCase().indexOf("inbound")>-1)}),be&&be.audioStats&&ye.audioStats){var ze=parseInt(ye.audioStats.bytesReceived)-parseInt(be.audioStats.bytesReceived),Ge=parseInt(ye.audioStats.googDecodingNormal)-parseInt(be.audioStats.googDecodingNormal);if(ye.audioStats.audioRecvBytesDelta=ze,ye.audioStats.audioDecodingNormalDelta=Ge,p.session.recvBytes+=ze,isFinite(ze)&&ye.audioStats.timestamp){var Fe=ye.audioStats.timestamp.getTime()-be.audioStats.timestamp.getTime();ye.audioRecvBitrate=Math.floor(8*ze/Fe)}p.isAudioFreeze(ye.audioStats)&&ye.audioTotalPlayDuration>10&&(ye.audioTotalFreezeTime++,ye.isAudioFreeze=!0),p.isAudioDecodeFailed(ye.audioStats)&&ye.audioTotalPlayDuration>10&&(ye.isAudioDecodeFailed=!0),ye.audioStats.audioTotalFreezeTime=ye.audioTotalFreezeTime,ye.audioStats.audioTotalPlayDuration=ye.audioTotalPlayDuration,ye.audioStats.audioFreezeRate=Math.ceil(100*ye.audioTotalFreezeTime/ye.audioTotalPlayDuration)}if(be&&be.videoStats&&ye.videoStats){var i1=parseInt(ye.videoStats.bytesReceived)-parseInt(be.videoStats.bytesReceived);ye.videoStats.videoRecvBytesDelta=i1,p.session.recvBytes+=i1,isFinite(i1)&&ye.videoStats.timestamp&&(Fe=ye.videoStats.timestamp.getTime()-be.videoStats.timestamp.getTime(),ye.videoRecvBitrate=Math.floor(8*i1/Fe)),p.isRemoteVideoFreeze(ye.videoStats,be.videoStats)&&(ye.videoTotalFreezeTime++,ye.isVideoFreeze=!0),ye.videoStats.videoTotalFreezeTime=ye.videoTotalFreezeTime,ye.videoStats.videoTotalPlayDuration=ye.videoTotalPlayDuration,ye.videoStats.videoFreezeRate=Math.ceil(100*ye.videoTotalFreezeTime/ye.videoTotalPlayDuration),me.player&&me.player.video&&me.player.video.videoWidth&&me.player.video.videoHeight?(ye.videoStats.renderRemoteWidth=me.player.video.videoWidth,ye.videoStats.renderRemoteHeight=me.player.video.videoHeight):(ye.videoStats.renderRemoteWidth=me.videoWidth||ye.videoStats.googFrameWidthReceived,ye.videoStats.renderRemoteHeight=me.videoHeight||ye.videoStats.googFrameHeightReceived)}}))}),p.remoteStats=fe;var he={};if(Object.keys(p.gatewayClient.localStreams).forEach(function(pe){var me=p.gatewayClient.localStreams[pe],be=p.localStats[pe],ye={id:pe,updatedAt:ce};he[pe]=ye,be?(ye.videoTotalPlayDuration=be.videoTotalPlayDuration+1,ye.videoTotalFreezeTime=be.videoTotalFreezeTime,ye.isVideoFreeze=!1):(ye.videoTotalPlayDuration=1,ye.videoTotalFreezeTime=0),me&&(me.isPlaying()&&(ye.audioDisabled=me.userMuteAudio?"1":"0",ye.videoDisabled=me.userMuteVideo?"1":"0"),me.video&&me.attributes.maxVideoBW?ye.videoTargetSendBitrate=me.attributes.maxVideoBW:me.video&&me.screenAttributes&&(ye.videoTargetSendBitrate=me.screenAttributes.maxVideoBW),me.pc&&"established"==me.pc.state&&me.pc.getStats(function(Oe){if(ye.pcStats=Oe.reverse(),ye.audioStats=Oe.find(function(Fe){return"audio"==Fe.mediaType&&(Fe.id.indexOf("_send")>-1||Fe.id.toLowerCase().indexOf("outbound")>-1)}),ye.videoStats=Oe.find(function(Fe){return"video"==Fe.mediaType&&(Fe.id.indexOf("_send")>-1||Fe.id.toLowerCase().indexOf("outbound")>-1)}),ye.audioStats&&be&&be.audioStats){var Le=parseInt(ye.audioStats.bytesSent)-parseInt(be.audioStats.bytesSent);if(ye.audioStats.audioSendBytesDelta=Le,p.session.sendBytes+=Le,isFinite(Le)&&ye.audioStats.timestamp){var ze=ye.audioStats.timestamp.getTime()-be.audioStats.timestamp.getTime();ye.audioSendBitrate=Math.floor(8*Le/ze)}}if(ye.videoStats&&be&&be.videoStats){var Ge=parseInt(ye.videoStats.bytesSent)-parseInt(be.videoStats.bytesSent);ye.videoStats.videoSendBytesDelta=Ge,p.session.sendBytes+=Ge,isFinite(Ge)&&ye.videoStats.timestamp&&(ze=ye.videoStats.timestamp.getTime()-be.videoStats.timestamp.getTime(),ye.videoSendBitrate=Math.floor(8*Ge/ze)),p.isLocalVideoFreeze(ye.videoStats,be.videoStats)&&(ye.videoTotalFreezeTime++,ye.isVideoFreeze=!0),ye.videoStats.videoTotalFreezeTime=ye.videoTotalFreezeTime,ye.videoStats.videoTotalPlayDuration=ye.videoTotalPlayDuration,ye.videoStats.videoFreezeRate=Math.ceil(100*ye.videoTotalFreezeTime/ye.videoTotalPlayDuration),ye.videoStats.renderLocalWidth=me.videoWidth||ye.videoStats.googFrameWidthSent,ye.videoStats.renderLocalHeight=me.videoHeight||ye.videoStats.googFrameHeightSent}}))}),p.localStats=he,p.session.HTTPSendBytesDelta=Object(s.getHTTPSendBytes)()-p.session.HTTPSendBytes,p.session.HTTPSendBytes=Object(s.getHTTPSendBytes)(),p.session.HTTPRecvBytesDelta=Object(s.getHTTPRecvBytes)()-p.session.HTTPRecvBytes,p.session.HTTPRecvBytes=Object(s.getHTTPRecvBytes)(),p.gatewayClient.socket&&p.gatewayClient.socket.state===p.gatewayClient.CONNECTED){var K=p.gatewayClient.socket;p.session.WSSendBytesDelta=K.getSendBytes()-p.session.WSSendBytes,p.session.WSSendBytes=K.getSendBytes(),p.session.WSRecvBytesDelta=K.getRecvBytes()-p.session.WSRecvBytes,p.session.WSRecvBytes=K.getRecvBytes()}},1e3),p.gatewayClient.on("join",function(){p.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}}),p),V.configDistributManager=function(ie){var p={};return p.client=ie,p.client.gatewayClient&&p.client.gatewayClient.on("config-distribute",function($){var ce=$.joinInfo,fe=$.config;if(fe){Object(L.isEmpty)(fe.uploadLog)||(Object(M.setParameter)("UPLOAD_LOG",fe.uploadLog),R.report.reportApiInvoke(ce.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:fe.uploadLog}})()),Object(L.isEmpty)(fe.dualStream)||(ie.isDualStream=fe.dualStream,R.report.reportApiInvoke(ce.sid,{name:"_configDistribute",options:{feature:"dualStream",value:fe.dualStream}})()),Object(L.isEmpty)(fe.streamFallbackOption)||p.client.gatewayClient&&p.client.gatewayClient.on("stream-subscribed",function(he){var K=he.stream;K?(p.client.gatewayClient.setStreamFallbackOption(K,fe.streamFallbackOption),R.report.reportApiInvoke(ce.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:fe.streamFallbackOption,streamId:K.getId()}})()):R.report.reportApiInvoke(ce.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:fe.streamFallbackOption,streamId:K.getId(),err:"invalid stream"}})()});try{b.default.debug("[".concat(ie.clientId,"] setParameter in distribution: ").concat(JSON.stringify(fe))),Object.keys(fe).map(function(he){return Object(M.setParameter)(he,fe[he])})}catch(he){b.default.debug("[".concat(ie.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(fe)))}}}),p}(V),Object(ee.addLiveStreamingCapability)(V,de),de.areaCode){var Be=de.areaCode,ke=de.excludedArea,Ve=Object(z.getAreaCodeByConfig)({areaCode:Be,excludedArea:ke});Object(M.setParameter)("AREA_SETTING",Ve);var Ue=Object(z.getAreaDomainConfig)(Ve);Object.keys(Ue).map(function(ie){var p=Ue[ie];"LOG_UPLOAD_SERVER"==ie||"EVENT_REPORT_DOMAIN"==ie||"EVENT_REPORT_BACKUP_DOMAIN"==ie||"NGINX"==ie?Object(M.setParameter)(ie,p[0]):Object(M.setParameter)(ie,p)})}return Object(L.isEmpty)(de.turnServer)||V.setTurnServer(de.turnServer),Object(L.isEmpty)(de.proxyServer)||V.setProxyServer(de.proxyServer),"live"===V.mode&&(V.gatewayClient.role="audience"),"rtc"===V.mode&&(V.gatewayClient.role=se),V.gatewayClient.on("onMultiIP",function(ie){V.gatewayClient.closeGateway(),V.gatewayClient.socket=void 0,V.gatewayClient.hasChangeBGPAddress=!0,V.joinInfo.multiIP=ie.option,V.gatewayClient.state=te.a.CONNECTING;var p=function($){b.default.info("[".concat(V.clientId,"] Joining channel: ").concat(V.channel)),V.joinInfo.cid=$.cid,V.joinInfo.uid||(V.joinInfo.uid=$.uid),V.joinInfo.uni_lbs_ip=$.uni_lbs_ip,V.joinInfo.gatewayAddr=$.gateway_addr,V.onSuccess?V.gatewayClient.join(V.joinInfo,V.key,function(ce){b.default.info("[".concat(V.clientId,"] Join channel ").concat(V.channel," success"));var fe=V.onSuccess;V.onSuccess=null,V.onFailure=null,fe(ce)},V.onFailure):(V.gatewayClient.joinInfo=Y()({},V.joinInfo),V.gatewayClient.rejoin())};V.joinInfo.stringUid&&!V.joinInfo.uid?(V.userAccountReq&&!V.userAccountReq.isFinished()&&V.userAccountReq.cancel(),V.userAccountReq=Object(U.getUserAccount)(joinInfo,V.gatewayClient),V.userAccountReq.then(function($){b.default.error("getUserAccount Success ".concat($.url," ").concat(joinInfo.stringUid," => ").concat($.uid)),V.joinInfo.uid=$.uid,Object(U.getGatewayList)(V.joinInfo,p,V.onFailure)}).catch(function($){b.default.error("getUserAccount rejected",$),V.onFailure($)})):Object(U.getGatewayList)(V.joinInfo,p,V.onFailure)}),V.gatewayClient.on("rejoin-start",function(){V._renewSession(),R.report.sessionInit(de.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:V.channel,appid:de.appId,mode:de.mode,succ:!0})}),V.gatewayClient.on("recover",function(){V._renewSession(),console.log("recover",de.sessionId),R.report.sessionInit(de.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:V.channel,appid:de.appId,mode:de.mode,succ:!0})}),V.gatewayClient.on("rejoin",function(){var ie=V.highStreamState;if(b.default.debug("[".concat(V.clientId,"] Client local stream preState: ").concat(ie)),V.onSuccess){var p=V.onSuccess;V.onSuccess=null,V.onFailure=null,p(V.joinInfo.uid)}!V.highStream||0!==ie&&1!==ie||(b.default.info("[".concat(V.clientId,"] publish after rejoin")),V.highStreamState=2,V.lowStreamState=2,V.publish(V.highStream,function($){$&&b.default.info("[".concat(V.clientId,"] "),$)}))}),V.gatewayClient.on("streamPublished",function(ie){V.hasPublished||(V.hasPublished=!0,V.gatewayClient.dispatchEvent({type:"stream-published",stream:ie.stream,proxy:ie.proxy}))}),V.gatewayClient.on("pubP2PLost",function(ie){b.default.debug("[".concat(V.clientId,"] Start reconnect local peerConnection: ").concat(V.highStream.getId())),V.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:V.highStream.getId()}),1===V.highStreamState&&(V.highStreamState=0,V.lowStreamState=0),V._unpublish(V.highStream,function(){V._publish(V.highStream,function(){b.default.debug("[".concat(V.clientId,"] Reconnect local peerConnection success: ").concat(V.highStream.getId())),V.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:V.highStream.getId(),success:!0,reason:""})},function(p){b.default.debug("[".concat(V.clientId,"] Reconnect local peerConnection failed: ").concat(p)),V.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:V.highStream.getId(),success:!1,reason:p})},!0)},function(p){b.default.debug("[".concat(V.clientId,"] Reconnect local peerConnection failed: ").concat(p)),V.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:V.highStream.getId(),success:!1,reason:p})},!0)}),V.gatewayClient.on("subP2PLost",function(ie){b.default.debug("[".concat(V.clientId,"] Start reconnect remote peerConnection: ").concat(ie.stream.getId()," ").concat(ie.stream.subscribeOptions)),V.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:ie.stream.getId()});var p=ie.stream.subscribeOptions;console.log("Re-subscribe stream",p,ie.stream),V.gatewayClient.unsubscribe(ie.stream,function(){ie.stream.subscribeOptions=p,V.gatewayClient.subscribe(ie.stream,function(){b.default.debug("[".concat(V.clientId,"] Reconnect remote peerConnection success: ").concat(ie.stream.getId())),V.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ie.stream.getId(),success:!0,reason:""})},function($){b.default.debug("[".concat(V.clientId,"] Reconnect remote peerConnection failed: "),$),V.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ie.stream.getId(),success:!1,reason:$})})},function($){b.default.debug("[".concat(V.clientId,"] Reconnect remote peerConnection failed: "),$),V.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ie.stream.getId(),success:!1,reason:$})})}),Z.on("networkTypeChanged",function(ie){V.gatewayClient&&V.gatewayClient.dispatchEvent(ie);var p=Y()({},ie,{type:"network-type-changed"});V.gatewayClient.dispatchEvent(p)}),m.a.on("recordingDeviceChanged",function(ie){V.gatewayClient&&V.gatewayClient.dispatchEvent(ie);var p=Y()({},ie,{type:"recording-device-changed"});V.gatewayClient.dispatchEvent(p)}),m.a.on("playoutDeviceChanged",function(ie){V.gatewayClient&&V.gatewayClient.dispatchEvent(ie);var p=Y()({},ie,{type:"playout-device-changed"});V.gatewayClient.dispatchEvent(p)}),m.a.on("cameraChanged",function(ie){V.gatewayClient&&V.gatewayClient.dispatchEvent(ie);var p=Y()({},ie,{type:"camera-changed"});V.gatewayClient.dispatchEvent(p)}),V.gatewayClient.on("streamTypeChange",function(ie){var p=Y()({},ie,{type:"stream-type-changed"});V.gatewayClient.dispatchEvent(p),R.report.reportApiInvoke(de.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(ie))}),V},Te=function(de){return"h264_interop"===de?"h264":"vp8"},Ee=function(de){return-1===I.indexOf(de.mode)?J.default.INVALID_CLIENT_MODE:-1===E.indexOf(de.codec)?J.default.INVALID_CLIENT_CODEC:"h264_interop"==de.mode&&"h264"!==de.codec&&J.default.CLIENT_MODE_CODEC_MISMATCH},_e=function(de){switch(de.mode){case"interop":case"h264_interop":de.mode="live";break;case"web-only":de.mode="rtc"}},Me=m.a.getDevices,xe=g.a.getScreenSources,u=JSON.parse(JSON.stringify(M.SUPPORT_RESOLUTION_LIST));X.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(de){var V=R.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(de=Y()({},de||{})).codec||(de.codec=Te(de.mode));var Ae=Ee(de);if(Ae)throw b.default.error("Invalid parameter setting MODE: ".concat(de.mode," CODEC: ").concat(de.codec," ERROR ").concat(Ae)),V(Ae),new Error(Ae);return b.default.info("Creating client, MODE: ".concat(de.mode," CODEC: ").concat(de.codec)),_e(de),V(null,de),ae(de)},createStream:d.b,Logger:b.default,report:R.report,getDevices:Me,getScreenSources:xe,getParameter:M.getParameter,setParameter:M.setParameter,checkSystemRequirements:function(){var de=R.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),V=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,Ae=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,Be=window.WebSocket,ke=!!V&&!!Ae&&!!Be,Ve=!1;w.isChrome()&&w.getBrowserVersion()>=58&&"iOS"!==w.getBrowserOS()&&(Ve=!0),w.isFireFox()&&w.getBrowserVersion()>=56&&(Ve=!0),w.isOpera()&&w.getBrowserVersion()>=45&&(Ve=!0),w.isSafari()&&w.getBrowserVersion()>=11&&(Ve=!0),w.isEdge()&&(Ve=!0),(w.isWeChatBrowser()||w.isQQBrowser())&&"iOS"!==w.getBrowserOS()&&(Ve=!0),w.isSupportedPC()||w.isSupportedMobile()||(Ve=!1),b.default.debug(w.getBrowserInfo(),"isAPISupport: "+ke+", isVendorAndVersionSupport: "+Ve);var Ue=ke&&Ve;return de(null,Ue),Ue},getSupportedCodec:O.getSupportedCodec,ChannelMediaRelayConfiguration:P.ChannelMediaRelayConfiguration,VERSION:M.VERSION,BUILD:M.BUILD,PROFILE_TABLE:u,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:z.AREAS,AREA_VERSION:"global"}}]).default},module.exports=X()},9:(oe,X,x)=>{"use strict";function M(t){return"function"==typeof t}function b(t){const r=t(i=>{Error.call(i),i.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}const R=b(t=>function(r){t(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((i,a)=>`${a+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});function S(t,n){if(t){const r=t.indexOf(n);0<=r&&t.splice(r,1)}}class w{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const o of r)o.remove(this);else r.remove(this);const{initialTeardown:i}=this;if(M(i))try{i()}catch(o){n=o instanceof R?o.errors:[o]}const{_teardowns:a}=this;if(a){this._teardowns=null;for(const o of a)try{d(o)}catch(l){n=null!=n?n:[],l instanceof R?n=[...n,...l.errors]:n.push(l)}}if(n)throw new R(n)}}add(n){var r;if(n&&n!==this)if(this.closed)d(n);else{if(n instanceof w){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(n)}}_hasParent(n){const{_parentage:r}=this;return r===n||Array.isArray(r)&&r.includes(n)}_addParent(n){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(n),r):r?[r,n]:n}_removeParent(n){const{_parentage:r}=this;r===n?this._parentage=null:Array.isArray(r)&&S(r,n)}remove(n){const{_teardowns:r}=this;r&&S(r,n),n instanceof w&&n._removeParent(this)}}w.EMPTY=(()=>{const t=new w;return t.closed=!0,t})();const v=w.EMPTY;function A(t){return t instanceof w||t&&"closed"in t&&M(t.remove)&&M(t.add)&&M(t.unsubscribe)}function d(t){M(t)?t():t.unsubscribe()}const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},g={setTimeout(...t){const{delegate:n}=g;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=g;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function O(t){g.setTimeout(()=>{const{onUnhandledError:n}=m;if(!n)throw t;n(t)})}function P(){}const I=D("C",void 0,void 0);function D(t,n,r){return{kind:t,value:n,error:r}}let j=null;function N(t){if(m.useDeprecatedSynchronousErrorHandling){const n=!j;if(n&&(j={errorThrown:!1,error:null}),t(),n){const{errorThrown:r,error:i}=j;if(j=null,r)throw i}}else t()}class te extends w{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,A(n)&&n.add(this)):this.destination=s}static create(n,r,i){return new J(n,r,i)}next(n){this.isStopped?y(D("N",n,void 0),this):this._next(n)}error(n){this.isStopped?y(D("E",void 0,n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?y(I,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class J extends te{constructor(n,r,i){let a;if(super(),M(n))a=n;else if(n){let o;({next:a,error:r,complete:i}=n),this&&m.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe()):o=n,a=null==a?void 0:a.bind(o),r=null==r?void 0:r.bind(o),i=null==i?void 0:i.bind(o)}this.destination={next:a?re(a):P,error:re(null!=r?r:U),complete:i?re(i):P}}}function re(t,n){return(...r)=>{try{t(...r)}catch(i){m.useDeprecatedSynchronousErrorHandling?function(t){m.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=t)}(i):O(i)}}}function U(t){throw t}function y(t,n){const{onStoppedNotification:r}=m;r&&g.setTimeout(()=>r(t,n))}const s={closed:!0,next:P,error:U,complete:P},H="function"==typeof Symbol&&Symbol.observable||"@@observable";function _(t){return t}let f=(()=>{class t{constructor(r){r&&(this._subscribe=r)}lift(r){const i=new t;return i.source=this,i.operator=r,i}subscribe(r,i,a){const o=function(t){return t&&t instanceof te||function(t){return t&&M(t.next)&&M(t.error)&&M(t.complete)}(t)&&A(t)}(r)?r:new J(r,i,a);return N(()=>{const{operator:l,source:h}=this;o.add(l?l.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(r){try{return this._subscribe(r)}catch(i){r.error(i)}}forEach(r,i){return new(i=C(i))((a,o)=>{let l;l=this.subscribe(h=>{try{r(h)}catch(T){o(T),null==l||l.unsubscribe()}},o,a)})}_subscribe(r){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(r)}[H](){return this}pipe(...r){return function(t){return 0===t.length?_:1===t.length?t[0]:function(r){return t.reduce((i,a)=>a(i),r)}}(r)(this)}toPromise(r){return new(r=C(r))((i,a)=>{let o;this.subscribe(l=>o=l,l=>a(l),()=>i(o))})}}return t.create=n=>new t(n),t})();function C(t){var n;return null!==(n=null!=t?t:m.Promise)&&void 0!==n?n:Promise}const ee=b(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let le=(()=>{class t extends f{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const i=new W(this,this);return i.operator=r,i}_throwIfClosed(){if(this.closed)throw new ee}next(r){N(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const a of i)a.next(r)}})}error(r){N(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:i}=this;for(;i.length;)i.shift().error(r)}})}complete(){N(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:i,isStopped:a,observers:o}=this;return i||a?v:(o.push(r),new w(()=>S(o,r)))}_checkFinalizedStatuses(r){const{hasError:i,thrownError:a,isStopped:o}=this;i?r.error(a):o&&r.complete()}asObservable(){const r=new f;return r.source=this,r}}return t.create=(n,r)=>new W(n,r),t})();class W extends le{constructor(n,r){super(),this.destination=n,this.source=r}next(n){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===i||i.call(r,n)}error(n){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===i||i.call(r,n)}complete(){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===r||r.call(n)}_subscribe(n){var r,i;return null!==(i=null===(r=this.source)||void 0===r?void 0:r.subscribe(n))&&void 0!==i?i:v}}function z(t){return n=>{if(function(t){return M(null==t?void 0:t.lift)}(n))return n.lift(function(r){try{return t(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class Q extends te{constructor(n,r,i,a,o){super(n),this.onFinalize=o,this._next=r?function(l){try{r(l)}catch(h){n.error(h)}}:super._next,this._error=a?function(l){try{a(l)}catch(h){n.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;const{closed:r}=this;super.unsubscribe(),!r&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}function ie(t){return this instanceof ie?(this.v=t,this):new ie(t)}function p(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,i=r.apply(t,n||[]),o=[];return a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a;function l(ue){i[ue]&&(a[ue]=function(ve){return new Promise(function(Ce,Re){o.push([ue,ve,Ce,Re])>1||h(ue,ve)})})}function h(ue,ve){try{!function(ue){ue.value instanceof ie?Promise.resolve(ue.value.v).then(F,G):ne(o[0][2],ue)}(i[ue](ve))}catch(Ce){ne(o[0][3],Ce)}}function F(ue){h("next",ue)}function G(ue){h("throw",ue)}function ne(ue,ve){ue(ve),o.shift(),o.length&&h(o[0][0],o[0][1])}}function ce(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function(t){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&t[n],i=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=t[o]&&function(l){return new Promise(function(h,T){!function(o,l,h,T){Promise.resolve(T).then(function(F){o({value:F,done:h})},l)}(h,T,(l=t[o](l)).done,l.value)})}}}const ye=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Oe(t){return M(null==t?void 0:t.then)}function Le(t){return M(t[H])}function ze(t){return Symbol.asyncIterator&&M(null==t?void 0:t[Symbol.asyncIterator])}function Ge(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const i1="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function We(t){return M(null==t?void 0:t[i1])}function y1(t){return p(this,arguments,function*(){const r=t.getReader();try{for(;;){const{value:i,done:a}=yield ie(r.read());if(a)return yield ie(void 0);yield yield ie(i)}}finally{r.releaseLock()}})}function C1(t){return M(null==t?void 0:t.getReader)}function B1(t){if(t instanceof f)return t;if(null!=t){if(Le(t))return function(t){return new f(n=>{const r=t[H]();if(M(r.subscribe))return r.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ye(t))return function(t){return new f(n=>{for(let r=0;r<t.length&&!n.closed;r++)n.next(t[r]);n.complete()})}(t);if(Oe(t))return function(t){return new f(n=>{t.then(r=>{n.closed||(n.next(r),n.complete())},r=>n.error(r)).then(null,O)})}(t);if(ze(t))return u0(t);if(We(t))return function(t){return new f(n=>{for(const r of t)if(n.next(r),n.closed)return;n.complete()})}(t);if(C1(t))return function(t){return u0(y1(t))}(t)}throw Ge(t)}function u0(t){return new f(n=>{(function(t,n){var r,i,a,o;return function(t,n,r,i){return new(r||(r=Promise))(function(o,l){function h(G){try{F(i.next(G))}catch(ne){l(ne)}}function T(G){try{F(i.throw(G))}catch(ne){l(ne)}}function F(G){G.done?o(G.value):function(o){return o instanceof r?o:new r(function(l){l(o)})}(G.value).then(h,T)}F((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(r=ce(t);!(i=yield r.next()).done;)if(n.next(i.value),n.closed)return}catch(l){a={error:l}}finally{try{i&&!i.done&&(o=r.return)&&(yield o.call(r))}finally{if(a)throw a.error}}n.complete()})})(t,n).catch(r=>n.error(r))})}function S2(t,n,r,i=0,a=!1){const o=n.schedule(function(){r(),a?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!a)return o}function d0(t,n,r=1/0){return M(n)?d0((i,a)=>function(t,n){return z((r,i)=>{let a=0;r.subscribe(new Q(i,o=>{i.next(t.call(undefined,o,a++))}))})}((o,l)=>n(i,o,a,l))(B1(t(i,a))),r):("number"==typeof n&&(r=n),z((i,a)=>function(t,n,r,i,a,o,l,h){const T=[];let F=0,G=0,ne=!1;const ue=()=>{ne&&!T.length&&!F&&n.complete()},ve=Re=>F<i?Ce(Re):T.push(Re),Ce=Re=>{F++;let we=!1;B1(r(Re,G++)).subscribe(new Q(n,De=>{n.next(De)},()=>{we=!0},void 0,()=>{if(we)try{for(F--;T.length&&F<i;){const De=T.shift();Ce(De)}ue()}catch(De){n.error(De)}}))};return t.subscribe(new Q(n,ve,()=>{ne=!0,ue()})),()=>{}}(i,a,t,r)))}const Ra=new f(t=>t.complete());function wa(t){return t[t.length-1]}function f0(t,n=0){return z((r,i)=>{r.subscribe(new Q(i,a=>S2(i,t,()=>i.next(a),n),()=>S2(i,t,()=>i.complete(),n),a=>S2(i,t,()=>i.error(a),n)))})}function h0(t,n=0){return z((r,i)=>{i.add(t.schedule(()=>r.subscribe(i),n))})}function p0(t,n){if(!t)throw new Error("Iterable cannot be null");return new f(r=>{S2(r,n,()=>{const i=t[Symbol.asyncIterator]();S2(r,n,()=>{i.next().then(a=>{a.done?r.complete():r.next(a.value)})},0,!0)})})}function m0(t,n){return n?function(t,n){if(null!=t){if(Le(t))return function(t,n){return B1(t).pipe(h0(n),f0(n))}(t,n);if(ye(t))return function(t,n){return new f(r=>{let i=0;return n.schedule(function(){i===t.length?r.complete():(r.next(t[i++]),r.closed||this.schedule())})})}(t,n);if(Oe(t))return function(t,n){return B1(t).pipe(h0(n),f0(n))}(t,n);if(ze(t))return p0(t,n);if(We(t))return function(t,n){return new f(r=>{let i;return S2(r,n,()=>{i=t[i1](),S2(r,n,()=>{let a,o;try{({value:a,done:o}=i.next())}catch(l){return void r.error(l)}o?r.complete():r.next(a)},0,!0)}),()=>M(null==i?void 0:i.return)&&i.return()})}(t,n);if(C1(t))return function(t,n){return p0(y1(t),n)}(t,n)}throw Ge(t)}(t,n):B1(t)}function n7(...t){const n=function(t){return function(t){return t&&M(t.schedule)}(wa(t))?t.pop():void 0}(t),r=function(t,n){return"number"==typeof wa(t)?t.pop():1/0}(t),i=t;return i.length?1===i.length?B1(i[0]):function(t=1/0){return d0(_,t)}(r)(m0(i,n)):Ra}function Na(t,n,...r){return!0===n?(t(),null):!1===n?null:n(...r).pipe(z((n,r)=>{let i=0;n.subscribe(new Q(r,a=>{++i<=1&&(r.next(a),1<=i&&r.complete())}))})).subscribe(()=>t())}function v1(t){for(let n in t)if(t[n]===v1)return n;throw Error("Could not find renamed property on target object.")}function l1(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l1).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function Oa(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const a7=v1({__forward_ref__:v1});function La(t){return t.__forward_ref__=La,t.toString=function(){return l1(this())},t}function e1(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(a7)&&t.__forward_ref__===La}(t)?t():t}class at extends Error{constructor(n,r){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,r)),this.code=n}}function Qe(t){return"string"==typeof t?t:null==t?"":String(t)}function K1(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Qe(t)}function ei(t,n){const r=n?` in ${n}`:"";throw new at("201",`No provider for ${K1(t)} found${r}`)}function ct(t,n){null==t&&function(t,n,r,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${r} ${i} ${n} <=Actual]`))}(n,t,null,"!=")}function h1(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C2(t){return{providers:t.providers||[],imports:t.imports||[]}}function za(t){return g0(t,ti)||g0(t,E0)}function g0(t,n){return t.hasOwnProperty(n)?t[n]:null}function y0(t){return t&&(t.hasOwnProperty(Va)||t.hasOwnProperty(f7))?t[Va]:null}const ti=v1({\u0275prov:v1}),Va=v1({\u0275inj:v1}),E0=v1({ngInjectableDef:v1}),f7=v1({ngInjectorDef:v1});var t1=(()=>((t1=t1||{})[t1.Default=0]="Default",t1[t1.Host=1]="Host",t1[t1.Self=2]="Self",t1[t1.SkipSelf=4]="SkipSelf",t1[t1.Optional=8]="Optional",t1))();let ka;function b2(t){const n=ka;return ka=t,n}function _0(t,n,r){const i=za(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:r&t1.Optional?null:void 0!==n?n:void ei(l1(t),"Injector")}function A2(t){return{toString:t}.toString()}var Et=(()=>((Et=Et||{})[Et.OnPush=0]="OnPush",Et[Et.Default=1]="Default",Et))(),Gt=(()=>{return(t=Gt||(Gt={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Gt;var t})();const p7="undefined"!=typeof globalThis&&globalThis,m7="undefined"!=typeof window&&window,v7="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,p1=p7||"undefined"!=typeof global&&global||m7||v7,X2={},g1=[],ni=v1({\u0275cmp:v1}),Pa=v1({\u0275dir:v1}),Ha=v1({\u0275pipe:v1}),S0=v1({\u0275mod:v1}),c2=v1({\u0275fac:v1}),Qn=v1({__NG_ELEMENT_ID__:v1});let g7=0;function _t(t){return A2(()=>{const r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Et.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||g1,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Gt.Emulated,id:"c",styles:t.styles||g1,_:null,setInput:null,schemas:t.schemas||null,tView:null},a=t.directives,o=t.features,l=t.pipes;return i.id+=g7++,i.inputs=T0(t.inputs,r),i.outputs=T0(t.outputs),o&&o.forEach(h=>h(i)),i.directiveDefs=a?()=>("function"==typeof a?a():a).map(C0):null,i.pipeDefs=l?()=>("function"==typeof l?l():l).map(b0):null,i})}function C0(t){return G1(t)||function(t){return t[Pa]||null}(t)}function b0(t){return function(t){return t[Ha]||null}(t)}const A0={};function V2(t){return A2(()=>{const n={type:t.type,bootstrap:t.bootstrap||g1,declarations:t.declarations||g1,imports:t.imports||g1,exports:t.exports||g1,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(A0[t.id]=t.type),n})}function T0(t,n){if(null==t)return X2;const r={};for(const i in t)if(t.hasOwnProperty(i)){let a=t[i],o=a;Array.isArray(a)&&(o=a[1],a=a[0]),r[a]=i,n&&(n[a]=o)}return r}const st=_t;function G1(t){return t[ni]||null}function St(t,n){const r=t[S0]||null;if(!r&&!0===n)throw new Error(`Type ${l1(t)} does not have '\u0275mod' property.`);return r}function Wt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Dt(t){return Array.isArray(t)&&!0===t[1]}function Ba(t){return 0!=(8&t.flags)}function oi(t){return 2==(2&t.flags)}function ci(t){return 1==(1&t.flags)}function Ot(t){return null!==t.template}function b7(t){return 0!=(512&t[2])}function j2(t,n){return t.hasOwnProperty(c2)?t[c2]:null}class I7{constructor(n,r,i){this.previousValue=n,this.currentValue=r,this.firstChange=i}isFirstChange(){return this.firstChange}}function B2(){return M0}function M0(t){return t.type.prototype.ngOnChanges&&(t.setInput=R7),M7}function M7(){const t=w0(this),n=null==t?void 0:t.current;if(n){const r=t.previous;if(r===X2)t.previous=n;else for(let i in n)r[i]=n[i];t.current=null,this.ngOnChanges(n)}}function R7(t,n,r,i){const a=w0(t)||function(t,n){return t[R0]=n}(t,{previous:X2,current:null}),o=a.current||(a.current={}),l=a.previous,h=this.declaredInputs[r],T=l[h];o[h]=new I7(T&&T.currentValue,n,l===X2),t[i]=n}B2.ngInherit=!0;const R0="__ngSimpleChanges__";function w0(t){return t[R0]||null}let Wa;function qa(){return void 0!==Wa?Wa:"undefined"!=typeof document?document:void 0}function I1(t){return!!t.listen}const O0={createRenderer:(t,n)=>qa()};function O1(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,n){return O1(n[t.index])}function Ya(t,n){return t.data[n]}function ut(t,n){const r=n[t];return Wt(r)?r:r[0]}function Ja(t){return 128==(128&t[2])}function I2(t,n){return null==n?null:t[n]}function x0(t){t[18]=0}function Ka(t,n){t[5]+=n;let r=t,i=t[3];for(;null!==i&&(1===n&&1===r[5]||-1===n&&0===r[5]);)i[5]+=n,r=i,i=i[3]}const Ke={lFrame:B0(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function z0(){return Ke.bindingsEnabled}function Ne(){return Ke.lFrame.lView}function u1(){return Ke.lFrame.tView}function Za(t){return Ke.lFrame.contextLView=t,t[8]}function V1(){let t=V0();for(;null!==t&&64===t.type;)t=t.parent;return t}function V0(){return Ke.lFrame.currentTNode}function qt(t,n){const r=Ke.lFrame;r.currentTNode=t,r.isParent=n}function Qa(){return Ke.lFrame.isParent}function Xa(){Ke.lFrame.isParent=!1}function li(){return Ke.isInCheckNoChangesMode}function ui(t){Ke.isInCheckNoChangesMode=t}function an(){return Ke.lFrame.bindingIndex++}function U7(t,n){const r=Ke.lFrame;r.bindingIndex=r.bindingRootIndex=t,$a(n)}function $a(t){Ke.lFrame.currentDirectiveIndex=t}function to(t){Ke.lFrame.currentQueryIndex=t}function W7(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function F0(t,n,r){if(r&t1.SkipSelf){let a=n,o=t;for(;!(a=a.parent,null!==a||r&t1.Host||(a=W7(o),null===a||(o=o[15],10&a.type))););if(null===a)return!1;n=a,t=o}const i=Ke.lFrame=j0();return i.currentTNode=n,i.lView=t,!0}function di(t){const n=j0(),r=t[1];Ke.lFrame=n,n.currentTNode=r.firstChild,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function j0(){const t=Ke.lFrame,n=null===t?null:t.child;return null===n?B0(t):n}function B0(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function U0(){const t=Ke.lFrame;return Ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const G0=U0;function fi(){const t=U0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Q1(){return Ke.lFrame.selectedIndex}function M2(t){Ke.lFrame.selectedIndex=t}function M1(){const t=Ke.lFrame;return Ya(t.tView,t.selectedIndex)}function hi(t,n){for(let r=n.directiveStart,i=n.directiveEnd;r<i;r++){const o=t.data[r].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:h,ngAfterViewInit:T,ngAfterViewChecked:F,ngOnDestroy:G}=o;l&&(t.contentHooks||(t.contentHooks=[])).push(-r,l),h&&((t.contentHooks||(t.contentHooks=[])).push(r,h),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,h)),T&&(t.viewHooks||(t.viewHooks=[])).push(-r,T),F&&((t.viewHooks||(t.viewHooks=[])).push(r,F),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,F)),null!=G&&(t.destroyHooks||(t.destroyHooks=[])).push(r,G)}}function pi(t,n,r){W0(t,n,3,r)}function mi(t,n,r,i){(3&t[2])===r&&W0(t,n,r,i)}function no(t,n){let r=t[2];(3&r)===n&&(r&=2047,r+=1,t[2]=r)}function W0(t,n,r,i){const o=null!=i?i:-1,l=n.length-1;let h=0;for(let T=void 0!==i?65535&t[18]:0;T<l;T++)if("number"==typeof n[T+1]){if(h=n[T],null!=i&&h>=i)break}else n[T]<0&&(t[18]+=65536),(h<o||-1==o)&&(ed(t,r,n,T),t[18]=(4294901760&t[18])+T+2),T++}function ed(t,n,r,i){const a=r[i]<0,o=r[i+1],h=t[a?-r[i]:r[i]];if(a){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{o.call(h)}finally{}}}else try{o.call(h)}finally{}}class nr{constructor(n,r,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=i}}function vi(t,n,r){const i=I1(t);let a=0;for(;a<r.length;){const o=r[a];if("number"==typeof o){if(0!==o)break;a++;const l=r[a++],h=r[a++],T=r[a++];i?t.setAttribute(n,h,T,l):n.setAttributeNS(l,h,T)}else{const l=o,h=r[++a];io(l)?i&&t.setProperty(n,l,h):i?t.setAttribute(n,l,h):n.setAttribute(l,h),a++}}return a}function q0(t){return 3===t||4===t||6===t}function io(t){return 64===t.charCodeAt(0)}function gi(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let r=-1;for(let i=0;i<n.length;i++){const a=n[i];"number"==typeof a?r=a:0===r||Y0(t,r,a,null,-1===r||2===r?n[++i]:null)}}return t}function Y0(t,n,r,i,a){let o=0,l=t.length;if(-1===n)l=-1;else for(;o<t.length;){const h=t[o++];if("number"==typeof h){if(h===n){l=-1;break}if(h>n){l=o-1;break}}}for(;o<t.length;){const h=t[o];if("number"==typeof h)break;if(h===r){if(null===i)return void(null!==a&&(t[o+1]=a));if(i===t[o+1])return void(t[o+2]=a)}o++,null!==i&&o++,null!==a&&o++}-1!==l&&(t.splice(l,0,n),o=l+1),t.splice(o++,0,r),null!==i&&t.splice(o++,0,i),null!==a&&t.splice(o++,0,a)}function J0(t){return-1!==t}function on(t){return 32767&t}function cn(t,n){let r=function(t){return t>>16}(t),i=n;for(;r>0;)i=i[15],r--;return i}let ao=!0;function yi(t){const n=ao;return ao=t,n}let od=0;function ir(t,n){const r=co(t,n);if(-1!==r)return r;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,oo(i.data,t),oo(n,null),oo(i.blueprint,null));const a=Ei(t,n),o=t.injectorIndex;if(J0(a)){const l=on(a),h=cn(a,n),T=h[1].data;for(let F=0;F<8;F++)n[o+F]=h[l+F]|T[l+F]}return n[o+8]=a,o}function oo(t,n){t.push(0,0,0,0,0,0,0,0,n)}function co(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ei(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,i=null,a=n;for(;null!==a;){const o=a[1],l=o.type;if(i=2===l?o.declTNode:1===l?a[6]:null,null===i)return-1;if(r++,a=a[15],-1!==i.injectorIndex)return i.injectorIndex|r<<16}return-1}function _i(t,n,r){!function(t,n,r){let i;"string"==typeof r?i=r.charCodeAt(0)||0:r.hasOwnProperty(Qn)&&(i=r[Qn]),null==i&&(i=r[Qn]=od++);const a=255&i;n.data[t+(a>>5)]|=1<<a}(t,n,r)}function Q0(t,n,r){if(r&t1.Optional)return t;ei(n,"NodeInjector")}function X0(t,n,r,i){if(r&t1.Optional&&void 0===i&&(i=null),0==(r&(t1.Self|t1.Host))){const a=t[9],o=b2(void 0);try{return a?a.get(n,i,r&t1.Optional):_0(n,i,r&t1.Optional)}finally{b2(o)}}return Q0(i,n,r)}function $0(t,n,r,i=t1.Default,a){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Qn)?t[Qn]:void 0;return"number"==typeof n?n>=0?255&n:ld:n}(r);if("function"==typeof o){if(!F0(n,t,i))return i&t1.Host?Q0(a,r,i):X0(n,r,i,a);try{const l=o(i);if(null!=l||i&t1.Optional)return l;ei(r)}finally{G0()}}else if("number"==typeof o){let l=null,h=co(t,n),T=-1,F=i&t1.Host?n[16][6]:null;for((-1===h||i&t1.SkipSelf)&&(T=-1===h?Ei(t,n):n[h+8],-1!==T&&n3(i,!1)?(l=n[1],h=on(T),n=cn(T,n)):h=-1);-1!==h;){const G=n[1];if(t3(o,h,G.data)){const ne=ud(h,n,r,l,i,F);if(ne!==e3)return ne}T=n[h+8],-1!==T&&n3(i,n[1].data[h+8]===F)&&t3(o,h,n)?(l=G,h=on(T),n=cn(T,n)):h=-1}}}return X0(n,r,i,a)}const e3={};function ld(){return new sn(V1(),Ne())}function ud(t,n,r,i,a,o){const l=n[1],h=l.data[t+8],G=function(t,n,r,i,a){const o=t.providerIndexes,l=n.data,h=1048575&o,T=t.directiveStart,G=o>>20,ue=a?h+G:t.directiveEnd;for(let ve=i?h:h+G;ve<ue;ve++){const Ce=l[ve];if(ve<T&&r===Ce||ve>=T&&Ce.type===r)return ve}if(a){const ve=l[T];if(ve&&Ot(ve)&&ve.type===r)return T}return null}(h,l,r,null==i?oi(h)&&ao:i!=l&&0!=(3&h.type),a&t1.Host&&o===h);return null!==G?ar(n,l,G,h):e3}function ar(t,n,r,i){let a=t[r];const o=n.data;if(function(t){return t instanceof nr}(a)){const l=a;l.resolving&&function(t,n){throw new at("200",`Circular dependency in DI detected for ${t}`)}(K1(o[r]));const h=yi(l.canSeeViewProviders);l.resolving=!0;const T=l.injectImpl?b2(l.injectImpl):null;F0(t,i,t1.Default);try{a=t[r]=l.factory(void 0,o,t,i),n.firstCreatePass&&r>=i.directiveStart&&function(t,n,r){const{ngOnChanges:i,ngOnInit:a,ngDoCheck:o}=n.type.prototype;if(i){const l=M0(n);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,l),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,l)}a&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,a),o&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,o),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,o))}(r,o[r],n)}finally{null!==T&&b2(T),yi(h),l.resolving=!1,G0()}}return a}function t3(t,n,r){return!!(r[n+(t>>5)]&1<<t)}function n3(t,n){return!(t&t1.Self||t&t1.Host&&n)}class sn{constructor(n,r){this._tNode=n,this._lView=r}get(n,r,i){return $0(this._tNode,this._lView,n,i,r)}}const un="__parameters__";function fn(t,n,r){return A2(()=>{const i=function(t){return function(...r){if(t){const i=t(...r);for(const a in i)this[a]=i[a]}}}(n);function a(...o){if(this instanceof a)return i.apply(this,o),this;const l=new a(...o);return h.annotation=l,h;function h(T,F,G){const ne=T.hasOwnProperty(un)?T[un]:Object.defineProperty(T,un,{value:[]})[un];for(;ne.length<=G;)ne.push(null);return(ne[G]=ne[G]||[]).push(l),T}}return r&&(a.prototype=Object.create(r.prototype)),a.prototype.ngMetadataName=t,a.annotationCls=a,a})}class f1{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=h1({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Yt(t,n){t.forEach(r=>Array.isArray(r)?Yt(r,n):n(r))}function r3(t,n,r){n>=t.length?t.push(r):t.splice(n,0,r)}function Ci(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function lr(t,n){const r=[];for(let i=0;i<t;i++)r.push(n);return r}const ur={},mo="__NG_DI_FLAG__",Ai="ngTempTokenPath",bd=/\n/gm,s3="__source",Td=v1({provide:String,useValue:v1});let dr;function l3(t){const n=dr;return dr=t,n}function Id(t,n=t1.Default){if(void 0===dr)throw new Error("inject() must be called from an injection context");return null===dr?_0(t,void 0,n):dr.get(t,n&t1.Optional?null:void 0,n)}function d1(t,n=t1.Default){return(ka||Id)(e1(t),n)}function vo(t){const n=[];for(let r=0;r<t.length;r++){const i=e1(t[r]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let a,o=t1.Default;for(let l=0;l<i.length;l++){const h=i[l],T=Md(h);"number"==typeof T?-1===T?a=h.token:o|=T:a=h}n.push(d1(a,o))}else n.push(d1(i))}return n}function fr(t,n){return t[mo]=n,t.prototype[mo]=n,t}function Md(t){return t[mo]}const Ti=fr(fn("Inject",t=>({token:t})),-1),pn=fr(fn("Optional"),8),hr=fr(fn("SkipSelf"),4);let Mi,Ri;function vn(t){var n;return(null==(n=function(){if(void 0===Mi&&(Mi=null,p1.trustedTypes))try{Mi=p1.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Mi}())?void 0:n.createHTML(t))||t}function m3(t){var n;return(null==(n=function(){if(void 0===Ri&&(Ri=null,p1.trustedTypes))try{Ri=p1.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ri}())?void 0:n.createHTML(t))||t}class U2{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fd extends U2{getTypeName(){return"HTML"}}class jd extends U2{getTypeName(){return"Style"}}class Bd extends U2{getTypeName(){return"Script"}}class Ud extends U2{getTypeName(){return"URL"}}class Gd extends U2{getTypeName(){return"ResourceURL"}}function ft(t){return t instanceof U2?t.changingThisBreaksApplicationSecurity:t}function Jt(t,n){const r=y3(t);if(null!=r&&r!==n){if("ResourceURL"===r&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===n}function y3(t){return t instanceof U2&&t.getTypeName()||null}class Zd{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const r=(new window.DOMParser).parseFromString(vn(n),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(n):(r.removeChild(r.firstChild),r)}catch(r){return null}}}class Qd{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r);const i=this.inertDocument.createElement("body");r.appendChild(i)}}getInertBodyElement(n){const r=this.inertDocument.createElement("template");if("content"in r)return r.innerHTML=vn(n),r;const i=this.inertDocument.createElement("body");return i.innerHTML=vn(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const r=n.attributes;for(let a=r.length-1;0<a;a--){const l=r.item(a).name;("xmlns:ns1"===l||0===l.indexOf("ns1:"))&&n.removeAttribute(l)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const $d=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,e9=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function mr(t){return(t=String(t)).match($d)||t.match(e9)?t:"unsafe:"+t}function _3(t){return(t=String(t)).split(",").map(n=>mr(n.trim())).join(", ")}function Kt(t){const n={};for(const r of t.split(","))n[r]=!0;return n}function vr(...t){const n={};for(const r of t)for(const i in r)r.hasOwnProperty(i)&&(n[i]=!0);return n}const S3=Kt("area,br,col,hr,img,wbr"),C3=Kt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),b3=Kt("rp,rt"),_o=vr(S3,vr(C3,Kt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vr(b3,Kt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vr(b3,C3)),So=Kt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Co=Kt("srcset"),A3=vr(So,Co,Kt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Kt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),t9=Kt("script,style,template");class n9{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let r=n.firstChild,i=!0;for(;r;)if(r.nodeType===Node.ELEMENT_NODE?i=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,i&&r.firstChild)r=r.firstChild;else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let a=this.checkClobberedElement(r,r.nextSibling);if(a){r=a;break}r=this.checkClobberedElement(r,r.parentNode)}return this.buf.join("")}startElement(n){const r=n.nodeName.toLowerCase();if(!_o.hasOwnProperty(r))return this.sanitizedSomething=!0,!t9.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const i=n.attributes;for(let a=0;a<i.length;a++){const o=i.item(a),l=o.name,h=l.toLowerCase();if(!A3.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let T=o.value;So[h]&&(T=mr(T)),Co[h]&&(T=_3(T)),this.buf.push(" ",l,'="',T3(T),'"')}return this.buf.push(">"),!0}endElement(n){const r=n.nodeName.toLowerCase();_o.hasOwnProperty(r)&&!S3.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(n){this.buf.push(T3(n))}checkClobberedElement(n,r){if(r&&(n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return r}}const r9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i9=/([^\#-~ |!])/g;function T3(t){return t.replace(/&/g,"&amp;").replace(r9,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(i9,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let wi;function I3(t,n){let r=null;try{wi=wi||function(t){const n=new Qd(t);return function(){try{return!!(new window.DOMParser).parseFromString(vn(""),"text/html")}catch(t){return!1}}()?new Zd(n):n}(t);let i=n?String(n):"";r=wi.getInertBodyElement(i);let a=5,o=i;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,i=o,o=r.innerHTML,r=wi.getInertBodyElement(i)}while(i!==o);return vn((new n9).sanitizeChildren(bo(r)||r))}finally{if(r){const i=bo(r)||r;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function bo(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var _1=(()=>((_1=_1||{})[_1.NONE=0]="NONE",_1[_1.HTML=1]="HTML",_1[_1.STYLE=2]="STYLE",_1[_1.SCRIPT=3]="SCRIPT",_1[_1.URL=4]="URL",_1[_1.RESOURCE_URL=5]="RESOURCE_URL",_1))();function M3(t){const n=function(){const t=Ne();return t&&t[12]}();return n?m3(n.sanitize(_1.HTML,t)||""):Jt(t,"HTML")?m3(ft(t)):I3(qa(),Qe(t))}const D3="__ngContext__";function q1(t,n){t[D3]=n}function To(t){const n=function(t){return t[D3]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Mo(t){return t.ngOriginalError}function C9(t,...n){t.error(...n)}class gn{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n),i=(t=n)&&t.ngErrorLogger||C9;var t;i(this._console,"ERROR",n),r&&i(this._console,"ORIGINAL ERROR",r)}_findOriginalError(n){let r=n&&Mo(n);for(;r&&Mo(r);)r=Mo(r);return r||null}}const V3=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(p1))();function Zt(t){return t instanceof Function?t():t}var ht=(()=>((ht=ht||{})[ht.Important=1]="Important",ht[ht.DashCase=2]="DashCase",ht))();function wo(t,n){return undefined(t,n)}function Er(t){const n=t[3];return Dt(n)?n[3]:n}function No(t){return j3(t[13])}function Do(t){return j3(t[4])}function j3(t){for(;null!==t&&!Dt(t);)t=t[4];return t}function En(t,n,r,i,a){if(null!=i){let o,l=!1;Dt(i)?o=i:Wt(i)&&(l=!0,i=i[0]);const h=O1(i);0===t&&null!==r?null==a?Y3(n,r,h):G2(n,r,h,a||null,!0):1===t&&null!==r?G2(n,r,h,a||null,!0):2===t?function(t,n,r){const i=Ni(t,n);i&&function(t,n,r,i){I1(t)?t.removeChild(n,r,i):n.removeChild(r)}(t,i,n,r)}(n,h,l):3===t&&n.destroyNode(h),null!=o&&function(t,n,r,i,a){const o=r[7];o!==O1(r)&&En(n,t,i,o,a);for(let h=10;h<r.length;h++){const T=r[h];_r(T[1],T,t,n,i,o)}}(n,t,o,r,a)}}function Lo(t,n,r){return I1(t)?t.createElement(n,r):null===r?t.createElement(n):t.createElementNS(r,n)}function U3(t,n){const r=t[9],i=r.indexOf(n),a=n[3];1024&n[2]&&(n[2]&=-1025,Ka(a,-1)),r.splice(i,1)}function xo(t,n){if(t.length<=10)return;const r=10+n,i=t[r];if(i){const a=i[17];null!==a&&a!==t&&U3(a,i),n>0&&(t[r-1][4]=i[4]);const o=Ci(t,10+n);!function(t,n){_r(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const l=o[19];null!==l&&l.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function G3(t,n){if(!(256&n[2])){const r=n[11];I1(r)&&r.destroyNode&&_r(t,n,r,3,null,null),function(t){let n=t[13];if(!n)return zo(t[1],t);for(;n;){let r=null;if(Wt(n))r=n[13];else{const i=n[10];i&&(r=i)}if(!r){for(;n&&!n[4]&&n!==t;)Wt(n)&&zo(n[1],n),n=n[3];null===n&&(n=t),Wt(n)&&zo(n[1],n),r=n&&n[4]}n=r}}(n)}}function zo(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let i=0;i<r.length;i+=2){const a=n[r[i]];if(!(a instanceof nr)){const o=r[i+1];if(Array.isArray(o))for(let l=0;l<o.length;l+=2){const h=a[o[l]],T=o[l+1];try{T.call(h)}finally{}}else try{o.call(a)}finally{}}}}(t,n),function(t,n){const r=t.cleanup,i=n[7];let a=-1;if(null!==r)for(let o=0;o<r.length-1;o+=2)if("string"==typeof r[o]){const l=r[o+1],h="function"==typeof l?l(n):O1(n[l]),T=i[a=r[o+2]],F=r[o+3];"boolean"==typeof F?h.removeEventListener(r[o],T,F):F>=0?i[a=F]():i[a=-F].unsubscribe(),o+=2}else{const l=i[a=r[o+1]];r[o].call(l)}if(null!==i){for(let o=a+1;o<i.length;o++)i[o]();n[7]=null}}(t,n),1===n[1].type&&I1(n[11])&&n[11].destroy();const r=n[17];if(null!==r&&Dt(n[3])){r!==n[3]&&U3(r,n);const i=n[19];null!==i&&i.detachView(t)}}}function W3(t,n,r){return function(t,n,r){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return r[0];if(2&i.flags){const a=t.data[i.directiveStart].encapsulation;if(a===Gt.None||a===Gt.Emulated)return null}return At(i,r)}(t,n.parent,r)}function G2(t,n,r,i,a){I1(t)?t.insertBefore(n,r,i,a):n.insertBefore(r,i,a)}function Y3(t,n,r){I1(t)?t.appendChild(n,r):n.appendChild(r)}function J3(t,n,r,i,a){null!==i?G2(t,n,r,i,a):Y3(t,n,r)}function Ni(t,n){return I1(t)?t.parentNode(n):n.parentNode}function K3(t,n,r){return Q3(t,n,r)}let Q3=function(t,n,r){return 40&t.type?At(t,r):null};function Di(t,n,r,i){const a=W3(t,i,n),o=n[11],h=K3(i.parent||n[6],i,n);if(null!=a)if(Array.isArray(r))for(let T=0;T<r.length;T++)J3(o,a,r[T],h,!1);else J3(o,a,r,h,!1)}function Oi(t,n){if(null!==n){const r=n.type;if(3&r)return At(n,t);if(4&r)return ko(-1,t[n.index]);if(8&r){const i=n.child;if(null!==i)return Oi(t,i);{const a=t[n.index];return Dt(a)?ko(-1,a):O1(a)}}if(32&r)return wo(n,t)()||O1(t[n.index]);{const i=$3(t,n);return null!==i?Array.isArray(i)?i[0]:Oi(Er(t[16]),i):Oi(t,n.next)}}return null}function $3(t,n){return null!==n?t[16][6].projection[n.projection]:null}function ko(t,n){const r=10+t+1;if(r<n.length){const i=n[r],a=i[1].firstChild;if(null!==a)return Oi(i,a)}return n[7]}function Po(t,n,r,i,a,o,l){for(;null!=r;){const h=i[r.index],T=r.type;if(l&&0===n&&(h&&q1(O1(h),i),r.flags|=4),64!=(64&r.flags))if(8&T)Po(t,n,r.child,i,a,o,!1),En(n,t,a,h,o);else if(32&T){const F=wo(r,i);let G;for(;G=F();)En(n,t,a,G,o);En(n,t,a,h,o)}else 16&T?tc(t,n,i,r,a,o):En(n,t,a,h,o);r=l?r.projectionNext:r.next}}function _r(t,n,r,i,a,o){Po(r,i,t.firstChild,n,a,o,!1)}function tc(t,n,r,i,a,o){const l=r[16],T=l[6].projection[i.projection];if(Array.isArray(T))for(let F=0;F<T.length;F++)En(n,t,a,T[F],o);else Po(t,n,T,l[3],a,o,!0)}function nc(t,n,r){I1(t)?t.setAttribute(n,"style",r):n.style.cssText=r}function Ho(t,n,r){I1(t)?""===r?t.removeAttribute(n,"class"):t.setAttribute(n,"class",r):n.className=r}function rc(t,n,r){let i=t.length;for(;;){const a=t.indexOf(n,r);if(-1===a)return a;if(0===a||t.charCodeAt(a-1)<=32){const o=n.length;if(a+o===i||t.charCodeAt(a+o)<=32)return a}r=a+1}}const ic="ng-template";function Z9(t,n,r){let i=0;for(;i<t.length;){let a=t[i++];if(r&&"class"===a){if(a=t[i],-1!==rc(a.toLowerCase(),n,0))return!0}else if(1===a){for(;i<t.length&&"string"==typeof(a=t[i++]);)if(a.toLowerCase()===n)return!0;return!1}}return!1}function ac(t){return 4===t.type&&t.value!==ic}function Q9(t,n,r){return n===(4!==t.type||r?t.value:ic)}function X9(t,n,r){let i=4;const a=t.attrs||[],o=function(t){for(let n=0;n<t.length;n++)if(q0(t[n]))return n;return t.length}(a);let l=!1;for(let h=0;h<n.length;h++){const T=n[h];if("number"!=typeof T){if(!l)if(4&i){if(i=2|1&i,""!==T&&!Q9(t,T,r)||""===T&&1===n.length){if(Lt(i))return!1;l=!0}}else{const F=8&i?T:n[++h];if(8&i&&null!==t.attrs){if(!Z9(t.attrs,F,r)){if(Lt(i))return!1;l=!0}continue}const ne=$9(8&i?"class":T,a,ac(t),r);if(-1===ne){if(Lt(i))return!1;l=!0;continue}if(""!==F){let ue;ue=ne>o?"":a[ne+1].toLowerCase();const ve=8&i?ue:null;if(ve&&-1!==rc(ve,F,0)||2&i&&F!==ue){if(Lt(i))return!1;l=!0}}}}else{if(!l&&!Lt(i)&&!Lt(T))return!1;if(l&&Lt(T))continue;l=!1,i=T|1&i}}return Lt(i)||l}function Lt(t){return 0==(1&t)}function $9(t,n,r,i){if(null===n)return-1;let a=0;if(i||!r){let o=!1;for(;a<n.length;){const l=n[a];if(l===t)return a;if(3===l||6===l)o=!0;else{if(1===l||2===l){let h=n[++a];for(;"string"==typeof h;)h=n[++a];continue}if(4===l)break;if(0===l){a+=4;continue}}a+=o?1:2}return-1}return function(t,n){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const i=t[r];if("number"==typeof i)return-1;if(i===n)return r;r++}return-1}(n,t)}function oc(t,n,r=!1){for(let i=0;i<n.length;i++)if(X9(t,n[i],r))return!0;return!1}function rf(t,n){e:for(let r=0;r<n.length;r++){const i=n[r];if(t.length===i.length){for(let a=0;a<t.length;a++)if(t[a]!==i[a])continue e;return!0}}return!1}function cc(t,n){return t?":not("+n.trim()+")":n}function af(t){let n=t[0],r=1,i=2,a="",o=!1;for(;r<t.length;){let l=t[r];if("string"==typeof l)if(2&i){const h=t[++r];a+="["+l+(h.length>0?'="'+h+'"':"")+"]"}else 8&i?a+="."+l:4&i&&(a+=" "+l);else""!==a&&!Lt(l)&&(n+=cc(o,a),a=""),i=l,o=o||!Lt(i);r++}return""!==a&&(n+=cc(o,a)),n}const Xe={};function xt(t){sc(u1(),Ne(),Q1()+t,li())}function sc(t,n,r,i){if(!i)if(3==(3&n[2])){const o=t.preOrderCheckHooks;null!==o&&pi(n,o,r)}else{const o=t.preOrderHooks;null!==o&&mi(n,o,0,r)}M2(r)}function Ec(t,n){const r=t.contentQueries;if(null!==r)for(let i=0;i<r.length;i+=2){const a=r[i],o=r[i+1];if(-1!==o){const l=t.data[o];to(a),l.contentQueries(2,n[o],o)}}}function Sr(t,n,r,i,a,o,l,h,T,F){const G=n.blueprint.slice();return G[0]=a,G[2]=140|i,x0(G),G[3]=G[15]=t,G[8]=r,G[10]=l||t&&t[10],G[11]=h||t&&t[11],G[12]=T||t&&t[12]||null,G[9]=F||t&&t[9]||null,G[6]=o,G[16]=2==n.type?t[16]:G,G}function _n(t,n,r,i,a){let o=t.data[n];if(null===o)o=function(t,n,r,i,a){const o=V0(),l=Qa(),T=t.data[n]=function(t,n,r,i,a,o){return{type:r,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,l?o:o&&o.parent,r,n,i,a);return null===t.firstChild&&(t.firstChild=T),null!==o&&(l?null==o.child&&null!==T.parent&&(o.child=T):null===o.next&&(o.next=T)),T}(t,n,r,i,a),Ke.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=r,o.value=i,o.attrs=a;const l=function(){const t=Ke.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();o.injectorIndex=null===l?-1:l.injectorIndex}return qt(o,!0),o}function Sn(t,n,r,i){if(0===r)return-1;const a=n.length;for(let o=0;o<r;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return a}function Cr(t,n,r){di(n);try{const i=t.viewQuery;null!==i&&o4(1,i,r);const a=t.template;null!==a&&_c(t,n,a,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ec(t,n),t.staticViewQueries&&o4(2,t.viewQuery,r);const o=t.components;null!==o&&function(t,n){for(let r=0;r<n.length;r++)jf(t,n[r])}(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,fi()}}function Cn(t,n,r,i){const a=n[2];if(256==(256&a))return;di(n);const o=li();try{x0(n),function(t){Ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&_c(t,n,r,2,i);const l=3==(3&a);if(!o)if(l){const F=t.preOrderCheckHooks;null!==F&&pi(n,F,null)}else{const F=t.preOrderHooks;null!==F&&mi(n,F,0,null),no(n,0)}if(function(t){for(let n=No(t);null!==n;n=Do(n)){if(!n[2])continue;const r=n[9];for(let i=0;i<r.length;i++){const a=r[i],o=a[3];0==(1024&a[2])&&Ka(o,1),a[2]|=1024}}}(n),function(t){for(let n=No(t);null!==n;n=Do(n))for(let r=10;r<n.length;r++){const i=n[r],a=i[1];Ja(i)&&Cn(a,i,a.template,i[8])}}(n),null!==t.contentQueries&&Ec(t,n),!o)if(l){const F=t.contentCheckHooks;null!==F&&pi(n,F)}else{const F=t.contentHooks;null!==F&&mi(n,F,1),no(n,1)}!function(t,n){const r=t.hostBindingOpCodes;if(null!==r)try{for(let i=0;i<r.length;i++){const a=r[i];if(a<0)M2(~a);else{const o=a,l=r[++i],h=r[++i];U7(l,o),h(2,n[o])}}}finally{M2(-1)}}(t,n);const h=t.components;null!==h&&function(t,n){for(let r=0;r<n.length;r++)Ff(t,n[r])}(n,h);const T=t.viewQuery;if(null!==T&&o4(2,T,i),!o)if(l){const F=t.viewCheckHooks;null!==F&&pi(n,F)}else{const F=t.viewHooks;null!==F&&mi(n,F,2),no(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Ka(n[3],-1))}finally{fi()}}function Sf(t,n,r,i){const a=n[10],o=!li(),l=function(t){return 4==(4&t[2])}(n);try{o&&!l&&a.begin&&a.begin(),l&&Cr(t,n,i),Cn(t,n,r,i)}finally{o&&!l&&a.end&&a.end()}}function _c(t,n,r,i,a){const o=Q1(),l=2&i;try{M2(-1),l&&n.length>20&&sc(t,n,20,li()),r(i,a)}finally{M2(o)}}function Xo(t,n,r){!z0()||(function(t,n,r,i){const a=r.directiveStart,o=r.directiveEnd;t.firstCreatePass||ir(r,n),q1(i,n);const l=r.initialInputs;for(let h=a;h<o;h++){const T=t.data[h],F=Ot(T);F&&zf(n,r,T);const G=ar(n,t,h,r);q1(G,n),null!==l&&Vf(0,h-a,G,T,0,l),F&&(ut(r.index,n)[8]=G)}}(t,n,r,At(r,n)),128==(128&r.flags)&&function(t,n,r){const i=r.directiveStart,a=r.directiveEnd,l=r.index,h=Ke.lFrame.currentDirectiveIndex;try{M2(l);for(let T=i;T<a;T++){const F=t.data[T],G=n[T];$a(T),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&wc(F,G)}}finally{M2(-1),$a(h)}}(t,n,r))}function $o(t,n,r=At){const i=n.localNames;if(null!==i){let a=n.index+1;for(let o=0;o<i.length;o+=2){const l=i[o+1],h=-1===l?r(n,t):t[l];t[a++]=h}}}function Cc(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Vi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Vi(t,n,r,i,a,o,l,h,T,F){const G=20+i,ne=G+a,ue=function(t,n){const r=[];for(let i=0;i<n;i++)r.push(i<t?null:Xe);return r}(G,ne),ve="function"==typeof F?F():F;return ue[1]={type:t,blueprint:ue,template:r,queries:null,viewQuery:h,declTNode:n,data:ue.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof l?l():l,firstChild:null,schemas:T,consts:ve,incompleteFirstPass:!1}}function Ic(t,n,r){for(let i in t)if(t.hasOwnProperty(i)){const a=t[i];(r=null===r?{}:r).hasOwnProperty(i)?r[i].push(n,a):r[i]=[n,a]}return r}function pt(t,n,r,i,a,o,l,h){const T=At(n,r);let G,F=n.inputs;!h&&null!=F&&(G=F[i])?(Hc(t,r,G,i,a),oi(n)&&function(t,n){const r=ut(n,t);16&r[2]||(r[2]|=64)}(r,n.index)):3&n.type&&(i=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),a=null!=l?l(a,n.value||"",i):a,I1(o)?o.setProperty(T,i,a):io(i)||(T.setProperty?T.setProperty(i,a):T[i]=a))}function e4(t,n,r,i){let a=!1;if(z0()){const o=function(t,n,r){const i=t.directiveRegistry;let a=null;if(i)for(let o=0;o<i.length;o++){const l=i[o];oc(r,l.selectors,!1)&&(a||(a=[]),_i(ir(r,n),t,l.type),Ot(l)?(Nc(t,r),a.unshift(l)):a.push(l))}return a}(t,n,r),l=null===i?null:{"":-1};if(null!==o){a=!0,Dc(r,t.data.length,o.length);for(let G=0;G<o.length;G++){const ne=o[G];ne.providersResolver&&ne.providersResolver(ne)}let h=!1,T=!1,F=Sn(t,n,o.length,null);for(let G=0;G<o.length;G++){const ne=o[G];r.mergedAttrs=gi(r.mergedAttrs,ne.hostAttrs),Oc(t,r,n,F,ne),xf(F,ne,l),null!==ne.contentQueries&&(r.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(r.flags|=128);const ue=ne.type.prototype;!h&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index),h=!0),!T&&(ue.ngOnChanges||ue.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index),T=!0),F++}!function(t,n){const i=n.directiveEnd,a=t.data,o=n.attrs,l=[];let h=null,T=null;for(let F=n.directiveStart;F<i;F++){const G=a[F],ne=G.inputs,ue=null===o||ac(n)?null:kf(ne,o);l.push(ue),h=Ic(ne,F,h),T=Ic(G.outputs,F,T)}null!==h&&(h.hasOwnProperty("class")&&(n.flags|=16),h.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=l,n.inputs=h,n.outputs=T}(t,r)}l&&function(t,n,r){if(n){const i=t.localNames=[];for(let a=0;a<n.length;a+=2){const o=r[n[a+1]];if(null==o)throw new at("301",`Export of name '${n[a+1]}' not found!`);i.push(n[a],o)}}}(r,i,l)}return r.mergedAttrs=gi(r.mergedAttrs,r.attrs),a}function Rc(t,n,r,i,a,o){const l=o.hostBindings;if(l){let h=t.hostBindingOpCodes;null===h&&(h=t.hostBindingOpCodes=[]);const T=~n.index;(function(t){let n=t.length;for(;n>0;){const r=t[--n];if("number"==typeof r&&r<0)return r}return 0})(h)!=T&&h.push(T),h.push(i,a,l)}}function wc(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Nc(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function xf(t,n,r){if(r){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)r[n.exportAs[i]]=t;Ot(n)&&(r[""]=t)}}function Dc(t,n,r){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+r,t.providerIndexes=n}function Oc(t,n,r,i,a){t.data[i]=a;const o=a.factory||(a.factory=j2(a.type)),l=new nr(o,Ot(a),null);t.blueprint[i]=l,r[i]=l,Rc(t,n,0,i,Sn(t,r,a.hostVars,Xe),a)}function zf(t,n,r){const i=At(n,t),a=Cc(r),o=t[10],l=ki(t,Sr(t,a,null,r.onPush?64:16,i,n,o,o.createRenderer(i,r),null,null));t[n.index]=l}function Qt(t,n,r,i,a,o){const l=At(t,n);!function(t,n,r,i,a,o,l){if(null==o)I1(t)?t.removeAttribute(n,a,r):n.removeAttribute(a);else{const h=null==l?Qe(o):l(o,i||"",a);I1(t)?t.setAttribute(n,a,h,r):r?n.setAttributeNS(r,a,h):n.setAttribute(a,h)}}(n[11],l,o,t.value,r,i,a)}function Vf(t,n,r,i,a,o){const l=o[n];if(null!==l){const h=i.setInput;for(let T=0;T<l.length;){const F=l[T++],G=l[T++],ne=l[T++];null!==h?i.setInput(r,ne,F,G):r[G]=ne}}}function kf(t,n){let r=null,i=0;for(;i<n.length;){const a=n[i];if(0!==a)if(5!==a){if("number"==typeof a)break;t.hasOwnProperty(a)&&(null===r&&(r=[]),r.push(a,t[a],n[i+1])),i+=2}else i+=2;else i+=4}return r}function Lc(t,n,r,i){return new Array(t,!0,!1,n,null,0,i,r,null,null)}function Ff(t,n){const r=ut(n,t);if(Ja(r)){const i=r[1];80&r[2]?Cn(i,r,i.template,r[8]):r[5]>0&&n4(r)}}function n4(t){for(let i=No(t);null!==i;i=Do(i))for(let a=10;a<i.length;a++){const o=i[a];if(1024&o[2]){const l=o[1];Cn(l,o,l.template,o[8])}else o[5]>0&&n4(o)}const r=t[1].components;if(null!==r)for(let i=0;i<r.length;i++){const a=ut(r[i],t);Ja(a)&&a[5]>0&&n4(a)}}function jf(t,n){const r=ut(n,t),i=r[1];(function(t,n){for(let r=n.length;r<t.blueprint.length;r++)n.push(t.blueprint[r])})(i,r),Cr(i,r,r[8])}function ki(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function r4(t){for(;t;){t[2]|=64;const n=Er(t);if(b7(t)&&!n)return t;t=n}return null}function a4(t,n,r){const i=n[10];i.begin&&i.begin();try{Cn(t,n,t.template,r)}catch(a){throw Pc(n,a),a}finally{i.end&&i.end()}}function xc(t){!function(t){for(let n=0;n<t.components.length;n++){const r=t.components[n],i=To(r),a=i[1];Sf(a,i,a.template,r)}}(t[8])}function o4(t,n,r){to(0),n(t,r)}const qf=(()=>Promise.resolve(null))();function zc(t){return t[7]||(t[7]=[])}function Vc(t){return t.cleanup||(t.cleanup=[])}function Pc(t,n){const r=t[9],i=r?r.get(gn,null):null;i&&i.handleError(n)}function Hc(t,n,r,i,a){for(let o=0;o<r.length;){const l=r[o++],h=r[o++],T=n[l],F=t.data[l];null!==F.setInput?F.setInput(T,a,i,h):T[h]=a}}function Pi(t,n,r){let i=r?t.styles:null,a=r?t.classes:null,o=0;if(null!==n)for(let l=0;l<n.length;l++){const h=n[l];"number"==typeof h?o=h:1==o?a=Oa(a,h):2==o&&(i=Oa(i,h+": "+n[++l]+";"))}r?t.styles=i:t.stylesWithoutHost=i,r?t.classes=a:t.classesWithoutHost=a}const c4=new f1("INJECTOR",-1);class Fc{get(n,r=ur){if(r===ur){const i=new Error(`NullInjectorError: No provider for ${l1(n)}!`);throw i.name="NullInjectorError",i}return r}}const s4=new f1("Set Injector scope."),br={},Kf={};let l4;function jc(){return void 0===l4&&(l4=new Fc),l4}function Bc(t,n=null,r=null,i){const a=Uc(t,n,r,i);return a._resolveInjectorDefTypes(),a}function Uc(t,n=null,r=null,i){return new Zf(t,r,n||jc(),i)}class Zf{constructor(n,r,i,a=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];r&&Yt(r,h=>this.processProvider(h,n,r)),Yt([n],h=>this.processInjectorType(h,[],o)),this.records.set(c4,bn(void 0,this));const l=this.records.get(s4);this.scope=null!=l?l.value:null,this.source=a||("object"==typeof n?null:l1(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,r=ur,i=t1.Default){this.assertNotDestroyed();const a=l3(this),o=b2(void 0);try{if(!(i&t1.SkipSelf)){let h=this.records.get(n);if(void 0===h){const T=("function"==typeof(t=n)||"object"==typeof t&&t instanceof f1)&&za(n);h=T&&this.injectableDefInScope(T)?bn(u4(n),br):null,this.records.set(n,h)}if(null!=h)return this.hydrate(n,h)}return(i&t1.Self?jc():this.parent).get(n,r=i&t1.Optional&&r===ur?null:r)}catch(l){if("NullInjectorError"===l.name){if((l[Ai]=l[Ai]||[]).unshift(l1(n)),a)throw l;return function(t,n,r,i){const a=t[Ai];throw n[s3]&&a.unshift(n[s3]),t.message=function(t,n,r,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let a=l1(n);if(Array.isArray(n))a=n.map(l1).join(" -> ");else if("object"==typeof n){let o=[];for(let l in n)if(n.hasOwnProperty(l)){let h=n[l];o.push(l+":"+("string"==typeof h?JSON.stringify(h):l1(h)))}a=`{${o.join(", ")}}`}return`${r}${i?"("+i+")":""}[${a}]: ${t.replace(bd,"\n  ")}`}("\n"+t.message,a,r,i),t.ngTokenPath=a,t[Ai]=null,t}(l,n,"R3InjectorError",this.source)}throw l}finally{b2(o),l3(a)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,a)=>n.push(l1(a))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,r,i){if(!(n=e1(n)))return!1;let a=y0(n);const o=null==a&&n.ngModule||void 0,l=void 0===o?n:o,h=-1!==i.indexOf(l);if(void 0!==o&&(a=y0(o)),null==a)return!1;if(null!=a.imports&&!h){let G;i.push(l);try{Yt(a.imports,ne=>{this.processInjectorType(ne,r,i)&&(void 0===G&&(G=[]),G.push(ne))})}finally{}if(void 0!==G)for(let ne=0;ne<G.length;ne++){const{ngModule:ue,providers:ve}=G[ne];Yt(ve,Ce=>this.processProvider(Ce,ue,ve||g1))}}this.injectorDefTypes.add(l);const T=j2(l)||(()=>new l);this.records.set(l,bn(T,br));const F=a.providers;if(null!=F&&!h){const G=n;Yt(F,ne=>this.processProvider(ne,G,F))}return void 0!==o&&void 0!==n.providers}processProvider(n,r,i){let a=An(n=e1(n))?n:e1(n&&n.provide);const o=function(t,n,r){return Wc(t)?bn(void 0,t.useValue):bn(function(t,n,r){let i;if(An(t)){const a=e1(t);return j2(a)||u4(a)}if(Wc(t))i=()=>e1(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...vo(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>d1(e1(t.useExisting));else{const a=e1(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return j2(a)||u4(a);i=()=>new a(...vo(t.deps))}return i}(t),br)}(n);if(An(n)||!0!==n.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=bn(void 0,br,!0),l.factory=()=>vo(l.multi),this.records.set(a,l)),a=n,l.multi.push(n)}this.records.set(a,o)}hydrate(n,r){return r.value===br&&(r.value=Kf,r.value=r.factory()),"object"==typeof r.value&&r.value&&null!==(t=r.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(r.value),r.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const r=e1(n.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function u4(t){const n=za(t),r=null!==n?n.factory:j2(t);if(null!==r)return r;if(t instanceof f1)throw new Error(`Token ${l1(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const i=lr(n,"?");throw new Error(`Can't resolve all parameters for ${l1(t)}: (${i.join(", ")}).`)}const r=function(t){const n=t&&(t[ti]||t[E0]);if(n){const r=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),n}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Error("unreachable")}function bn(t,n,r=!1){return{factory:t,value:n,multi:r?[]:void 0}}function Wc(t){return null!==t&&"object"==typeof t&&Td in t}function An(t){return"function"==typeof t}let mt=(()=>{class t{static create(r,i){var a;if(Array.isArray(r))return Bc({name:""},i,r,"");{const o=null!=(a=r.name)?a:"";return Bc({name:o},r.parent,r.providers,o)}}}return t.THROW_IF_NOT_FOUND=ur,t.NULL=new Fc,t.\u0275prov=h1({token:t,providedIn:"any",factory:()=>d1(c4)}),t.__NG_ELEMENT_ID__=-1,t})();function fh(t,n){hi(To(t)[1],V1())}let Hi=null;function Tn(){if(!Hi){const t=p1.Symbol;if(t&&t.iterator)Hi=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<n.length;++r){const i=n[r];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Hi=i)}}}return Hi}function Ar(t){return!!p4(t)&&(Array.isArray(t)||!(t instanceof Map)&&Tn()in t)}function p4(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Y1(t,n,r){return!Object.is(t[n],r)&&(t[n]=r,!0)}function m4(t,n,r,i){const a=Ne();return Y1(a,an(),n)&&(u1(),Qt(M1(),a,t,n,r,i)),m4}function zn(t,n,r,i,a,o,l,h){const T=Ne(),F=u1(),G=t+20,ne=F.firstCreatePass?function(t,n,r,i,a,o,l,h,T){const F=n.consts,G=_n(n,t,4,l||null,I2(F,h));e4(n,r,G,I2(F,T)),hi(n,G);const ne=G.tViews=Vi(2,G,i,a,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,F);return null!==n.queries&&(n.queries.template(n,G),ne.queries=n.queries.embeddedTView(G)),G}(G,F,T,n,r,i,a,o,l):F.data[G];qt(ne,!1);const ue=T[11].createComment("");Di(F,T,ue,ne),q1(ue,T),ki(T,T[G]=Lc(ue,T,ue,ne)),ci(ne)&&Xo(F,T,ne),null!=l&&$o(T,ne,h)}function Ze(t,n=t1.Default){const r=Ne();return null===r?d1(t,n):$0(V1(),r,e1(t),n)}function rt(t,n,r){const i=Ne();return Y1(i,an(),n)&&pt(u1(),M1(),i,t,n,i[11],r,!1),rt}function _4(t,n,r,i,a){const l=a?"class":"style";Hc(t,r,n.inputs[l],l,i)}function P1(t,n,r,i){const a=Ne(),o=u1(),l=20+t,h=a[11],T=a[l]=Lo(h,n,Ke.lFrame.currentNamespace),F=o.firstCreatePass?function(t,n,r,i,a,o,l){const h=n.consts,F=_n(n,t,2,a,I2(h,o));return e4(n,r,F,I2(h,l)),null!==F.attrs&&Pi(F,F.attrs,!1),null!==F.mergedAttrs&&Pi(F,F.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,F),F}(l,o,a,0,n,r,i):o.data[l];qt(F,!0);const G=F.mergedAttrs;null!==G&&vi(h,T,G);const ne=F.classes;null!==ne&&Ho(h,T,ne);const ue=F.styles;null!==ue&&nc(h,T,ue),64!=(64&F.flags)&&Di(o,a,T,F),0===Ke.lFrame.elementDepthCount&&q1(T,a),Ke.lFrame.elementDepthCount++,ci(F)&&(Xo(o,a,F),function(t,n,r){if(Ba(n)){const a=n.directiveEnd;for(let o=n.directiveStart;o<a;o++){const l=t.data[o];l.contentQueries&&l.contentQueries(1,r[o],o)}}}(o,F,a)),null!==i&&$o(a,F)}function H1(){let t=V1();Qa()?Xa():(t=t.parent,qt(t,!1));const n=t;Ke.lFrame.elementDepthCount--;const r=u1();r.firstCreatePass&&(hi(r,t),Ba(t)&&r.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&_4(r,n,Ne(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&_4(r,n,Ne(),n.stylesWithoutHost,!1)}function f2(t,n,r,i){P1(t,n,r,i),H1()}function S4(){return Ne()}function C4(t){return!!t&&"function"==typeof t.then}const Kh=function(t){return!!t&&"function"==typeof t.subscribe};function h2(t,n,r,i){const a=Ne(),o=u1(),l=V1();return function(t,n,r,i,a,o,l,h){const T=ci(i),G=t.firstCreatePass&&Vc(t),ne=n[8],ue=zc(n);let ve=!0;if(3&i.type||h){const we=At(i,n),De=h?h(we):we,Ie=ue.length,je=h?qe=>h(O1(qe[i.index])):i.index;if(I1(r)){let qe=null;if(!h&&T&&(qe=function(t,n,r,i){const a=t.cleanup;if(null!=a)for(let o=0;o<a.length-1;o+=2){const l=a[o];if(l===r&&a[o+1]===i){const h=n[7],T=a[o+2];return h.length>T?h[T]:null}"string"==typeof l&&(o+=2)}return null}(t,n,a,i.index)),null!==qe)(qe.__ngLastListenerFn__||qe).__ngNextListenerFn__=o,qe.__ngLastListenerFn__=o,ve=!1;else{o=b4(i,n,ne,o,!1);const a1=r.listen(De,a,o);ue.push(o,a1),G&&G.push(a,je,Ie,Ie+1)}}else o=b4(i,n,ne,o,!0),De.addEventListener(a,o,l),ue.push(o),G&&G.push(a,je,Ie,l)}else o=b4(i,n,ne,o,!1);const Ce=i.outputs;let Re;if(ve&&null!==Ce&&(Re=Ce[a])){const we=Re.length;if(we)for(let De=0;De<we;De+=2){const w1=n[Re[De]][Re[De+1]].subscribe(o),r2=ue.length;ue.push(o,w1),G&&G.push(a,i.index,r2,-(r2+1))}}}(o,a,a[11],l,t,n,!!r,i),h2}function ws(t,n,r,i){try{return!1!==r(i)}catch(a){return Pc(t,a),!1}}function b4(t,n,r,i,a){return function o(l){if(l===Function)return i;const h=2&t.flags?ut(t.index,n):n;0==(32&n[2])&&r4(h);let T=ws(n,0,i,l),F=o.__ngNextListenerFn__;for(;F;)T=ws(n,0,F,l)&&T,F=F.__ngNextListenerFn__;return a&&!1===T&&(l.preventDefault(),l.returnValue=!1),T}}function kn(t=1){return function(t){return(Ke.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Ke.lFrame.contextLView))[8]}(t)}function Qh(t,n){let r=null;const i=function(t){const n=t.attrs;if(null!=n){const r=n.indexOf(5);if(0==(1&r))return n[r+1]}return null}(t);for(let a=0;a<n.length;a++){const o=n[a];if("*"!==o){if(null===i?oc(t,o,!0):rf(i,o))return a}else r=a}return r}function Mr(t,n=""){const r=Ne(),i=u1(),a=t+20,o=i.firstCreatePass?_n(i,a,1,n,null):i.data[a],l=r[a]=function(t,n){return I1(t)?t.createText(n):t.createTextNode(n)}(r[11],n);Di(i,r,l,o),qt(o,!1)}function M4(t,n,r){const i=Ne();return Y1(i,an(),n)&&pt(u1(),M1(),i,t,n,i[11],r,!0),M4}const q2=void 0;var zp=["en",[["a","p"],["AM","PM"],q2],[["AM","PM"],q2,q2],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],q2,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],q2,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",q2,"{1} 'at' {0}",q2],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const r=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===i?1:5}];let Hn={};function C8(t){return t in Hn||(Hn[t]=p1.ng&&p1.ng.common&&p1.ng.common.locales&&p1.ng.common.locales[t]),Hn[t]}var He=(()=>((He=He||{})[He.LocaleId=0]="LocaleId",He[He.DayPeriodsFormat=1]="DayPeriodsFormat",He[He.DayPeriodsStandalone=2]="DayPeriodsStandalone",He[He.DaysFormat=3]="DaysFormat",He[He.DaysStandalone=4]="DaysStandalone",He[He.MonthsFormat=5]="MonthsFormat",He[He.MonthsStandalone=6]="MonthsStandalone",He[He.Eras=7]="Eras",He[He.FirstDayOfWeek=8]="FirstDayOfWeek",He[He.WeekendRange=9]="WeekendRange",He[He.DateFormat=10]="DateFormat",He[He.TimeFormat=11]="TimeFormat",He[He.DateTimeFormat=12]="DateTimeFormat",He[He.NumberSymbols=13]="NumberSymbols",He[He.NumberFormats=14]="NumberFormats",He[He.CurrencyCode=15]="CurrencyCode",He[He.CurrencySymbol=16]="CurrencySymbol",He[He.CurrencyName=17]="CurrencyName",He[He.Currencies=18]="Currencies",He[He.Directionality=19]="Directionality",He[He.PluralCase=20]="PluralCase",He[He.ExtraData=21]="ExtraData",He))();const Ui="en-US";let b8=Ui;class J8{}class Pm{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${l1(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Or=(()=>{class t{}return t.NULL=new Pm,t})();function Hm(){return jn(V1(),Ne())}function jn(t,n){return new Y2(At(t,n))}let Y2=(()=>{class t{constructor(r){this.nativeElement=r}}return t.__NG_ELEMENT_ID__=Hm,t})();class Z8{}let x4=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function(){const t=Ne(),r=ut(V1().index,t);return function(t){return t[11]}(Wt(r)?r:t)}(),t})(),Um=(()=>{class t{}return t.\u0275prov=h1({token:t,providedIn:"root",factory:()=>null}),t})();class z4{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Gm=new z4("13.0.3"),V4={};function Ji(t,n,r,i,a=!1){for(;null!==r;){const o=n[r.index];if(null!==o&&i.push(O1(o)),Dt(o))for(let h=10;h<o.length;h++){const T=o[h],F=T[1].firstChild;null!==F&&Ji(T[1],T,F,i)}const l=r.type;if(8&l)Ji(t,n,r.child,i);else if(32&l){const h=wo(r,n);let T;for(;T=h();)i.push(T)}else if(16&l){const h=$3(n,r);if(Array.isArray(h))i.push(...h);else{const T=Er(n[16]);Ji(T[1],T,h,i,!0)}}r=a?r.projectionNext:r.next}return i}class Lr{constructor(n,r){this._lView=n,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,r=n[1];return Ji(r,n,r.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Dt(n)){const r=n[8],i=r?r.indexOf(this):-1;i>-1&&(xo(n,i),Ci(r,i))}this._attachedToViewContainer=!1}G3(this._lView[1],this._lView)}onDestroy(n){!function(t,n,r,i){const a=zc(n);null===r?a.push(i):(a.push(r),t.firstCreatePass&&Vc(t).push(i,a.length-1))}(this._lView[1],this._lView,null,n)}markForCheck(){r4(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){a4(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,r){ui(!0);try{a4(t,n,r)}finally{ui(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,_r(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class Wm extends Lr{constructor(n){super(n),this._view=n}detectChanges(){xc(this._view)}checkNoChanges(){!function(t){ui(!0);try{xc(t)}finally{ui(!1)}}(this._view)}get context(){return null}}class Q8 extends Or{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=G1(n);return new k4(r,this.ngModule)}}function X8(t){const n=[];for(let r in t)t.hasOwnProperty(r)&&n.push({propName:t[r],templateName:r});return n}const Ym=new f1("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>V3});class k4 extends J8{constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=n.selectors.map(af).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return X8(this.componentDef.inputs)}get outputs(){return X8(this.componentDef.outputs)}create(n,r,i,a){const o=(a=a||this.ngModule)?function(t,n){return{get:(r,i,a)=>{const o=t.get(r,V4,a);return o!==V4||i===V4?o:n.get(r,i,a)}}}(n,a.injector):n,l=o.get(Z8,O0),h=o.get(Um,null),T=l.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",G=i?function(t,n,r){if(I1(t))return t.selectRootElement(n,r===Gt.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(T,i,this.componentDef.encapsulation):Lo(l.createRenderer(null,this.componentDef),F,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(F)),ne=this.componentDef.onPush?576:528,ue=function(t,n){return{components:[],scheduler:t||V3,clean:qf,playerHandler:n||null,flags:0}}(),ve=Vi(0,null,null,1,0,null,null,null,null,null),Ce=Sr(null,ve,ue,ne,null,null,l,T,h,o);let Re,we;di(Ce);try{const De=function(t,n,r,i,a,o){const l=r[1];r[20]=t;const T=_n(l,20,2,"#host",null),F=T.mergedAttrs=n.hostAttrs;null!==F&&(Pi(T,F,!0),null!==t&&(vi(a,t,F),null!==T.classes&&Ho(a,t,T.classes),null!==T.styles&&nc(a,t,T.styles)));const G=i.createRenderer(t,n),ne=Sr(r,Cc(n),null,n.onPush?64:16,r[20],T,i,G,o||null,null);return l.firstCreatePass&&(_i(ir(T,r),l,n.type),Nc(l,T),Dc(T,r.length,1)),ki(r,ne),r[20]=ne}(G,this.componentDef,Ce,l,T);if(G)if(i)vi(T,G,["ng-version",Gm.full]);else{const{attrs:Ie,classes:je}=function(t){const n=[],r=[];let i=1,a=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===a?""!==o&&n.push(o,t[++i]):8===a&&r.push(o);else{if(!Lt(a))break;a=o}i++}return{attrs:n,classes:r}}(this.componentDef.selectors[0]);Ie&&vi(T,G,Ie),je&&je.length>0&&Ho(T,G,je.join(" "))}if(we=Ya(ve,20),void 0!==r){const Ie=we.projection=[];for(let je=0;je<this.ngContentSelectors.length;je++){const qe=r[je];Ie.push(null!=qe?Array.from(qe):null)}}Re=function(t,n,r,i,a){const o=r[1],l=function(t,n,r){const i=V1();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Oc(t,i,n,Sn(t,n,1,null),r));const a=ar(n,t,i.directiveStart,i);q1(a,n);const o=At(i,n);return o&&q1(o,n),a}(o,r,n);if(i.components.push(l),t[8]=l,a&&a.forEach(T=>T(l,n)),n.contentQueries){const T=V1();n.contentQueries(1,l,T.directiveStart)}const h=V1();return!o.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(M2(h.index),Rc(r[1],h,0,h.directiveStart,h.directiveEnd,n),wc(n,l)),l}(De,this.componentDef,Ce,ue,[fh]),Cr(ve,Ce,null)}finally{fi()}return new Zm(this.componentType,Re,jn(we,Ce),Ce,we)}}class Zm extends class{}{constructor(n,r,i,a,o){super(),this.location=i,this._rootLView=a,this._tNode=o,this.instance=r,this.hostView=this.changeDetectorRef=new Wm(a),this.componentType=n}get injector(){return new sn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class Bn{}const Un=new Map;class t5 extends Bn{constructor(n,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Q8(this);const i=St(n);this._bootstrapComponents=Zt(i.bootstrap),this._r3Injector=Uc(n,r,[{provide:Bn,useValue:this},{provide:Or,useValue:this.componentFactoryResolver}],l1(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,r=mt.THROW_IF_NOT_FOUND,i=t1.Default){return n===mt||n===Bn||n===c4?this:this._r3Injector.get(n,r,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class P4 extends class{}{constructor(n){super(),this.moduleType=n,null!==St(n)&&function(t){const n=new Set;!function r(i){const a=St(i,!0),o=a.id;null!==o&&(function(t,n,r){if(n&&n!==r)throw new Error(`Duplicate module registered for ${t} - ${l1(n)} vs ${l1(n.name)}`)}(o,Un.get(o),i),Un.set(o,i));const l=Zt(a.imports);for(const h of l)n.has(h)||(n.add(h),r(h))}(t)}(n)}create(n){return new t5(this.moduleType,n)}}function xr(t,n,r,i){return function(t,n,r,i,a,o){const l=n+r;return Y1(t,l,a)?function(t,n,r){return t[n]=r}(t,l+1,o?i.call(o,a):i(a)):function(t,n){const r=t[n];return r===Xe?void 0:r}(t,l+1)}(Ne(),function(){const t=Ke.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}(),t,n,r,i)}function H4(t){return n=>{setTimeout(t,void 0,n)}}const vt=class extends le{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,r,i){var T,F,G;let a=n,o=r||(()=>null),l=i;if(n&&"object"==typeof n){const ne=n;a=null==(T=ne.next)?void 0:T.bind(ne),o=null==(F=ne.error)?void 0:F.bind(ne),l=null==(G=ne.complete)?void 0:G.bind(ne)}this.__isAsync&&(o=H4(o),a&&(a=H4(a)),l&&(l=H4(l)));const h=super.subscribe({next:a,error:o,complete:l});return n instanceof w&&n.add(h),h}};Symbol;let p2=(()=>{class t{}return t.__NG_ELEMENT_ID__=_v,t})();const yv=p2,Ev=class extends yv{constructor(n,r,i){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}createEmbeddedView(n){const r=this._declarationTContainer.tViews,i=Sr(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),Cr(r,i,n),new Lr(i)}};function _v(){return function(t,n){return 4&t.type?new Ev(n,t,jn(t,n)):null}(V1(),Ne())}let t2=(()=>{class t{}return t.__NG_ELEMENT_ID__=Sv,t})();function Sv(){return function(t,n){let r;const i=n[t.index];if(Dt(i))r=i;else{let a;if(8&t.type)a=O1(i);else{const o=n[11];a=o.createComment("");const l=At(t,n);G2(o,Ni(o,l),a,function(t,n){return I1(t)?t.nextSibling(n):n.nextSibling}(o,l),!1)}n[t.index]=r=Lc(i,n,a,t),ki(n,r)}return new c5(r,t,n)}(V1(),Ne())}const Cv=t2,c5=class extends Cv{constructor(n,r,i){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=i}get element(){return jn(this._hostTNode,this._hostLView)}get injector(){return new sn(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ei(this._hostTNode,this._hostLView);if(J0(n)){const r=cn(n,this._hostLView),i=on(n);return new sn(r[1].data[i+8],r)}return new sn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=s5(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,r,i){const a=n.createEmbeddedView(r||{});return this.insert(a,i),a}createComponent(n,r,i,a,o){const l=n&&!function(t){return"function"==typeof t}(n);let h;if(l)h=r;else{const ne=r||{};h=ne.index,i=ne.injector,a=ne.projectableNodes,o=ne.ngModuleRef}const T=l?n:new k4(G1(n)),F=i||this.parentInjector;if(!o&&null==T.ngModule&&F){const ne=F.get(Bn,null);ne&&(o=ne)}const G=T.create(F,a,void 0,o);return this.insert(G.hostView,h),G}insert(n,r){const i=n._lView,a=i[1];if(Dt(i[3])){const G=this.indexOf(n);if(-1!==G)this.detach(G);else{const ne=i[3],ue=new c5(ne,ne[6],ne[3]);ue.detach(ue.indexOf(n))}}const o=this._adjustIndex(r),l=this._lContainer;!function(t,n,r,i){const a=10+i,o=r.length;i>0&&(r[a-1][4]=n),i<o-10?(n[4]=r[a],r3(r,10+i,n)):(r.push(n),n[4]=null),n[3]=r;const l=n[17];null!==l&&r!==l&&function(t,n){const r=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===r?t[9]=[n]:r.push(n)}(l,n);const h=n[19];null!==h&&h.insertView(t),n[2]|=128}(a,i,l,o);const h=ko(o,l),T=i[11],F=Ni(T,l[7]);return null!==F&&function(t,n,r,i,a,o){i[0]=a,i[6]=n,_r(t,i,r,1,a,o)}(a,l[6],T,i,F,h),n.attachToViewContainerRef(),r3(j4(l),o,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=s5(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),i=xo(this._lContainer,r);i&&(Ci(j4(this._lContainer),r),G3(i[1],i))}detach(n){const r=this._adjustIndex(n,-1),i=xo(this._lContainer,r);return i&&null!=Ci(j4(this._lContainer),r)?new Lr(i):null}_adjustIndex(n,r=0){return null==n?this.length+r:n}};function s5(t){return t[8]}function j4(t){return t[8]||(t[8]=[])}function Xi(...t){}const X4=new f1("Application Initializer");let Wn=(()=>{class t{constructor(r){this.appInits=r,this.resolve=Xi,this.reject=Xi,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,a)=>{this.resolve=i,this.reject=a})}runInitializers(){if(this.initialized)return;const r=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let a=0;a<this.appInits.length;a++){const o=this.appInits[a]();if(C4(o))r.push(o);else if(Kh(o)){const l=new Promise((h,T)=>{o.subscribe({complete:h,error:T})});r.push(l)}}Promise.all(r).then(()=>{i()}).catch(a=>{this.reject(a)}),0===r.length&&i(),this.initialized=!0}}return t.\u0275fac=function(r){return new(r||t)(d1(X4,8))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();const Pr=new f1("AppId"),eg={provide:Pr,useFactory:function(){return`${$4()}${$4()}${$4()}`},deps:[]};function $4(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const O5=new f1("Platform Initializer"),e6=new f1("Platform ID"),tg=new f1("appBootstrapListener");let ng=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();const D2=new f1("LocaleId"),L5=new f1("DefaultCurrencyCode");class rg{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}let x5=(()=>{class t{compileModuleSync(r){return new P4(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const i=this.compileModuleSync(r),o=Zt(St(r).declarations).reduce((l,h)=>{const T=G1(h);return T&&l.push(new k4(T)),l},[]);return new rg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();const ag=(()=>Promise.resolve(0))();function t6(t){"undefined"==typeof Zone?ag.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class J1{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vt(!1),this.onMicrotaskEmpty=new vt(!1),this.onStable=new vt(!1),this.onError=new vt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function(){let t=p1.requestAnimationFrame,n=p1.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(p1,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,r6(t),t.isCheckStableRunning=!0,n6(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),r6(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,i,a,o,l,h)=>{try{return z5(t),r.invokeTask(a,o,l,h)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&n(),V5(t)}},onInvoke:(r,i,a,o,l,h,T)=>{try{return z5(t),r.invoke(a,o,l,h,T)}finally{t.shouldCoalesceRunChangeDetection&&n(),V5(t)}},onHasTask:(r,i,a,o)=>{r.hasTask(a,o),i===a&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,r6(t),n6(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,a,o)=>(r.handleError(a,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(a)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!J1.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(J1.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,r,i){return this._inner.run(n,r,i)}runTask(n,r,i,a){const o=this._inner,l=o.scheduleEventTask("NgZoneEvent: "+a,n,cg,Xi,Xi);try{return o.runTask(l,r,i)}finally{o.cancelTask(l)}}runGuarded(n,r,i){return this._inner.runGuarded(n,r,i)}runOutsideAngular(n){return this._outer.run(n)}}const cg={};function n6(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function r6(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function z5(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function V5(t){t._nesting--,n6(t)}class ug{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vt,this.onMicrotaskEmpty=new vt,this.onStable=new vt,this.onError=new vt}run(n,r,i){return n.apply(r,i)}runGuarded(n,r,i){return n.apply(r,i)}runOutsideAngular(n){return n()}runTask(n,r,i,a){return n.apply(r,i)}}let i6=(()=>{class t{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{J1.assertNotInAngularZone(),t6(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())t6(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,a){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(l=>l.timeoutId!==o),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:a})}whenStable(r,i,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,i,a){return[]}}return t.\u0275fac=function(r){return new(r||t)(d1(J1))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})(),k5=(()=>{class t{constructor(){this._applications=new Map,a6.addToWindow(this)}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return a6.findTestabilityInTree(this,r,i)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();class dg{addToWindow(n){}findTestabilityInTree(n,r,i){return null}}let Ht,a6=new dg;const P5=new f1("AllowMultipleToken");function H5(t,n,r=[]){const i=`Platform: ${n}`,a=new f1(i);return(o=[])=>{let l=F5();if(!l||l.injector.get(P5,!1))if(t)t(r.concat(o).concat({provide:a,useValue:!0}));else{const h=r.concat(o).concat({provide:a,useValue:!0},{provide:s4,useValue:"platform"});!function(t){if(Ht&&!Ht.destroyed&&!Ht.injector.get(P5,!1))throw new at("400","");Ht=t.get(j5);const n=t.get(O5,null);n&&n.forEach(r=>r())}(mt.create({providers:h,name:i}))}return function(t){const n=F5();if(!n)throw new at("401","");return n}()}}function F5(){return Ht&&!Ht.destroyed?Ht:null}let j5=(()=>{class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const h=function(t,n){let r;return r="noop"===t?new ug:("zone.js"===t?void 0:t)||new J1({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),r}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),T=[{provide:J1,useValue:h}];return h.run(()=>{const F=mt.create({providers:T,parent:this.injector,name:r.moduleType.name}),G=r.create(F),ne=G.injector.get(gn,null);if(!ne)throw new at("402","");return h.runOutsideAngular(()=>{const ue=h.onError.subscribe({next:ve=>{ne.handleError(ve)}});G.onDestroy(()=>{o6(this._modules,G),ue.unsubscribe()})}),function(t,n,r){try{const i=r();return C4(i)?i.catch(a=>{throw n.runOutsideAngular(()=>t.handleError(a)),a}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(ne,h,()=>{const ue=G.injector.get(Wn);return ue.runInitializers(),ue.donePromise.then(()=>(function(t){ct(t,"Expected localeId to be defined"),"string"==typeof t&&(b8=t.toLowerCase().replace(/_/g,"-"))}(G.injector.get(D2,Ui)||Ui),this._moduleDoBootstrap(G),G))})})}bootstrapModule(r,i=[]){const a=B5({},i);return function(t,n,r){const i=new P4(r);return Promise.resolve(i)}(0,0,r).then(o=>this.bootstrapModuleFactory(o,a))}_moduleDoBootstrap(r){const i=r.injector.get($i);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(a=>i.bootstrap(a));else{if(!r.instance.ngDoBootstrap)throw new at("403","");r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new at("404","");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(r){return new(r||t)(d1(mt))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();function B5(t,n){return Array.isArray(n)?n.reduce(B5,t):z2(z2({},t),n)}let $i=(()=>{class t{constructor(r,i,a,o,l){this._zone=r,this._injector=i,this._exceptionHandler=a,this._componentFactoryResolver=o,this._initStatus=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new f(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),T=new f(F=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{J1.assertNotInAngularZone(),t6(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{J1.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{G.unsubscribe(),ne.unsubscribe()}});this.isStable=n7(h,T.pipe(function(t={}){const{connector:n=(()=>new le),resetOnError:r=!0,resetOnComplete:i=!0,resetOnRefCountZero:a=!0}=t;return o=>{let l=null,h=null,T=null,F=0,G=!1,ne=!1;const ue=()=>{null==h||h.unsubscribe(),h=null},ve=()=>{ue(),l=T=null,G=ne=!1},Ce=()=>{const Re=l;ve(),null==Re||Re.unsubscribe()};return z((Re,we)=>{F++,!ne&&!G&&ue();const De=T=null!=T?T:n();we.add(()=>{F--,0===F&&!ne&&!G&&(h=Na(Ce,a))}),De.subscribe(we),l||(l=new J({next:Ie=>De.next(Ie),error:Ie=>{ne=!0,ue(),h=Na(ve,r,Ie),De.error(Ie)},complete:()=>{G=!0,ue(),h=Na(ve,i),De.complete()}}),m0(Re).subscribe(l))})(o)}}()))}bootstrap(r,i){if(!this._initStatus.done)throw new at("405","");let a;a=r instanceof J8?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(a.componentType);const o=function(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Bn),h=a.create(mt.NULL,[],i||a.selector,o),T=h.location.nativeElement,F=h.injector.get(i6,null),G=F&&h.injector.get(k5);return F&&G&&G.registerApplication(T,F),h.onDestroy(()=>{this.detachView(h.hostView),o6(this.components,h),G&&G.unregisterApplication(T)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new at("101","");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;o6(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(tg,[]).concat(this._bootstrapListeners).forEach(a=>a(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(r){return new(r||t)(d1(J1),d1(mt),d1(gn),d1(Or),d1(Wn))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();function o6(t,n){const r=t.indexOf(n);r>-1&&t.splice(r,1)}let G5=!0,Y5=(()=>{class t{}return t.__NG_ELEMENT_ID__=Cg,t})();function Cg(t){return function(t,n,r){if(oi(t)&&!r){const i=ut(t.index,n);return new Lr(i,i)}return 47&t.type?new Lr(n[16],n):null}(V1(),Ne(),16==(16&t))}class X5{constructor(){}supports(n){return Ar(n)}create(n){return new wg(n)}}const Rg=(t,n)=>n;class wg{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Rg}forEachItem(n){let r;for(r=this._itHead;null!==r;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,i=this._removalsHead,a=0,o=null;for(;r||i;){const l=!i||r&&r.currentIndex<el(i,a,o)?r:i,h=el(l,a,o),T=l.currentIndex;if(l===i)a--,i=i._nextRemoved;else if(r=r._next,null==l.previousIndex)a++;else{o||(o=[]);const F=h-a,G=T-a;if(F!=G){for(let ue=0;ue<F;ue++){const ve=ue<o.length?o[ue]:o[ue]=0,Ce=ve+ue;G<=Ce&&Ce<F&&(o[ue]=ve+1)}o[l.previousIndex]=G-F}}h!==T&&n(l,h,T)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)n(r)}diff(n){if(null==n&&(n=[]),!Ar(n))throw new Error(`Error trying to diff '${l1(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let a,o,l,r=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let h=0;h<this.length;h++)o=n[h],l=this._trackByFn(h,o),null!==r&&Object.is(r.trackById,l)?(i&&(r=this._verifyReinsertion(r,o,l,h)),Object.is(r.item,o)||this._addIdentityChange(r,o)):(r=this._mismatch(r,o,l,h),i=!0),r=r._next}else a=0,function(t,n){if(Array.isArray(t))for(let r=0;r<t.length;r++)n(t[r]);else{const r=t[Tn()]();let i;for(;!(i=r.next()).done;)n(i.value)}}(n,h=>{l=this._trackByFn(a,h),null!==r&&Object.is(r.trackById,l)?(i&&(r=this._verifyReinsertion(r,h,l,a)),Object.is(r.item,h)||this._addIdentityChange(r,h)):(r=this._mismatch(r,h,l,a),i=!0),r=r._next,a++}),this.length=a;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,i,a){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,o,a)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,a))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,o,a)):n=this._addAfter(new Ng(r,i),o,a),n}_verifyReinsertion(n,r,i,a){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?n=this._reinsertAfter(o,n._prev,a):n.currentIndex!=a&&(n.currentIndex=a,this._addToMoves(n,a)),n}_truncate(n){for(;null!==n;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const a=n._prevRemoved,o=n._nextRemoved;return null===a?this._removalsHead=o:a._nextRemoved=o,null===o?this._removalsTail=a:o._prevRemoved=a,this._insertAfter(n,r,i),this._addToMoves(n,i),n}_moveAfter(n,r,i){return this._unlink(n),this._insertAfter(n,r,i),this._addToMoves(n,i),n}_addAfter(n,r,i){return this._insertAfter(n,r,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,r,i){const a=null===r?this._itHead:r._next;return n._next=a,n._prev=r,null===a?this._itTail=n:a._prev=n,null===r?this._itHead=n:r._next=n,null===this._linkedRecords&&(this._linkedRecords=new $5),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const r=n._prev,i=n._next;return null===r?this._itHead=i:r._next=i,null===i?this._itTail=r:i._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $5),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class Ng{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Dg{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===r||r<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const r=n._prevDup,i=n._nextDup;return null===r?this._head=i:r._nextDup=i,null===i?this._tail=r:i._prevDup=r,null===this._head}}class $5{constructor(){this.map=new Map}put(n){const r=n.trackById;let i=this.map.get(r);i||(i=new Dg,this.map.set(r,i)),i.add(n)}get(n,r){const a=this.map.get(n);return a?a.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function el(t,n,r){const i=t.previousIndex;if(null===i)return i;let a=0;return r&&i<r.length&&(a=r[i]),i+n+a}class tl{constructor(){}supports(n){return n instanceof Map||p4(n)}create(){return new Og}}class Og{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let r;for(r=this._mapHead;null!==r;r=r._next)n(r)}forEachPreviousItem(n){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)n(r)}forEachChangedItem(n){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}diff(n){if(n){if(!(n instanceof Map||p4(n)))throw new Error(`Error trying to diff '${l1(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,a)=>{if(r&&r.key===a)this._maybeAddToChanges(r,i),this._appendAfter=r,r=r._next;else{const o=this._getOrCreateRecordForKey(a,i);r=this._insertBeforeOrAppend(r,o)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let i=r;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,r){if(n){const i=n._prev;return r._next=n,r._prev=i,n._prev=r,i&&(i._next=r),n===this._mapHead&&(this._mapHead=r),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(n,r){if(this._records.has(n)){const a=this._records.get(n);this._maybeAddToChanges(a,r);const o=a._prev,l=a._next;return o&&(o._next=l),l&&(l._prev=o),a._next=null,a._prev=null,a}const i=new Lg(n);return this._records.set(n,i),i.currentValue=r,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,r){Object.is(r,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=r,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,r){n instanceof Map?n.forEach(r):Object.keys(n).forEach(i=>r(n[i],i))}}class Lg{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nl(){return new Hr([new X5])}let Hr=(()=>{class t{constructor(r){this.factories=r}static create(r,i){if(null!=i){const a=i.factories.slice();r=r.concat(a)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||nl()),deps:[[t,new hr,new pn]]}}find(r){const i=this.factories.find(a=>a.supports(r));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(t){return t.name||typeof t}(r)}'`)}}return t.\u0275prov=h1({token:t,providedIn:"root",factory:nl}),t})();function rl(){return new qn([new tl])}let qn=(()=>{class t{constructor(r){this.factories=r}static create(r,i){if(i){const a=i.factories.slice();r=r.concat(a)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||rl()),deps:[[t,new hr,new pn]]}}find(r){const i=this.factories.find(a=>a.supports(r));if(i)return i;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return t.\u0275prov=h1({token:t,providedIn:"root",factory:rl}),t})();const zg=[new tl],kg=new Hr([new X5]),Pg=new qn(zg),Hg=H5(null,"core",[{provide:e6,useValue:"unknown"},{provide:j5,deps:[mt]},{provide:k5,deps:[]},{provide:ng,deps:[]}]),Gg=[{provide:$i,useClass:$i,deps:[J1,mt,gn,Or,Wn]},{provide:Ym,deps:[J1],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(r){n.push(r)}}},{provide:Wn,useClass:Wn,deps:[[new pn,X4]]},{provide:x5,useClass:x5,deps:[]},eg,{provide:Hr,useFactory:function(){return kg},deps:[]},{provide:qn,useFactory:function(){return Pg},deps:[]},{provide:D2,useFactory:function(t){return t||"undefined"!=typeof $localize&&$localize.locale||Ui},deps:[[new Ti(D2),new pn,new hr]]},{provide:L5,useValue:"USD"}];let qg=(()=>{class t{constructor(r){}}return t.\u0275fac=function(r){return new(r||t)(d1($i))},t.\u0275mod=V2({type:t}),t.\u0275inj=C2({providers:Gg}),t})(),ta=null;function Fr(){return ta}const Mt=new f1("DocumentToken");var L1=(()=>((L1=L1||{})[L1.Zero=0]="Zero",L1[L1.One=1]="One",L1[L1.Two=2]="Two",L1[L1.Few=3]="Few",L1[L1.Many=4]="Many",L1[L1.Other=5]="Other",L1))();const ay=function(t){return function(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=C8(n);if(r)return r;const i=n.split("-")[0];if(r=C8(i),r)return r;if("en"===i)return zp;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[He.PluralCase]};class da{}let xy=(()=>{class t extends da{constructor(r){super(),this.locale=r}getPluralCategory(r,i){switch(ay(i||this.locale)(r)){case L1.Zero:return"zero";case L1.One:return"one";case L1.Two:return"two";case L1.Few:return"few";case L1.Many:return"many";default:return"other"}}}return t.\u0275fac=function(r){return new(r||t)(d1(D2))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})(),E6=(()=>{class t{constructor(r,i,a,o){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=a,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(r){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof r?r.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(r){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof r?r.split(/\s+/):r,this._rawClass&&(Ar(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const r=this._iterableDiffer.diff(this._rawClass);r&&this._applyIterableChanges(r)}else if(this._keyValueDiffer){const r=this._keyValueDiffer.diff(this._rawClass);r&&this._applyKeyValueChanges(r)}}_applyKeyValueChanges(r){r.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),r.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),r.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(r){r.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${l1(i.item)}`);this._toggleClass(i.item,!0)}),r.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(r){r&&(Array.isArray(r)||r instanceof Set?r.forEach(i=>this._toggleClass(i,!0)):Object.keys(r).forEach(i=>this._toggleClass(i,!!r[i])))}_removeClasses(r){r&&(Array.isArray(r)||r instanceof Set?r.forEach(i=>this._toggleClass(i,!1)):Object.keys(r).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(r,i){(r=r.trim())&&r.split(/\s+/g).forEach(a=>{i?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return t.\u0275fac=function(r){return new(r||t)(Ze(Hr),Ze(qn),Ze(Y2),Ze(x4))},t.\u0275dir=st({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class ky{constructor(n,r,i,a){this.$implicit=n,this.ngForOf=r,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pl=(()=>{class t{constructor(r,i,a){this._viewContainer=r,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(t){return t.name||typeof t}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=[];r.forEachOperation((a,o,l)=>{if(null==a.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new ky(null,this._ngForOf,-1,-1),null===l?void 0:l),T=new ml(a,h);i.push(T)}else if(null==l)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const h=this._viewContainer.get(o);this._viewContainer.move(h,l);const T=new ml(a,h);i.push(T)}});for(let a=0;a<i.length;a++)this._perViewChange(i[a].view,i[a].record);for(let a=0,o=this._viewContainer.length;a<o;a++){const l=this._viewContainer.get(a);l.context.index=a,l.context.count=o,l.context.ngForOf=this._ngForOf}r.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(r,i){r.context.$implicit=i.item}static ngTemplateContextGuard(r,i){return!0}}return t.\u0275fac=function(r){return new(r||t)(Ze(t2),Ze(p2),Ze(Hr))},t.\u0275dir=st({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class ml{constructor(n,r){this.record=n,this.view=r}}let _6=(()=>{class t{constructor(r,i){this._viewContainer=r,this._context=new Hy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){vl("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){vl("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return t.\u0275fac=function(r){return new(r||t)(Ze(t2),Ze(p2))},t.\u0275dir=st({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Hy{constructor(){this.$implicit=null,this.ngIf=null}}function vl(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${l1(n)}'.`)}let fE=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=V2({type:t}),t.\u0275inj=C2({providers:[{provide:da,useClass:xy}]}),t})();class T6 extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new T6,ta||(ta=t)}onAndCancel(n,r,i){return n.addEventListener(r,i,!1),()=>{n.removeEventListener(r,i,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(Ur=Ur||document.querySelector("base"),Ur?Ur.getAttribute("href"):null);return null==r?null:function(t){fa=fa||document.createElement("a"),fa.setAttribute("href",t);const n=fa.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){Ur=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(t,n){n=encodeURIComponent(n);for(const r of t.split(";")){const i=r.indexOf("="),[a,o]=-1==i?[r,""]:[r.slice(0,i),r.slice(i+1)];if(a.trim()===n)return decodeURIComponent(o)}return null}(document.cookie,n)}}let fa,Ur=null;const Sl=new f1("TRANSITION_ID"),CE=[{provide:X4,useFactory:function(t,n,r){return()=>{r.get(Wn).donePromise.then(()=>{const i=Fr(),a=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<a.length;o++)i.remove(a[o])})}},deps:[Sl,Mt,mt],multi:!0}];class I6{static init(){var t;t=new I6,a6=t}addToWindow(n){p1.getAngularTestability=(i,a=!0)=>{const o=n.findTestabilityInTree(i,a);if(null==o)throw new Error("Could not find testability for element.");return o},p1.getAllAngularTestabilities=()=>n.getAllTestabilities(),p1.getAllAngularRootElements=()=>n.getAllRootElements(),p1.frameworkStabilizers||(p1.frameworkStabilizers=[]),p1.frameworkStabilizers.push(i=>{const a=p1.getAllAngularTestabilities();let o=a.length,l=!1;const h=function(T){l=l||T,o--,0==o&&i(l)};a.forEach(function(T){T.whenStable(h)})})}findTestabilityInTree(n,r,i){if(null==r)return null;const a=n.getTestability(r);return null!=a?a:i?Fr().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let bE=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();const ha=new f1("EventManagerPlugins");let pa=(()=>{class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(a=>a.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,i,a){return this._findPluginFor(i).addEventListener(r,i,a)}addGlobalEventListener(r,i,a){return this._findPluginFor(i).addGlobalEventListener(r,i,a)}getZone(){return this._zone}_findPluginFor(r){const i=this._eventNameToPlugin.get(r);if(i)return i;const a=this._plugins;for(let o=0;o<a.length;o++){const l=a[o];if(l.supports(r))return this._eventNameToPlugin.set(r,l),l}throw new Error(`No event manager plugin found for event ${r}`)}}return t.\u0275fac=function(r){return new(r||t)(d1(ha),d1(J1))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();class Cl{constructor(n){this._doc=n}addGlobalEventListener(n,r,i){const a=Fr().getGlobalEventTarget(this._doc,n);if(!a)throw new Error(`Unsupported event target ${a} for event ${r}`);return this.addEventListener(a,r,i)}}let bl=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(r){const i=new Set;r.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),i.add(a))}),this.onStylesAdded(i)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})(),Gr=(()=>{class t extends bl{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,i,a){r.forEach(o=>{const l=this._doc.createElement("style");l.textContent=o,a.push(i.appendChild(l))})}addHost(r){const i=[];this._addStylesToHost(this._stylesSet,r,i),this._hostNodes.set(r,i)}removeHost(r){const i=this._hostNodes.get(r);i&&i.forEach(Al),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((i,a)=>{this._addStylesToHost(r,a,i)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(Al))}}return t.\u0275fac=function(r){return new(r||t)(d1(Mt))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();function Al(t){Fr().remove(t)}const M6={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},R6=/%COMP%/g;function ma(t,n,r){for(let i=0;i<n.length;i++){let a=n[i];Array.isArray(a)?ma(t,a,r):(a=a.replace(R6,t),r.push(a))}return r}function Ml(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let w6=(()=>{class t{constructor(r,i,a){this.eventManager=r,this.sharedStylesHost=i,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new N6(r)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;switch(i.encapsulation){case Gt.Emulated:{let a=this.rendererByCompId.get(i.id);return a||(a=new wE(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,a)),a.applyToHost(r),a}case 1:case Gt.ShadowDom:return new NE(this.eventManager,this.sharedStylesHost,r,i);default:if(!this.rendererByCompId.has(i.id)){const a=ma(i.id,i.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(r){return new(r||t)(d1(pa),d1(Gr),d1(Pr))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();class N6{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,r){return r?document.createElementNS(M6[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,i){n&&n.insertBefore(r,i)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return r||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,i,a){if(a){r=a+":"+r;const o=M6[a];o?n.setAttributeNS(o,r,i):n.setAttribute(r,i)}else n.setAttribute(r,i)}removeAttribute(n,r,i){if(i){const a=M6[i];a?n.removeAttributeNS(a,r):n.removeAttribute(`${i}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,i,a){a&(ht.DashCase|ht.Important)?n.style.setProperty(r,i,a&ht.Important?"important":""):n.style[r]=i}removeStyle(n,r,i){i&ht.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,i){n[r]=i}setValue(n,r){n.nodeValue=r}listen(n,r,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,Ml(i)):this.eventManager.addEventListener(n,r,Ml(i))}}class wE extends N6{constructor(n,r,i,a){super(n),this.component=i;const o=ma(a+"-"+i.id,i.styles,[]);r.addStyles(o),this.contentAttr="_ngcontent-%COMP%".replace(R6,a+"-"+i.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(R6,t)}(a+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const i=super.createElement(n,r);return super.setAttribute(i,this.contentAttr,""),i}}class NE extends N6{constructor(n,r,i,a){super(n),this.sharedStylesHost=r,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=ma(a.id,a.styles,[]);for(let l=0;l<o.length;l++){const h=document.createElement("style");h.textContent=o[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,i){return super.insertBefore(this.nodeOrShadowRoot(n),r,i)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let DE=(()=>{class t extends Cl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,a){return r.addEventListener(i,a,!1),()=>this.removeEventListener(r,i,a)}removeEventListener(r,i,a){return r.removeEventListener(i,a)}}return t.\u0275fac=function(r){return new(r||t)(d1(Mt))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();const wl=["alt","control","meta","shift"],LE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xE={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let zE=(()=>{class t extends Cl{constructor(r){super(r)}supports(r){return null!=t.parseEventName(r)}addEventListener(r,i,a){const o=t.parseEventName(i),l=t.eventCallback(o.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fr().onAndCancel(r,o.domEventName,l))}static parseEventName(r){const i=r.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const o=t._normalizeKey(i.pop());let l="";if(wl.forEach(T=>{const F=i.indexOf(T);F>-1&&(i.splice(F,1),l+=T+".")}),l+=o,0!=i.length||0===o.length)return null;const h={};return h.domEventName=a,h.fullKey=l,h}static getEventFullKey(r){let i="",a=function(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&Nl.hasOwnProperty(n)&&(n=Nl[n]))}return LE[n]||n}(r);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),wl.forEach(o=>{o!=a&&xE[o](r)&&(i+=o+".")}),i+=a,i}static eventCallback(r,i,a){return o=>{t.getEventFullKey(o)===r&&a.runGuarded(()=>i(o))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return t.\u0275fac=function(r){return new(r||t)(d1(Mt))},t.\u0275prov=h1({token:t,factory:t.\u0275fac}),t})();const FE=H5(Hg,"browser",[{provide:e6,useValue:"browser"},{provide:O5,useValue:function(){T6.makeCurrent(),I6.init()},multi:!0},{provide:Mt,useFactory:function(){return t=document,Wa=t,document;var t},deps:[]}]),jE=[{provide:s4,useValue:"root"},{provide:gn,useFactory:function(){return new gn},deps:[]},{provide:ha,useClass:DE,multi:!0,deps:[Mt,J1,e6]},{provide:ha,useClass:zE,multi:!0,deps:[Mt]},{provide:w6,useClass:w6,deps:[pa,Gr,Pr]},{provide:Z8,useExisting:w6},{provide:bl,useExisting:Gr},{provide:Gr,useClass:Gr,deps:[Mt]},{provide:i6,useClass:i6,deps:[J1]},{provide:pa,useClass:pa,deps:[ha,J1]},{provide:class{},useClass:bE,deps:[]}];let BE=(()=>{class t{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:t,providers:[{provide:Pr,useValue:r.appId},{provide:Sl,useExisting:Pr},CE]}}}return t.\u0275fac=function(r){return new(r||t)(d1(t,12))},t.\u0275mod=V2({type:t}),t.\u0275inj=C2({providers:jE,imports:[fE,qg]}),t})();"undefined"!=typeof window&&window;let Ll=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:function(r){let i=null;return i=r?new(r||t):d1(xl),i},providedIn:"root"}),t})(),xl=(()=>{class t extends Ll{constructor(r){super(),this._doc=r}sanitize(r,i){if(null==i)return null;switch(r){case _1.NONE:return i;case _1.HTML:return Jt(i,"HTML")?ft(i):I3(this._doc,String(i)).toString();case _1.STYLE:return Jt(i,"Style")?ft(i):i;case _1.SCRIPT:if(Jt(i,"Script"))return ft(i);throw new Error("unsafe value used in a script context");case _1.URL:return y3(i),Jt(i,"URL")?ft(i):mr(String(i));case _1.RESOURCE_URL:if(Jt(i,"ResourceURL"))return ft(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${r} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(r){return function(t){return new Fd(t)}(r)}bypassSecurityTrustStyle(r){return function(t){return new jd(t)}(r)}bypassSecurityTrustScript(r){return function(t){return new Bd(t)}(r)}bypassSecurityTrustUrl(r){return function(t){return new Ud(t)}(r)}bypassSecurityTrustResourceUrl(r){return function(t){return new Gd(t)}(r)}}return t.\u0275fac=function(r){return new(r||t)(d1(Mt))},t.\u0275prov=h1({token:t,factory:function(r){let i=null;return i=r?new r:function(t){return new xl(t.get(Mt))}(d1(mt)),i},providedIn:"root"}),t})();const zl=function(t){return{selected:t}};let $E=(()=>{class t{constructor(){this.selectJitsi=new vt,this.selectAgora=new vt,this.gotoOldSite=new vt}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["app-video-switch"]],inputs:{selected:"selected"},outputs:{selectJitsi:"selectJitsi",selectAgora:"selectAgora",gotoOldSite:"gotoOldSite"},decls:7,vars:6,consts:[[1,"button-container"],["id","agora",1,"button",3,"ngClass","click"],["id","jitsi",1,"button",3,"ngClass","click"],["id","oldsite",1,"button",3,"click"]],template:function(r,i){1&r&&(P1(0,"div",0),P1(1,"div",1),h2("click",function(){return i.selectAgora.emit()}),Mr(2,"AGORA"),H1(),P1(3,"div",2),h2("click",function(){return i.selectJitsi.emit()}),Mr(4,"JITSI"),H1(),P1(5,"div",3),h2("click",function(){return i.gotoOldSite.emit()}),Mr(6,"Old site"),H1(),H1()),2&r&&(xt(1),rt("ngClass",xr(2,zl,"agora"===i.selected)),xt(2),rt("ngClass",xr(4,zl,"jitsi"===i.selected)))},directives:[E6],styles:[".button-container[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:space-around;height:100%}.button[_ngcontent-%COMP%]{width:50%;margin:5px;height:calc(100% - 10px);background-color:#d3d3d3;border-radius:5px;display:flex;align-items:center;justify-content:center}.button.selected[_ngcontent-%COMP%]{background-color:#87cefa}"]}),t})(),e_=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["app-whist-hub"]],decls:1,vars:0,consts:[["src","https://www.whisthub.com","width","100%","height","100%"]],template:function(r,i){1&r&&f2(0,"iframe",0)},styles:[""]}),t})(),t_=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["app-jitsi-video-chat"]],decls:0,vars:0,template:function(r,i){},styles:[""]}),t})();var n_=x(205);class gt{constructor(n){this.config=n,this.audioDevices=[],this.videoDevices=[],this.AgoraRTC=gt.AgoraRTC,this.checkSystemRequirements()?this.collectDevices():this.AgoraRTC.Logger.error("Web RTC is not supported in this browser")}checkSystemRequirements(){return this.AgoraRTC.checkSystemRequirements()}createClient(n,r=!0,i,a){return this.client=this.AgoraRTC.createClient(n),r&&this.init(this.config.AppID,i,a),this.client}createStream(n){if(!n.microphoneId&&this.audioDevices&&this.audioDevices.length&&(n.microphoneId=this.audioDevices[0].deviceId),!n.cameraId&&this.videoDevices&&this.videoDevices.length){const r=this.videoDevices[0].deviceId;n.cameraId=n.cameraId||r}return this.AgoraRTC.createStream(n)}init(n,r,i){this.client.init(n,r,i)}collectDevices(){this.AgoraRTC.getDevices(n=>{const r=n.filter(a=>"audioinput"===a.kind&&"default"!==a.deviceId),i=n.filter(a=>"videoinput"===a.kind&&"default"!==a.deviceId);this.audioDevices=r,this.videoDevices=i})}}gt.\u0275fac=function(n){return new(n||gt)(d1("config"))},gt.\u0275prov=h1({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt.AgoraRTC=n_,gt.ngInjectableDef=h1({factory:function(){return new gt(d1("config"))},token:gt,providedIn:"root"});let r_=(()=>{class t{static forRoot(r){return{ngModule:t,providers:[gt,{provide:"config",useValue:r}]}}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=V2({type:t}),t.\u0275inj=C2({}),t})();const m1={RELAY_OK:0,SERVER_ERROR_RESPONSE:1,SERVER_NO_RESPONSE:2,NO_RESOURCE_AVAILABLE:3,FAILED_JOIN_SRC:4,FAILED_JOIN_DEST:5,FAILED_PACKET_RECEIVED_FROM_SRC:6,FAILED_PACKET_SENT_TO_DEST:7,SERVER_CONNECTION_LOST:8,INTERNAL_ERROR:9,SRC_TOKEN_EXPIRED:10,DEST_TOKEN_EXPIRED:11,RELAY_ALREADY_START:12,RELAY_NOT_START:13};m1[m1.RELAY_OK]="RELAY_OK",m1[m1.SERVER_ERROR_RESPONSE]="SERVER_ERROR_RESPONSE",m1[m1.SERVER_NO_RESPONSE]="SERVER_NO_RESPONSE",m1[m1.NO_RESOURCE_AVAILABLE]="NO_RESOURCE_AVAILABLE",m1[m1.FAILED_JOIN_SRC]="FAILED_JOIN_SRC",m1[m1.FAILED_JOIN_DEST]="FAILED_JOIN_DEST",m1[m1.FAILED_PACKET_RECEIVED_FROM_SRC]="FAILED_PACKET_RECEIVED_FROM_SRC",m1[m1.FAILED_PACKET_SENT_TO_DEST]="FAILED_PACKET_SENT_TO_DEST",m1[m1.SERVER_CONNECTION_LOST]="SERVER_CONNECTION_LOST",m1[m1.INTERNAL_ERROR]="INTERNAL_ERROR",m1[m1.SRC_TOKEN_EXPIRED]="SRC_TOKEN_EXPIRED",m1[m1.DEST_TOKEN_EXPIRED]="DEST_TOKEN_EXPIRED",m1[m1.RELAY_ALREADY_START]="RELAY_ALREADY_START",m1[m1.RELAY_NOT_START]="RELAY_NOT_START";const n2={Debug:0,Info:1,Warning:2,Error:3,None:4};n2[n2.Debug]="Debug",n2[n2.Info]="Info",n2[n2.Warning]="Warning",n2[n2.Error]="Error",n2[n2.None]="None";let i_=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["app-participant"]],inputs:{stream:"stream",isMuted:"isMuted"},decls:0,vars:0,template:function(r,i){},styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;border-radius:20px;overflow:hidden;z-index:1;margin:0 10px 10px}"]}),t})();var kl={prefix:"fas",iconName:"volume-mute",icon:[512,512,[],"f6a9","M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"]},Pl={prefix:"fas",iconName:"volume-up",icon:[576,512,[],"f028","M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"]};function Wr(t){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function Hl(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function zP(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function s1(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),i.forEach(function(a){zP(t,a,r[a])})}return t}function O6(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=[],i=!0,a=!1,o=void 0;try{for(var h,l=t[Symbol.iterator]();!(i=(h=l.next()).done)&&(r.push(h.value),!n||r.length!==n);i=!0);}catch(T){a=!0,o=T}finally{try{!i&&null!=l.return&&l.return()}finally{if(a)throw o}}return r}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x6={},jl={};try{"undefined"!=typeof window&&(x6=window),"undefined"!=typeof document&&(jl=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(t){}var Gl=(x6.navigator||{}).userAgent,Wl=void 0===Gl?"":Gl,Yn=x6,z1=jl,g2=!!z1.documentElement&&!!z1.head&&"function"==typeof z1.addEventListener&&"function"==typeof z1.createElement,y2=(~Wl.indexOf("MSIE")||Wl.indexOf("Trident/"),"___FONT_AWESOME___"),Kl="svg-inline--fa",$l=[1,2,3,4,5,6,7,8,9,10],XP=$l.concat([11,12,13,14,15,16,17,18,19,20]),K2={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},eu=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",K2.GROUP,K2.SWAP_OPACITY,K2.PRIMARY,K2.SECONDARY].concat($l.map(function(t){return"".concat(t,"x")})).concat(XP.map(function(t){return"w-".concat(t)})),Yn.FontAwesomeConfig||{});z1&&"function"==typeof z1.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var n=O6(t,2),i=n[1],a=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var n=z1.querySelector("script["+t+"]");if(n)return n.getAttribute(t)}(n[0]));null!=a&&(eu[i]=a)});var k6=s1({},{familyPrefix:"fa",replacementClass:Kl,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},eu);k6.autoReplaceSvg||(k6.observeMutations=!1);var $e=s1({},k6);Yn.FontAwesomeConfig=$e;var E2=Yn||{};E2[y2]||(E2[y2]={}),E2[y2].styles||(E2[y2].styles={}),E2[y2].hooks||(E2[y2].hooks={}),E2[y2].shims||(E2[y2].shims=[]);var Bt=E2[y2],tu=[];g2&&((z1.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(z1.readyState)||z1.addEventListener("DOMContentLoaded",function t(){z1.removeEventListener("DOMContentLoaded",t),tu.map(function(n){return n()})}));var H6,P6="pending",nu="settled",ya="fulfilled",Ea="rejected",cH=function(){},ru="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,sH="undefined"==typeof setImmediate?setTimeout:setImmediate,qr=[];function lH(){for(var t=0;t<qr.length;t++)qr[t][0](qr[t][1]);qr=[],H6=!1}function _a(t,n){qr.push([t,n]),H6||(H6=!0,sH(lH,0))}function iu(t){var n=t.owner,r=n._state,i=n._data,a=t[r],o=t.then;if("function"==typeof a){r=ya;try{i=a(i)}catch(l){Yr(o,l)}}au(o,i)||(r===ya&&F6(o,i),r===Ea&&Yr(o,i))}function au(t,n){var r;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===Wr(n))){var i=n.then;if("function"==typeof i)return i.call(n,function(a){r||(r=!0,n===a?ou(t,a):F6(t,a))},function(a){r||(r=!0,Yr(t,a))}),!0}}catch(a){return r||Yr(t,a),!0}return!1}function F6(t,n){(t===n||!au(t,n))&&ou(t,n)}function ou(t,n){t._state===P6&&(t._state=nu,t._data=n,_a(dH,t))}function Yr(t,n){t._state===P6&&(t._state=nu,t._data=n,_a(fH,t))}function cu(t){t._then=t._then.forEach(iu)}function dH(t){t._state=ya,cu(t)}function fH(t){t._state=Ea,cu(t),!t._handled&&ru&&global.process.emit("unhandledRejection",t._data,t)}function hH(t){global.process.emit("rejectionHandled",t)}function yt(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof yt))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,n){function i(a){Yr(n,a)}try{t(function(a){F6(n,a)},i)}catch(a){i(a)}}(t,this)}yt.prototype={constructor:yt,_state:P6,_then:null,_data:void 0,_handled:!1,then:function(n,r){var i={owner:this,then:new this.constructor(cH),fulfilled:n,rejected:r};return(r||n)&&!this._handled&&(this._handled=!0,this._state===Ea&&ru&&_a(hH,this)),this._state===ya||this._state===Ea?_a(iu,i):this._then.push(i),i.then},catch:function(n){return this.then(null,n)}},yt.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new yt(function(n,r){var i=[],a=0;function o(T){return a++,function(F){i[T]=F,--a||n(i)}}for(var h,l=0;l<t.length;l++)(h=t[l])&&"function"==typeof h.then?h.then(o(l),r):i[l]=h;a||n(i)})},yt.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new yt(function(n,r){for(var a,i=0;i<t.length;i++)(a=t[i])&&"function"==typeof a.then?a.then(n,r):n(a)})},yt.resolve=function(t){return t&&"object"===Wr(t)&&t.constructor===yt?t:new yt(function(n){n(t)})},yt.reject=function(t){return new yt(function(n,r){r(t)})};var _2={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Jr(){for(var t=12,n="";t-- >0;)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return n}function lu(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Sa(t){return Object.keys(t||{}).reduce(function(n,r){return n+"".concat(r,": ").concat(t[r],";")},"")}function B6(t){return t.size!==_2.size||t.x!==_2.x||t.y!==_2.y||t.rotate!==_2.rotate||t.flipX||t.flipY}function uu(t){var n=t.transform,i=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),l="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),h="rotate(".concat(n.rotate," 0 0)");return{outer:a,inner:{transform:"".concat(o," ").concat(l," ").concat(h)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}var U6={x:0,y:0,width:"100%",height:"100%"};function du(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||n)&&(t.attributes.fill="black"),t}function EH(t){return"g"===t.tag?t.children:[t]}function G6(t){var n=t.icons,r=n.main,i=n.mask,a=t.prefix,o=t.iconName,l=t.transform,h=t.symbol,T=t.title,F=t.maskId,G=t.titleId,ne=t.extra,ue=t.watchable,ve=void 0!==ue&&ue,Ce=i.found?i:r,Re=Ce.width,we=Ce.height,De="fak"===a,Ie=De?"":"fa-w-".concat(Math.ceil(Re/we*16)),je=[$e.replacementClass,o?"".concat($e.familyPrefix,"-").concat(o):"",Ie].filter(function(x2){return-1===ne.classes.indexOf(x2)}).filter(function(x2){return""!==x2||!!x2}).concat(ne.classes).join(" "),qe={children:[],attributes:s1({},ne.attributes,{"data-prefix":a,"data-icon":o,class:je,role:ne.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Re," ").concat(we)})},a1=De&&!~ne.classes.indexOf("fa-fw")?{width:"".concat(Re/we*16*.0625,"em")}:{};ve&&(qe.attributes["data-fa-i2svg"]=""),T&&qe.children.push({tag:"title",attributes:{id:qe.attributes["aria-labelledby"]||"title-".concat(G||Jr())},children:[T]});var w1=s1({},qe,{prefix:a,iconName:o,main:r,mask:i,maskId:F,transform:l,symbol:h,styles:s1({},a1,ne.styles)}),r2=i.found&&r.found?function(t){var n=t.children,r=t.attributes,i=t.main,a=t.mask,o=t.maskId,T=i.icon,G=a.icon,ne=uu({transform:t.transform,containerWidth:a.width,iconWidth:i.width}),ue={tag:"rect",attributes:s1({},U6,{fill:"white"})},ve=T.children?{children:T.children.map(du)}:{},Ce={tag:"g",attributes:s1({},ne.inner),children:[du(s1({tag:T.tag,attributes:s1({},T.attributes,ne.path)},ve))]},Re={tag:"g",attributes:s1({},ne.outer),children:[Ce]},we="mask-".concat(o||Jr()),De="clip-".concat(o||Jr()),Ie={tag:"mask",attributes:s1({},U6,{id:we,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ue,Re]},je={tag:"defs",children:[{tag:"clipPath",attributes:{id:De},children:EH(G)},Ie]};return n.push(je,{tag:"rect",attributes:s1({fill:"currentColor","clip-path":"url(#".concat(De,")"),mask:"url(#".concat(we,")")},U6)}),{children:n,attributes:r}}(w1):function(t){var n=t.children,r=t.attributes,i=t.main,a=t.transform,l=Sa(t.styles);if(l.length>0&&(r.style=l),B6(a)){var h=uu({transform:a,containerWidth:i.width,iconWidth:i.width});n.push({tag:"g",attributes:s1({},h.outer),children:[{tag:"g",attributes:s1({},h.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:s1({},i.icon.attributes,h.path)}]}]})}else n.push(i.icon);return{children:n,attributes:r}}(w1),$r=r2.attributes;return w1.children=r2.children,w1.attributes=$r,h?function(t){var r=t.iconName,i=t.children,o=t.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:s1({},t.attributes,{id:!0===o?"".concat(t.prefix,"-").concat($e.familyPrefix,"-").concat(r):o}),children:i}]}]}(w1):function(t){var n=t.children,r=t.main,i=t.mask,a=t.attributes,o=t.styles,l=t.transform;if(B6(l)&&r.found&&!i.found){var F={x:r.width/r.height/2,y:.5};a.style=Sa(s1({},o,{"transform-origin":"".concat(F.x+l.x/16,"em ").concat(F.y+l.y/16,"em")}))}return[{tag:"svg",attributes:a,children:n}]}(w1)}var Y6=function(n,r,i,a){var T,F,G,o=Object.keys(n),l=o.length,h=void 0!==a?function(n,r){return function(i,a,o,l){return n.call(r,i,a,o,l)}}(r,a):r;for(void 0===i?(T=1,G=n[o[0]]):(T=0,G=i);T<l;T++)G=h(G,n[F=o[T]],F,n);return G};function vu(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.skipHooks,a=void 0!==i&&i,o=Object.keys(n).reduce(function(l,h){var T=n[h];return T.icon?l[T.iconName]=T.icon:l[h]=T,l},{});"function"!=typeof Bt.hooks.addPack||a?Bt.styles[t]=s1({},Bt.styles[t]||{},o):Bt.hooks.addPack(t,o),"fas"===t&&vu("fa",n)}var gu=Bt.styles,MH=Bt.shims,Su=function(){var n=function(a){return Y6(gu,function(o,l,h){return o[h]=Y6(l,a,{}),o},{})};n(function(i,a,o){return a[3]&&(i[a[3]]=o),i}),n(function(i,a,o){var l=a[2];return i[o]=o,l.forEach(function(h){i[h]=o}),i});var r="far"in gu;Y6(MH,function(i,a){var l=a[1];return"far"===l&&!r&&(l="fas"),i[a[0]]={prefix:l,iconName:a[2]},i},{})};function bu(t,n,r){if(t&&t[n]&&t[n][r])return{prefix:n,iconName:r,icon:t[n][r]}}function Zn(t){var n=t.tag,r=t.attributes,i=void 0===r?{}:r,a=t.children,o=void 0===a?[]:a;return"string"==typeof t?lu(t):"<".concat(n," ").concat(function(t){return Object.keys(t||{}).reduce(function(n,r){return n+"".concat(r,'="').concat(lu(t[r]),'" ')},"").trim()}(i),">").concat(o.map(Zn).join(""),"</").concat(n,">")}Su();function Zr(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}(Zr.prototype=Object.create(Error.prototype)).constructor=Zr;var Aa={fill:"currentColor"},wu={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Q6=(s1({},Aa,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),s1({},wu,{attributeName:"opacity"}));function $6(t){var n=t[0],r=t[1],o=O6(t.slice(4),1)[0];return{found:!0,width:n,height:r,icon:Array.isArray(o)?{tag:"g",attributes:{class:"".concat($e.familyPrefix,"-").concat(K2.GROUP)},children:[{tag:"path",attributes:{class:"".concat($e.familyPrefix,"-").concat(K2.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat($e.familyPrefix,"-").concat(K2.PRIMARY),fill:"currentColor",d:o[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:o}}}}s1({},Aa,{cx:"256",cy:"364",r:"28"}),s1({},wu,{attributeName:"r",values:"28;14;28;28;14;28;"}),s1({},Q6,{values:"1;0;1;1;0;1;"}),s1({},Aa,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),s1({},Q6,{values:"1;0;0;0;0;1;"}),s1({},Aa,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),s1({},Q6,{values:"0;0;1;1;0;0;"});var nF=function(){function t(){(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),this.definitions={}}return function(t,n,r){n&&Hl(t.prototype,n)}(t,[{key:"add",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var l=a.reduce(this._pullDefinitions,{});Object.keys(l).forEach(function(h){r.definitions[h]=s1({},r.definitions[h]||{},l[h]),vu(h,l[h]),Su()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,i){var a=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(a).map(function(o){var l=a[o],h=l.prefix,T=l.iconName,F=l.icon;r[h]||(r[h]={}),r[h][T]=F}),r}}]),t}();function Qr(){$e.autoAddCss&&!Ia&&(function(t){if(t&&g2){var n=z1.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;for(var r=z1.head.childNodes,i=null,a=r.length-1;a>-1;a--){var o=r[a],l=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(l)>-1&&(i=o)}z1.head.insertBefore(n,i)}}(function(){var t="fa",n=Kl,r=$e.familyPrefix,i=$e.replacementClass,a='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(r!==t||i!==n){var o=new RegExp("\\.".concat(t,"\\-"),"g"),l=new RegExp("\\--".concat(t,"\\-"),"g"),h=new RegExp("\\.".concat(n),"g");a=a.replace(o,".".concat(r,"-")).replace(l,"--".concat(r,"-")).replace(h,".".concat(i))}return a}()),Ia=!0)}function Ta(t,n){return Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(i){return Zn(i)})}}),Object.defineProperty(t,"node",{get:function(){if(g2){var i=z1.createElement("div");return i.innerHTML=t.html,i.children}}}),t}function n0(t){var n=t.prefix,r=void 0===n?"fa":n,i=t.iconName;if(i)return bu(xu.definitions,r,i)||bu(Bt.styles,r,i)}var t,xu=new nF,Ia=!1,zu_transform=function(n){return function(n){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n?n.toLowerCase().split(" ").reduce(function(i,a){var o=a.toLowerCase().split("-"),l=o[0],h=o.slice(1).join("-");if(l&&"h"===h)return i.flipX=!0,i;if(l&&"v"===h)return i.flipY=!0,i;if(h=parseFloat(h),isNaN(h))return i;switch(l){case"grow":i.size=i.size+h;break;case"shrink":i.size=i.size-h;break;case"left":i.x=i.x-h;break;case"right":i.x=i.x+h;break;case"up":i.y=i.y-h;break;case"down":i.y=i.y+h;break;case"rotate":i.rotate=i.rotate+h}return i},r):r}(n)},Vu=(t=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.transform,i=void 0===r?_2:r,a=n.symbol,o=void 0!==a&&a,l=n.mask,h=void 0===l?null:l,T=n.maskId,F=void 0===T?null:T,G=n.title,ne=void 0===G?null:G,ue=n.titleId,ve=void 0===ue?null:ue,Ce=n.classes,Re=void 0===Ce?[]:Ce,we=n.attributes,De=void 0===we?{}:we,Ie=n.styles,je=void 0===Ie?{}:Ie;if(t){var qe=t.prefix,a1=t.iconName,w1=t.icon;return Ta(s1({type:"icon"},t),function(){return Qr(),$e.autoA11y&&(ne?De["aria-labelledby"]="".concat($e.replacementClass,"-title-").concat(ve||Jr()):(De["aria-hidden"]="true",De.focusable="false")),G6({icons:{main:$6(w1),mask:h?$6(h.icon):{found:!1,width:null,height:null,icon:{}}},prefix:qe,iconName:a1,transform:s1({},_2,i),symbol:o,title:ne,maskId:F,titleId:ve,extra:{attributes:De,styles:je,classes:Re}})})}},function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(n||{}).icon?n:n0(n||{}),a=r.mask;return a&&(a=(a||{}).icon?a:n0(a||{})),t(i,s1({},r,{mask:a}))});const dF=["*"],pF=t=>{const n={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-inverse":t.inverse,"fa-layers-counter":t.counter,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip,[`fa-${t.size}`]:null!==t.size,[`fa-rotate-${t.rotate}`]:null!==t.rotate,[`fa-pull-${t.pull}`]:null!==t.pull,[`fa-stack-${t.stackItemSize}`]:null!=t.stackItemSize};return Object.keys(n).map(r=>n[r]?r:null).filter(r=>r)};let gF=(()=>{class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yF=(()=>{class t{constructor(){this.definitions={}}addIcons(...r){for(const i of r){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const a of i.icon[2])"string"==typeof a&&(this.definitions[i.prefix][a]=i)}}addIconPacks(...r){for(const i of r){const a=Object.keys(i).map(o=>i[o]);this.addIcons(...a)}}getIconDefinition(r,i){return r in this.definitions&&i in this.definitions[r]?this.definitions[r][i]:null}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=h1({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EF=(()=>{class t{constructor(){this.stackItemSize="1x"}ngOnChanges(r){if("size"in r)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=st({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[B2]}),t})(),_F=(()=>{class t{constructor(r,i){this.renderer=r,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(r){"size"in r&&(null!=r.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${r.size.currentValue}`),null!=r.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${r.size.previousValue}`))}}return t.\u0275fac=function(r){return new(r||t)(Ze(x4),Ze(Y2))},t.\u0275cmp=_t({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},features:[B2],ngContentSelectors:dF,decls:1,vars:0,template:function(r,i){1&r&&(function(t){const n=Ne()[16][6];if(!n.projection){const i=n.projection=lr(t?t.length:1,null),a=i.slice();let o=n.child;for(;null!==o;){const l=t?Qh(o,t):0;null!==l&&(a[l]?a[l].projectionNext=o:i[l]=o,a[l]=o),o=o.next}}}(),function(t,n=0,r){const i=Ne(),a=u1(),o=_n(a,20+t,16,null,r||null);null===o.projection&&(o.projection=n),Xa(),64!=(64&o.flags)&&function(t,n,r){tc(n[11],0,n,r,W3(t,r,n),K3(r.parent||n[6],r,n))}(a,i,o)}(0))},encapsulation:2}),t})(),SF=(()=>{class t{constructor(r,i,a,o,l){this.sanitizer=r,this.config=i,this.iconLibrary=a,this.stackItem=o,this.classes=[],null!=l&&null==o&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(r){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=null==this.icon?this.config.fallbackIcon:this.icon,r){const a=this.findIconDefinition(i);if(null!=a){const o=this.buildParams();this.renderIcon(a,o)}}}render(){this.ngOnChanges({})}findIconDefinition(r){const i=((t,n)=>(t=>void 0!==t.prefix&&void 0!==t.iconName)(t)?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"==typeof t?{prefix:n,iconName:t}:void 0)(r,this.config.defaultPrefix);if("icon"in i)return i;const a=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return null!=a?a:((t=>{throw new Error(`Could not find icon with iconName=${t.iconName} and prefix=${t.prefix} in the icon library.`)})(i),null)}buildParams(){const r={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?zu_transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...pF(r),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(r,i){const a=Vu(r,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(a.html.join("\n"))}}return t.\u0275fac=function(r){return new(r||t)(Ze(Ll),Ze(gF),Ze(yF),Ze(EF,8),Ze(_F,8))},t.\u0275cmp=_t({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(r,i){2&r&&(M4("innerHTML",i.renderedIconHTML,M3),m4("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[B2],decls:0,vars:0,template:function(r,i){},encapsulation:2}),t})(),CF=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=V2({type:t}),t.\u0275inj=C2({}),t})();function bF(t,n){if(1&t){const r=S4();P1(0,"div",3),h2("click",function(){Za(r);const a=kn();return a.isMuted=!0,a.mute.emit(!0)}),f2(1,"fa-icon",4),H1()}if(2&t){const r=kn();xt(1),rt("icon",r.volumeUp)}}function AF(t,n){if(1&t){const r=S4();P1(0,"div",5),h2("click",function(){Za(r);const a=kn();return a.isMuted=!1,a.mute.emit(!1)}),f2(1,"fa-icon",4),H1()}if(2&t){const r=kn();xt(1),rt("icon",r.volumeMute)}}let TF=(()=>{class t{constructor(){this.volumeUp=Pl,this.volumeMute=kl,this.isMuted=!1,this.mute=new vt}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["app-agora-buttons"]],inputs:{isMuted:"isMuted"},outputs:{mute:"mute"},decls:3,vars:2,consts:[[1,"buttons-container"],["class","button unmuted",3,"click",4,"ngIf"],["class","button muted",3,"click",4,"ngIf"],[1,"button","unmuted",3,"click"],[3,"icon"],[1,"button","muted",3,"click"]],template:function(r,i){1&r&&(P1(0,"div",0),zn(1,bF,2,1,"div",1),zn(2,AF,2,1,"div",2),H1()),2&r&&(xt(1),rt("ngIf",!i.isMuted),xt(1),rt("ngIf",i.isMuted))},directives:[_6,SF],styles:[".buttons-container[_ngcontent-%COMP%]{background-color:#f0f8ff;width:100%;height:100%;display:flex;flex-direction:row;justify-content:center}.buttons-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:50%;height:80%;border-radius:5px;display:flex;flex-direction:row;justify-content:center;align-items:center;color:#fff}.buttons-container[_ngcontent-%COMP%]   .button.muted[_ngcontent-%COMP%]{background-color:red}.buttons-container[_ngcontent-%COMP%]   .button.unmuted[_ngcontent-%COMP%]{background-color:green}"]}),t})();const ku=function(t){return{muted:t}};function IF(t,n){if(1&t&&f2(0,"app-participant",0),2&t){const r=n.$implicit,i=kn();rt("id",r)("stream",i.remoteStreams[r])("isMuted",i.muteStates[r])("ngClass",xr(4,ku,i.muteStates[r]))}}let MF=(()=>{class t{constructor(r,i){this.ngxAgoraService=r,this.cd=i,this.localCallId="agora_local",this.remoteStreams={},this.muteStates={},this.uid=Math.floor(100*Math.random())}get remoteCalls(){return Object.keys(this.remoteStreams)}ngOnInit(){this.client=this.ngxAgoraService.createClient({mode:"rtc",codec:"h264"}),this.assignClientHandlers(),this.localStream=this.ngxAgoraService.createStream({streamID:this.uid,audio:!0,video:!0,screen:!1}),this.assignLocalStreamHandlers(),this.initLocalStream(()=>this.join(r=>this.publish(),r=>{console.error(r)}))}ngOnDestroy(){var r;Object.values(this.remoteStreams).forEach(i=>{this.client.unsubscribe(i,a=>{console.error("Unable to unsubscribe from remote stream")})}),null===(r=this.client)||void 0===r||r.leave(()=>{console.log("Leavel channel successfully")},i=>{console.log("Leave channel failed")})}join(r,i){this.client.join(null,"kaarten",this.uid,r,i)}publish(){this.client.publish(this.localStream,r=>console.log("Publish local stream error: "+r))}assignClientHandlers(){this.client.on("stream-published",r=>{console.log("Publish local stream successfully")}),this.client.on("error",r=>{console.log("Got error msg:",r.reason),"DYNAMIC_KEY_TIMEOUT"===r.reason&&this.client.renewChannelKey("",()=>console.log("Renewed the channel key successfully."),i=>console.error("Renew channel key failed: ",i))}),this.client.on("stream-added",r=>{this.client.subscribe(r.stream,{audio:!0,video:!0},a=>{console.log("Subscribe stream failed",a)})}),this.client.on("stream-subscribed",r=>{const i=r.stream,a=this.getRemoteId(i);i.callId=a,this.remoteStreams[a]=i,setTimeout(()=>i.play(a),1e3)}),this.client.on("stream-removed",r=>{const i=r.stream;if(i){i.stop();const a=this.getRemoteId(i);delete this.remoteStreams[a],console.log(`Remote stream is removed ${i.getId()}`)}}),this.client.on("peer-leave",r=>{const i=r.stream;if(i){i.stop();const a=this.getRemoteId(i);delete this.remoteStreams[a],console.log(`${r.uid} left from this channel`)}}),this.client.on("mute-audio",r=>{this.muteStates=Object.assign(Object.assign({},this.muteStates),{[this.getRemoteId(r.uid)]:!0}),this.cd.markForCheck()}),this.client.on("unmute-audio",r=>{this.muteStates=Object.assign(Object.assign({},this.muteStates),{[this.getRemoteId(r.uid)]:!1}),this.cd.markForCheck()}),this.client.on("unmute-audio",r=>{this.cd.markForCheck()})}assignLocalStreamHandlers(){this.localStream.on("accessAllowed",()=>{console.log("accessAllowed")}),this.localStream.on("accessDenied",()=>{console.log("accessDenied")})}initLocalStream(r){this.localStream.init(()=>{this.localStream.play(this.localCallId),r&&r()},i=>console.error("getUserMedia failed",i))}getRemoteId(r){return"number"==typeof r?`agora_remote-${r}`:`agora_remote-${r.getId()}`}mute(r){this.muteStates=Object.assign(Object.assign({},this.muteStates),{local:r}),this.cd.markForCheck(),r?this.localStream.muteAudio():this.localStream.unmuteAudio()}}return t.\u0275fac=function(r){return new(r||t)(Ze(gt),Ze(Y5))},t.\u0275cmp=_t({type:t,selectors:[["app-agora-video-chat"]],decls:3,vars:7,consts:[[3,"id","stream","isMuted","ngClass"],[3,"id","stream","isMuted","ngClass",4,"ngFor","ngForOf"],[3,"mute"]],template:function(r,i){1&r&&(f2(0,"app-participant",0),zn(1,IF,1,6,"app-participant",1),P1(2,"app-agora-buttons",2),h2("mute",function(o){return i.mute(o)}),H1()),2&r&&(rt("id",i.localCallId)("stream",i.localStream)("isMuted",i.muteStates.local)("ngClass",xr(5,ku,i.muteStates.local)),xt(1),rt("ngForOf",i.remoteCalls))},directives:[i_,E6,pl,TF],styles:["app-participant[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc((100% - 40px)/4 - 20px)}app-participant.muted[_ngcontent-%COMP%]{background-color:red;border:red solid 5px;box-sizing:border-box}app-agora-buttons[_ngcontent-%COMP%]{height:40px;position:absolute;bottom:0;width:100%;display:flex;flex-direction:row;align-content:center}"]}),t})();function RF(t,n){1&t&&(P1(0,"div",7),f2(1,"app-jitsi-video-chat"),H1())}function wF(t,n){1&t&&(P1(0,"div",8),f2(1,"app-agora-video-chat"),H1())}let NF=(()=>{class t{constructor(){this.selectedVideoChat="agora"}ngOnInit(){}selectJitsi(){this.selectedVideoChat="jitsi"}selectAgora(){this.selectedVideoChat="agora"}gotoOldSite(){const r=window.document.location.href,a=r.substring(0,r.lastIndexOf("/")+1)+"oldsite/index.html";window.document.location.href=a}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["app-root"]],decls:9,vars:3,consts:[["id","sidebar"],["id","video-switch"],[3,"selected","selectAgora","selectJitsi","gotoOldSite"],["id","video-chat-container"],["id","jitsi-container","class","video-container",4,"ngIf"],["id","agora-container","class","video-container",4,"ngIf"],["id","whisthub-container"],["id","jitsi-container",1,"video-container"],["id","agora-container",1,"video-container"]],template:function(r,i){1&r&&(P1(0,"div"),P1(1,"div",0),P1(2,"div",1),P1(3,"app-video-switch",2),h2("selectAgora",function(){return i.selectAgora()})("selectJitsi",function(){return i.selectJitsi()})("gotoOldSite",function(){return i.gotoOldSite()}),H1(),H1(),P1(4,"div",3),zn(5,RF,2,0,"div",4),zn(6,wF,2,0,"div",5),H1(),H1(),P1(7,"div",6),f2(8,"app-whist-hub"),H1(),H1()),2&r&&(xt(3),rt("selected",i.selectedVideoChat),xt(2),rt("ngIf","jitsi"===i.selectedVideoChat),xt(1),rt("ngIf","agora"===i.selectedVideoChat))},directives:[$E,_6,e_,t_,MF],styles:["#sidebar[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;width:400px}#sidebar[_ngcontent-%COMP%]   #video-switch[_ngcontent-%COMP%]{height:50px}#sidebar[_ngcontent-%COMP%]   #video-chat-container[_ngcontent-%COMP%]{height:calc(100% - 50px);position:relative}#sidebar[_ngcontent-%COMP%]   #video-chat-container[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{height:100%;width:100%}#whisthub-container[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;width:calc(100vw - 400px);background-color:#f0f8ff}"]}),t})();const Pu_agora_appId="056aadab66294d6d9fb41b7b3c541644";let DF=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=V2({type:t,bootstrap:[NF]}),t.\u0275inj=C2({providers:[],imports:[[BE,r_.forRoot({AppID:Pu_agora_appId}),CF]]}),t})();G5=!1,FE().bootstrapModule(DF).catch(t=>console.error(t))}},oe=>{oe(oe.s=9)}]);